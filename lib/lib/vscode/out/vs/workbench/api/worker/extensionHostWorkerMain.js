"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var Jf=function(e,t){return Jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},Jf(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Jf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}export var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}export function __decorate(e,t,r,i){var s=arguments.length,n=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n}export function __param(e,t){return function(r,i){t(r,i,e)}}export function __esDecorate(e,t,r,i,s,n){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?i.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,p=!1,f=r.length-1;f>=0;f--){var m={};for(var w in i)m[w]=w==="access"?{}:i[w];for(var w in i.access)m.access[w]=i.access[w];m.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(S||null))};var x=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=o(x.get))&&(u.get=h),(h=o(x.set))&&(u.set=h),(h=o(x.init))&&s.unshift(h)}else(h=o(x))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,i.name,u),p=!0}export function __runInitializers(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}export function __generator(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(i=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(l[0]===6&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],s=0}finally{i=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]};export function __exportStar(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(t,e,r)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i}export function __spreadArray(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(m){return Promise.resolve(m).then(f,h)}}function a(f,m){i[f]&&(s[f]=function(w){return new Promise(function(x,S){n.push([f,w,x,S])>1||c(f,w)})},m&&(s[f]=m(s[f])))}function c(f,m){try{l(i[f](m))}catch(w){p(n[0][3],w)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):p(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function p(f,m){f(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,r;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,n){t[s]=e[s]?function(o){return(r=!r)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var vk=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return vk(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}export function __classPrivateFieldSet(e,t,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var wk=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};export function __disposeResources(e){function t(i){e.error=e.hasError?new wk(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function r(){for(;e.stack.length;){var i=e.stack.pop();try{var s=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(s).then(r,function(n){return t(n),r()})}catch(n){t(n)}}if(e.hasError)throw e.error}return r()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var dr=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},bk=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?_s.isErrorNoTelemetry(e)?new _s(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},zl=new bk;function Qf(e){zl.setUnexpectedErrorHandler(e)}function Wl(e){zl.onUnexpectedError(e)}function fr(e){Hs(e)||zl.onUnexpectedError(e)}function Zf(e){Hs(e)||zl.onUnexpectedExternalError(e)}function Ea(e){if(e instanceof Error){const{name:t,message:r}=e,i=e.stacktrace||e.stack;return{$isError:!0,name:t,message:r,stack:i,noTelemetry:_s.isErrorNoTelemetry(e)}}return e}function yk(e){let t;return e.noTelemetry?t=new _s:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,t}var Vl="Canceled";function Hs(e){return e instanceof ai?!0:e instanceof Error&&e.name===Vl&&e.message===Vl}var ai=class extends Error{constructor(){super(Vl),this.name=this.message}};function Z0(){const e=new Error(Vl);return e.name=e.message,e}function ye(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Yf(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var js=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},xk=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},Xf=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},_s=class I0 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof I0)return t;const r=new I0;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Wn=class Qx extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,Qx.prototype)}};function Ek(e,t){const r=kk(e,t);if(r!==-1)return e[r]}function kk(e,t,r=e.length-1){for(let i=r;i>=0;i--){const s=e[i];if(t(s))return i}return-1}function Sk(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var WN=class Zx{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(Zx.assertInvariants){if(this.d){for(const i of this.e)if(this.d(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const r=Sk(this.e,t,this.c);return this.c=r+1,r===-1?void 0:this.e[r]}};function Ci(e,t,r=(i,s)=>i===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}function $k(e,t){const r=[];let i;for(const s of e.slice(0).sort(t))!i||t(i[0],s)!==0?(i=[s],r.push(i)):i.push(s);return r}function Y0(e,t,r){const i=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=r(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return i}function Ck(e,t,r){const i=Y0(e,t,r),s=[],n=[];for(const o of i)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function bt(e){return e.filter(t=>!!t)}function Ik(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function Kf(e){return!Array.isArray(e)||e.length===0}function ka(e){return Array.isArray(e)&&e.length>0}function Vn(e,t=r=>r){const r=new Set;return e.filter(i=>{const s=t(i);return r.has(s)?!1:(r.add(s),!0)})}function X0(e,t){let r;if(typeof t=="number"){let i=t;r=()=>{const s=Math.sin(i++)*179426549;return s-Math.floor(s)}}else r=Math.random;for(let i=e.length-1;i>0;i-=1){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}}function ep(e,t){return Array.isArray(e)?e.map(t):t(e)}function jr(e){return Array.isArray(e)?e:[e]}var tp;(function(e){function t(n){return n<0}e.isLessThan=t;function r(n){return n<=0}e.isLessThanOrEqual=r;function i(n){return n>0}e.isGreaterThan=i;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(tp||(tp={}));function Dk(e,t){return(r,i)=>t(e(r),e(i))}var Pk=(e,t)=>e-t,VN=class Af{static{this.empty=new Af(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(r=>(t(r),!0))}toArray(){const t=[];return this.iterate(r=>(t.push(r),!0)),t}filter(t){return new Af(r=>this.iterate(i=>t(i)?r(i):!0))}map(t){return new Af(r=>this.iterate(i=>r(t(i))))}some(t){let r=!1;return this.iterate(i=>(r=t(i),!r)),r}findFirst(t){let r;return this.iterate(i=>t(i)?(r=i,!1):!0),r}findLast(t){let r;return this.iterate(i=>(t(i)&&(r=i),!0)),r}findLastMaxBy(t){let r,i=!0;return this.iterate(s=>((i||tp.isGreaterThan(t(s,r)))&&(i=!1,r=s),!0)),r}},K0;function ew(e,t){const r=Object.create(null);for(const i of e){const s=t(i);let n=r[s];n||(n=r[s]=[]),n.push(i)}return r}function Ak(e,t){const r=[],i=[];for(const s of e)t.has(s)||r.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:r,added:i}}var qN=class{static{K0=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[K0]="SetWithKey";for(const r of e)this.add(r)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(r=>e.call(t,r,r,this))}[Symbol.iterator](){return this.values()}},tw,rw,iw;function Tk(e,t,r){let i=e.get(t);return i===void 0&&(i=r,e.set(t,i)),i}var Rk=class{constructor(e,t){this.uri=e,this.value=t}};function Lk(e){return Array.isArray(e)}var Lt=class Nl{static{this.c=t=>t.toString()}constructor(t,r){if(this[tw]="ResourceMap",t instanceof Nl)this.d=new Map(t.d),this.e=r??Nl.c;else if(Lk(t)){this.d=new Map,this.e=r??Nl.c;for(const[i,s]of t)this.set(i,s)}else this.d=new Map,this.e=t??Nl.c}set(t,r){return this.d.set(this.e(t),new Rk(t,r)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,r){typeof r<"u"&&(t=t.bind(r));for(const[i,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(tw=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},sw=class{constructor(e,t){this[rw]="ResourceSet",!e||typeof e=="function"?this.c=new Lt(e):(this.c=new Lt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(rw=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},nw;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(nw||(nw={}));var Nk=class{constructor(){this[iw]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const r=this.c.get(e);if(r)return t!==0&&this.m(r,t),r.value}set(e,t,r=0){let i=this.c.get(e);if(i)i.value=t,r!==0&&this.m(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.k(i);break;case 1:this.j(i);break;case 2:this.k(i);break;default:this.k(i);break}this.c.set(e,i),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.l(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.l(e),this.f--,e.value}forEach(e,t){const r=this.g;let i=this.d;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this.g!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[(iw=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.next,r--;this.d=t,this.f=r,t&&(t.previous=void 0),this.g++}i(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.previous,r--;this.e=t,this.f=r,t&&(t.next=void 0),this.g++}j(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}k(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}l(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this.g++}m(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const r=e.next,i=e.previous;e===this.e?(i.next=void 0,this.e=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const r=e.next,i=e.previous;e===this.d?(r.previous=void 0,this.d=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}},Fk=class extends Nk{constructor(e,t=1){super(),this.n=e,this.o=Math.min(Math.max(0,t),1)}get limit(){return this.n}set limit(e){this.n=e,this.p()}get ratio(){return this.o}set ratio(e){this.o=Math.min(Math.max(0,e),1),this.p()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}p(){this.size>this.n&&this.q(Math.round(this.n*this.o))}},rp=class extends Fk{constructor(e,t=1){super(e,t)}q(e){this.h(e)}set(e,t){return super.set(e,t),this.p(),this}},ow=class{constructor(){this.c=new Map}add(e,t){let r=this.c.get(e);r||(r=new Set,this.c.set(e,r)),r.add(t)}delete(e,t){const r=this.c.get(e);r&&(r.delete(t),r.size===0&&this.c.delete(e))}forEach(e,t){const r=this.c.get(e);r&&r.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function ip(e,t){const r=this;let i=!1,s;return function(){if(i)return s;if(i=!0,t)try{s=e.apply(r,arguments)}finally{t()}else s=e.apply(r,arguments);return s}}var Er;(function(e){function t(M){return M&&typeof M=="object"&&typeof M[Symbol.iterator]=="function"}e.is=t;const r=Object.freeze([]);function i(){return r}e.empty=i;function*s(M){yield M}e.single=s;function n(M){return t(M)?M:s(M)}e.wrap=n;function o(M){return M||r}e.from=o;function*a(M){for(let F=M.length-1;F>=0;F--)yield M[F]}e.reverse=a;function c(M){return!M||M[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(M){return M[Symbol.iterator]().next().value}e.first=l;function u(M,F){let B=0;for(const X of M)if(F(X,B++))return!0;return!1}e.some=u;function h(M,F){for(const B of M)if(F(B))return B}e.find=h;function*p(M,F){for(const B of M)F(B)&&(yield B)}e.filter=p;function*f(M,F){let B=0;for(const X of M)yield F(X,B++)}e.map=f;function*m(M,F){let B=0;for(const X of M)yield*F(X,B++)}e.flatMap=m;function*w(...M){for(const F of M)yield*F}e.concat=w;function x(M,F,B){let X=B;for(const J of M)X=F(X,J);return X}e.reduce=x;function*S(M,F,B=M.length){for(F<-M.length&&(F=0),F<0&&(F+=M.length),B<0?B+=M.length:B>M.length&&(B=M.length);F<B;F++)yield M[F]}e.slice=S;function C(M,F=Number.POSITIVE_INFINITY){const B=[];if(F===0)return[B,M];const X=M[Symbol.iterator]();for(let J=0;J<F;J++){const Z=X.next();if(Z.done)return[B,e.empty()];B.push(Z.value)}return[B,{[Symbol.iterator](){return X}}]}e.consume=C;async function D(M){const F=[];for await(const B of M)F.push(B);return Promise.resolve(F)}e.asyncToArray=D})(Er||(Er={}));var Mk=!1,qn=null,GN=class Yx{constructor(){this.b=new Map}static{this.a=0}c(t){let r=this.b.get(t);return r||(r={parent:null,source:null,isSingleton:!1,value:t,idx:Yx.a++},this.b.set(t,r)),r}trackDisposable(t){const r=this.c(t);r.source||(r.source=new Error().stack)}setParent(t,r){const i=this.c(t);i.parent=r}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,r){const i=r.get(t);if(i)return i;const s=t.parent?this.f(this.c(t.parent),r):t;return r.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,i])=>i.source!==null&&!this.f(i,t).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(t=10,r){let i;if(r)i=r;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(i=l.filter(h=>!(h.parent&&u.has(h.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function s(c){function l(h,p){for(;h.length>0&&p.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new ow;for(const c of i){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}i.sort(Dk(c=>c.idx,Pk));let o="",a=0;for(const c of i.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let p=l[h];p=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${i.length} leaks) at ${p}`;const m=n.get(l.slice(0,h).join(`
`)),w=ew([...m].map(x=>s(x)[h]),x=>x);delete w[l[h]];for(const[x,S]of Object.entries(w))u.unshift(`    - stacktraces of ${S.length} other leaks continue with ${x}`);u.unshift(p)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>t&&(o+=`


... and ${i.length-t} more leaking disposables

`),{leaks:i,details:o}}};function Ok(e){qn=e}if(Mk){const e="__is_disposable_tracked__";Ok(new class{trackDisposable(t){const r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(r)},3e3)}setParent(t,r){if(t&&t!==he.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==he.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function Gn(e){return qn?.trackDisposable(e),e}function Jn(e){qn?.markAsDisposed(e)}function Sa(e,t){qn?.setParent(e,t)}function Uk(e,t){if(qn)for(const r of e)qn.setParent(r,t)}function Hk(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Ii(e){if(Er.is(e)){const t=[];for(const r of e)if(r)try{r.dispose()}catch(i){t.push(i)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function aw(...e){const t=ae(()=>Ii(e));return Uk(e,t),t}function ae(e){const t=Gn({dispose:ip(()=>{Jn(t),e()})});return t}var we=class Xx{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,Gn(this)}dispose(){this.g||(Jn(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Ii(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Sa(t,this),this.g?Xx.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Sa(t,null))}},he=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new we,Gn(this),Sa(this.q,this)}dispose(){Jn(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},is=class{constructor(){this.b=!1,Gn(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Sa(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,Jn(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Sa(e,null),e}},sp=class{constructor(){this.a=new Map,this.b=!1,Gn(this)}dispose(){Jn(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Ii(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,r=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),r||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function jk(e,t){return new Promise((r,i)=>{const s=[];_k(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?i(n):r(void 0)},onEnd:()=>{r(t?t(s):void 0)}})})}function _k(e,t,r){e.on("error",i=>{r?.isCancellationRequested||t.onError(i)}),e.on("end",()=>{r?.isCancellationRequested||t.onEnd()}),e.on("data",i=>{r?.isCancellationRequested||t.onData(i)})}var ql=typeof Buffer<"u",Bk=new dr(()=>new Uint8Array(256)),np,op,ke=class Or{static alloc(t){return ql?new Or(Buffer.allocUnsafe(t)):new Or(new Uint8Array(t))}static wrap(t){return ql&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Or(t)}static fromString(t,r){return!(r?.dontUseNodeBuffer||!1)&&ql?new Or(Buffer.from(t)):(np||(np=new TextEncoder),new Or(np.encode(t)))}static fromByteArray(t){const r=Or.alloc(t.length);for(let i=0,s=t.length;i<s;i++)r.buffer[i]=t[i];return r}static concat(t,r){if(typeof r>"u"){r=0;for(let n=0,o=t.length;n<o;n++)r+=t[n].byteLength}const i=Or.alloc(r);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];i.set(a,s),s+=a.byteLength}return i}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Or.alloc(this.byteLength);return t.set(this),t}toString(){return ql?this.buffer.toString():(op||(op=new TextDecoder),op.decode(this.buffer))}slice(t,r){return new Or(this.buffer.subarray(t,r))}set(t,r){if(t instanceof Or)this.buffer.set(t.buffer,r);else if(t instanceof Uint8Array)this.buffer.set(t,r);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),r);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Gl(this.buffer,t)}writeUInt32BE(t,r){Jl(this.buffer,t,r)}readUInt32LE(t){return qk(this.buffer,t)}writeUInt32LE(t,r){Gk(this.buffer,t,r)}readUInt8(t){return Jk(this.buffer,t)}writeUInt8(t,r){Qk(this.buffer,t,r)}indexOf(t,r=0){return zk(this.buffer,t instanceof Or?t.buffer:t,r)}};function zk(e,t,r=0){const i=t.byteLength,s=e.byteLength;if(i===0)return 0;if(i===1)return e.indexOf(t[0]);if(i>s-r)return-1;const n=Bk.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=r+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function Wk(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function Vk(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255}function Gl(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Jl(e,t,r){e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t}function qk(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function Gk(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255,t=t>>>8,e[r+2]=t&255,t=t>>>8,e[r+3]=t&255}function Jk(e,t){return e[t]}function Qk(e,t,r){e[r]=t}function Zk(e){return jk(e,t=>ke.concat(t))}function cw(e){let t=0,r=0,i=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(r){case 3:s[i++]=t|a,r=0;break;case 2:s[i++]=t|a>>>2,t=a<<6,r=3;break;case 1:s[i++]=t|a>>>4,t=a<<4,r=2;break;default:t=a<<2,r=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=i;for(;r>0;)n(0);return ke.wrap(s).slice(0,o)}var Yk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function ap({buffer:e},t=!0,r=!1){const i=r?Xk:Yk;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[(c<<2|l>>>6)&63],s+=i[l&63]}if(n===1){const a=e[o+0];s+=i[a>>>2],s+=i[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[c<<2&63],t&&(s+="=")}return s}var dt=class Tf{static{this.Undefined=new Tf(void 0)}constructor(t){this.element=t,this.next=Tf.Undefined,this.prev=Tf.Undefined}},$a=class{constructor(){this.a=dt.Undefined,this.b=dt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===dt.Undefined}clear(){let e=this.a;for(;e!==dt.Undefined;){const t=e.next;e.prev=dt.Undefined,e.next=dt.Undefined,e=t}this.a=dt.Undefined,this.b=dt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const r=new dt(e);if(this.a===dt.Undefined)this.a=r,this.b=r;else if(t){const s=this.b;this.b=r,r.prev=s,s.next=r}else{const s=this.a;this.a=r,r.next=s,s.prev=r}this.c+=1;let i=!1;return()=>{i||(i=!0,this.e(r))}}shift(){if(this.a!==dt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==dt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==dt.Undefined&&e.next!==dt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===dt.Undefined&&e.next===dt.Undefined?(this.a=dt.Undefined,this.b=dt.Undefined):e.next===dt.Undefined?(this.b=this.b.prev,this.b.next=dt.Undefined):e.prev===dt.Undefined&&(this.a=this.a.next,this.a.prev=dt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==dt.Undefined;)yield e.element,e=e.next}},Kk=globalThis.performance&&typeof globalThis.performance.now=="function",Bs=class Kx{static create(t){return new Kx(t)}constructor(t){this.c=Kk&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},e3=!1,lw=!1,t3=!1,lt;(function(e){e.None=()=>he.None;function t(G){if(t3){const{onDidAddListener:j}=G,Q=cp.create();let _=0;G.onDidAddListener=()=>{++_===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Q.print()),j?.()}}}function r(G,j){return f(G,()=>{},0,void 0,!0,void 0,j)}e.defer=r;function i(G){return(j,Q=null,_)=>{let re=!1,pe;return pe=G(ne=>{if(!re)return pe?pe.dispose():re=!0,j.call(Q,ne)},null,_),re&&pe.dispose(),pe}}e.once=i;function s(G,j){return e.once(e.filter(G,j))}e.onceIf=s;function n(G,j,Q){return h((_,re=null,pe)=>G(ne=>_.call(re,j(ne)),null,pe),Q)}e.map=n;function o(G,j,Q){return h((_,re=null,pe)=>G(ne=>{j(ne),_.call(re,ne)},null,pe),Q)}e.forEach=o;function a(G,j,Q){return h((_,re=null,pe)=>G(ne=>j(ne)&&_.call(re,ne),null,pe),Q)}e.filter=a;function c(G){return G}e.signal=c;function l(...G){return(j,Q=null,_)=>{const re=aw(...G.map(pe=>pe(ne=>j.call(Q,ne))));return p(re,_)}}e.any=l;function u(G,j,Q,_){let re=Q;return n(G,pe=>(re=j(re,pe),re),_)}e.reduce=u;function h(G,j){let Q;const _={onWillAddFirstListener(){Q=G(re.fire,re)},onDidRemoveLastListener(){Q?.dispose()}};j||t(_);const re=new I(_);return j?.add(re),re.event}function p(G,j){return j instanceof Array?j.push(G):j&&j.add(G),G}function f(G,j,Q=100,_=!1,re=!1,pe,ne){let We,_e,Et,wt=0,Mt;const Ke={leakWarningThreshold:pe,onWillAddFirstListener(){We=G(es=>{wt++,_e=j(_e,es),_&&!Et&&(Vt.fire(_e),_e=void 0),Mt=()=>{const ki=_e;_e=void 0,Et=void 0,(!_||wt>1)&&Vt.fire(ki),wt=0},typeof Q=="number"?(clearTimeout(Et),Et=setTimeout(Mt,Q)):Et===void 0&&(Et=0,queueMicrotask(Mt))})},onWillRemoveListener(){re&&wt>0&&Mt?.()},onDidRemoveLastListener(){Mt=void 0,We.dispose()}};ne||t(Ke);const Vt=new I(Ke);return ne?.add(Vt),Vt.event}e.debounce=f;function m(G,j=0,Q){return e.debounce(G,(_,re)=>_?(_.push(re),_):[re],j,void 0,!0,void 0,Q)}e.accumulate=m;function w(G,j=(_,re)=>_===re,Q){let _=!0,re;return a(G,pe=>{const ne=_||!j(pe,re);return _=!1,re=pe,ne},Q)}e.latch=w;function x(G,j,Q){return[e.filter(G,j,Q),e.filter(G,_=>!j(_),Q)]}e.split=x;function S(G,j=!1,Q=[],_){let re=Q.slice(),pe=G(_e=>{re?re.push(_e):We.fire(_e)});_&&_.add(pe);const ne=()=>{re?.forEach(_e=>We.fire(_e)),re=null},We=new I({onWillAddFirstListener(){pe||(pe=G(_e=>We.fire(_e)),_&&_.add(pe))},onDidAddFirstListener(){re&&(j?setTimeout(ne):ne())},onDidRemoveLastListener(){pe&&pe.dispose(),pe=null}});return _&&_.add(We),We.event}e.buffer=S;function C(G,j){return(_,re,pe)=>{const ne=j(new M);return G(function(We){const _e=ne.evaluate(We);_e!==D&&_.call(re,_e)},void 0,pe)}}e.chain=C;const D=Symbol("HaltChainable");class M{constructor(){this.f=[]}map(j){return this.f.push(j),this}forEach(j){return this.f.push(Q=>(j(Q),Q)),this}filter(j){return this.f.push(Q=>j(Q)?Q:D),this}reduce(j,Q){let _=Q;return this.f.push(re=>(_=j(_,re),_)),this}latch(j=(Q,_)=>Q===_){let Q=!0,_;return this.f.push(re=>{const pe=Q||!j(re,_);return Q=!1,_=re,pe?re:D}),this}evaluate(j){for(const Q of this.f)if(j=Q(j),j===D)break;return j}}function F(G,j,Q=_=>_){const _=(...We)=>ne.fire(Q(...We)),re=()=>G.on(j,_),pe=()=>G.removeListener(j,_),ne=new I({onWillAddFirstListener:re,onDidRemoveLastListener:pe});return ne.event}e.fromNodeEventEmitter=F;function B(G,j,Q=_=>_){const _=(...We)=>ne.fire(Q(...We)),re=()=>G.addEventListener(j,_),pe=()=>G.removeEventListener(j,_),ne=new I({onWillAddFirstListener:re,onDidRemoveLastListener:pe});return ne.event}e.fromDOMEventEmitter=B;function X(G){return new Promise(j=>i(G)(j))}e.toPromise=X;function J(G){const j=new I;return G.then(Q=>{j.fire(Q)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}e.fromPromise=J;function Z(G,j){return G(Q=>j.fire(Q))}e.forward=Z;function $e(G,j,Q){return j(Q),G(_=>j(_))}e.runAndSubscribe=$e;class de{constructor(j,Q){this._observable=j,this.f=0,this.g=!1;const _={onWillAddFirstListener:()=>{j.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{j.removeObserver(this)}};Q||t(_),this.emitter=new I(_),Q&&Q.add(this.emitter)}beginUpdate(j){this.f++}handlePossibleChange(j){}handleChange(j,Q){this.g=!0}endUpdate(j){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function Ze(G,j){return new de(G,j).emitter.event}e.fromObservable=Ze;function tt(G){return(j,Q,_)=>{let re=0,pe=!1;const ne={beginUpdate(){re++},endUpdate(){re--,re===0&&(G.reportChanges(),pe&&(pe=!1,j.call(Q)))},handlePossibleChange(){},handleChange(){pe=!0}};G.addObserver(ne),G.reportChanges();const We={dispose(){G.removeObserver(ne)}};return _ instanceof we?_.add(We):Array.isArray(_)&&_.push(We),We}}e.fromObservableLight=tt})(lt||(lt={}));var r3=class D0{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${D0.f++}`,D0.all.add(this)}start(t){this.g=new Bs,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},uw=-1,i3=class eE{static{this.f=1}constructor(t,r,i=(eE.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=r,this.name=i,this.h=0}dispose(){this.g?.clear()}check(t,r){const i=this.threshold;if(i<=0||r<i)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=i*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new s3(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,r=0;for(const[i,s]of this.g)(!t||r<s)&&(t=[i,s],r=s);return t}},cp=class tE{static create(){const t=new Error;return new tE(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},s3=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},n3=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},o3=0,Ql=class{constructor(e){this.value=e,this.id=o3++}},a3=2,hw=(e,t)=>{if(e instanceof Ql)t(e);else for(let r=0;r<e.length;r++){const i=e[r];i&&t(i)}},Zl;if(e3){const e=[];setInterval(()=>{e.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(e.join(`
`)),e.length=0)},3e3),Zl=new FinalizationRegistry(t=>{typeof t=="string"&&e.push(t)})}var I=class{constructor(e){this.z=0,this.f=e,this.g=uw>0||this.f?.leakWarningThreshold?new i3(e?.onListenerError??fr,this.f?.leakWarningThreshold??uw):void 0,this.j=this.f?._profName?new r3(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(lw){const e=this.u;queueMicrotask(()=>{hw(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,r)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new n3(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||fr)(l),he.None}if(this.m)return he.None;t&&(e=e.bind(t));const i=new Ql(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(i.stack=cp.create(),s=this.g.check(i.stack,this.z+1)),lw&&(i.stack=n??cp.create()),this.u?this.u instanceof Ql?(this.w??=new c3,this.u=[this.u,i]):this.u.push(i):(this.f?.onWillAddFirstListener?.(this),this.u=i,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=ae(()=>{Zl?.unregister(o),s?.(),this.A(i)});if(r instanceof we?r.add(o):Array.isArray(r)&&r.push(o),Zl){const a=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);Zl.register(o,c?.[2]??a,o)}return o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[r]=void 0;const i=this.w.current===this;if(this.z*a3<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:i&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const r=this.f?.onListenerError||fr;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Ql)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},c3=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Ca=class extends I{async fireAsync(e,t,r){if(this.u)for(this.h||(this.h=new $a),hw(this.u,i=>this.h.push([i.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[i,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");r&&(a=r(a,i)),n.push(a)}};try{i(o)}catch(a){fr(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&fr(c.reason)})}}},Yl=class extends I{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new $a,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},l3=class extends Yl{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},Ia;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(Ia||(Ia={}));var dw;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(dw||(dw={}));var fw;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(fw||(fw={}));function pw(e){const t=ke.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function u3(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var gw;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(gw||(gw={}));function lp(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function r(s,n){t.push(s,n?.startTime??Date.now())}function i(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:r,getMarks:i}}function h3(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?lp():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const r of performance.getEntriesByType("mark"))t.push({name:r.name,startTime:Math.round(e+r.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return lp(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),lp()}function d3(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=h3()),e.MonacoPerformanceMarks}var mw=d3(globalThis),Kt=mw.mark,f3=mw.getMarks;function p3(){return globalThis._VSCODE_NLS_MESSAGES}function vw(){return globalThis._VSCODE_NLS_LANGUAGE}var g3=vw()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Xl(e,t){let r;return t.length===0?r=e:r=e.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0],o=t[n];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),g3&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function d(e,t,...r){return Xl(typeof e=="number"?ww(e,t):t,r)}function ww(e,t){const r=p3()?.[e];if(typeof r!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return r}function up(e,t,...r){let i;typeof e=="number"?i=ww(e,t):i=t;const s=Xl(i,r);return{value:s,original:t===i?s:Xl(t,r)}}var zs="en",Da=!1,Pa=!1,Aa=!1,m3=!1,bw=!1,hp=!1,v3=!1,yw=!1,xw=!1,w3=!1,Kl=void 0,eu=zs,Ew=zs,b3=void 0,Di=void 0,Pi=globalThis,kr=void 0;typeof Pi.vscode<"u"&&typeof Pi.vscode.process<"u"?kr=Pi.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(kr=process);var kw=typeof kr?.versions?.electron=="string",y3=kw&&kr?.type==="renderer";if(typeof kr=="object"){Da=kr.platform==="win32",Pa=kr.platform==="darwin",Aa=kr.platform==="linux",m3=Aa&&!!kr.env.SNAP&&!!kr.env.SNAP_REVISION,v3=kw,xw=!!kr.env.CI||!!kr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Kl=zs,eu=zs;const e=kr.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Kl=t.userLocale,Ew=t.osLocale,eu=t.resolvedLanguage||zs,b3=t.languagePack?.translationsConfigFile}catch{}bw=!0}else typeof navigator=="object"&&!y3?(Di=navigator.userAgent,Da=Di.indexOf("Windows")>=0,Pa=Di.indexOf("Macintosh")>=0,yw=(Di.indexOf("Macintosh")>=0||Di.indexOf("iPad")>=0||Di.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Aa=Di.indexOf("Linux")>=0,w3=Di?.indexOf("Mobi")>=0,hp=!0,eu=vw()||zs,Kl=navigator.language.toLowerCase(),Ew=Kl):console.error("Unable to resolve platform.");var Sw;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Sw||(Sw={}));function x3(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var dp=0;Pa?dp=1:Da?dp=3:Aa&&(dp=2);var pr=Da,_r=Pa,ss=Aa,$w=bw,tu=hp,E3=hp&&typeof Pi.importScripts=="function",k3=E3?Pi.origin:void 0,Ws=xw,ci=Di,ns=eu,Cw;(function(e){function t(){return ns}e.value=t;function r(){return ns.length===2?ns==="en":ns.length>=3?ns[0]==="e"&&ns[1]==="n"&&ns[2]==="-":!1}e.isDefaultVariant=r;function i(){return ns==="en"}e.isDefault=i})(Cw||(Cw={}));var S3=typeof Pi.postMessage=="function"&&!Pi.importScripts,Iw=(()=>{if(S3){const e=[];Pi.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.id===r.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),Pi.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),Dw;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(Dw||(Dw={}));var $3=Pa||yw?2:Da?1:3,Pw=!0,Aw=!1;function Tw(){if(!Aw){Aw=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Pw=new Uint16Array(e.buffer)[0]===513}return Pw}var fp=!!(ci&&ci.indexOf("Chrome")>=0),C3=!!(ci&&ci.indexOf("Firefox")>=0),I3=!!(!fp&&ci&&ci.indexOf("Safari")>=0),Rw=!!(ci&&ci.indexOf("Edg/")>=0),JN=!!(ci&&ci.indexOf("Android")>=0),Vs,pp=globalThis.vscode;if(typeof pp<"u"&&typeof pp.process<"u"){const e=pp.process;Vs={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Vs={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Vs={get platform(){return pr?"win32":_r?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Qn=Vs.cwd,gp=Vs.env,D3=Vs.platform,QN=Vs.arch,P3=65,A3=97,T3=90,R3=122,os=46,Ut=47,gr=92,as=58,L3=63,Lw=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${i} of type ${t}`;n+=`. Received type ${typeof r}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function N3(e,t){if(e===null||typeof e!="object")throw new Lw(t,"Object",e)}function yt(e,t){if(typeof e!="string")throw new Lw(t,"string",e)}var mr=D3==="win32";function Se(e){return e===Ut||e===gr}function mp(e){return e===Ut}function cs(e){return e>=P3&&e<=T3||e>=A3&&e<=R3}function ru(e,t,r,i){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=Ut}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==os||s.charCodeAt(s.length-2)!==os){if(s.length>2){const u=s.lastIndexOf(r);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(r)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${r}..`:"..",n=2)}else s.length>0?s+=`${r}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===os&&a!==-1?++a:a=-1}return s}function F3(e){return e?`${e[0]==="."?"":"."}${e}`:""}function Nw(e,t){N3(t,"pathObject");const r=t.dir||t.root,i=t.base||`${t.name||""}${F3(t.ext)}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}var xt={resolve(...e){let t="",r="",i=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],yt(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=Qn():(n=gp[`=${t}`]||Qn(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===gr)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Se(u)&&(a=1,l=!0);else if(Se(u))if(l=!0,Se(n.charCodeAt(1))){let h=2,p=h;for(;h<o&&!Se(n.charCodeAt(h));)h++;if(h<o&&h!==p){const f=n.slice(p,h);for(p=h;h<o&&Se(n.charCodeAt(h));)h++;if(h<o&&h!==p){for(p=h;h<o&&!Se(n.charCodeAt(h));)h++;(h===o||h!==p)&&(c=`\\\\${f}\\${n.slice(p,h)}`,a=h)}}}else a=1;else cs(u)&&n.charCodeAt(1)===as&&(c=n.slice(0,2),a=2,o>2&&Se(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(r=`${n.slice(a)}\\${r}`,i=l,l&&t.length>0)break}return r=ru(r,!i,"\\",Se),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){yt(e,"path");const t=e.length;if(t===0)return".";let r=0,i,s=!1;const n=e.charCodeAt(0);if(t===1)return mp(n)?"\\":e;if(Se(n))if(s=!0,Se(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Se(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Se(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Se(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${e.slice(c,a)}`,r=a)}}}else r=1;else cs(n)&&e.charCodeAt(1)===as&&(i=e.slice(0,2),r=2,t>2&&Se(e.charCodeAt(2))&&(s=!0,r=3));let o=r<t?ru(e.slice(r),!s,"\\",Se):"";return o.length===0&&!s&&(o="."),o.length>0&&Se(e.charCodeAt(t-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){yt(e,"path");const t=e.length;if(t===0)return!1;const r=e.charCodeAt(0);return Se(r)||t>2&&cs(r)&&e.charCodeAt(1)===as&&Se(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,r;for(let n=0;n<e.length;++n){const o=e[n];yt(o,"path"),o.length>0&&(t===void 0?t=r=o:t+=`\\${o}`)}if(t===void 0)return".";let i=!0,s=0;if(typeof r=="string"&&Se(r.charCodeAt(0))){++s;const n=r.length;n>1&&Se(r.charCodeAt(1))&&(++s,n>2&&(Se(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<t.length&&Se(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return xt.normalize(t)},relative(e,t){if(yt(e,"from"),yt(t,"to"),e===t)return"";const r=xt.resolve(e),i=xt.resolve(t);if(r===i||(e=r.toLowerCase(),t=i.toLowerCase(),e===t))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===gr;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===gr;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===gr;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===gr;)c--;const l=c-a,u=o<l?o:l;let h=-1,p=0;for(;p<u;p++){const m=e.charCodeAt(s+p);if(m!==t.charCodeAt(a+p))break;m===gr&&(h=p)}if(p!==u){if(h===-1)return i}else{if(l>u){if(t.charCodeAt(a+p)===gr)return i.slice(a+p+1);if(p===2)return i.slice(a+p)}o>u&&(e.charCodeAt(s+p)===gr?h=p:p===2&&(h=3)),h===-1&&(h=0)}let f="";for(p=s+h+1;p<=n;++p)(p===n||e.charCodeAt(p)===gr)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${i.slice(a,c)}`:(i.charCodeAt(a)===gr&&++a,i.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=xt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===gr){if(t.charCodeAt(1)===gr){const r=t.charCodeAt(2);if(r!==L3&&r!==os)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(cs(t.charCodeAt(0))&&t.charCodeAt(1)===as&&t.charCodeAt(2)===gr)return`\\\\?\\${t}`;return e},dirname(e){yt(e,"path");const t=e.length;if(t===0)return".";let r=-1,i=0;const s=e.charCodeAt(0);if(t===1)return Se(s)?e:".";if(Se(s)){if(r=i=1,Se(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Se(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Se(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Se(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(r=i=a+1)}}}}else cs(s)&&e.charCodeAt(1)===as&&(r=t>2&&Se(e.charCodeAt(2))?3:2,i=r);let n=-1,o=!0;for(let a=t-1;a>=i;--a)if(Se(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(r===-1)return".";n=r}return e.slice(0,n)},basename(e,t){t!==void 0&&yt(t,"suffix"),yt(e,"path");let r=0,i=-1,s=!0,n;if(e.length>=2&&cs(e.charCodeAt(0))&&e.charCodeAt(1)===as&&(r=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(Se(c)){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(Se(e.charCodeAt(n))){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){yt(e,"path");let t=0,r=-1,i=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===as&&cs(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Se(c)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===os?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===i+1?"":e.slice(r,s)},format:Nw.bind(null,"\\"),parse(e){yt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.length;let i=0,s=e.charCodeAt(0);if(r===1)return Se(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Se(s)){if(i=1,Se(e.charCodeAt(1))){let h=2,p=h;for(;h<r&&!Se(e.charCodeAt(h));)h++;if(h<r&&h!==p){for(p=h;h<r&&Se(e.charCodeAt(h));)h++;if(h<r&&h!==p){for(p=h;h<r&&!Se(e.charCodeAt(h));)h++;h===r?i=h:h!==p&&(i=h+1)}}}}else if(cs(s)&&e.charCodeAt(1)===as){if(r<=2)return t.root=t.dir=e,t;if(i=2,Se(e.charCodeAt(2))){if(r===3)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let n=-1,o=i,a=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(s=e.charCodeAt(l),Se(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===os?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==i?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},M3=(()=>{if(mr){const e=/\\/g;return()=>{const t=Qn().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>Qn()})(),Te={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=-1&&!r;i--){const s=i>=0?e[i]:M3();yt(s,`paths[${i}]`),s.length!==0&&(t=`${s}/${t}`,r=s.charCodeAt(0)===Ut)}return t=ru(t,!r,"/",mp),r?`/${t}`:t.length>0?t:"."},normalize(e){if(yt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Ut,r=e.charCodeAt(e.length-1)===Ut;return e=ru(e,!t,"/",mp),e.length===0?t?"/":r?"./":".":(r&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return yt(e,"path"),e.length>0&&e.charCodeAt(0)===Ut},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];yt(i,"path"),i.length>0&&(t===void 0?t=i:t+=`/${i}`)}return t===void 0?".":Te.normalize(t)},relative(e,t){if(yt(e,"from"),yt(t,"to"),e===t||(e=Te.resolve(e),t=Te.resolve(t),e===t))return"";const r=1,i=e.length,s=i-r,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(r+l);if(h!==t.charCodeAt(n+l))break;h===Ut&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Ut)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(r+l)===Ut?c=l:l===0&&(c=0));let u="";for(l=r+c+1;l<=i;++l)(l===i||e.charCodeAt(l)===Ut)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(yt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Ut;let r=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Ut){if(!i){r=s;break}}else i=!1;return r===-1?t?"/":".":t&&r===1?"//":e.slice(0,r)},basename(e,t){t!==void 0&&yt(t,"ext"),yt(e,"path");let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Ut){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Ut){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){yt(e,"path");let t=-1,r=0,i=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===Ut){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===os?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:Nw.bind(null,"/"),parse(e){yt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.charCodeAt(0)===Ut;let i;r?(t.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const u=e.charCodeAt(c);if(u===Ut){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===os?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&r?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Te.win32=xt.win32=xt,Te.posix=xt.posix=Te;var Zn=mr?xt.normalize:Te.normalize,iu=mr?xt.isAbsolute:Te.isAbsolute,vp=mr?xt.join:Te.join,O3=mr?xt.resolve:Te.resolve,Ta=mr?xt.relative:Te.relative,Yn=mr?xt.dirname:Te.dirname,vr=mr?xt.basename:Te.basename,wp=mr?xt.extname:Te.extname,ZN=mr?xt.format:Te.format,YN=mr?xt.parse:Te.parse,XN=mr?xt.toNamespacedPath:Te.toNamespacedPath,Br=mr?xt.sep:Te.sep,KN=mr?xt.delimiter:Te.delimiter,U3=/^\w[\w\d+.-]*$/,H3=/^\//,j3=/^\/\//;function _3(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!U3.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!H3.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(j3.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function B3(e,t){return!e&&!t?"file":e}function z3(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==zr&&(t=zr+t):t=zr;break}return t}var rt="",zr="/",W3=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=class Rf{static isUri(t){return t instanceof Rf?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,r,i,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||rt,this.authority=t.authority||rt,this.path=t.path||rt,this.query=t.query||rt,this.fragment=t.fragment||rt):(this.scheme=B3(t,o),this.authority=r||rt,this.path=z3(this.scheme,i||rt),this.query=s||rt,this.fragment=n||rt,_3(this,o))}get fsPath(){return su(this,!1)}with(t){if(!t)return this;let{scheme:r,authority:i,path:s,query:n,fragment:o}=t;return r===void 0?r=this.scheme:r===null&&(r=rt),i===void 0?i=this.authority:i===null&&(i=rt),s===void 0?s=this.path:s===null&&(s=rt),n===void 0?n=this.query:n===null&&(n=rt),o===void 0?o=this.fragment:o===null&&(o=rt),r===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Xn(r,i,s,n,o)}static parse(t,r=!1){const i=W3.exec(t);return i?new Xn(i[2]||rt,nu(i[4]||rt),nu(i[5]||rt),nu(i[7]||rt),nu(i[9]||rt),r):new Xn(rt,rt,rt,rt,rt)}static file(t){let r=rt;if(pr&&(t=t.replace(/\\/g,zr)),t[0]===zr&&t[1]===zr){const i=t.indexOf(zr,2);i===-1?(r=t.substring(2),t=zr):(r=t.substring(2,i),t=t.substring(i)||zr)}return new Xn("file",r,t,rt,rt)}static from(t,r){return new Xn(t.scheme,t.authority,t.path,t.query,t.fragment,r)}static joinPath(t,...r){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return pr&&t.scheme==="file"?i=Rf.file(xt.join(su(t,!0),...r)).path:i=Te.join(t.path,...r),t.with({path:i})}toString(t=!1){return bp(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Rf)return t;{const r=new Xn(t);return r._formatted=t.external??null,r._fsPath=t._sep===Mw?t.fsPath??null:null,r}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function Fw(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var Mw=pr?1:void 0,Xn=class extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=su(this,!1)),this._fsPath}toString(e=!1){return e?bp(this,!0):(this._formatted||(this._formatted=bp(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Mw),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Ow={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Uw(e,t,r){let i,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||r&&o===91||r&&o===93||r&&o===58)s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i!==void 0&&(i+=e.charAt(n));else{i===void 0&&(i=e.substr(0,n));const a=Ow[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i+=a):s===-1&&(s=n)}}return s!==-1&&(i+=encodeURIComponent(e.substring(s))),i!==void 0?i:e}function V3(e){let t;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);i===35||i===63?(t===void 0&&(t=e.substr(0,r)),t+=Ow[i]):t!==void 0&&(t+=e[r])}return t!==void 0?t:e}function su(e,t){let r;return e.authority&&e.path.length>1&&e.scheme==="file"?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?r=e.path.substr(1):r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,pr&&(r=r.replace(/\//g,"\\")),r}function bp(e,t){const r=t?V3:Uw;let i="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=zr,i+=zr),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=r(u,!1,!1):(i+=r(u.substr(0,l),!1,!1),i+=":",i+=r(u.substr(l+1),!1,!0)),i+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?i+=r(n,!1,!0):(i+=r(n.substr(0,l),!1,!0),i+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=r(o,!0,!1)}return a&&(i+="?",i+=r(a,!1,!1)),c&&(i+="#",i+=t?c:Uw(c,!1,!1)),i}function Hw(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+Hw(e.substr(3)):e}}var jw=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function nu(e){return e.match(jw)?e.replace(jw,t=>Hw(t)):e}var _w=class rE{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++rE.count}},Bw=[];function R(e){const t=new _w(e);return Bw[t.nid]=t,t}function ou(e){return Bw[e].sid}var Sr=class{constructor(e){this.value=e}},zw;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(zw||(zw={}));var Ww;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(Ww||(Ww={}));var Vw;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Vw||(Vw={}));var qw;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(qw||(qw={}));var Gw;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(Gw||(Gw={}));var Jw;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(Jw||(Jw={}));var Qw;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Qw||(Qw={}));var yp;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(yp||(yp={}));var eF=class iE{static{this.a=0}static mixin(t){return t._id=iE.a++,t}},Zw;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(Zw||(Zw={}));var Yw;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(Yw||(Yw={}));var Xw;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(Xw||(Xw={}));var z={MainThreadAuthentication:R("MainThreadAuthentication"),MainThreadBulkEdits:R("MainThreadBulkEdits"),MainThreadLanguageModels:R("MainThreadLanguageModels"),MainThreadEmbeddings:R("MainThreadEmbeddings"),MainThreadChatAgents2:R("MainThreadChatAgents2"),MainThreadCodeMapper:R("MainThreadCodeMapper"),MainThreadChatVariables:R("MainThreadChatVariables"),MainThreadLanguageModelTools:R("MainThreadChatSkills"),MainThreadClipboard:R("MainThreadClipboard"),MainThreadCommands:R("MainThreadCommands"),MainThreadComments:R("MainThreadComments"),MainThreadConfiguration:R("MainThreadConfiguration"),MainThreadConsole:R("MainThreadConsole"),MainThreadDebugService:R("MainThreadDebugService"),MainThreadDecorations:R("MainThreadDecorations"),MainThreadDiagnostics:R("MainThreadDiagnostics"),MainThreadDialogs:R("MainThreadDiaglogs"),MainThreadDocuments:R("MainThreadDocuments"),MainThreadDocumentContentProviders:R("MainThreadDocumentContentProviders"),MainThreadTextEditors:R("MainThreadTextEditors"),MainThreadEditorInsets:R("MainThreadEditorInsets"),MainThreadEditorTabs:R("MainThreadEditorTabs"),MainThreadErrors:R("MainThreadErrors"),MainThreadTreeViews:R("MainThreadTreeViews"),MainThreadDownloadService:R("MainThreadDownloadService"),MainThreadLanguageFeatures:R("MainThreadLanguageFeatures"),MainThreadLanguages:R("MainThreadLanguages"),MainThreadLogger:R("MainThreadLogger"),MainThreadMessageService:R("MainThreadMessageService"),MainThreadOutputService:R("MainThreadOutputService"),MainThreadProgress:R("MainThreadProgress"),MainThreadQuickDiff:R("MainThreadQuickDiff"),MainThreadQuickOpen:R("MainThreadQuickOpen"),MainThreadStatusBar:R("MainThreadStatusBar"),MainThreadSecretState:R("MainThreadSecretState"),MainThreadStorage:R("MainThreadStorage"),MainThreadSpeech:R("MainThreadSpeechProvider"),MainThreadTelemetry:R("MainThreadTelemetry"),MainThreadTerminalService:R("MainThreadTerminalService"),MainThreadTerminalShellIntegration:R("MainThreadTerminalShellIntegration"),MainThreadWebviews:R("MainThreadWebviews"),MainThreadWebviewPanels:R("MainThreadWebviewPanels"),MainThreadWebviewViews:R("MainThreadWebviewViews"),MainThreadCustomEditors:R("MainThreadCustomEditors"),MainThreadUrls:R("MainThreadUrls"),MainThreadUriOpeners:R("MainThreadUriOpeners"),MainThreadProfileContentHandlers:R("MainThreadProfileContentHandlers"),MainThreadWorkspace:R("MainThreadWorkspace"),MainThreadFileSystem:R("MainThreadFileSystem"),MainThreadFileSystemEventService:R("MainThreadFileSystemEventService"),MainThreadExtensionService:R("MainThreadExtensionService"),MainThreadSCM:R("MainThreadSCM"),MainThreadSearch:R("MainThreadSearch"),MainThreadShare:R("MainThreadShare"),MainThreadTask:R("MainThreadTask"),MainThreadWindow:R("MainThreadWindow"),MainThreadLabelService:R("MainThreadLabelService"),MainThreadNotebook:R("MainThreadNotebook"),MainThreadNotebookDocuments:R("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:R("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:R("MainThreadNotebookKernels"),MainThreadNotebookRenderers:R("MainThreadNotebookRenderers"),MainThreadInteractive:R("MainThreadInteractive"),MainThreadTheming:R("MainThreadTheming"),MainThreadTunnelService:R("MainThreadTunnelService"),MainThreadManagedSockets:R("MainThreadManagedSockets"),MainThreadTimeline:R("MainThreadTimeline"),MainThreadTesting:R("MainThreadTesting"),MainThreadLocalization:R("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:R("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:R("MainThreadAiEmbeddingVector")},K={ExtHostCodeMapper:R("ExtHostCodeMapper"),ExtHostCommands:R("ExtHostCommands"),ExtHostConfiguration:R("ExtHostConfiguration"),ExtHostDiagnostics:R("ExtHostDiagnostics"),ExtHostDebugService:R("ExtHostDebugService"),ExtHostDecorations:R("ExtHostDecorations"),ExtHostDocumentsAndEditors:R("ExtHostDocumentsAndEditors"),ExtHostDocuments:R("ExtHostDocuments"),ExtHostDocumentContentProviders:R("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:R("ExtHostDocumentSaveParticipant"),ExtHostEditors:R("ExtHostEditors"),ExtHostTreeViews:R("ExtHostTreeViews"),ExtHostFileSystem:R("ExtHostFileSystem"),ExtHostFileSystemInfo:R("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:R("ExtHostFileSystemEventService"),ExtHostLanguages:R("ExtHostLanguages"),ExtHostLanguageFeatures:R("ExtHostLanguageFeatures"),ExtHostQuickOpen:R("ExtHostQuickOpen"),ExtHostQuickDiff:R("ExtHostQuickDiff"),ExtHostStatusBar:R("ExtHostStatusBar"),ExtHostShare:R("ExtHostShare"),ExtHostExtensionService:R("ExtHostExtensionService"),ExtHostLogLevelServiceShape:R("ExtHostLogLevelServiceShape"),ExtHostTerminalService:R("ExtHostTerminalService"),ExtHostTerminalShellIntegration:R("ExtHostTerminalShellIntegration"),ExtHostSCM:R("ExtHostSCM"),ExtHostSearch:R("ExtHostSearch"),ExtHostTask:R("ExtHostTask"),ExtHostWorkspace:R("ExtHostWorkspace"),ExtHostWindow:R("ExtHostWindow"),ExtHostWebviews:R("ExtHostWebviews"),ExtHostWebviewPanels:R("ExtHostWebviewPanels"),ExtHostCustomEditors:R("ExtHostCustomEditors"),ExtHostWebviewViews:R("ExtHostWebviewViews"),ExtHostEditorInsets:R("ExtHostEditorInsets"),ExtHostEditorTabs:R("ExtHostEditorTabs"),ExtHostProgress:R("ExtHostProgress"),ExtHostComments:R("ExtHostComments"),ExtHostSecretState:R("ExtHostSecretState"),ExtHostStorage:R("ExtHostStorage"),ExtHostUrls:R("ExtHostUrls"),ExtHostUriOpeners:R("ExtHostUriOpeners"),ExtHostProfileContentHandlers:R("ExtHostProfileContentHandlers"),ExtHostOutputService:R("ExtHostOutputService"),ExtHostLabelService:R("ExtHostLabelService"),ExtHostNotebook:R("ExtHostNotebook"),ExtHostNotebookDocuments:R("ExtHostNotebookDocuments"),ExtHostNotebookEditors:R("ExtHostNotebookEditors"),ExtHostNotebookKernels:R("ExtHostNotebookKernels"),ExtHostNotebookRenderers:R("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:R("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:R("ExtHostInteractive"),ExtHostChatAgents2:R("ExtHostChatAgents"),ExtHostChatVariables:R("ExtHostChatVariables"),ExtHostLanguageModelTools:R("ExtHostChatSkills"),ExtHostChatProvider:R("ExtHostChatProvider"),ExtHostSpeech:R("ExtHostSpeech"),ExtHostEmbeddings:R("ExtHostEmbeddings"),ExtHostAiRelatedInformation:R("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:R("ExtHostAiEmbeddingVector"),ExtHostTheming:R("ExtHostTheming"),ExtHostTunnelService:R("ExtHostTunnelService"),ExtHostManagedSockets:R("ExtHostManagedSockets"),ExtHostAuthentication:R("ExtHostAuthentication"),ExtHostTimeline:R("ExtHostTimeline"),ExtHostTesting:R("ExtHostTesting"),ExtHostTelemetry:R("ExtHostTelemetry"),ExtHostLocalization:R("ExtHostLocalization")},Kw=Object.freeze(function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),Xe;(function(e){function t(r){return r===e.None||r===e.Cancelled||r instanceof au?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:lt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Kw})})(Xe||(Xe={}));var au=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?Kw:(this.b||(this.b=new I),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},ft=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new au),this.f}cancel(){this.f?this.f instanceof au&&this.f.cancel():this.f=Xe.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof au&&this.f.dispose():this.f=Xe.None}};function q3(e){return e}var G3=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=q3):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function cu(e){return!e||typeof e!="string"?!0:e.trim().length===0}var J3=/{([^}]+)}/g;function eb(e,t){return Object.keys(t).length===0?e:e.replace(J3,(r,i)=>t[i]??r)}function qs(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Q3(e,t){let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function Z3(e,t){if(!e||!t)return e;const r=t.length;if(r===0||e.length===0)return e;let i=0;for(;e.indexOf(t,i)===i;)i=i+r;return e.substring(i)}function xp(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+r!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function Y3(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=qs(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function tb(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function rb(e){return e.split(/\r\n|\r|\n/)}function Ep(e){for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function X3(e,t=e.length-1){for(let r=t;r>=0;r--){const i=e.charCodeAt(r);if(i!==32&&i!==9)return r}return-1}function K3(e,t,r){const i=[];let s=0;for(const n of e.matchAll(t)){if(i.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,i.push(r(n[0],...n.slice(1),n.index,e,n.groups))}return i.push(e.slice(s)),Promise.all(i).then(n=>n.join(""))}function Gs(e,t){return e<t?-1:e>t?1:0}function kp(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){const c=e.charCodeAt(r),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function ib(e,t){return Ra(e,t,0,e.length,0,t.length)}function Ra(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){let c=e.charCodeAt(r),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return kp(e.toLowerCase(),t.toLowerCase(),r,i,s,n);sb(c)&&(c-=32),sb(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function sb(e){return e>=97&&e<=122}function ls(e,t){return e.length===t.length&&Ra(e,t)===0}function Sp(e,t){const r=t.length;return t.length>e.length?!1:Ra(e,t,0,r)===0}function eS(e,t){const r=Math.min(e.length,t.length);let i;for(i=0;i<r;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return r}function lu(e){return 55296<=e&&e<=56319}function uu(e){return 56320<=e&&e<=57343}function $p(e,t){return(e-55296<<10)+(t-56320)+65536}function nb(e,t,r){const i=e.charCodeAt(r);if(lu(i)&&r+1<t){const s=e.charCodeAt(r+1);if(uu(s))return $p(i,s)}return i}function tS(e,t){const r=e.charCodeAt(t-1);if(uu(r)&&t>1){const i=e.charCodeAt(t-2);if(lu(i))return $p(i,r)}return r}var rS=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=tS(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=nb(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},iS=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new rS(e,t)}nextGraphemeLength(){const e=db.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(ub(i,n)){t.setOffset(s);break}i=n}return t.offset-r}prevGraphemeLength(){const e=db.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(ub(n,i)){t.setOffset(s);break}i=n}return r-t.offset}eol(){return this.c.eol()}};function ob(e,t){return new iS(e,t).nextGraphemeLength()}var Cp=void 0;function sS(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function ab(e){return Cp||(Cp=sS()),Cp.test(e)}var nS=/^[\t\n\r\x20-\x7E]*$/;function oS(e){return nS.test(e)}var aS=/[\u2028\u2029]/;function cb(e){return aS.test(e)}var cS="\uFEFF";function lS(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function lb(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function uS(e,t=1){if(t===0)return"";let r=-1;do r=e.indexOf(`
`,r+1),t--;while(t>0&&r>=0);return r===-1?e:(e[r-1]==="\r"&&r--,e.substr(0,r))}function ub(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var hb;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(hb||(hb={}));var db=class Fl{static{this.c=null}static getInstance(){return Fl.c||(Fl.c=new Fl),Fl.c}constructor(){this.d=hS()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const r=this.d,i=r.length/3;let s=1;for(;s<=i;)if(t<r[3*s])s=2*s;else if(t>r[3*s+1])s=2*s+1;else return r[3*s+2];return 0}};function hS(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var fb;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(fb||(fb={}));var tF=class Ml{static{this.c=new dr(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new G3({getCacheKey:JSON.stringify},t=>{function r(u){const h=new Map;for(let p=0;p<u.length;p+=2)h.set(u[p],u[p+1]);return h}function i(u,h){const p=new Map(u);for(const[f,m]of h)p.set(f,m);return p}function s(u,h){if(!u)return h;const p=new Map;for(const[f,m]of u)h.has(f)&&p.set(f,m);return p}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=r(n[u]);a=s(a,h)}const c=r(n._common),l=i(c,a);return new Ml(l)})}static getInstance(t){return Ml.d.get(Array.from(t))}static{this.e=new dr(()=>Object.keys(Ml.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return Ml.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},rF=class Ol{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(Ol.c())),this.d}static isInvisibleCharacter(t){return Ol.e().has(t)}static containsInvisibleCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&Ol.isInvisibleCharacter(i))return!0}return!1}static get codePoints(){return Ol.e()}};function Ce(e){return typeof e=="string"}function dS(e){return Array.isArray(e)&&e.every(t=>Ce(t))}function pt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function fS(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function us(e){return typeof e=="number"&&!isNaN(e)}function La(e){return typeof e>"u"}function Js(e){return!gt(e)}function gt(e){return La(e)||e===null}function pb(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function Kn(e){if(gt(e))throw new Error("Assertion Failed: argument is undefined or null");return e}var pS=Object.prototype.hasOwnProperty;function gb(e){if(!pt(e))return!1;for(const t in e)if(pS.call(e,t))return!1;return!0}function gS(e){return typeof e=="function"}function mS(e,t){if(Ce(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(gS(t)){try{if(e instanceof t)return}catch{}if(!gt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function hs(e){return e===47||e===92}function mb(e){return e.replace(/[\\/]/g,Te.sep)}function vS(e){return e.indexOf("/")===-1&&(e=mb(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function vb(e,t=Te.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(hs(i)){if(hs(e.charCodeAt(1))&&!hs(e.charCodeAt(2))){let n=3;const o=n;for(;n<r&&!hs(e.charCodeAt(n));n++);if(o!==n&&!hs(e.charCodeAt(n+1))){for(n+=1;n<r;n++)if(hs(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(wb(i)&&e.charCodeAt(1)===58)return hs(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<r;s++)if(hs(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var wS=/[\\/:\*\?"<>\|]/g,bS=/[/]/g,yS=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function xS(e,t=pr){const r=t?wS:bS;return!(!e||e.length===0||/^\s+$/.test(e)||(r.lastIndex=0,r.test(e))||t&&yS.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function hu(e,t,r,i=Br){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(r){if(!Sp(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),e.indexOf(t)===0}function wb(e){return e>=65&&e<=90||e>=97&&e<=122}function ES(e,t=pr){return t?wb(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var V;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(V||(V={}));function Ip(e,t){return y.isUri(e)?ls(e.scheme,t):Sp(e,t+":")}function kS(e,...t){return t.some(r=>Ip(e,r))}var SS="tkn",$S=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=IS(e,t)}getServerRootPath(){return this.f}get g(){return Te.join(this.f,V.vscodeRemoteResource)}set(e,t,r){this.a[e]=t,this.b[e]=r}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return fr(o),e}const t=e.authority;let r=this.a[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);const i=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${SS}=${encodeURIComponent(s)}`),y.from({scheme:tu?this.d:V.vscodeRemoteResource,authority:`${r}:${i}`,path:tu?(window.location.pathname+"/"+this.g).replace(/\/\/+/g,"/"):this.g,query:n})}},CS=new $S;function IS(e,t){return Te.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}var DS="vscode-app",PS=class Lf{static{this.a=DS}asBrowserUri(t){const r=this.b(t);return this.uriToBrowserUri(r)}uriToBrowserUri(t){return t.scheme===V.vscodeRemote?CS.rewrite(t):t.scheme===V.file&&($w||k3===`${V.vscodeFileResource}://${Lf.a}`)?t.with({scheme:V.vscodeFileResource,authority:t.authority||Lf.a,query:null,fragment:null}):t}asFileUri(t){const r=this.b(t);return this.uriToFileUri(r)}uriToFileUri(t){return t.scheme===V.vscodeFileResource?t.with({scheme:V.file,authority:t.authority!==Lf.a?t.authority:null,query:null,fragment:null}):t}b(t,r){if(y.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return y.joinPath(y.parse(i,!0),t);const s=vp(i,t);return y.file(s)}return y.parse(r.toUrl(t))}},AS=new PS,bb;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const r="vscode-coi";function i(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:y.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(r);if(a)return t.get(a)}e.getHeadersFromQuery=i;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(r,c):n[r]=c}e.addSearchParam=s})(bb||(bb={}));function Wr(e){return su(e,!0)}var Na=class{constructor(e){this.a=e}compare(e,t,r=!1){return e===t?0:Gs(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===V.file)return hu(Wr(e),Wr(t),this.a(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(Eb(e.authority,t.authority))return hu(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return ds(e)||e.authority}basename(e){return Te.basename(e.path)}extname(e){return Te.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===V.file?t=y.file(Yn(Wr(e))).path:(t=Te.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===V.file?t=y.file(Zn(Wr(e))).path:t=Te.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Eb(e.authority,t.authority))return;if(e.scheme===V.file){const s=Ta(Wr(e),Wr(t));return pr?mb(s):s}let r=e.path||"/";const i=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(r.length,i.length);s<n&&!(r.charCodeAt(s)!==i.charCodeAt(s)&&r.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);r=i.substr(0,s)+r.substr(s)}return Te.relative(r,i)}resolvePath(e,t){if(e.scheme===V.file){const r=y.file(O3(Wr(e),t));return e.with({authority:r.authority,path:r.path})}return t=vS(t),e.with({path:Te.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ls(e,t)}hasTrailingPathSeparator(e,t=Br){if(e.scheme===V.file){const r=Wr(e);return r.length>vb(r).length&&r[r.length-1]===t}else{const r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Br){return kb(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Br){let r=!1;if(e.scheme===V.file){const i=Wr(e);r=i!==void 0&&i.length===vb(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!kb(e,t)?e.with({path:e.path+"/"}):e}},Ne=new Na(()=>!1),TS=new Na(e=>e.scheme===V.file?!ss:!0),RS=new Na(e=>!0),yb=Ne.isEqual.bind(Ne),iF=Ne.isEqualOrParent.bind(Ne),sF=Ne.getComparisonKey.bind(Ne),Dp=Ne.basenameOrAuthority.bind(Ne),ds=Ne.basename.bind(Ne),nF=Ne.extname.bind(Ne),Pp=Ne.dirname.bind(Ne),Jt=Ne.joinPath.bind(Ne),oF=Ne.normalizePath.bind(Ne),xb=Ne.relativePath.bind(Ne),aF=Ne.resolvePath.bind(Ne),LS=Ne.isAbsolutePath.bind(Ne),Eb=Ne.isEqualAuthority.bind(Ne),kb=Ne.hasTrailingPathSeparator.bind(Ne),cF=Ne.removeTrailingPathSeparator.bind(Ne),lF=Ne.addTrailingPathSeparator.bind(Ne),Sb;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(r){const i=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}e.parseMetaData=t})(Sb||(Sb={}));var NS=Symbol("MicrotaskDelay");function fs(e){return!!e&&typeof e.then=="function"}function FS(e){const t=new ft,r=e(t.token),i=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new ai)});Promise.resolve(r).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return i.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function $b(e,t,r){return new Promise((i,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),i(r)});e.then(i,s).finally(()=>n.dispose())})}function MS(e,t){return new Promise((r,i)=>{const s=t.onCancellationRequested(()=>{s.dispose(),i(new ai)});e.then(r,i).finally(()=>s.dispose())})}function zt(e){return new Promise((t,r)=>{const i=e();fs(i)?i.then(t,r):t(i)})}function OS(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}var US=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(t,t).then(r)})}return new Promise((t,r)=>{this.b.then(t,r)})}return this.a=e(),new Promise((t,r)=>{this.a.then(i=>{this.a=null,t(i)},i=>{this.a=null,r(i)})})}dispose(){this.f=!0}},HS=(e,t)=>{let r=!0;const i=setTimeout(()=>{r=!1,t()},e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(i),r=!1}}},jS=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},_S=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((i,s)=>{this.d=i,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const i=this.g;return this.g=null,i()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=t===NS?jS(r):HS(t,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new ai),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},BS=class{constructor(e){this.a=new _S(e),this.b=new US}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},li=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function ui(e,t){return t?new Promise((r,i)=>{const s=setTimeout(()=>{n.dispose(),r()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),i(new ai)})}):FS(r=>ui(e,r))}function zS(e,t=0,r){const i=setTimeout(()=>{e(),r&&s.dispose()},t),s=ae(()=>{clearTimeout(i),r?.deleteAndLeak(s)});return r?.add(s),s}var WS=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new I}whenIdle(){return this.size>0?lt.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,r)=>{this.g.push({factory:e,c:t,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},VS=class extends WS{constructor(){super(1)}},qS=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new to;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ne){const r=t.getComparisonKey(e);return this.a.get(r)?.size??0}queueFor(e,t,r=Ne){const i=r.getComparisonKey(e);let s=this.a.get(i);if(!s){s=new VS;const n=this.f++,o=lt.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(i),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new sp),this.d.set(n,o),this.a.set(i,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},GS=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,r=globalThis){if(this.f)throw new Wn("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=r.setInterval(()=>{e()},t);this.d=ae(()=>{r.clearInterval(i),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},eo=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},Cb,du;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?du=(e,t,r)=>{Iw(()=>{if(i)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:du=(e,t,r)=>{const i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},Cb=(e,t)=>du(globalThis,e,t)})();var JS=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(r){this.l=r}finally{this.g=!0}},this.f=du(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},QS=class extends JS{constructor(e){super(globalThis,e)}},Ib;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(Ib||(Ib={}));var to=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new ai)}},ro;(function(e){async function t(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function r(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}e.withAsyncBody=r})(ro||(ro={}));var Db;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(Db||(Db={}));var Fa=class Ar{static fromArray(t){return new Ar(r=>{r.emitMany(t)})}static fromPromise(t){return new Ar(async r=>{r.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Ar(async r=>{await Promise.all(t.map(async i=>r.emitOne(await i)))})}static merge(t){return new Ar(async r=>{await Promise.all(t.map(async i=>{for await(const s of i)r.emitOne(s)}))})}static{this.EMPTY=Ar.fromArray([])}constructor(t,r){this.a=0,this.b=[],this.d=null,this.f=r,this.g=new I,queueMicrotask(async()=>{const i={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(i)),this.k()}catch(s){this.l(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await lt.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,r){return new Ar(async i=>{for await(const s of t)i.emitOne(r(s))})}map(t){return Ar.map(this,t)}static filter(t,r){return new Ar(async i=>{for await(const s of t)r(s)&&i.emitOne(s)})}filter(t){return Ar.filter(this,t)}static coalesce(t){return Ar.filter(t,r=>!!r)}coalesce(){return Ar.coalesce(this)}static async toPromise(t){const r=[];for await(const i of t)r.push(i);return r}toPromise(){return Ar.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},Ap=class{constructor(e){this.a=new to,this.b=new Fa(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this.d=s=>i.reject(s),this.f=s=>i.emitOne(s),this.a.p},e);let t,r;this.f=i=>{r||(r=[]),r.push(i)},this.d=i=>{t||(t=i)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}},uF=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function Pb(e,t,r,i){if(!e||i>200)return null;if(typeof e=="object"){if(e.$mid===1)return r?y.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof ke)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=Pb(e[s],t,r,i+1);n!==null&&(e[s]=n)}}return null}function Ma(e,t){const r=Pb(e,t,!1,0);return r===null?e:r}var Ab=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):fr(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},ZS=class extends Ab{constructor(){super(),this.h=!0,this.i=new ai}},Tb;function Tp(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Rp="$$ref$$",YS={[Rp]:-1};function Rb(e,t=null,r=!1){const i=[];return{jsonString:(r?Tp:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return YS;if(typeof o=="object"){if(o instanceof ke){const a=i.push(o)-1;return{[Rp]:a}}if(t)return t(n,o)}return o}),referencedBuffers:i}}function Lb(e,t,r){return JSON.parse(e,(i,s)=>{if(s){const n=s[Rp];if(typeof n=="number")return t[n];if(r&&s.$mid===1)return r.transformIncoming(s)}return s})}function Nb(e,t){return JSON.stringify(e,t)}function XS(e){return e?(t,r)=>r&&r.$mid===1?e.transformOutgoing(r):r:null}var Fb;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(Fb||(Fb={}));var Mb;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(Mb||(Mb={}));var KS=()=>{},e$=Symbol.for("rpcProtocol"),t$=Symbol.for("rpcProxy"),r$=class P0 extends he{static{Tb=e$}static{this.a=3*1e3}constructor(t,r=null,i=null){super(),this[Tb]=!0,this.b=this.B(new I),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=r,this.g=i,this.h=XS(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=_w.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new eo(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const r=this.w[t];delete this.w[t],r.resolveErr(Z0())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+P0.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+P0.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?Ma(t,this.g):t}getProxy(t){const{nid:r,sid:i}=t;return this.s[r]||(this.s[r]=this.J(r,i)),this.s[r]}J(t,r){const i={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===t$?r:s[n])};return new Proxy(Object.create(null),i)}set(t,r){return this.m[t.nid]=r,r}assertRegistered(t){for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const r=t.byteLength,i=mt.read(t,0),s=i.readUInt8(),n=i.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=Lr.deserializeRequestJSONArgs(i);this.g&&(c=Ma(c,this.g)),this.M(r,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=Lr.deserializeRequestMixedArgs(i);this.g&&(c=Ma(c,this.g)),this.M(r,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(r,n,0,"ack"),this.G(n);break}case 6:{this.N(r,n);break}case 7:{this.O(r,n,void 0);break}case 9:{let o=Lr.deserializeReplyOKJSON(i);this.g&&(o=Ma(o,this.g)),this.O(r,n,o);break}case 10:{const o=Lr.deserializeReplyOKJSONWithBuffers(i,this.g);this.O(r,n,o);break}case 8:{const o=Lr.deserializeReplyOKVSBuffer(i);this.O(r,n,o);break}case 11:{let o=Lr.deserializeReplyErrError(i);this.g&&(o=Ma(o,this.g)),this.P(r,n,o);break}case 12:{this.P(r,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,r,i,s,n,o){this.f?.logIncoming(t,r,1,`receiveRequest ${ou(i)}.${s}(`,n);const a=String(r);let c,l;if(o){const h=new ft;n.push(h.token),c=this.Q(i,s,n),l=()=>h.cancel()}else c=this.Q(i,s,n),l=KS;this.u[a]=l;const u=Lr.serializeAcknowledged(r);this.f?.logOutgoing(u.byteLength,r,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const p=Lr.serializeReplyOK(r,h,this.h);this.f?.logOutgoing(p.byteLength,r,1,"reply:",h),this.c.send(p)},h=>{delete this.u[a];const p=Lr.serializeReplyErr(r,h);this.f?.logOutgoing(p.byteLength,r,1,"replyErr:",h),this.c.send(p)})}N(t,r){this.f?.logIncoming(t,r,1,"receiveCancel");const i=String(r);this.u[i]?.()}O(t,r,i){this.f?.logIncoming(t,r,0,"receiveReply:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(i)}P(t,r,i){this.f?.logIncoming(t,r,0,"receiveReplyErr:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),n.resolveErr(o)}Q(t,r,i){try{return Promise.resolve(this.S(t,r,i))}catch(s){return Promise.reject(s)}}S(t,r,i){const s=this.m[t];if(!s)throw new Error("Unknown actor "+ou(t));const n=s[r];if(typeof n!="function")throw new Error("Unknown method "+r+" on actor "+ou(t));return n.apply(s,i)}U(t,r,i){if(this.j)return new ZS;let s=null;if(i.length>0&&Xe.isCancellationToken(i[i.length-1])&&(s=i.pop()),s&&s.isCancellationRequested)return Promise.reject(Z0());const n=Lr.serializeRequestArguments(i,this.h),o=++this.t,a=String(o),c=new Ab,l=new we;s&&l.add(s.onCancellationRequested(()=>{const h=Lr.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new i$(c,l),this.F(o);const u=Lr.serializeRequest(o,t,r,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${ou(t)}.${r}(`,i),this.c.send(u),c}},i$=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},mt=class A0{static alloc(t,r,i){const s=new A0(ke.alloc(i+1+4),0);return s.writeUInt8(t),s.writeUInt32(r),s}static read(t,r){return new A0(t,r)}get buffer(){return this.a}constructor(t,r){this.a=t,this.b=r}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t);return this.b+=t,r}static sizeMixedArray(t){let r=0;r+=1;for(let i=0,s=t.length;i<s;i++){const n=t[i];switch(r+=1,n.type){case 1:r+=this.sizeLongString(n.value);break;case 2:r+=this.sizeVSBuffer(n.value);break;case 3:r+=this.sizeUInt32,r+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)r+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return r}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let r=0,i=t.length;r<i;r++){const s=t[r];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const r=new Array(t);for(let i=0;i<t;i++)switch(this.readUInt8()){case 1:r[i]=this.readLongString();break;case 2:r[i]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());r[i]=new Sr(Lb(o,a,null));break}case 4:r[i]=void 0;break}return r}},Ob;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(Ob||(Ob={}));var Lr=class{static a(e){for(let t=0,r=e.length;t<r;t++)if(e[t]instanceof ke||e[t]instanceof Sr||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n instanceof ke)r[i]={type:2,value:n};else if(typeof n>"u")r[i]={type:4};else if(n instanceof Sr){const{jsonString:o,referencedBuffers:a}=Rb(n.value,t);r[i]={type:3,value:ke.fromString(o),buffers:a}}else r[i]={type:1,value:ke.fromString(Nb(n,t))}}return{type:1,args:r}}return{type:0,args:Nb(e,t)}}static serializeRequest(e,t,r,i,s){switch(i.type){case 0:return this.b(e,t,r,i.args,s);case 1:return this.c(e,t,r,i.args,s)}}static b(e,t,r,i,s){const n=ke.fromString(r),o=ke.fromString(i);let a=0;a+=mt.sizeUInt8(),a+=mt.sizeShortString(n),a+=mt.sizeLongString(o);const c=mt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readLongString();return{rpcId:t,method:r,args:JSON.parse(i)}}static c(e,t,r,i,s){const n=ke.fromString(r);let o=0;o+=mt.sizeUInt8(),o+=mt.sizeShortString(n),o+=mt.sizeMixedArray(i);const a=mt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(i),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readMixedArray(),s=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=i[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:r,args:s}}static serializeAcknowledged(e){return mt.alloc(5,e,0).buffer}static serializeCancel(e){return mt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,r){if(typeof t>"u")return this.d(e);if(t instanceof ke)return this.e(e,t);if(t instanceof Sr){const{jsonString:i,referencedBuffers:s}=Rb(t.value,r,!0);return this.g(e,i,s)}else return this.f(e,Tp(t,r))}static d(e){return mt.alloc(7,e,0).buffer}static e(e,t){let r=0;r+=mt.sizeVSBuffer(t);const i=mt.alloc(8,e,r);return i.writeVSBuffer(t),i.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const r=ke.fromString(t);let i=0;i+=mt.sizeLongString(r);const s=mt.alloc(9,e,i);return s.writeLongString(r),s.buffer}static g(e,t,r){const i=ke.fromString(t);let s=0;s+=mt.sizeUInt32,s+=mt.sizeLongString(i);for(const o of r)s+=mt.sizeVSBuffer(o);const n=mt.alloc(10,e,s);n.writeUInt32(r.length),n.writeLongString(i);for(const o of r)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const r=e.readUInt32(),i=e.readLongString(),s=[];for(let n=0;n<r;++n)s.push(e.readVSBuffer());return new Sr(Lb(i,s,t))}static serializeReplyErr(e,t){const r=t?Tp(Ea(t),null):void 0;if(typeof r!="string")return this.h(e);const i=ke.fromString(r);let s=0;s+=mt.sizeLongString(i);const n=mt.alloc(11,e,s);return n.writeLongString(i),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return mt.alloc(12,e,0).buffer}},Ub;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(Ub||(Ub={}));var Hb;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(Hb||(Hb={}));function Lp(e,t){return t&&(e.stack||e.stacktrace)?d(108,null,_b(e),jb(e.stack)||jb(e.stacktrace)):_b(e)}function jb(e){return Array.isArray(e)?e.join(`
`):e}function _b(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(109,null,e.message):e.message||d(110,null)}function Qs(e=null,t=!1){if(!e)return d(111,null);if(Array.isArray(e)){const r=bt(e),i=Qs(r[0],t);return r.length>1?d(112,null,i,r.length):i}if(Ce(e))return e;if(e.detail){const r=e.detail;if(r.error)return Lp(r.error,t);if(r.exception)return Lp(r.exception,t)}return e.stack?Lp(e,t):e.message?e.message:d(113,null)}function Oa(e){return Np(e,0)}function Np(e,t){switch(typeof e){case"object":return e===null?Ai(349,t):Array.isArray(e)?n$(e,t):o$(e,t);case"string":return Bb(e,t);case"boolean":return s$(e,t);case"number":return Ai(e,t);case"undefined":return Ai(937,t);default:return Ai(617,t)}}function Ai(e,t){return(t<<5)-t+e|0}function s$(e,t){return Ai(e?433:863,t)}function Bb(e,t){t=Ai(149417,t);for(let r=0,i=e.length;r<i;r++)t=Ai(e.charCodeAt(r),t);return t}function n$(e,t){return t=Ai(104579,t),e.reduce((r,i)=>Np(i,r),t)}function o$(e,t){return t=Ai(181387,t),Object.keys(e).sort().reduce((r,i)=>(r=Bb(i,r),Np(e[i],r)),t)}var zb;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(zb||(zb={}));function Fp(e,t,r=32){const i=r-t,s=~((1<<i)-1);return(e<<t|(s&e)>>>i)>>>0}function Ua(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""):(e>>>0).toString(16).padStart(t/4,"0")}var hF=class sE{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const r=t.length;if(r===0)return;const i=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(lu(o))if(a+1<r){const l=t.charCodeAt(a+1);uu(l)?(a++,c=$p(o,l)):c=65533}else{n=o;break}else uu(o)&&(c=65533);if(s=this.w(i,s,c),a++,a<r)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,r,i){return i<128?t[r++]=i:i<2048?(t[r++]=192|(i&1984)>>>6,t[r++]=128|(i&63)>>>0):i<65536?(t[r++]=224|(i&61440)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0):(t[r++]=240|(i&1835008)>>>18,t[r++]=128|(i&258048)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0),r>=64&&(this.y(),r-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),r}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),Ua(this.h)+Ua(this.l)+Ua(this.m)+Ua(this.n)+Ua(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=sE.g,r=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,r.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,Fp(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let i=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Fp(i,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=Fp(s,30),s=i,i=u;this.h=this.h+i&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},Wb;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(Wb||(Wb={}));function Mp(...e){switch(e.length){case 1:return d(1700,null,e[0]);case 2:return d(1701,null,e[0],e[1]);case 3:return d(1702,null,e[0],e[1],e[2]);default:return}}var a$=d(1703,null),c$=d(1704,null),Ha=class T0{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw Yf(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const r=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:r})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const r=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:r})}else this.h(126)?this.k(9):this.l(Mp("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Mp("&&"));break;case 124:this.h(124)?this.k(16):this.l(Mp("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const r=this.d,i=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:i};this.g.push({offset:r,lexeme:i,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const r=this.c.substring(this.d,this.e),i=T0.b.get(r);i?this.k(i):this.f.push({type:17,lexeme:r,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(a$);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,r=!1,i=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(c$);return}const n=this.c.charCodeAt(t);if(r)r=!1;else if(n===47&&!i){t++;break}else n===91?i=!0:n===92?r=!0:n===93&&(i=!1);t++}for(;t<this.c.length&&T0.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Vr;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(r){return r[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Vr||(Vr={}));var fu=W("instantiationService");function l$(e,t,r){t[Vr.DI_TARGET]===t?t[Vr.DI_DEPENDENCIES].push({id:e,index:r}):(t[Vr.DI_DEPENDENCIES]=[{id:e,index:r}],t[Vr.DI_TARGET]=t)}function W(e){if(Vr.serviceIds.has(e))return Vr.serviceIds.get(e);const t=function(r,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");l$(t,r,s)};return t.toString=()=>e,Vr.serviceIds.set(e,t),t}function dF(e){return e}var Nt=new Map;Nt.set("false",!1),Nt.set("true",!0),Nt.set("isMac",_r),Nt.set("isLinux",ss),Nt.set("isWindows",pr),Nt.set("isWeb",tu),Nt.set("isMacNative",_r&&!tu),Nt.set("isEdge",Rw),Nt.set("isFirefox",C3),Nt.set("isChrome",fp),Nt.set("isSafari",I3);var u$=Object.prototype.hasOwnProperty,Vb;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(Vb||(Vb={}));var h$={regexParsingWithErrorRecovery:!0},d$=d(1680,null),f$=d(1681,null),p$=d(1682,null),qb=d(1683,null),g$=d(1684,null),m$=d(1685,null),v$=d(1686,null),w$=d(1687,null),Gb=class Ul{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=h$){this.k=t,this.d=new Ha,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:d$,offset:0,lexeme:"",additionalInfo:f$});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const i=this.D(),s=i.type===17?m$:void 0;throw this.h.push({message:g$,offset:i.offset,lexeme:Ha.getLexeme(i),additionalInfo:s}),Ul.c}return r}catch(r){if(r!==Ul.c)throw r;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const r=this.o();t.push(r)}return t.length===1?t[0]:At.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const r=this.s();t.push(r)}return t.length===1?t[0]:At.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),er.INSTANCE;case 12:return this.z(),wr.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,qb),r?.negate()}case 17:return this.z(),Ba.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),At.true();case 12:return this.z(),At.false();case 0:{this.z();const r=this.l();return this.A(1,qb),r}case 17:{const r=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return zp.create(r,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let p=0;p<s.lexeme.length;p++)s.lexeme.charCodeAt(p)===40?a++:s.lexeme.charCodeAt(p)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let p=0;p<o.lexeme.length;p++)o.lexeme.charCodeAt(p)===40?a++:s.lexeme.charCodeAt(p)===41&&a--}if(a<0)break;n.push(Ha.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return At.regex(r,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!cu(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return zp.create(r,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,p$);const s=this.u();return At.notIn(r,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return At.equals(r,s);switch(s){case"true":return At.has(r);case"false":return At.not(r);default:return At.equals(r,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return At.notEquals(r,s);switch(s){case"true":return At.not(r);case"false":return At.has(r);default:return At.notEquals(r,s)}}case 5:return this.z(),_p.create(r,this.u());case 6:return this.z(),Bp.create(r,this.u());case 7:return this.z(),Hp.create(r,this.u());case 8:return this.z(),jp.create(r,this.u());case 13:return this.z(),At.in(r,this.u());default:return At.has(r)}}case 20:throw this.h.push({message:v$,offset:t.offset,lexeme:"",additionalInfo:w$}),Ul.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,r){if(this.C(t))return this.z();throw this.B(r,this.D())}B(t,r,i){const s=d(1688,null,t,Ha.getLexeme(r)),n=r.offset,o=Ha.getLexeme(r);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:i}),Ul.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},At=class{static false(){return er.INSTANCE}static true(){return wr.INSTANCE}static has(e){return _a.create(e)}static equals(e,t){return Op.create(e,t)}static notEquals(e,t){return Up.create(e,t)}static regex(e,t){return zp.create(e,t)}static in(e,t){return Jb.create(e,t)}static notIn(e,t){return Qb.create(e,t)}static not(e){return Ba.create(e)}static and(...e){return Yb.create(e,null,!0)}static or(...e){return Wp.create(e,null,!0)}static greater(e,t){return Hp.create(e,t)}static greaterEquals(e,t){return jp.create(e,t)}static smaller(e,t){return _p.create(e,t)}static smallerEquals(e,t){return Bp.create(e,t)}static{this.c=new Gb({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function b$(e){const t=new Gb({regexParsingWithErrorRecovery:!1});return e.map(r=>(t.parse(r),t.lexingErrors.length>0?t.lexingErrors.map(i=>({errorMessage:i.additionalInfo?d(1689,null,i.additionalInfo):d(1690,null),offset:i.offset,length:i.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function ja(e,t){return e.cmp(t)}var er=class nE{static{this.INSTANCE=new nE}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return wr.INSTANCE}},wr=class oE{static{this.INSTANCE=new oE}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return er.INSTANCE}},_a=class aE{static create(t,r=null){const i=Nt.get(t);return typeof i=="boolean"?i?wr.INSTANCE:er.INSTANCE:new aE(t,r)}constructor(t,r){this.key=t,this.c=r,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:Xb(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Nt.get(this.key);return typeof t=="boolean"?t?wr.INSTANCE:er.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=Ba.create(this.key,this)),this.c}},Op=class cE{static create(t,r,i=null){if(typeof r=="boolean")return r?_a.create(t,i):Ba.create(t,i);const s=Nt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?wr.INSTANCE:er.INSTANCE:new cE(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Nt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?wr.INSTANCE:er.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Up.create(this.c,this.d,this)),this.f}},Jb=class lE{static create(t,r){return new lE(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.f),i=t.getValue(this.d);return Array.isArray(r)?r.includes(i):typeof i=="string"&&typeof r=="object"&&r!==null?u$.call(r,i):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=Qb.create(this.d,this.f)),this.c}},Qb=class uE{static create(t,r){return new uE(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=11,this.c=Jb.create(t,r)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Up=class hE{static create(t,r,i=null){if(typeof r=="boolean")return r?Ba.create(t,i):_a.create(t,i);const s=Nt.get(t);return typeof s=="boolean"?r===(s?"true":"false")?er.INSTANCE:wr.INSTANCE:new hE(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Nt.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?er.INSTANCE:wr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=Op.create(this.c,this.d,this)),this.f}},Ba=class dE{static create(t,r=null){const i=Nt.get(t);return typeof i=="boolean"?i?er.INSTANCE:wr.INSTANCE:new dE(t,r)}constructor(t,r){this.c=t,this.d=r,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:Xb(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Nt.get(this.c);return typeof t=="boolean"?t?er.INSTANCE:wr.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=_a.create(this.c,this)),this.d}};function pu(e,t){if(typeof e=="string"){const r=parseFloat(e);isNaN(r)||(e=r)}return typeof e=="string"||typeof e=="number"?t(e):er.INSTANCE}var Hp=class fE{static create(t,r,i=null){return pu(r,s=>new fE(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=Bp.create(this.c,this.d,this)),this.f}},jp=class pE{static create(t,r,i=null){return pu(r,s=>new pE(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=_p.create(this.c,this.d,this)),this.f}},_p=class gE{static create(t,r,i=null){return pu(r,s=>new gE(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=jp.create(this.c,this.d,this)),this.f}},Bp=class mE{static create(t,r,i=null){return pu(r,s=>new mE(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:Zs(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Hp.create(this.c,this.d,this)),this.f}},zp=class vE{static create(t,r){return new vE(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return r<i?-1:r>i?1:0}equals(t){if(t.type===this.type){const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return this.d===t.d&&r===i}return!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=y$.create(this)),this.c}},y$=class R0{static create(t){return new R0(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new R0(this.c.map(t))}negate(){return this.c}};function Zb(e){let t=null;for(let r=0,i=e.length;r<i;r++){const s=e[r].substituteConstants();if(e[r]!==s&&t===null){t=[];for(let n=0;n<r;n++)t[n]=e[n]}t!==null&&(t[r]=s)}return t===null?e:t}var Yb=class pa{static create(t,r,i){return pa.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=ja(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=Zb(this.expr);return t===this.expr?this:pa.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].evaluate(t))return!1;return!0}static d(t,r,i){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return er.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return wr.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(ja);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=Wp.create(o.expr.map(u=>pa.create([u,a],null,i)),null,c);l&&(s.push(l),s.sort(ja))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return er.INSTANCE;if(s.length===1)return s[0]}return new pa(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new pa(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());this.c=Wp.create(t,this,!0)}return this.c}},Wp=class Fn{static create(t,r,i){return Fn.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=ja(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=Zb(this.expr);return t===this.expr?this:Fn.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(this.expr[r].evaluate(t))return!0;return!1}static d(t,r,i){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return wr.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return er.INSTANCE;s.sort(ja)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return wr.INSTANCE;if(s.length===1)return s[0]}return new Fn(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new Fn(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());for(;t.length>1;){const r=t.shift(),i=t.shift(),s=[];for(const n of Kb(r))for(const o of Kb(i))s.push(Yb.create([n,o],null,!1));t.unshift(Fn.create(s,null,!1))}this.c=Fn.create(t,this,!0)}return this.c}},H=class Nf extends _a{static{this.d=[]}static all(){return Nf.d.values()}constructor(t,r,i){super(t,null),this.f=r,typeof i=="object"?Nf.d.push({...i,key:t}):i!==!0&&Nf.d.push({key:t,description:i,type:r!=null?typeof r:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Op.create(this.key,t)}notEqualsTo(t){return Up.create(this.key,t)}},x$=W("contextKeyService");function Xb(e,t){return e<t?-1:e>t?1:0}function Zs(e,t,r,i){return e<r?-1:e>r?1:t<i?-1:t>i?1:0}function Kb(e){return e.type===9?e.expr:[e]}var Ue=W("logService"),za=W("loggerService");function E$(e){return us(e)}var Re;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(Re||(Re={}));var k$=Re.Info;function S$(e,t,r){switch(t){case Re.Trace:e.trace(r);break;case Re.Debug:e.debug(r);break;case Re.Info:e.info(r);break;case Re.Warning:e.warn(r);break;case Re.Error:e.error(r);break;case Re.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function io(e,t=!1){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof Error&&(s=Qs(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}r+=(i>0?" ":"")+s}return r}var ey=class extends he{constructor(){super(...arguments),this.b=k$,this.c=this.B(new I),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==Re.Off&&this.b<=e}},ty=class extends ey{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.f(Re.Trace)&&this.g(Re.Trace,io([e,...t],!0))}debug(e,...t){this.f(Re.Debug)&&this.g(Re.Debug,io([e,...t]))}info(e,...t){this.f(Re.Info)&&this.g(Re.Info,io([e,...t]))}warn(e,...t){this.f(Re.Warning)&&this.g(Re.Warning,io([e,...t]))}error(e,...t){if(this.f(Re.Error))if(e instanceof Error){const r=Array.prototype.slice.call(arguments);r[0]=e.stack,this.g(Re.Error,io(r))}else this.g(Re.Error,io([e,...t]))}flush(){}},$$=class extends ey{constructor(e){super(),this.g=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.g)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const r of this.g)r.trace(e,...t)}debug(e,...t){for(const r of this.g)r.debug(e,...t)}info(e,...t){for(const r of this.g)r.info(e,...t)}warn(e,...t){for(const r of this.g)r.warn(e,...t)}error(e,...t){for(const r of this.g)r.error(e,...t)}flush(){for(const e of this.g)e.flush()}dispose(){for(const e of this.g)e.dispose();super.dispose()}},C$=class extends he{constructor(e,t,r){if(super(),this.h=e,this.j=t,this.b=new Lt,this.c=this.B(new I),this.onDidChangeLoggers=this.c.event,this.f=this.B(new I),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new I),this.onDidChangeVisibility=this.g.event,r)for(const i of r)this.b.set(i.resource,{logger:void 0,info:i})}m(e){return Ce(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.m(e)?.logger}createLogger(e,t){const r=this.n(e),i=Ce(e)?e:t?.id??Oa(r.toString()).toString(16);let s=this.b.get(r)?.logger;const n=t?.logLevel==="always"?Re.Trace:t?.logLevel;s||(s=this.s(r,n??this.getLogLevel(r)??this.h,{...t,id:i}));const o={logger:s,info:{resource:r,id:i,logLevel:n,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(r,o),s}n(e){return Ce(e)?Jt(this.j,`${e}.log`):e}setLogLevel(e,t){if(y.isUri(e)){const r=e,i=t,s=this.b.get(r);s&&i!==s.info.logLevel&&(s.info.logLevel=i===this.h?void 0:i,s.logger?.setLevel(i),this.b.set(s.info.resource,s),this.f.fire([r,i]))}else{this.h=e;for(const[r,i]of this.b.entries())this.b.get(r)?.info.logLevel===void 0&&i.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(e,t){const r=this.m(e);r&&t!==!r.info.hidden&&(r.info.hidden=!t,this.b.set(r.info.resource,r),this.g.fire([r.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.h}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.c.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.c.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function I$(e){switch(e){case Re.Trace:return"trace";case Re.Debug:return"debug";case Re.Info:return"info";case Re.Warning:return"warn";case Re.Error:return"error";case Re.Off:return"off"}}function D$(e){switch(e){case"trace":return Re.Trace;case"debug":return Re.Debug;case"info":return Re.Info;case"warn":return Re.Warning;case"error":return Re.Error;case"critical":return Re.Error;case"off":return Re.Off}}var fF=new H("logLevel",I$(Re.Info)),Ti=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}},ry=[],iy;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(iy||(iy={}));function Ve(e,t,r){t instanceof Ti||(t=new Ti(t,[],!!r)),ry.push([e,t])}function P$(){return ry}var Vp=class{constructor(...e){this.a=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this.a.get(e);return this.a.set(e,t),r}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Wt=W("IExtHostInitDataService"),A$=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},sy=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const r of this.a.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let r=this.a.get(t);return r||(r=new A$(t,e),this.a.set(t,r)),r}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,r]of this.a)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const r=new Set([e]),i=this.c(t,r);if(i)return i}}c(e,t){for(const[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const s=this.c(i,t);if(s)return s;t.delete(r)}}},T$=!1,ny=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},R$=class L0{constructor(t=new Vp,r=!1,i,s=T$){this.i=t,this.j=r,this.k=i,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(fu,this),this._globalGraph=s?i?._globalGraph??new sy(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Ii(this.h),this.h.clear();for(const t of this.g)Hk(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,r){this.m();const i=this,s=new class extends L0{dispose(){i.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),r?.add(s),s}invokeFunction(t,...r){this.m();const i=qp.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw Yf("service accessor is only valid during the invocation of its target method");const a=this.s(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...r)}finally{s=!0,i.stop()}}createInstance(t,...r){this.m();let i,s;return t instanceof Ti?(i=qp.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(r),i)):(i=qp.traceCreation(this.l,t),s=this.o(t,r,i)),i.stop(),s}o(t,r=[],i){const s=Vr.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,i);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:r.length;if(r.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${r.length} static arguments`);const a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return Reflect.construct(t,r.concat(n))}q(t,r){if(this.i.get(t)instanceof Ti)this.i.set(t,r);else if(this.k)this.k.q(t,r);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const r=this.i.get(t);return!r&&this.k?this.k.r(t):r}s(t,r){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const i=this.r(t);return i instanceof Ti?this.u(t,i,r.branch(t,!0)):(r.branch(t,!1),i)}u(t,r,i){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,r,i)}finally{this.t.delete(t)}}v(t,r,i){const s=new sy(c=>c.id.toString());let n=0;const o=[{id:t,desc:r,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new ny(s);for(const l of Vr.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Ti){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new ny(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Ti){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,r,i=[],s,n){if(this.i.get(t)instanceof Ti)return this.x(t,r,i,s,n,this.g);if(this.k)return this.k.w(t,r,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}x(t,r,i=[],s,n,o){if(s){const a=new L0(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new QS(()=>{const u=a.o(r,i,n);for(const[h,p]of c){const f=u[h];if(typeof f=="function")for(const m of p)m.disposable=f.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new $a,c.set(h,m)),(x,S,C)=>{if(l.isInitialized)return l.value[h](x,S,C);{const D={listener:[x,S,C],disposable:void 0},M=m.push(D);return ae(()=>{M(),D.disposable?.dispose()})}}}if(h in u)return u[h];const p=l.value;let f=p[h];return typeof f!="function"||(f=f.bind(p),u[h]=f),f},set(u,h,p){return l.value[h]=p,!0},getPrototypeOf(u){return r.prototype}})}else{const a=this.o(r,i,n);return o.add(a),a}}y(t,r){if(r&&console.warn(t),this.j)throw new Error(t)}},oy;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(oy||(oy={}));var qp=class xi{static{this.all=new Set}static{this.c=new class extends xi{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,r){return t?new xi(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):xi.c}static traceCreation(t,r){return t?new xi(1,r.name):xi.c}static{this.f=0}constructor(t,r){this.type=t,this.name=r,this.g=Date.now(),this.h=[]}branch(t,r){const i=new xi(3,t.toString());return this.h.push([t,r,i]),i}stop(){const t=Date.now()-this.g;xi.f+=t;let r=!1;function i(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){r=!0,a.push(`${c}CREATES -> ${l}`);const p=i(n+1,h);p&&a.push(p)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${xi.f.toFixed(2)}ms)`];(t>2||r)&&xi.all.add(s.join(`
`))}},Me=W("IExtHostRpcService"),L$=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},gu=W("IURITransformerService"),N$=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},F$=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),r=this.b.charCodeAt(this.c);return t-r}value(){return this.b[this.c]}},M$=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?kp(e,this.b,0,e.length,this.c,this.d):Ra(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},ay=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const r=this.b.charCodeAt(t);if(!(r===47||this.f&&r===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?kp(e,this.b,0,e.length,this.d,this.e):Ra(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},cy;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(cy||(cy={}));var ly=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new ay(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return ib(e,this.c.scheme);if(this.d[this.e]===2)return ib(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return Gs(e,this.c.query);if(this.d[this.e]===5)return Gs(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},mu=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},uy;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(uy||(uy={}));var ps=class Hl{static forUris(t=()=>!1,r=()=>!1){return new Hl(new ly(t,r))}static forPaths(t=!1){return new Hl(new ay(void 0,!t))}static forStrings(){return new Hl(new F$)}static forConfigKeys(){return new Hl(new M$)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,r){if(r){const i=r.slice(0);X0(i);for(const s of i)this.set(s,t)}else{const i=t.slice(0);X0(i);for(const s of i)this.set(s[0],s[1])}}set(t,r){const i=this.b.reset(t);let s;this.c||(this.c=new mu,this.c.segment=i.value());const n=[];for(s=this.c;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new mu,s.left.segment=i.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new mu,s.right.segment=i.value()),n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new mu,s.mid.segment=i.value()),n.push([0,s]),s=s.mid;else break}const o=s.value;s.value=r,s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const r=this.b.reset(t);let i=this.c;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(t){const r=this.d(t);return!(r?.value===void 0&&r?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,r){const i=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else break}if(n){if(r?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const r=this.b.reset(t);let i=this.c,s;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(t){return this.g(t,!1)}g(t,r){const i=this.b.reset(t);let s=this.c;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this.h(s.mid):r?s.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[r,i]of this)t(i,r)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const r=[];return this.j(t,r),r[Symbol.iterator]()}j(t,r){t&&(t.left&&this.j(t.left,r),t.value&&r.push([t.key,t.value]),t.mid&&this.j(t.mid,r),t.right&&this.j(t.right,r))}_isBalanced(){const t=r=>{if(!r)return!0;const i=r.balanceFactor();return i<-1||i>1?!1:t(r.left)&&t(r.right)};return t(this.c)}};function it(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,i])=>{t[r]=i&&typeof i=="object"?it(i):i}),t}function hy(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const r=t.shift();Object.freeze(r);for(const i in r)if(dy.call(r,i)){const s=r[i];typeof s=="object"&&!Object.isFrozen(s)&&!fS(s)&&t.push(s)}}return e}var dy=Object.prototype.hasOwnProperty;function so(e,t){return Gp(e,t,new Set)}function Gp(e,t,r){if(gt(e))return e;const i=t(e);if(typeof i<"u")return i;if(Array.isArray(e)){const s=[];for(const n of e)s.push(Gp(n,t,r));return s}if(pt(e)){if(r.has(e))throw new Error("Cannot clone recursive data-structure");r.add(e);const s={};for(const n in e)dy.call(e,n)&&(s[n]=Gp(e[n],t,r));return r.delete(e),s}return e}function Ys(e,t,r=!0){return pt(e)?(pt(t)&&Object.keys(t).forEach(i=>{i in e?r&&(pt(e[i])&&pt(t[i])?Ys(e[i],t[i],r):e[i]=t[i]):e[i]=t[i]}),e):t}function qr(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let r,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!qr(e[r],t[r]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const n=[];for(i in t)n.push(i);if(n.sort(),!qr(s,n))return!1;for(r=0;r<s.length;r++)if(!qr(e[s[r]],t[s[r]]))return!1}return!0}function O$(e){const t=new Set;return JSON.stringify(e,(r,i)=>{if(pt(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function fy(e,t){const r=Object.create(null);for(const[i,s]of Object.entries(e))t(i,s)&&(r[i]=s);return r}var U$=class{constructor(){this.a=0}getNext(){return this.a++}},Wa;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Wa||(Wa={})),function(e){const t="error",r="warning",i="warn",s="info",n="ignore";function o(c){return c?ls(t,c)?e.Error:ls(r,c)||ls(i,c)?e.Warning:ls(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return r;case e.Info:return s;default:return n}}e.toString=a}(Wa||(Wa={}));var vt=Wa,H$=vt,pF=W("notificationService"),py;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(py||(py={}));var gy;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(gy||(gy={}));var my;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(my||(my={}));var Jp=W("contextService");function j$(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.uri)}function _$(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.configPath)}var vy;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(vy||(vy={}));var B$=class{constructor(e,t,r,i,s){this.h=e,this.j=r,this.k=i,this.l=s,this.c=ps.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=ps.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},wy=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Jt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function Qp(e){return new wy({uri:e,index:0,name:Dp(e)},{uri:e.toString()})}var by="code-workspace",gF=`.${by}`,mF=[{name:d(2503,null),extensions:[by]}],z$=class{constructor(){this.a=new Set(Object.keys(V)),this.b=new Map,this.extUri=new Na(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},no=W("IExtHostFileSystemInfo"),$r=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let e;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?e=crypto.getRandomValues.bind(crypto):e=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const t=new Uint8Array(16),r=[];for(let i=0;i<256;i++)r.push(i.toString(16).padStart(2,"0"));return function(){e(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let s=0,n="";return n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n}}(),Zp=Object.freeze({create:e=>Vn(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>Zp.split(e).filter(t=>!t.startsWith("#"))}),vF=new Uint32Array(10),yy;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(yy||(yy={}));var xy;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(xy||(xy={}));var Ey;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(Ey||(Ey={}));var wF=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),bF=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),yF=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),xF=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function ky(...e){return function(t,r){for(let i=0,s=e.length;i<s;i++){const n=e[i](t,r);if(n)return n}return null}}var EF=$y.bind(void 0,!1),Sy=$y.bind(void 0,!0);function $y(e,t,r){if(!r||r.length<t.length)return null;let i;return e?i=Sp(r,t):i=r.indexOf(t)===0,i?t.length>0?[{start:0,end:t.length}]:[]:null}function W$(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return r===-1?null:[{start:r,end:r+e.length}]}function V$(e,t){return Yp(e.toLowerCase(),t.toLowerCase(),0,0)}function Yp(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]===t[i]){let s=null;return(s=Yp(e,t,r+1,i+1))?Iy({start:i,end:i+1},s):null}return Yp(e,t,r,i+1)}function Xp(e){return 97<=e&&e<=122}function vu(e){return 65<=e&&e<=90}function Kp(e){return 48<=e&&e<=57}function q$(e){return e===32||e===9||e===10||e===13}var G$=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>G$.add(e.charCodeAt(0)));function Cy(e){return Xp(e)||vu(e)||Kp(e)}function Iy(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function Dy(e,t){for(let r=t;r<e.length;r++){const i=e.charCodeAt(r);if(vu(i)||Kp(i)||r>0&&!Cy(e.charCodeAt(r-1)))return r}return e.length}function eg(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]!==t[i].toLowerCase())return null;{let s=null,n=i+1;for(s=eg(e,t,r+1,i+1);!s&&(n=Dy(t,n))<t.length;)s=eg(e,t,r+1,n),n++;return s===null?null:Iy({start:i,end:i+1},s)}}function J$(e){let t=0,r=0,i=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),vu(n)&&t++,Xp(n)&&r++,Cy(n)&&i++,Kp(n)&&s++;const o=t/e.length,a=r/e.length,c=i/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function Q$(e){const{upperPercent:t,lowerPercent:r}=e;return r===0&&t>.6}function Z$(e){const{upperPercent:t,lowerPercent:r,alphaPercent:i,numericPercent:s}=e;return r>.2&&t<.8&&i>.6&&s<.2}function Y$(e){let t=0,r=0,i=0,s=0;for(let n=0;n<e.length;n++)i=e.charCodeAt(n),vu(i)&&t++,Xp(i)&&r++,q$(i)&&s++;return(t===0||r===0)&&s===0?e.length<=30:t<=5}function Py(e,t){if(!t||(t=t.trim(),t.length===0)||!Y$(e))return null;t.length>60&&(t=t.substring(0,60));const r=J$(t);if(!Z$(r)){if(!Q$(r))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&(i=eg(e,t,0,s))===null;)s=Dy(t,s+1);return i}var kF=ky(Sy,Py,W$),SF=ky(Sy,Py,V$),$F=new rp(1e4),wu=128;function tg(){const e=[],t=[];for(let r=0;r<=wu;r++)t[r]=0;for(let r=0;r<=wu;r++)e.push(t.slice(0));return e}function Ay(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}var CF=Ay(2*wu),IF=Ay(2*wu),DF=tg(),PF=tg(),AF=tg(),Ty;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(Ty||(Ty={}));var Ry;(function(e){e.Default=[-100,0];function t(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}e.isDefault=t})(Ry||(Ry={}));var TF=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},rg=Object.create(null);function g(e,t){if(Ce(t)){const r=rg[t];if(r===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=r}return rg[e]=t,{id:e}}function X$(){return rg}var K$={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468),goToEditingSession:g("go-to-editing-session",60469),editSession:g("edit-session",60470),codeReview:g("code-review",60471)},e2={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},ie={...K$,...e2},oo;(function(e){function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(oo||(oo={}));var Ft;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function r(p){const f=t.exec(p.id);if(!f)return r(ie.error);const[,m,w]=f,x=["codicon","codicon-"+m];return w&&x.push("codicon-modifier-"+w.substring(1)),x}e.asClassNameArray=r;function i(p){return r(p).join(" ")}e.asClassName=i;function s(p){return"."+r(p).join(".")}e.asCSSSelector=s;function n(p){return p&&typeof p=="object"&&typeof p.id=="string"&&(typeof p.color>"u"||oo.isThemeColor(p.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(p){const f=o.exec(p);if(!f)return;const[,m]=f;return{id:m}}e.fromString=a;function c(p){return{id:p}}e.fromId=c;function l(p,f){let m=p.id;const w=m.lastIndexOf("~");return w!==-1&&(m=m.substring(0,w)),f&&(m=`${m}~${f}`),{id:m}}e.modify=l;function u(p){const f=p.id.lastIndexOf("~");if(f!==-1)return p.id.substring(f+1)}e.getModifier=u;function h(p,f){return p.id===f.id&&p.color?.id===f.color?.id}e.isEqual=h})(Ft||(Ft={}));var ig=new RegExp(`\\$\\(${Ft.iconNameExpression}(?:${Ft.iconModifierExpression})?\\)`,"g"),t2=new RegExp(`(\\\\)?${ig.source}`,"g");function r2(e){return e.replace(t2,(t,r)=>r?t:`\\${t}`)}var RF=new RegExp(`\\\\${ig.source}`,"g"),LF=new RegExp(`(\\s)?(\\\\)?${ig.source}(\\s)?`,"g"),NF=new RegExp(`\\$\\(${Ft.iconNameCharacter}+\\)`,"g"),Ly;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(Ly||(Ly={}));var Ny=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw ye("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=i2(this.supportThemeIcons?r2(e):e).replace(/([ \t]+)/g,(r,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${s2(t,e)}
`,this}appendLink(e,t,r){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(e,t){const r=new RegExp(qs(t),"g");return e.replace(r,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}};function Xs(e){return e instanceof Ny?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function i2(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function s2(e,t){const r=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,i=r>=3?r+1:3;return[`${"`".repeat(i)}${t}`,e,`${"`".repeat(i)}`].join(`
`)}function n2(e){const t=[],r=e.split("|").map(s=>s.trim());e=r[0];const i=r[1];if(i){const s=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function sg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ks=sg();function Fy(e){Ks=e}var My=/[&<>"']/,o2=new RegExp(My.source,"g"),Oy=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a2=new RegExp(Oy.source,"g"),c2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uy=e=>c2[e];function Cr(e,t){if(t){if(My.test(e))return e.replace(o2,Uy)}else if(Oy.test(e))return e.replace(a2,Uy);return e}var l2=/(^|[^\[])\^/g;function et(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const i={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(l2,"$1"),r=r.replace(s,o),i},getRegex:()=>new RegExp(r,t)};return i}function Hy(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var Va={exec:()=>null};function jy(e,t){const r=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),i=r.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function qa(e,t,r){const i=e.length;if(i===0)return"";let s=0;for(;s<i;){const n=e.charAt(i-s-1);if(n===t&&!r)s++;else if(n!==t&&r)s++;else break}return e.slice(0,i-s)}function u2(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function _y(e,t,r,i){const s=t.href,n=t.title?Cr(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:r,href:s,title:n,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:r,href:s,title:n,text:Cr(o)}}function h2(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const i=r[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=i.length?s.slice(i.length):s}).join(`
`)}var bu=class{options;rules;lexer;constructor(e){this.options=e||Ks}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:qa(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=h2(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=qa(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:qa(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=qa(t[0],`
`).split(`
`),i="",s="";const n=[];for(;r.length>0;){let o=!1;const a=[];let c;for(c=0;c<r.length;c++)if(/^ {0,3}>/.test(r[c]))a.push(r[c]),o=!0;else if(!o)a.push(r[c]);else break;r=r.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");i=i?`${i}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,r.length===0)break;const p=n[n.length-1];if(p?.type==="code")break;if(p?.type==="blockquote"){const f=p,m=f.raw+`
`+r.join(`
`),w=this.blockquote(m);n[n.length-1]=w,i=i.substring(0,i.length-f.raw.length)+w.raw,s=s.substring(0,s.length-f.text.length)+w.text;break}else if(p?.type==="list"){const f=p,m=f.raw+`
`+r.join(`
`),w=this.list(m);n[n.length-1]=w,i=i.substring(0,i.length-p.raw.length)+w.raw,s=s.substring(0,s.length-f.raw.length)+w.raw,r=m.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const n=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],p=!u.trim(),f=0;if(this.options.pedantic?(f=2,l=u.trimStart()):p?f=t[1].length+1:(f=t[2].search(/[^ ]/),f=f>4?1:f,l=u.slice(f),f+=t[1].length),p&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const x=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),S=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),D=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const M=e.split(`
`,1)[0];if(h=M,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(h)||D.test(h)||x.test(h)||S.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(p||u.search(/[^ ]/)>=4||C.test(u)||D.test(u)||S.test(u))break;l+=`
`+h}!p&&!h.trim()&&(p=!0),c+=M+`
`,e=e.substring(M.length+1),u=h.slice(f)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,w;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(w=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const r=jy(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const o of i)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<r.length;o++)n.header.push({text:r[o],tokens:this.lexer.inline(r[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(jy(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Cr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const n=qa(r.slice(0,-1),"\\");if((r.length-n.length)%2===0)return}else{const n=u2(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);n&&(i=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),_y(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){const n=r[0].charAt(0);return{type:"text",raw:n,text:n}}return _y(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const n=[...i[0]].length-1;let o,a,c=n,l=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...i[0]][0].length,p=e.slice(0,n+i.index+h+a);if(Math.min(n,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Cr(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Cr(t[1]),i="mailto:"+r):(r=Cr(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Cr(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=Cr(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Cr(t[0]),{type:"text",raw:t[0],text:r}}}},d2=/^(?: *(?:\n|$))+/,f2=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,p2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ga=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,g2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,By=/(?:[*+-]|\d{1,9}[.)])/,zy=et(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,By).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ng=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,m2=/^[^\n]+/,og=/(?!\s*\])(?:\\.|[^\[\]\\])+/,v2=et(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",og).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),w2=et(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,By).getRegex(),yu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ag=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,b2=et("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ag).replace("tag",yu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Wy=et(ng).replace("hr",Ga).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yu).getRegex(),y2=et(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Wy).getRegex(),cg={blockquote:y2,code:f2,def:v2,fences:p2,heading:g2,hr:Ga,html:b2,lheading:zy,list:w2,newline:d2,paragraph:Wy,table:Va,text:m2},Vy=et("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ga).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yu).getRegex(),x2={...cg,table:Vy,paragraph:et(ng).replace("hr",Ga).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Vy).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yu).getRegex()},E2={...cg,html:et(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ag).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Va,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:et(ng).replace("hr",Ga).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zy).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},qy=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,k2=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Gy=/^( {2,}|\\)\n(?!\s*$)/,S2=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ja="\\p{P}\\p{S}",$2=et(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ja).getRegex(),C2=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,I2=et(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ja).getRegex(),D2=et("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ja).getRegex(),P2=et("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ja).getRegex(),A2=et(/\\([punct])/,"gu").replace(/punct/g,Ja).getRegex(),T2=et(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),R2=et(ag).replace("(?:-->|$)","-->").getRegex(),L2=et("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",R2).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,N2=et(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",xu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Jy=et(/^!?\[(label)\]\[(ref)\]/).replace("label",xu).replace("ref",og).getRegex(),Qy=et(/^!?\[(ref)\](?:\[\])?/).replace("ref",og).getRegex(),F2=et("reflink|nolink(?!\\()","g").replace("reflink",Jy).replace("nolink",Qy).getRegex(),lg={_backpedal:Va,anyPunctuation:A2,autolink:T2,blockSkip:C2,br:Gy,code:k2,del:Va,emStrongLDelim:I2,emStrongRDelimAst:D2,emStrongRDelimUnd:P2,escape:qy,link:N2,nolink:Qy,punctuation:$2,reflink:Jy,reflinkSearch:F2,tag:L2,text:S2,url:Va},M2={...lg,link:et(/^!?\[(label)\]\((.*?)\)/).replace("label",xu).getRegex(),reflink:et(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xu).getRegex()},ug={...lg,escape:et(qy).replace("])","~|])").getRegex(),url:et(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},O2={...ug,br:et(Gy).replace("{2,}","*").getRegex(),text:et(ug.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Eu={normal:cg,gfm:x2,pedantic:E2},Qa={normal:lg,gfm:ug,breaks:O2,pedantic:M2},en=class N0{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ks,this.options.tokenizer=this.options.tokenizer||new bu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:Eu.normal,inline:Qa.normal};this.options.pedantic?(r.block=Eu.pedantic,r.inline=Qa.pedantic):this.options.gfm&&(r.block=Eu.gfm,this.options.breaks?r.inline=Qa.breaks:r.inline=Qa.gfm),this.tokenizer.rules=r}static get rules(){return{block:Eu,inline:Qa}}static lex(t,r){return new N0(r).lex(t)}static lexInline(t,r){return new N0(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=r[r.length-1],i&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s),i=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),s=r[r.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,o,l)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let p;this.options.extensions.startInline.forEach(f=>{p=f.call({lexer:this},h),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(i=this.tokenizer.inlineText(n)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),c=!0,s=r[r.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):r.push(i);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}},ku=class{options;parser;constructor(e){this.options=e||Ks}space(e){return""}code({text:e,lang:t,escaped:r}){const i=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return i?'<pre><code class="language-'+Cr(i)+'">'+(r?s:Cr(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:Cr(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let o=0;o<e.items.length;o++){const a=e.items[o];i+=this.listitem(a)}const s=t?"ol":"ul",n=t&&r!==1?' start="'+r+'"':"";return"<"+s+n+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" "}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];r="";for(let o=0;o<n.length;o++)r+=this.tablecell(n[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),s=Hy(e);if(s===null)return i;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image({href:e,title:t,text:r}){const i=Hy(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},hg=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},tn=class F0{options;renderer;textRenderer;constructor(t){this.options=t||Ks,this.options.renderer=this.options.renderer||new ku,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new hg}static parse(t,r){return new F0(r).parse(t)}static parseInline(t,r){return new F0(r).parseInline(t)}parse(t,r=!0){let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=c||"";continue}}const o=n;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):i+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=a||"";continue}}const o=n;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},Su=class{options;constructor(e){this.options=e||Ks}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},U2=class{defaults=sg();options=this.setOptions;parse=this.parseMarkdown(en.lex,tn.parse);parseInline=this.parseMarkdown(en.lexInline,tn.parseInline);Parser=tn;Renderer=ku;TextRenderer=hg;Lexer=en;Tokenizer=bu;Hooks=Su;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(const i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{const s=i;for(const n of s.header)r=r.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)r=r.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{const s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);r=r.concat(this.walkTokens(o,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){const s=this.defaults.renderer||new ku(this.defaults);for(const n in r.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=r.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}i.renderer=s}if(r.tokenizer){const s=this.defaults.tokenizer||new bu(this.defaults);for(const n in r.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=r.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.tokenizer=s}if(r.hooks){const s=this.defaults.hooks||new Su;for(const n in r.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=r.hooks[o],c=s[o];Su.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}i.hooks=s}if(r.walkTokens){const s=this.defaults.walkTokens,n=r.walkTokens;i.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return en.lex(e,t??this.defaults)}parser(e,t){return tn.parse(e,t??this.defaults)}parseMarkdown(e,t){return(i,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let c=e(i,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Cr(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},rn=new U2;function Je(e,t){return rn.parse(e,t)}Je.options=Je.setOptions=function(e){return rn.setOptions(e),Je.defaults=rn.defaults,Fy(Je.defaults),Je},Je.getDefaults=sg,Je.defaults=Ks,Je.use=function(...e){return rn.use(...e),Je.defaults=rn.defaults,Fy(Je.defaults),Je},Je.walkTokens=function(e,t){return rn.walkTokens(e,t)},Je.parseInline=rn.parseInline,Je.Parser=tn,Je.parser=tn.parse,Je.Renderer=ku,Je.TextRenderer=hg,Je.Lexer=en,Je.lexer=en.lex,Je.Tokenizer=bu,Je.Hooks=Su,Je.parse=Je;var FF=Je.options,MF=Je.setOptions,OF=Je.use,UF=Je.walkTokens,HF=Je.parseInline,jF=tn.parse,_F=en.lex;function H2(e){return JSON.stringify(e,j2)}function Zy(e){let t=JSON.parse(e);return t=tr(t),t}function j2(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function tr(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return y.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof ke||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let r=0;r<e.length;++r)e[r]=tr(e[r],t+1);else for(const r in e)Object.hasOwnProperty.call(e,r)&&(e[r]=tr(e[r],t+1))}return e}var Ri=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),_2=/^(.+)\/(.+?)(;.+)?$/;function Yy(e,t){const r=_2.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:t?void 0:e}var rr=Symbol("unset"),B2=class{constructor(){this.a=new dg,this.b=0}get size(){return this.b}get nodes(){return this.a.children?.values()||Er.empty()}get entries(){return this.a.children?.entries()||Er.empty()}insert(e,t,r){this.d(e,i=>i._value=t,r)}mutate(e,t){this.d(e,r=>r._value=t(r._value===rr?void 0:r._value))}mutatePath(e,t){this.d(e,()=>{},r=>t(r))}delete(e){const t=this.c(e);if(!t)return;let r=t.length-1;const i=t[r].node._value;if(i!==rr){for(this.b--,t[r].node._value=rr;r>0;r--){const{node:s,part:n}=t[r];if(s.children?.size||s._value!==rr)break;t[r-1].node.children.delete(n)}return i}}*deleteRecursive(e){const t=this.c(e);if(!t)return;const r=t[t.length-1].node;for(let i=t.length-1;i>0;i--){const s=t[i-1];if(s.node.children.delete(t[i].part),s.node.children.size>0||s.node._value!==rr)break}for(const i of Xy(r))i._value!==rr&&(this.b--,yield i._value)}find(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return;t=i}return t._value===rr?void 0:t._value}hasKeyOrParent(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;if(i._value!==rr)return!0;t=i}return!1}hasKeyOrChildren(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return!0}hasKey(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return t._value!==rr}c(e){const t=[{part:"",node:this.a}];let r=0;for(const i of e){const s=t[r].node.children?.get(i);if(!s)return;t.push({part:i,node:s}),r++}return t}d(e,t,r){let i=this.a;for(const o of e){if(i.children)if(i.children.has(o))i=i.children.get(o);else{const a=new dg;i.children.set(o,a),i=a}else{const a=new dg;i.children=new Map([[o,a]]),i=a}r?.(i)}const s=i._value===rr?0:1;t(i);const n=i._value===rr?0:1;this.b+=n-s}*values(){for(const{_value:e}of Xy(this.a))e!==rr&&(yield e)}};function*Xy(e){const t=[e];for(;t.length>0;){const r=t.pop();if(yield r,r.children)for(const i of r.children.values())t.push(i)}}var dg=class{constructor(){this._value=rr}get value(){return this._value===rr?void 0:this._value}set value(e){this._value=e===void 0?rr:e}},Ir=class Mn{constructor(t,r){this.lineNumber=t,this.column=r}with(t=this.lineNumber,r=this.column){return t===this.lineNumber&&r===this.column?this:new Mn(t,r)}delta(t=0,r=0){return this.with(this.lineNumber+t,this.column+r)}equals(t){return Mn.equals(this,t)}static equals(t,r){return!t&&!r?!0:!!t&&!!r&&t.lineNumber===r.lineNumber&&t.column===r.column}isBefore(t){return Mn.isBefore(this,t)}static isBefore(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<r.column}isBeforeOrEqual(t){return Mn.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<=r.column}static compare(t,r){const i=t.lineNumber|0,s=r.lineNumber|0;if(i===s){const n=t.column|0,o=r.column|0;return n-o}return i-s}clone(){return new Mn(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Mn(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},ze=class It{constructor(t,r,i,s){t>i||t===i&&r>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=t,this.endColumn=r):(this.startLineNumber=t,this.startColumn=r,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return It.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return It.containsPosition(this,t)}static containsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<t.startColumn||r.lineNumber===t.endLineNumber&&r.column>t.endColumn)}static strictContainsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<=t.startColumn||r.lineNumber===t.endLineNumber&&r.column>=t.endColumn)}containsRange(t){return It.containsRange(this,t)}static containsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>t.endColumn)}strictContainsRange(t){return It.strictContainsRange(this,t)}static strictContainsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<=t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>=t.endColumn)}plusRange(t){return It.plusRange(this,t)}static plusRange(t,r){let i,s,n,o;return r.startLineNumber<t.startLineNumber?(i=r.startLineNumber,s=r.startColumn):r.startLineNumber===t.startLineNumber?(i=r.startLineNumber,s=Math.min(r.startColumn,t.startColumn)):(i=t.startLineNumber,s=t.startColumn),r.endLineNumber>t.endLineNumber?(n=r.endLineNumber,o=r.endColumn):r.endLineNumber===t.endLineNumber?(n=r.endLineNumber,o=Math.max(r.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new It(i,s,n,o)}intersectRanges(t){return It.intersectRanges(this,t)}static intersectRanges(t,r){let i=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=r.startLineNumber,c=r.startColumn,l=r.endLineNumber,u=r.endColumn;return i<a?(i=a,s=c):i===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),i>n||i===n&&s>o?null:new It(i,s,n,o)}equalsRange(t){return It.equalsRange(this,t)}static equalsRange(t,r){return!t&&!r?!0:!!t&&!!r&&t.startLineNumber===r.startLineNumber&&t.startColumn===r.startColumn&&t.endLineNumber===r.endLineNumber&&t.endColumn===r.endColumn}getEndPosition(){return It.getEndPosition(this)}static getEndPosition(t){return new Ir(t.endLineNumber,t.endColumn)}getStartPosition(){return It.getStartPosition(this)}static getStartPosition(t){return new Ir(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,r){return new It(this.startLineNumber,this.startColumn,t,r)}setStartPosition(t,r){return new It(t,r,this.endLineNumber,this.endColumn)}collapseToStart(){return It.collapseToStart(this)}static collapseToStart(t){return new It(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return It.collapseToEnd(this)}static collapseToEnd(t){return new It(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new It(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,r=t){return new It(t.lineNumber,t.column,r.lineNumber,r.column)}static lift(t){return t?new It(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn)}static areIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<=r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,r){if(t&&r){const n=t.startLineNumber|0,o=r.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=r.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=r.endLineNumber|0;if(l===u){const h=t.endColumn|0,p=r.endColumn|0;return h-p}return l-u}return a-c}return n-o}return(t?1:0)-(r?1:0)}static compareRangesUsingEnds(t,r){return t.endLineNumber===r.endLineNumber?t.endColumn===r.endColumn?t.startLineNumber===r.startLineNumber?t.startColumn-r.startColumn:t.startLineNumber-r.startLineNumber:t.endColumn-r.endColumn:t.endLineNumber-r.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},Ky=class{constructor(){this.a=new Map,this.b=new Map,this.c=new I,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),ae(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const r=new z2(this,e,t);return this.b.set(e,r),ae(()=>{const i=this.b.get(e);!i||i!==r||(this.b.delete(e),i.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const r=this.b.get(e);return!r||r.isResolved?null:(await r.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const r=this.b.get(e);return!!(!r||r.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},z2=class extends he{get isResolved(){return this.c}constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},e4;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(e4||(e4={}));var t4;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(t4||(t4={}));var r4;(function(e){const t=new Map;t.set(0,ie.symbolMethod),t.set(1,ie.symbolFunction),t.set(2,ie.symbolConstructor),t.set(3,ie.symbolField),t.set(4,ie.symbolVariable),t.set(5,ie.symbolClass),t.set(6,ie.symbolStruct),t.set(7,ie.symbolInterface),t.set(8,ie.symbolModule),t.set(9,ie.symbolProperty),t.set(10,ie.symbolEvent),t.set(11,ie.symbolOperator),t.set(12,ie.symbolUnit),t.set(13,ie.symbolValue),t.set(15,ie.symbolEnum),t.set(14,ie.symbolConstant),t.set(15,ie.symbolEnum),t.set(16,ie.symbolEnumMember),t.set(17,ie.symbolKeyword),t.set(27,ie.symbolSnippet),t.set(18,ie.symbolText),t.set(19,ie.symbolColor),t.set(20,ie.symbolFile),t.set(21,ie.symbolReference),t.set(22,ie.symbolCustomColor),t.set(23,ie.symbolFolder),t.set(24,ie.symbolTypeParameter),t.set(25,ie.account),t.set(26,ie.issues);function r(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=ie.symbolProperty),o}e.toIcon=r;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(n,o){let a=i.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(r4||(r4={}));var i4;(function(e){e[e.Deprecated=1]="Deprecated"})(i4||(i4={}));var s4;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(s4||(s4={}));var n4;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(n4||(n4={}));var o4;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(o4||(o4={}));var $u;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})($u||($u={}));var a4;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(a4||(a4={}));var c4;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(c4||(c4={}));var l4;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(l4||(l4={}));var u4;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(u4||(u4={}));function W2(e){return e&&y.isUri(e.uri)&&ze.isIRange(e.range)&&(ze.isIRange(e.originSelectionRange)||ze.isIRange(e.targetSelectionRange))}var h4;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(h4||(h4={}));var BF={17:d(791,null),16:d(792,null),4:d(793,null),13:d(794,null),8:d(795,null),9:d(796,null),21:d(797,null),23:d(798,null),7:d(799,null),0:d(800,null),11:d(801,null),10:d(802,null),19:d(803,null),5:d(804,null),1:d(805,null),2:d(806,null),20:d(807,null),15:d(808,null),18:d(809,null),24:d(810,null),3:d(811,null),6:d(812,null),14:d(813,null),22:d(814,null),25:d(815,null),12:d(816,null)},d4;(function(e){e[e.Deprecated=1]="Deprecated"})(d4||(d4={}));var f4;(function(e){const t=new Map;t.set(0,ie.symbolFile),t.set(1,ie.symbolModule),t.set(2,ie.symbolNamespace),t.set(3,ie.symbolPackage),t.set(4,ie.symbolClass),t.set(5,ie.symbolMethod),t.set(6,ie.symbolProperty),t.set(7,ie.symbolField),t.set(8,ie.symbolConstructor),t.set(9,ie.symbolEnum),t.set(10,ie.symbolInterface),t.set(11,ie.symbolFunction),t.set(12,ie.symbolVariable),t.set(13,ie.symbolConstant),t.set(14,ie.symbolString),t.set(15,ie.symbolNumber),t.set(16,ie.symbolBoolean),t.set(17,ie.symbolArray),t.set(18,ie.symbolObject),t.set(19,ie.symbolKey),t.set(20,ie.symbolNull),t.set(21,ie.symbolEnumMember),t.set(22,ie.symbolStruct),t.set(23,ie.symbolEvent),t.set(24,ie.symbolOperator),t.set(25,ie.symbolTypeParameter);function r(i){let s=t.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=ie.symbolProperty),s}e.toIcon=r})(f4||(f4={}));var ao=class Ms{static{this.Comment=new Ms("comment")}static{this.Imports=new Ms("imports")}static{this.Region=new Ms("region")}static fromValue(t){switch(t){case"comment":return Ms.Comment;case"imports":return Ms.Imports;case"region":return Ms.Region}return new Ms(t)}constructor(t){this.value=t}},p4;(function(e){e[e.AIGenerated=1]="AIGenerated"})(p4||(p4={}));var Cu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Cu||(Cu={}));var fg;(function(e){function t(r){return!r||typeof r!="object"?!1:typeof r.id=="string"&&typeof r.title=="string"}e.is=t})(fg||(fg={}));var co;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(co||(co={}));var Za;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Za||(Za={}));var Ya;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Ya||(Ya={}));var g4;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(g4||(g4={}));var m4;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(m4||(m4={}));var v4;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(v4||(v4={}));var zF=new Ky,WF=new Ky,w4;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(w4||(w4={}));var Iu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Iu||(Iu={}));var b4;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(b4||(b4={}));var ir;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(ir||(ir={})),function(e){function t(o,a){return a-o}e.compare=t;const r=Object.create(null);r[e.Error]=d(1978,null),r[e.Warning]=d(1979,null),r[e.Info]=d(1980,null);function i(o){return r[o]||""}e.toString=i;function s(o){switch(o){case vt.Error:return e.Error;case vt.Warning:return e.Warning;case vt.Info:return e.Info;case vt.Ignore:return e.Hint}}e.fromSeverity=s;function n(o){switch(o){case e.Error:return vt.Error;case e.Warning:return vt.Warning;case e.Info:return vt.Info;case e.Hint:return vt.Ignore}}e.toSeverity=n}(ir||(ir={}));var y4;(function(e){const t="";function r(s){return i(s,!0)}e.makeKey=r;function i(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(ir.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=i})(y4||(y4={}));var VF=W("markerService");function br(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function V2(e,t="Unreachable"){throw new Error(t)}function x4(e){if(!e()){debugger;e(),fr(new Wn("Assertion Failed"))}}var q2=class{constructor(){this.a=new Map}add(e,t){br(Ce(e)),br(pt(t)),br(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},Ht=new q2,G2=W("fileService"),sn;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(sn||(sn={}));var lo;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(lo||(lo={}));var E4;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(E4||(E4={}));var k4;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(k4||(k4={}));var me;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(me||(me={}));var S4=class wE extends Error{static create(t,r){const i=new wE(t.toString(),r);return $4(i,r),i}constructor(t,r){super(t),this.code=r}};function $4(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Du(e){if(!e)return me.Unknown;if(e instanceof S4)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return me.Unknown;switch(t[1]){case me.FileExists:return me.FileExists;case me.FileIsADirectory:return me.FileIsADirectory;case me.FileNotADirectory:return me.FileNotADirectory;case me.FileNotFound:return me.FileNotFound;case me.FileTooLarge:return me.FileTooLarge;case me.FileWriteLocked:return me.FileWriteLocked;case me.NoPermissions:return me.NoPermissions;case me.Unavailable:return me.Unavailable}return me.Unknown}function J2(e){if(e instanceof pg)return e.fileOperationResult;switch(Du(e)){case me.FileNotFound:return 1;case me.FileIsADirectory:return 0;case me.FileNotADirectory:return 9;case me.FileWriteLocked:return 5;case me.NoPermissions:return 6;case me.FileExists:return 4;case me.FileTooLarge:return 7;default:return 10}}var C4;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(C4||(C4={}));var I4;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(I4||(I4={}));var qF=class Ff{static{this.a=null}constructor(t,r){this.c=r,this.b=void 0,this.d=new dr(()=>{const i=ps.forUris(()=>this.c);return i.fill(this.rawAdded.map(s=>[s,!0])),i}),this.f=new dr(()=>{const i=ps.forUris(()=>this.c);return i.fill(this.rawUpdated.map(s=>[s,!0])),i}),this.g=new dr(()=>{const i=ps.forUris(()=>this.c);return i.fill(this.rawDeleted.map(s=>[s,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of t){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.b!==Ff.a&&(typeof i.cId=="number"?this.b===void 0?this.b=i.cId:this.b!==i.cId&&(this.b=Ff.a):this.b!==void 0&&(this.b=Ff.a))}}contains(t,...r){return this.h(t,{includeChildren:!1},...r)}affects(t,...r){return this.h(t,{includeChildren:!0},...r)}h(t,r,...i){if(!t)return!1;const s=i.length>0;return!!((!s||i.includes(1))&&(this.d.value.get(t)||r.includeChildren&&this.d.value.findSuperstr(t))||(!s||i.includes(0))&&(this.f.value.get(t)||r.includeChildren&&this.f.value.findSuperstr(t))||(!s||i.includes(2))&&(this.g.value.findSubstr(t)||r.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},pg=class extends Error{constructor(e,t,r){super(e),this.fileOperationResult=t,this.options=r}},D4;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(D4||(D4={}));var P4;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(P4||(P4={}));var Q2="";function A4(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var GF=class lr{static{this.KB=1024}static{this.MB=lr.KB*lr.KB}static{this.GB=lr.MB*lr.KB}static{this.TB=lr.GB*lr.KB}static formatSize(t){return us(t)||(t=0),t<lr.KB?d(1879,null,t.toFixed(0)):t<lr.MB?d(1880,null,(t/lr.KB).toFixed(2)):t<lr.GB?d(1881,null,(t/lr.MB).toFixed(2)):t<lr.TB?d(1882,null,(t/lr.GB).toFixed(2)):d(1883,null,(t/lr.TB).toFixed(2))}},Z2=class extends he{constructor(e,t="",r="",i=!0,s){super(),this.j=this.B(new I),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=r,this.z=i,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},JF=class M0{constructor(){this.id=M0.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let r=[];for(const i of t)i.length&&(r.length?r=[...r,new M0,...i]:r=i);return r}static{this.ID="vs.actions.separator"}async run(){}},QF=class bE extends Z2{static{this.ID="vs.actions.empty"}constructor(){super(bE.ID,d(42,null),void 0,!1)}},Y2={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},X2={id:"default",displayName:d(4078,null),providerDisplayName:d(4079,null)},T4;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(T4||(T4={}));var R4;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(R4||(R4={}));function Pu(e){if(gs(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function L4(e){if(gs(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function gg(e){if(gs(e)||Pu(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function Au(e){if(gs(e))return!1;const t=e;return y.isUri(t?.base?.resource)&&y.isUri(t?.input1?.resource)&&y.isUri(t?.input2?.resource)&&y.isUri(t?.result?.resource)}var N4;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(N4||(N4={}));var F4;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(F4||(F4={}));var K2=class{constructor(){this.a=new Map}registerSource(e,t){let r=this.a.get(e);return r||(r={source:e,label:t},this.a.set(e,r)),r.source}getSourceLabel(e){return this.a.get(e)?.label??e}},ZF=new K2,M4;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(M4||(M4={}));var eC=class extends he{};function gs(e){return e instanceof eC}function tC(e){const t=e;return y.isUri(t?.preferredResource)}function rC(e){const t=e;return gs(t?.primary)&&gs(t?.secondary)}function iC(e){const t=e;return gs(t?.modified)&&gs(t?.original)}var O4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(O4||(O4={}));var U4;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(U4||(U4={}));var ms;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(ms||(ms={}));var sC=class{getOriginalUri(e,t){if(!e)return;if(Au(e))return j4.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===ms.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===ms.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===ms.PRIMARY?i:s}}if(Pu(e)||L4(e)||gg(e)||Au(e))return;const r=tC(e)?e.preferredResource:e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}a(e){return rC(e)||gg(e)?{primary:e.primary,secondary:e.secondary}:iC(e)||Pu(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(Au(e))return j4.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===ms.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===ms.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===ms.PRIMARY?i:s}}if(Pu(e)||L4(e)||gg(e)||Au(e))return;const r=e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(r=>e.scheme===r))return e}else if(t===e.scheme)return e}},H4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(H4||(H4={}));var j4=new sC,_4;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(_4||(_4={}));var nC=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(fu);for(const[r,i]of this.c)this.e(r,i,t);this.c.clear()}e(e,t,r){const i=r.createInstance(t);this.d.set(e,i)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return Kn(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),ae(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Ht.add(Y2.EditorFactory,new nC);var B4;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(B4||(B4={}));var Xa=class{constructor(e,t,r){this.owner=e,this.debugNameSource=t,this.referenceFn=r}getDebugName(e){return oC(e,this)}},z4=new Map,mg=new WeakMap;function oC(e,t){const r=mg.get(e);if(r)return r;const i=aC(e,t);if(i){let s=z4.get(i)??0;s++,z4.set(i,s);const n=s===1?i:`${i}#${s}`;return mg.set(e,n),n}}function aC(e,t){const r=mg.get(e);if(r)return r;const i=t.owner?lC(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return i+s}else return i+n;const o=t.referenceFn;if(o!==void 0&&(s=vg(o),s!==void 0))return i+s;if(t.owner!==void 0){const a=cC(t.owner,e);if(a!==void 0)return i+a}}function cC(e,t){for(const r in e)if(e[r]===t)return r}var W4=new Map,V4=new WeakMap;function lC(e){const t=V4.get(e);if(t)return t;const r=uC(e);let i=W4.get(r)??0;i++,W4.set(r,i);const s=i===1?r:`${r}#${i}`;return V4.set(e,s),s}function uC(e){const t=e.constructor;return t?t.name:"Object"}function vg(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(i?i[1]:void 0)?.trim()}var wg=(e,t)=>e===t;function bg(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!bg(e[r],t[r]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const r=e,i=t,s=Object.keys(r),n=Object.keys(i),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!bg(r[a],i[a]))return!1;return!0}return!1}var q4;function hC(e){q4=e}function hi(){return q4}var dC=class{constructor(){this.a=0,this.d=new WeakMap}b(e){return fC([uo(mC("|  ",this.a)),e])}c(e){return e.hadValue?e.didChange?[uo(" "),Gr(ec(e.oldValue,70),{color:"red",strikeThrough:!0}),uo(" "),Gr(ec(e.newValue,60),{color:"green"})]:[uo(" (unchanged)")]:[uo(" "),Gr(ec(e.newValue,60),{color:"green"}),uo(" (initial)")]}handleObservableChanged(e,t){console.log(...this.b([Ka("observable value changed"),Gr(e.debugName,{color:"BlueViolet"}),...this.c(t)]))}formatChanges(e){if(e.size!==0)return Gr(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleDerivedRecomputed(e,t){const r=this.d.get(e);console.log(...this.b([Ka("derived recomputed"),Gr(e.debugName,{color:"BlueViolet"}),...this.c(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.b([Ka("observable from event triggered"),Gr(e.debugName,{color:"BlueViolet"}),...this.c(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleAutorunTriggered(e){const t=this.d.get(e);console.log(...this.b([Ka("autorun"),Gr(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.b([Ka("transaction"),Gr(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function fC(e){const t=new Array,r=[];let i="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(i+=`%c${o.text}`,t.push(o.style),o.data&&r.push(...o.data)):"data"in o&&r.push(...o.data)}s(e);const n=[i,...t];return n.push(...r),n}function uo(e){return Gr(e,{color:"black"})}function Ka(e){return Gr(vC(`${e}: `,10),{color:"black",bold:!0})}function Gr(e,t={color:"black"}){function r(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:r(i)}}function ec(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?pC(e,t):gC(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function pC(e,t){let r="[ ",i=!0;for(const s of e){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${ec(s,t-r.length)}`}return r+=" ]",r}function gC(e,t){let r="{ ",i=!0;for(const[s,n]of Object.entries(e)){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${s}: ${ec(n,t-r.length)}`}return r+=" }",r}function mC(e,t){let r="";for(let i=1;i<=t;i++)r+=e;return r}function vC(e,t){for(;e.length<t;)e+=" ";return e}var G4;function wC(e){G4=e}var J4;function bC(e){J4=e}var yg;function yC(e){yg=e}var xC=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const r=t===void 0?void 0:e,i=t===void 0?e:t;return yg({owner:r,debugName:()=>{const s=vg(i);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(o)return`${this.debugName}.${o[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},s=>i(this.read(s),s))}flatten(){return yg({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(G4(this,t)),this}keepObserved(e){return e.add(J4(this)),this}get a(){return this.get()}},xg=class extends xC{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}};function EC(e,t){const r=new Q4(e,t);try{e(r)}finally{r.finish()}}function kC(e,t,r){e?t(e):EC(t,r)}var Q4=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],hi()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():vg(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:r,observable:i}=e[t];r.endUpdate(i)}this.a=null,hi()?.handleEndTransaction()}};function SC(e,t){let r;return typeof e=="string"?r=new Xa(void 0,e,void 0):r=new Xa(e,void 0,void 0),new $C(r,t,wg)}var $C=class extends xg{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,r){super(),this.e=e,this.g=r,this.d=t}get(){return this.d}set(e,t,r){if(r===void 0&&this.g(this.d,e))return;let i;t||(t=i=new Q4(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.h(e),hi()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:r,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,r)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function Z4(e){return new X4(new Xa(void 0,void 0,e),e,void 0,void 0)}var Y4;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(Y4||(Y4={}));var X4=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i){this._debugNameData=e,this._runFn=t,this.i=r,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.l=!1,this.h=this.i?.(),hi()?.handleAutorunCreated(this),this.k(),Gn(this)}dispose(){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),Jn(this)}k(){if(this.a===3)return;const e=this.g;this.g=this.f,this.f=e,this.a=3;const t=this.c;try{if(!t){hi()?.handleAutorunTriggered(this);const r=this.h;try{this.h=this.i?.(),this.l=!0,this._runFn(this,r)}catch(i){Wl(i)}finally{this.l=!1}}}finally{t||hi()?.handleAutorunFinished(this);for(const r of this.g)r.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const e of this.f)if(e.reportChanges(),this.a===2)break}this.k()}while(this.a!==3)}finally{this.b--}x4(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.f.has(e)&&!this.g.has(e)&&(this.a=1)}handleChange(e,t){if(this.f.has(e)&&!this.g.has(e))try{(this.j?this.j({changedObservable:e,change:t,didChange:i=>i===e},this.h):!0)&&(this.a=2)}catch(r){Wl(r)}}readObservable(e){if(!this.l)throw new Wn("The reader object cannot be used outside its compute function!");if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}};(function(e){e.Observer=X4})(Z4||(Z4={}));function CC(e,t){return new IC(new Xa(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??wg)}yC(CC);var K4;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(K4||(K4={}));var IC=class extends xg{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.q=r,this.s=i,this.t=s,this.u=n,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.n=!1,this.p=!1,this.x=!1,this.m=this.q?.(),hi()?.handleDerivedCreated(this)}f(){this.g=0,this.h=void 0;for(const e of this.k)e.removeObserver(this);this.k.clear(),this.t?.()}get(){if(this.p)throw new Wn("Cyclic deriveds are not supported yet!");if(this.b.size===0){let e;try{this.x=!0,e=this._computeFn(this,this.q?.())}finally{this.x=!1}return this.f(),e}else{do{if(this.g===1){for(const e of this.k)if(e.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.w()}while(this.g!==3);return this.h}}w(){if(this.g===3)return;const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,r=this.h;this.g=3;let i=!1;this.p=!1;try{const s=this.m;this.m=this.q?.();try{this.x=!0,this.h=this._computeFn(this,s)}finally{this.x=!1;for(const n of this.l)n.removeObserver(this);this.l.clear()}i=t&&!this.u(r,this.h),hi()?.handleDerivedRecomputed(this,{oldValue:r,newValue:this.h,change:void 0,didChange:i,hadValue:t})}catch(s){Wl(s)}if(this.p=!1,i)for(const s of this.b)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.n)throw new Wn("Cyclic deriveds are not supported yet!");this.j++,this.n=!0;try{const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const r of this.b)r.handlePossibleChange(this);if(t)for(const r of this.b)r.beginUpdate(this)}finally{this.n=!1}}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const r of t)r.endUpdate(this)}x4(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){let r=!1;try{r=this.s?this.s({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){Wl(s)}const i=this.g===3;if(r&&(this.g===1||i)&&(this.g=2,i))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){if(!this.x)throw new Wn("The reader object cannot be used outside its compute function!");e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.b.has(e)&&this.j>0;super.removeObserver(e),t&&e.endUpdate(this)}};function e5(...e){let t,r,i;return e.length===3?[t,r,i]=e:[r,i]=e,new ho(new Xa(t,void 0,i),r,i,()=>ho.globalTransaction,wg)}var ho=class extends xg{constructor(e,t,r,i,s){super(),this.k=e,this.l=t,this._getValue=r,this.n=i,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,kC(this.n(),u=>{hi()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const h of this.b)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||hi()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}};(function(e){e.Observer=ho;function t(r,i){let s=!1;ho.globalTransaction===void 0&&(ho.globalTransaction=r,s=!0);try{i()}finally{s&&(ho.globalTransaction=void 0)}}e.batchEventsGlobally=t})(e5||(e5={}));function DC(e){const t=new t5(!1,void 0);return e.addObserver(t),ae(()=>{e.removeObserver(t)})}bC(DC);function PC(e,t){const r=new t5(!0,t);return e.addObserver(r),t?t(e.get()):e.reportChanges(),ae(()=>{e.removeObserver(r)})}wC(PC);var t5=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a--,this.a===0&&this.b&&(this.c?this.c(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}},AC=!1;AC&&hC(new dC);function Eg(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var TC=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],r5;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(r5||(r5={}));var i5;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(i5||(i5={}));var He=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const r=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return ls(r,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},nn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(He.toKey(e))}delete(e){return this.c.delete(He.toKey(e))}has(e){return this.c.has(He.toKey(e))}},Li=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(He.toKey(e))}get(e){return this.c.get(He.toKey(e))}has(e){return this.c.has(He.toKey(e))}set(e,t){this.c.set(He.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},YF=W("IBuiltinExtensionsScannerService"),RC=W("productService"),LC="vscode://schemas/vscode-product",Tu=W("configurationService"),s5;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(s5||(s5={}));function kg(e,t){const r=Object.create(null);for(const i in e)n5(r,i,e[i],t);return r}function n5(e,t,r,i){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=r}catch{i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function NC(e,t){const r=t.split(".");o5(e,r)}function o5(e,t){const r=t.shift();if(t.length===0){delete e[r];return}if(Object.keys(e).indexOf(r)!==-1){const i=e[r];typeof i=="object"&&!Array.isArray(i)&&(o5(i,t),Object.keys(i).length===0&&delete e[r])}}function Ru(e,t,r){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=i(e,s);return typeof n>"u"?r:n}function FC(e){return e.replace(/[\[\]]/g,"")}function MC(e){let t=!1;const r=new Map,i=new Map;if(OC(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const p=r.get(h);if(!p){const f={schemas:[u]};return r.set(h,f),i.set(u,f),!0}return p.schemas.push(u),i.set(u,p),t=!0,!1}),r.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,p)=>{if(p!==u){const f=i.get(p);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return p})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function fo(e){return typeof e=="object"&&e!==null}function OC(e,t){if(!e||typeof e!="object")return;const r=(...c)=>{for(const l of c)fo(l)&&o.push(l)},i=(...c)=>{for(const l of c)if(fo(l))for(const u in l){const h=l[u];fo(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)fo(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)fo(l)&&o.push(l);else fo(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Lu={JSONContribution:"base.contributions.json"};function UC(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var HC=class{constructor(){this.b=new I,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[UC(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?MC(t):void 0}hasSchemaContent(e){return!!this.a[e]}},jC=new HC;Ht.add(Lu.JSONContribution,jC);var a5;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(a5||(a5={}));var po={Configuration:"base.contributions.configuration"},c5;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(c5||(c5={}));var Nu={properties:{},patternProperties:{}},Fu={properties:{},patternProperties:{}},Mu={properties:{},patternProperties:{}},Ou={properties:{},patternProperties:{}},Uu={properties:{},patternProperties:{}},tc={properties:{},patternProperties:{}},on="vscode://schemas/settings/resourceLanguage",Hu=Ht.as(Lu.JSONContribution),_C=class{constructor(){this.a=[],this.i=new Set,this.j=new I,this.onDidSchemaChange=this.j.event,this.k=new I,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1669,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},Hu.registerSchema(on,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const r=new Set;this.r(e,t,r),Hu.registerSchema(on,this.h),this.j.fire(),this.k.fire({properties:r})}deregisterConfigurations(e){const t=new Set;this.s(e,t),Hu.registerSchema(on,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const r=new Set;this.s(t,r),this.r(e,!1,r),Hu.registerSchema(on,this.h),this.j.fire(),this.k.fire({properties:r})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const r=[];for(const{overrides:i,source:s}of e)for(const n in i){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=i[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),di.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),r.push(...rc(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(r)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const r of e){const i=this.a.indexOf(r);i!==-1&&this.a.splice(i,1)}for(const{overrides:r,source:i}of e)for(const s in r){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>i?a.source?.id===i.id:a.value===r[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),di.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!gb(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,i)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,r){const i={type:"object",default:t.value,description:d(1670,null,FC(e)),$ref:on,defaultDefaultValue:t.value,source:r,defaultValueSource:r};this.e[e]=i,this.c.properties[e]=i}o(e,t,r,i){const s=i?.value||{},n=i?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(pt(a)&&(La(s[o])||pt(s[o]))){if(s[o]={...s[o]??{},...a},r)for(const l in a)n.set(`${o}.${l}`,r)}else s[o]=a,r?n.set(o,r):n.delete(o)}return{value:s,source:n}}p(e,t,r,i){const s=this.e[e],n=i?.value??s?.defaultDefaultValue;let o=r;if(pt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(La(n)||pt(n)))){if(o=i?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)r&&o.set(`${e}.${c}`,r);t={...pt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const r=new Set;e.removedDefaults&&(this.m(e.removedDefaults,r),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,r),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,r),e.addedConfigurations&&this.r(e.addedConfigurations,!1,r),this.j.fire(),this.k.fire({properties:r,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,r){e.forEach(i=>{this.u(i,t,i.extensionInfo,i.restrictedProperties,void 0,r),this.d.push(i),this.v(i)})}s(e,t){const r=i=>{if(i.properties)for(const s in i.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,i.properties[s])}i.allOf?.forEach(s=>r(s))};for(const i of e){r(i);const s=this.d.indexOf(i);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,r,i,s=3,n){s=gt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&zC(c,l)){delete o[c];continue}if(l.source=r,l.defaultDefaultValue=o[c].default,this.A(c,l),di.test(c)?l.scope=void 0:(l.scope=gt(l.scope)?s:l.scope,l.restricted=gt(l.restricted)?!!i?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,r,i,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,r]of this.b)r.configurationDefaultOverrideValue&&e.set(t,r.configurationDefaultOverrideValue);return e}v(e){const t=r=>{const i=r.properties;if(i)for(const n in i)this.w(n,i[n]);r.allOf?.forEach(t)};t(e)}w(e,t){switch(Nu.properties[e]=t,t.scope){case 1:Fu.properties[e]=t;break;case 2:Mu.properties[e]=t;break;case 6:Ou.properties[e]=t;break;case 3:Uu.properties[e]=t;break;case 4:tc.properties[e]=t;break;case 5:tc.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete Nu.properties[e],t.scope){case 1:delete Fu.properties[e];break;case 2:delete Mu.properties[e];break;case 6:delete Ou.properties[e];break;case 3:delete Uu.properties[e];break;case 4:case 5:delete tc.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,r={type:"object",description:d(1671,null),errorMessage:d(1672,null),$ref:on};this.A(t,r),Nu.properties[t]=r,Fu.properties[t]=r,Mu.properties[t]=r,Ou.properties[t]=r,Uu.properties[t]=r,tc.properties[t]=r}}z(){const e={type:"object",description:d(1673,null),errorMessage:d(1674,null),$ref:on};Nu.patternProperties[an]=e,Fu.patternProperties[an]=e,Mu.patternProperties[an]=e,Ou.patternProperties[an]=e,Uu.patternProperties[an]=e,tc.patternProperties[an]=e,this.j.fire()}A(e,t){const r=this.b.get(e)?.configurationDefaultOverrideValue;let i,s;r&&(!t.disallowConfigurationDefault||!r.source)&&(i=r.value,s=r.source),La(i)&&(i=t.defaultDefaultValue,s=void 0),La(i)&&(i=BC(t.type)),t.default=i,t.defaultValueSource=s}},l5="\\[([^\\]]+)\\]",u5=new RegExp(l5,"g"),an=`^(${l5})+$`,di=new RegExp(an);function rc(e){const t=[];if(di.test(e)){let r=u5.exec(e);for(;r?.length;){const i=r[1].trim();i&&t.push(i),r=u5.exec(e)}}return Vn(t)}function BC(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var ju=new _C;Ht.add(po.Configuration,ju);function zC(e,t){return e.trim()?di.test(e)?d(1676,null,e):ju.getConfigurationProperties()[e]!==void 0?d(1677,null,e):t.policy?.name&&ju.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1678,null,e,t.policy?.name,ju.getPolicyConfigurations().get(t.policy?.name)):null:d(1675,null)}var WC=W("requestService");function VC(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function qC(e){return e.res.statusCode===204}async function GC(e){if(!VC(e))throw new Error("Server returned "+e.res.statusCode);if(qC(e))return null;const r=(await Zk(e.stream)).toString();try{return JSON.parse(r)}catch(i){throw i.message+=`:
`+r,i}}var Sg;function JC(e){const t=Ht.as(po.Configuration),r=Sg;Sg={id:"http",order:15,title:d(2063,null),type:"object",scope:e,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2064,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:d(2065,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2066,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2067,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2068,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2069,null),d(2070,null),d(2071,null),d(2072,null)],default:"override",description:d(2073,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:d(2074,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:d(2075,null),restricted:!0},"http.electronFetch":{type:"boolean",default:!1,description:d(2076,null),restricted:!0}}},t.updateConfigurations({add:[Sg],remove:r?[r]:[]})}JC(1);var ic;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(ic||(ic={}));var Jr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(Jr||(Jr={}));var XF=class yE extends he{static{this.a=100}constructor(t,r=Object.create(null)){super(),this.r=t,this.s=r,this.b=this.B(new Yl),this.onDidChangeStorage=this.b.event,this.c=Jr.None,this.f=new Map,this.g=this.B(new BS(yE.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((r,i)=>this.w(i,r)),t.deleted?.forEach(r=>this.w(r,void 0))}finally{this.b.resume()}}w(t,r){if(this.c===Jr.Closed)return;let i=!1;gt(r)?i=this.f.delete(t):this.f.get(t)!==r&&(this.f.set(t,r),i=!0),i&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===Jr.None&&(this.c=Jr.Initialized,this.s.hint!==ic.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,r){const i=this.f.get(t);return gt(i)?r:i}getBoolean(t,r){const i=this.get(t);return gt(i)?r:i==="true"}getNumber(t,r){const i=this.get(t);return gt(i)?r:parseInt(i,10)}getObject(t,r){const i=this.get(t);return gt(i)?r:Zy(i)}async set(t,r,i=!1){if(this.c===Jr.Closed)return;if(gt(r))return this.delete(t,i);const s=pt(r)||Array.isArray(r)?H2(r):String(r);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:i}),this.D()}async delete(t,r=!1){if(!(this.c===Jr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:r}),this.D()}async optimize(){if(this.c!==Jr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=Jr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===Jr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===ic.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===ic.STORAGE_IN_MEMORY}},$g=W("environmentService"),KF=$g,h5=W("IUriIdentityService"),d5;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(d5||(d5={}));function QC(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&y.isUri(t.location)&&y.isUri(t.globalStorageHome)&&y.isUri(t.settingsResource)&&y.isUri(t.keybindingsResource)&&y.isUri(t.tasksResource)&&y.isUri(t.snippetsHome)&&y.isUri(t.extensionsResource))}var ZC=W("IUserDataProfilesService");function _u(e,t,r,i,s,n){return{id:e,name:t,location:r,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Jt(r,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Jt(r,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Jt(r,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Jt(r,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Jt(r,"snippets"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Jt(r,"extensions.json"),cacheHome:Jt(i,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var f5=class extends he{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,r,i,s){super(),this.s=t,this.t=r,this.u=i,this.y=s,this.g=this.B(new I),this.onDidChangeProfiles=this.g.event,this.h=this.B(new I),this.onWillCreateProfile=this.h.event,this.j=this.B(new I),this.onWillRemoveProfile=this.j.event,this.m=this.B(new I),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=Jt(this.s.userRoamingDataHome,"profiles"),this.f=Jt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),r=[t];try{for(const s of this.N()){if(!s.name||!Ce(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}r.push(_u(ds(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const i=new Map;if(r.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=y.parse(n),c=r.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=r.find(c=>c.id===o);a&&i.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:r,emptyWindows:i}}return this.z}D(){const t=_u("__default__profile__",d(2456,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const r="Temp",i=new RegExp(`${qs(r)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=i.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${r} ${s+1}`;return this.createProfile(Oa($r()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,r,i){return this.createProfile(Oa($r()).toString(16),t,r,i)}async createProfile(t,r,i,s){return await this.F(t,r,i,s)}async F(t,r,i,s){if(!Ce(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(r);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!i?.transient&&u.name===r))throw new Error(`Profile with ${r} name already exists`);const a=s?this.G(s):void 0;y.isUri(a)&&(i={...i,workspaces:[a]});const c=_u(t,r,Jt(this.profilesHome,t),this.f,i,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await ro.settled(l),a&&!y.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(r)}})(),this.n.set(r,n)),n}async updateProfile(t,r){const i=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?r.workspaces&&(o=n,o.workspaces=r.workspaces):o=_u(n.id,r.name??n.name,n.location,this.f,{icon:r.icon===null?void 0:r.icon??n.icon,transient:r.transient??n.isTransient,useDefaultFlags:r.useDefaultFlags??n.useDefaultFlags,workspaces:r.workspaces??n.workspaces},this.defaultProfile);else if(r.workspaces){const a=n.workspaces?.filter(c=>!r.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&i.push(o)}if(!i.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],i);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(s=>s.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);const i=[];this.j.fire({profile:r,join(s){i.push(s)}});try{await Promise.allSettled(i)}catch(s){this.y.error(s)}this.I([],[r],[]);try{await this.t.del(r.cacheHome,{recursive:!0})}catch(s){J2(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,r){const i=this.profiles.find(n=>n.id===r.id);if(!i)throw new Error(`Profile '${r.name}' does not exist`);const s=this.G(t);if(y.isUri(s)){const n=i.workspaces?[...i.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(i,{workspaces:n}))}else this.L(s,i,!1),this.M(this.profiles)}unsetWorkspace(t,r=!1){const i=this.G(t);if(y.isUri(i)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,i))})}else this.L(i,void 0,r),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(r=>r.isDirectory&&this.profiles.every(i=>!this.u.extUri.isEqual(i.location,r.resource))).map(r=>this.t.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(r=>!this.H(r));await Promise.allSettled(t.map(r=>this.removeProfile(r)))}getProfileForWorkspace(t){const r=this.G(t);return y.isUri(r)?this.profiles.find(i=>i.workspaces?.some(s=>this.u.extUri.isEqual(s,r))):this.C.emptyWindows.get(r)??this.r.emptyWindows.get(r)}G(t){return j$(t)?t.uri:_$(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location))||[...this.r.emptyWindows.values()].some(r=>this.u.extUri.isEqual(r.location,t.location)))}I(t,r,i){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(r.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=i.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,r,i)}J(t,r,i){this.g.fire({added:t,removed:r,updated:i,all:this.profiles})}L(t,r,i){i=r?.isTransient?!0:i,i?r?this.r.emptyWindows.set(t,r):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),r?this.C.emptyWindows.set(t,r):this.C.emptyWindows.delete(t))}M(t){const r=[],i={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||r.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)i[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:i,emptyWindows:s}),this.O(r),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};f5=__decorate([__param(0,$g),__param(1,G2),__param(2,h5),__param(3,Ue)],f5);var YC="__$__isNewStorageMarker",Bu="__$__targetStorageMarker",XC=W("storageService"),go;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(go||(go={}));var p5;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(p5||(p5={}));var g5;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(g5||(g5={}));function KC(e){const t=e.get(Bu);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var tM=class xE extends he{static{this.a=60*1e3}constructor(t={flushInterval:xE.a}){super(),this.m=t,this.b=this.B(new Yl),this.c=this.B(new Yl),this.onDidChangeTarget=this.c.event,this.f=this.B(new I),this.onWillSaveState=this.f.event,this.h=this.B(new eo(()=>this.n(),this.m.flushInterval)),this.j=this.B(new is),this.C=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(t,r,i){return lt.filter(this.b.event,s=>s.scope===t&&(r===void 0||s.key===r),i)}n(){this.j.value=Cb(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){Ii([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{Kt("code/willInitStorage");try{await this.O()}finally{Kt("code/didInitStorage")}this.h.schedule()})()),this.g}u(t,r){const{key:i,external:s}=r;if(i===Bu){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.c.fire({scope:t})}else this.b.fire({scope:t,key:i,target:this.J(t)[i],external:s})}w(t){this.f.fire({reason:t})}get(t,r,i){return this.P(r)?.get(t,i)}getBoolean(t,r,i){return this.P(r)?.getBoolean(t,i)}getNumber(t,r,i){return this.P(r)?.getNumber(t,i)}getObject(t,r,i){return this.P(r)?.getObject(t,i)}storeAll(t,r){this.y(()=>{for(const i of t)this.store(i.key,i.value,i.scope,i.target,r)})}store(t,r,i,s,n=!1){if(gt(r)){this.remove(t,i,n);return}this.y(()=>{this.z(t,i,s),this.P(i)?.set(t,r,n)})}remove(t,r,i=!1){this.y(()=>{this.z(t,r,void 0),this.P(r)?.delete(t,i)})}y(t){this.b.pause(),this.c.pause();try{t()}finally{this.b.resume(),this.c.resume()}}keys(t,r){const i=[],s=this.J(t);for(const n of Object.keys(s))s[n]===r&&i.push(n);return i}z(t,r,i,s=!1){const n=this.J(r);typeof i=="number"?n[t]!==i&&(n[t]=i,this.P(r)?.set(Bu,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(r)?.set(Bu,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const r=this.P(t);return r?KC(r):Object.create(null)}isNew(t){return this.getBoolean(YC,t)===!0}async flush(t=go.NONE){this.f.fire({reason:t});const r=this.P(-1),i=this.P(0),s=this.P(1);switch(t){case go.NONE:await ro.settled([r?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case go.SHUTDOWN:await ro.settled([r?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,r=this.P(0)?.items??new Map,i=this.P(1)?.items??new Map;return eI(t,r,i,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,r){return this.w(go.NONE),QC(t)?this.R(t,r):this.S(t,r)}M(t,r){return!(t.id===r.id||m5(r)&&m5(t))}N(t,r,i){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),r.get(n)!==o&&this.u(i,{key:n,external:!0});for(const[n]of r.items)s.has(n)||this.u(i,{key:n,external:!0})})}};function m5(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function eI(e,t,r,i,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,x)=>{a.set(x,w),c.set(x,o(w))});const l=new Map,u=new Map;t.forEach((w,x)=>{l.set(x,w),u.set(x,o(w))});const h=new Map,p=new Map;r.forEach((w,x)=>{h.set(x,w),p.set(x,o(w))}),console.group(i!==s?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const f=[];if(a.forEach((w,x)=>{f.push({key:x,value:w})}),console.table(f),console.groupEnd(),console.log(c),i!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach((x,S)=>{w.push({key:S,value:x})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];h.forEach((w,x)=>{m.push({key:x,value:w})}),console.table(m),console.groupEnd(),console.log(p)}var rM=new H("chatSessionResponseVote","",{type:"string",description:d(4922,null)}),iM=new H("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(4923,null)}),sM=new H("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(4924,null)}),nM=new H("chatSessionResponseFiltered",!1,{type:"boolean",description:d(4925,null)}),oM=new H("chatSessionResponseError",!1,{type:"boolean",description:d(4926,null)}),aM=new H("chatSessionRequestInProgress",!1,{type:"boolean",description:d(4927,null)}),cM=new H("chatResponse",!1,{type:"boolean",description:d(4928,null)}),lM=new H("chatRequest",!1,{type:"boolean",description:d(4929,null)}),uM=new H("chatItemId","",{type:"string",description:d(4930,null)}),hM=new H("chatLastItemId",[],{type:"string",description:d(4931,null)}),dM=new H("chatEditApplied",!1,{type:"boolean",description:d(4932,null)}),fM=new H("chatInputHasText",!1,{type:"boolean",description:d(4933,null)}),pM=new H("chatInputHasFocus",!1,{type:"boolean",description:d(4934,null)}),gM=new H("inChatInput",!1,{type:"boolean",description:d(4935,null)}),mM=new H("inChat",!1,{type:"boolean",description:d(4936,null)}),tI=new H("chatIsEnabled",!1,{type:"boolean",description:d(4937,null)}),rI=new H("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(4938,null)}),iI=new H("chatEditingParticipantRegistered",!1,{type:"boolean",description:d(4939,null)}),vM=new H("chatEditingCanUndo",!1,{type:"boolean",description:d(4940,null)}),wM=new H("chatEditingCanRedo",!1,{type:"boolean",description:d(4941,null)}),bM=new H("chatExtensionInvalid",!1,{type:"boolean",description:d(4942,null)}),yM=new H("chatCursorAtTop",!1),xM=new H("chatInputHasAgent",!1),EM=new H("chatLocation",void 0),kM=new H("quickChatHasFocus",!1,{type:"boolean",description:d(4943,null)}),SM=new H("chatHasFileAttachments",!1,{type:"boolean",description:d(4944,null)}),$M=new H("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(4945,null)}),CM=new H("chatInstallEntitled",!1,{type:"boolean",description:d(4946,null)}),IM=new H("chatShouldShowMovedViewWelcome",!1,{type:"boolean",description:d(4947,null)}),sc,jt;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor",e.EditingSession="editing-session"})(jt||(jt={})),function(e){function t(r){switch(r){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor;case"editing-session":return e.EditingSession}return e.Panel}e.fromRaw=t}(jt||(jt={}));var DM=W("chatAgentService"),v5=class extends he{static{this.AGENT_LEADER="@"}constructor(t){super(),this.n=t,this.b=new Map,this.f=new I,this.onDidChangeAgents=this.f.event,this.g=new Set,this.t=new Map,this.w=new Map,this.h=tI.bindTo(this.n),this.j=rI.bindTo(this.n),this.m=iI.bindTo(this.n),this.B(t.onDidChangeContext(r=>{r.affectsSome(this.g)&&this.s()}))}registerAgent(t,r){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=r.slashCommands;r={...r,get slashCommands(){return n.filter(a=>!a.when||s.n.contextMatchesRules(At.deserialize(a.when)))}};const o={data:r};return this.b.set(t,o),this.r(),this.s(),this.f.fire(void 0),ae(()=>{this.b.delete(t),this.r(),this.s(),this.f.fire(void 0)})}r(){this.g.clear();for(const t of this.b.values())if(t.data.when){const r=At.deserialize(t.data.when);for(const i of r?.keys()||[])this.g.add(i)}}s(){let t=!1,r=!1;for(const i of this.getAgents())i.isDefault&&i.locations.includes(jt.EditingSession)?t=!0:i.isDefault&&(r=!0);this.m.set(t),this.j.set(r)}registerAgentImplementation(t,r){const i=this.b.get(t);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return i.data.isDefault&&this.h.set(!0),i.impl=r,this.f.fire(new zu(i.data,r)),ae(()=>{i.impl=void 0,this.f.fire(void 0),i.data.isDefault&&this.h.set(!1)})}registerDynamicAgent(t,r){t.isDynamic=!0;const i={data:t,impl:r};return this.b.set(t.id,i),this.f.fire(new zu(t,r)),ae(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,r){return this.t.set(t,r),{dispose:()=>{this.t.delete(t)}}}async getAgentCompletionItems(t,r,i){return await this.t.get(t)?.(r,i)??[]}updateAgent(t,r){const i=this.b.get(t);if(!i?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);i.data.metadata={...i.data.metadata,...r},this.f.fire(new zu(i.data,i.impl))}getDefaultAgent(t){return Ek(this.getActivatedAgents(),r=>!!r.isDefault&&r.locations.includes(t))}getContributedDefaultAgent(t){return this.getAgents().find(r=>!!r.isDefault&&r.locations.includes(t))}getSecondaryAgent(){return Er.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t,r=!1){if(!(!this.u(t)&&!r))return this.b.get(t)?.data}u(t){const r=this.b.get(t);return!r?.data.when||this.n.contextMatchesRules(At.deserialize(r.data.when))}getAgentByFullyQualifiedId(t){const r=Er.find(this.b.values(),i=>sI(i.data)===t)?.data;if(!(r&&!this.u(r.id)))return r}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.u(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.u(t.data.id)).map(t=>new zu(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(r=>r.name===t)}agentHasDupeName(t){const r=this.getAgent(t);return r?this.getAgentsByName(r.name).filter(i=>i.extensionId.value!==r.extensionId.value).length>0:!1}async invokeAgent(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(r,i,s,n)}async getFollowups(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(r,i,s,n):[]}async getChatTitle(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(r,i)}registerChatParticipantDetectionProvider(t,r){return this.w.set(t,r),ae(()=>{this.w.delete(t)})}hasChatParticipantDetectionProviders(){return this.w.size>0}async detectAgentOrCommand(t,r,i,s){const n=Er.first(this.w.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const p of h.slashCommands)u.push({participant:h.id,command:p.name,disambiguation:p.disambiguation??[]});return u},[]),a=await n.provideParticipantDetection(t,r,{...i,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};v5=__decorate([__param(0,x$)],v5);var zu=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,r,i){return this.d.invoke(e,t,r,i)}async provideFollowups(e,t,r,i){return this.d.provideFollowups?this.d.provideFollowups(e,t,r,i):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},AM=W("chatAgentNameService"),w5=class{static{sc=this}static{this.b="chat.participantNameRegistry"}constructor(t,r,i,s){if(this.h=r,this.i=i,this.j=s,this.f=SC(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(sc.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(sc.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>ui(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},Xe.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const r=await GC(t);if(!r||r.version!==1)throw new Error("Unexpected chat participant registry response.");const i=r.restrictedChatParticipants;this.f.set(i,void 0),this.j.store(sc.b,JSON.stringify(i),-1,1)}getAgentNameRestriction(t){const r=this.m(t.name,t).get(),i=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return r&&i}m(t,r){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>ls(n,n.includes(".")?r.extensionId.value:r.extensionPublisherId)):!0)}dispose(){this.g=!0}};w5=sc=__decorate([__param(0,RC),__param(1,WC),__param(2,Ue),__param(3,XC)],w5);function sI(e){return`${e.extensionId.value}.${e.id}`}var cn="**",Cg="/",Wu="[/\\\\]",Vu="[^/\\\\]",nI=/\//g;function b5(e,t){switch(e){case 0:return"";case 1:return`${Vu}*?`;default:return`(?:${Wu}|${Vu}+${Wu}${t?`|${Wu}${Vu}+`:""})*?`}}function Ig(e,t){if(!e)return[];const r=[];let i=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!i&&!s){r.push(n),n="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&r.push(n),r}function y5(e){if(!e)return"";let t="";const r=Ig(e,Cg);if(r.every(i=>i===cn))t=".*";else{let i=!1;r.forEach((s,n)=>{if(s===cn){if(i)return;t+=b5(2,n===r.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Cg?h="":h=qs(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const p=`(?:${Ig(a,",").map(f=>y5(f)).join("|")})`;t+=p,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=Vu;continue;case"*":t+=b5(1);continue;default:t+=qs(u)}}n<r.length-1&&(r[n+1]!==cn||n+2<r.length)&&(t+=Wu)}i=s===cn})}return t}var oI=/^\*\*\/\*\.[\w\.-]+$/,aI=/^\*\*\/([\w\.-]+)\/?$/,cI=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,lI=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,uI=/^\*\*((\/[\w\.-]+)+)\/?$/,hI=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,x5=new rp(1e4),E5=function(){return!1},fi=function(){return null};function Dg(e,t){if(!e)return fi;let r;typeof e!="string"?r=e.pattern:r=e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let s=x5.get(i);if(s)return k5(s,e);let n;return oI.test(r)?s=dI(r.substr(4),r):(n=aI.exec(Pg(r,t)))?s=fI(n[1],r):(t.trimForExclusions?lI:cI).test(r)?s=pI(r,t):(n=uI.exec(Pg(r,t)))?s=S5(n[1].substr(1),r,!0):(n=hI.exec(Pg(r,t)))?s=S5(n[1],r,!1):s=gI(r),x5.set(i,s),k5(s,e)}function k5(e,t){if(typeof t=="string")return e;const r=function(i,s){return hu(i,t.base,!ss)?e(Z3(i.substr(t.base.length),Br),s):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function Pg(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function dI(e,t){return function(r,i){return typeof r=="string"&&r.endsWith(e)?t:null}}function fI(e,t){const r=`/${e}`,i=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(r)||o.endsWith(i)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function pI(e,t){const r=$5(e.slice(1,-1).split(",").map(a=>Dg(a,t)).filter(a=>a!==fi),e),i=r.length;if(!i)return fi;if(i===1)return r[0];const s=function(a,c){for(let l=0,u=r.length;l<u;l++)if(r[l](a,c))return e;return null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function S5(e,t,r){const i=Br===Te.sep,s=i?e:e.replace(nI,Br),n=Br+s,o=Te.sep+e;let a;return r?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!i&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!i&&c===e)?t:null},a.allPaths=[(r?"*/":"./")+e],a}function gI(e){try{const t=new RegExp(`^${y5(e)}$`);return function(r){return t.lastIndex=0,typeof r=="string"&&t.test(r)?e:null}}catch{return fi}}function nc(e,t,r){return!e||typeof t!="string"?!1:mo(e)(t,void 0,r)}function mo(e,t={}){if(!e)return E5;if(typeof e=="string"||mI(e)){const r=Dg(e,t);if(r===fi)return E5;const i=function(s,n){return!!r(s,n)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return vI(e,t)}function mI(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function vI(e,t){const r=$5(Object.getOwnPropertyNames(e).map(a=>wI(a,e[a],t)).filter(a=>a!==fi)),i=r.length;if(!i)return fi;if(!r.some(a=>!!a.requiresSiblings)){if(i===1)return r[0];const a=function(u,h){let p;for(let f=0,m=r.length;f<m;f++){const w=r[f](u,h);if(typeof w=="string")return w;fs(w)&&(p||(p=[]),p.push(w))}return p?(async()=>{for(const f of p){const m=await f;if(typeof m=="string")return m}return null})():null},c=r.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=r.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let p=0,f=r.length;p<f;p++){const m=r[p];m.requiresSiblings&&l&&(c||(c=vr(a)),u||(u=c.substr(0,c.length-wp(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;fs(w)&&(h||(h=[]),h.push(w))}return h?(async()=>{for(const p of h){const f=await p;if(typeof f=="string")return f}return null})():null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function wI(e,t,r){if(t===!1)return fi;const i=Dg(e,r);if(i===fi)return fi;if(typeof t=="boolean")return i;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return fs(h)?h.then(p=>p?e:null):h?e:null};return n.requiresSiblings=!0,n}}return i}function $5(e,t){const r=e.filter(a=>!!a.basenames);if(r.length<2)return e;const i=r.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=i.length;a<c;a++)s.push(t)}else s=r.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?s[l]:null};n.basenames=i,n.patterns=s,n.allBasenames=i;const o=e.filter(a=>!a.basenames);return o.push(n),o}var bI=W("notebookDocumentService"),Ag=["W","X","Y","Z","a","b","c","d","e","f"],yI=new RegExp(`^[${Ag.join("")}]+`),C5=7;function I5(e){if(e.scheme!==V.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const r=parseInt(e.fragment.substring(0,t).replace(yI,""),C5),i=cw(e.fragment.substring(t+1)).toString();if(!isNaN(r))return{handle:r,notebook:e.with({scheme:i,fragment:null})}}function xI(e,t){const r=t.toString(C5),s=`${r.length<Ag.length?Ag[r.length-1]:"z"}${r}s${ap(ke.fromString(e.scheme),!0,!0)}`;return e.with({scheme:V.vscodeNotebookCell,fragment:s})}function EI(e){if(e.scheme!==V.vscodeNotebookMetadata)return;const t=cw(e.fragment).toString();return e.with({scheme:t,fragment:null})}function kI(e){const t=`${ap(ke.fromString(e.scheme),!0,!0)}`;return e.with({scheme:V.vscodeNotebookMetadata,fragment:t})}var SI=class{constructor(){this.a=new Lt}getNotebook(e){if(e.scheme===V.vscodeNotebookCell){const t=I5(e);if(t){const r=this.a.get(t.notebook);if(r)return r}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Ve(bI,SI,1);var vo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(vo||(vo={}));var RM=["application/json","application/javascript","text/html","image/svg+xml",Ri.latex,Ri.markdown,"image/png","image/jpeg",Ri.text],LM=[Ri.latex,Ri.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",Ri.text],D5;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(D5||(D5={}));var oc;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(oc||(oc={}));var P5;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(P5||(P5={}));var A5;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(A5||(A5={}));var T5;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(T5||(T5={}));var Qr;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Qr||(Qr={}));var R5;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(R5||(R5={}));var L5;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(L5||(L5={}));var N5;(function(e){e.scheme=V.vscodeNotebookMetadata;function t(i){return kI(i)}e.generate=t;function r(i){return EI(i)}e.parse=r})(N5||(N5={}));var F5;(function(e){e.scheme=V.vscodeNotebookCell;function t(a,c){return xI(a,c)}e.generate=t;function r(a){return I5(a)}e.parse=r;function i(a,c){return a.with({scheme:V.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==V.file?a.scheme:""}`})}e.generateCellOutputUri=i;function s(a){if(a.scheme!==V.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||V.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(F5||(F5={}));var NM=new H("notebookEditorCursorAtBoundary","none"),FM=new H("notebookEditorCursorAtLineBoundary","none"),M5;(function(e){e.default="default",e.option="option"})(M5||(M5={}));var O5;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(O5||(O5={}));var U5;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(U5||(U5={}));var MM=class Mf{static{this.d="notebook/"}static create(t,r){return`${Mf.d}${t}/${r??t}`}static parse(t){if(t.startsWith(Mf.d)){const r=t.substring(Mf.d.length).split("/");if(r.length===2)return{notebookType:r[0],viewType:r[1]}}}};function H5(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var $I=new TextDecoder;function CI(e){const t=[];let r=!1;for(const o of e)(t.length===0||r)&&(t.push(o),r=!0);let i=DI(t);const s=ke.concat(t.map(o=>ke.wrap(o))),n=LI(s);return i=i||n.byteLength!==s.byteLength,{data:n,didCompression:i}}var qu="\x1B[A",Tg=qu.split("").map(e=>e.charCodeAt(0)),II=10;function DI(e){let t=!1;return e.forEach((r,i)=>{if(i===0||r.length<qu.length)return;const s=e[i-1],n=r.subarray(0,qu.length);if(n[0]===Tg[0]&&n[1]===Tg[1]&&n[2]===Tg[2]){const o=s.lastIndexOf(II);if(o===-1)return;t=!0,e[i-1]=s.subarray(0,o),e[i]=r.subarray(qu.length)}}),t}function PI(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function AI(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let r=e.match(/\r+(.*)$/m)[1];r=r+t.slice(r.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,r)}return e}var TI=8,RI=13;function LI(e){return!e.buffer.includes(TI)&&!e.buffer.includes(RI)?e:ke.fromString(AI(PI($I.decode(e.buffer))))}var j5;(function(e){e.Delimiter="\0"})(j5||(j5={}));var _5;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(_5||(_5={}));var Ie=class Ur{static fromExtHostTestItem(t,r,i=t.parent){if(t._isRoot)return new Ur([r]);const s=[t.id];for(let n=i;n&&n.id!==r;n=n.parent)s.push(n.id);return s.push(r),new Ur(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const r=t.indexOf("\0");return r===-1?t:t.slice(0,r)}static fromString(t){return new Ur(t.split("\0"))}static join(t,r){return new Ur([...t.path,r])}static joinToString(t,r){return t.toString()+"\0"+r}static parentId(t){const r=t.lastIndexOf("\0");return r===-1?void 0:t.slice(0,r)}static localId(t){const r=t.lastIndexOf("\0");return r===-1?t:t.slice(r+1)}static isChild(t,r){return r[t.length]==="\0"&&r.startsWith(t)}static compare(t,r){return t===r?0:Ur.isChild(t,r)?2:Ur.isChild(r,t)?3:1}static getLengthOfCommonPrefix(t,r){if(t===0)return 0;let i=0;for(;i<t-1;){for(let s=1;s<t;s++){const n=r(s-1),o=r(s);if(n.path[i]!==o.path[i])return i}i++}return i}constructor(t,r=t.length){if(this.path=t,this.d=r,t.length===0||r<1)throw new Error("cannot create test with empty path")}get rootId(){return new Ur(this.path,1)}get parentId(){return this.d>1?new Ur(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new Ur(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new Ur(this.path,t)}compare(t){if(typeof t=="string")return Ur.compare(this.toString(),t);for(let r=0;r<t.d&&r<this.d;r++)if(t.path[r]!==this.path[r])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},B5;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(B5||(B5={}));var z5;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(z5||(z5={}));var W5;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(W5||(W5={}));var V5;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(V5||(V5={}));var NI=e=>"runId"in e,wo;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({range:ze.lift(r.range),uri:t.asCanonicalUri(y.revive(r.uri))})})(wo||(wo={}));var q5;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(q5||(q5={}));var Gu;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,r)=>({label:r.label,uri:r.uri?t.asCanonicalUri(y.revive(r.uri)):void 0,position:r.position?Ir.lift(r.position):void 0})})(Gu||(Gu={}));var Ju;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&wo.serialize(t.location),stackTrace:t.stackTrace?.map(Gu.serialize)}),e.deserialize=(t,r)=>({message:r.message,type:0,expected:r.expected,actual:r.actual,contextValue:r.contextValue,location:r.location&&wo.deserialize(t,r.location),stackTrace:r.stackTrace&&r.stackTrace.map(i=>Gu.deserialize(t,i))})})(Ju||(Ju={}));var Qu;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&wo.serialize(t.location)}),e.deserialize=(t,r)=>({message:r.message,type:1,offset:r.offset,length:r.length,location:r.location&&wo.deserialize(t,r.location)})})(Qu||(Qu={}));var Zu;(function(e){e.serialize=t=>t.type===0?Ju.serialize(t):Qu.serialize(t),e.deserialize=(t,r)=>r.type===0?Ju.deserialize(t,r):Qu.deserialize(t,r),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Zu||(Zu={}));var ac;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Zu.serialize)}),e.deserialize=(t,r)=>({state:r.state,duration:r.duration,messages:r.messages.map(i=>Zu.deserialize(t,i))})})(ac||(ac={}));var G5="\0",Yu=(e,t)=>e+G5+t,J5=e=>{const t=e.indexOf(G5);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Xu;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,r)=>({extId:r.extId,label:r.label,tags:r.tags,busy:r.busy,children:void 0,uri:r.uri?t.asCanonicalUri(y.revive(r.uri)):void 0,range:r.range?ze.lift(r.range):null,description:r.description,error:r.error,sortText:r.sortText})})(Xu||(Xu={}));var Q5;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(Q5||(Q5={}));var vs;(function(e){e.serialize=t=>({expand:t.expand,item:Xu.serialize(t.item)}),e.deserialize=(t,r)=>({controllerId:Ie.root(r.item.extId),expand:r.expand,item:Xu.deserialize(t,r.item)})})(vs||(vs={}));var cc;(function(e){e.serialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.uri!==void 0&&(r.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(r.range=t.item.range?.toJSON()),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}},e.deserialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.range!==void 0&&(r.range=t.item.range?ze.lift(t.item.range):null),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}}})(cc||(cc={}));var Rg=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},Z5;(function(e){e.serializeWithoutMessages=t=>({...vs.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(ac.serializeWithoutMessages)}),e.serialize=t=>({...vs.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(ac.serialize)}),e.deserialize=(t,r)=>({...vs.deserialize(t,r),ownComputedState:r.ownComputedState,computedState:r.computedState,tasks:r.tasks.map(i=>ac.deserialize(t,i)),retired:!0})})(Z5||(Z5={}));var Lg;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,r)=>{t.covered+=r.covered,t.total+=r.total}})(Lg||(Lg={}));var Y5;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({id:r.id,statement:r.statement,branch:r.branch,declaration:r.declaration,testIds:r.testIds,uri:t.asCanonicalUri(y.revive(r.uri))}),e.empty=(t,r)=>({id:t,uri:r,statement:Lg.empty()})})(Y5||(Y5={}));function Ng(e){return{...e,location:e.location?.toJSON()}}function Fg(e){return e.location=e.location?Ir.isIPosition(e.location)?Ir.lift(e.location):ze.lift(e.location):void 0,e}var X5;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(X5||(X5={}));var K5;(function(e){e.serialize=t=>t.type===0?eh.serialize(t):th.serialize(t),e.deserialize=t=>t.type===0?eh.deserialize(t):th.deserialize(t)})(K5||(K5={}));var Ku;(function(e){e.serialize=Ng,e.deserialize=Fg})(Ku||(Ku={}));var eh;(function(e){e.serialize=Ng,e.deserialize=Fg})(eh||(eh={}));var th;(function(e){e.serialize=t=>({...Ng(t),branches:t.branches?.map(Ku.serialize)}),e.deserialize=t=>({...Fg(t),branches:t.branches?.map(Ku.deserialize)})})(th||(th={}));var e6;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(e6||(e6={}));var rh;(function(e){e.deserialize=(t,r)=>r.op===0?{op:r.op,item:vs.deserialize(t,r.item)}:r.op===1?{op:r.op,item:cc.deserialize(r.item)}:r.op===2?{op:r.op,uri:t.asCanonicalUri(y.revive(r.uri)),docv:r.docv}:r,e.serialize=t=>t.op===0?{op:t.op,item:vs.serialize(t.item)}:t.op===1?{op:t.op,item:cc.serialize(t.item)}:t})(rh||(rh={}));var FI=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const r of e)switch(r.op){case 0:this.p(vs.deserialize(this.l,r.item),t);break;case 1:this.q(cc.deserialize(r.item),t);break;case 3:this.v(r.itemId,t);break;case 5:this.w(r.itemId);break;case 4:this.updatePendingRoots(r.amount);break;case 6:this.f.set(r.tag.id,r.tag);break;case 7:this.f.delete(r.id);break}t.complete?.()}p(e,t){const r=Ie.parentId(e.item.extId)?.toString();let i;if(!r)i=this.y(e),this.h.add(i),this.g.set(e.item.extId,i);else if(this.g.has(r)){const s=this.g.get(r);s.children.add(e.item.extId),i=this.y(e,s),this.g.set(e.item.extId,i)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(i),e.expand===2&&this.j++,i}q(e,t){const r=this.g.get(e.extId);if(r)return e.expand!==void 0&&(r.expand===2&&this.j--,e.expand===2&&this.j++),Rg(r,e),t.update?.(r),r}v(e,t){const r=this.g.get(e);if(!r)return;const i=Ie.parentId(r.item.extId)?.toString();i?this.g.get(i).children.delete(r.item.extId):this.h.delete(r);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==r),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},MI=W("editorGroupsService"),t6;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(t6||(t6={}));var r6;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(r6||(r6={}));var i6;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(i6||(i6={}));var s6;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(s6||(s6={}));var n6;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(n6||(n6={}));var o6;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(o6||(o6={}));var a6;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(a6||(a6={}));var OM=W("editorService"),OI=-1,UI=-2,c6;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(c6||(c6={}));var lc=(e,t)=>e===t,HI={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:lc,label:lc,description:lc,error:lc,sortText:lc,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.includes(r)))},jI=Object.entries(HI),_I=(e,t)=>{let r;for(const[i,s]of jI)s(e[i],t[i])||(r?r[i]=t[i]:r={[i]:t[i]});return r},BI=class extends he{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new eo(()=>this.flushDiff(),200)),this.g=this.B(new I),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Rg(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Rg(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const r=this.tree.get(e);if(r){if((r.expandLevels===void 0||t>r.expandLevels)&&(r.expandLevels=t),r.expand===1){const i=this.M(r);return i.isOpen()?this.L(r,t-1):i.wait().then(()=>this.L(r,t-1))}else if(r.expand===3)return r.resolveBarrier?.isOpen()===!1?r.resolveBarrier.wait().then(()=>this.L(r,t-1)):this.L(r,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Ie.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const r of t.ops)this.w(e,r);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:V2(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const r=Ie.fromExtHostTestItem(e,this.root.id,t?.actual),i=this.s.getApiFor(e);i.parent&&i.parent!==t?.actual&&this.s.getChildren(i.parent).delete(e.id);let s=this.tree.get(r.toString());if(!s){s={fullId:r,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(r.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=_I(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,r.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Ie.joinToString(r,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(r.toString(),c))}),this.y(s.actual.uri)}C(e,t,r){const i=new Set(t.map(s=>s.id));for(const s of e)i.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:r,item:{tags:e.map(s=>Yu(this.s.controllerId,s.id))}}}),i.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Yu(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Yu(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,r){this.G(e,r);const i=this.s.getApiFor(e);i.parent=r?.actual,i.listener=s=>this.w(t,s),this.J(t)}I(e,t,r){this.H(e,t,r);for(const[i,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const r=[];for(const[i,s]of this.s.getChildren(e.actual)){const n=this.expand(Ie.joinToString(e.fullId,s.id),t);fs(n)&&r.push(n)}if(r.length)return Promise.all(r).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new li;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new li,r=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let i;try{i=this.h(e.actual===this.root?void 0:e.actual)}catch(s){r(s)}return fs(i)?i.catch(r).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const r=[t];for(;r.length;){const i=r.pop();if(i){this.s.getApiFor(i.actual).listener=void 0;for(const s of i.actual.tags)this.F(s.id);this.tree.delete(i.fullId.toString());for(const[s,n]of this.s.getChildren(i.actual))r.push(this.tree.get(Ie.joinToString(i.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},zI=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},ih=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},WI=class extends Error{constructor(e,t,r){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${r}".`)}},VI=(e,t,r)=>{let i=new Map;return{get size(){return i.size},forEach(s,n){for(const o of i.values())s.call(n,o,this)},[Symbol.iterator](){return i.entries()},replace(s){const n=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof r))throw new ih(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new WI(c.id,l,e.controllerId);if(n.has(c.id))throw new zI(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),i=n},add(s){if(!(s instanceof r))throw new ih(s.id);i.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){i.delete(s)&&e.listener?.({op:3,id:s})},get(s){return i.get(s)},toJSON(){return Array.from(i.values())}}},l6=new WeakMap,qI=(e,t)=>{const r={controllerId:t};return l6.set(e,r),r},sh=e=>{const t=l6.get(e);if(!t)throw new ih(e?.id||"<unknown>");return t},UM=W("remoteAuthorityResolverService"),u6;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(u6||(u6={}));var GI=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},JI=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Ni;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Ni||(Ni={}));function h6(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var Mg,ln,Fi,Og,un,ws,hn,Ug,Hg,nh,uc,jg,pi,gi,_g,sr,Bg;function te(e){return Object.assign(e,{apply:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const i=r.length===1?[]:r[1];return Reflect.construct(e,i,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const[i,...s]=r;return Reflect.construct(e,s,i.constructor)}}})}var zg;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(zg||(zg={}));var d6;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(d6||(d6={}));var De=Mg=class{static from(...t){let r=t;return new Mg(function(){if(r){for(const i of r)i&&typeof i.dispose=="function"&&i.dispose();r=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};De=Mg=__decorate([te],De);var xe=ln=class{static Min(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isBefore(r)&&(r=s)}return r}static Max(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isAfter(r)&&(r=s)}return r}static isPosition(t){if(!t)return!1;if(t instanceof ln)return!0;const{line:r,character:i}=t;return typeof r=="number"&&typeof i=="number"}static of(t){if(t instanceof ln)return t;if(this.isPosition(t))return new ln(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,r){if(t<0)throw ye("line must be non-negative");if(r<0)throw ye("character must be non-negative");this.c=t,this.e=r}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,r=0){if(t===null||r===null)throw ye();let i;return typeof t>"u"?i=0:typeof t=="number"?i=t:(i=typeof t.lineDelta=="number"?t.lineDelta:0,r=typeof t.characterDelta=="number"?t.characterDelta:0),i===0&&r===0?this:new ln(this.line+i,this.character+r)}with(t,r=this.character){if(t===null||r===null)throw ye();let i;return typeof t>"u"?i=this.line:typeof t=="number"?i=t:(i=typeof t.line=="number"?t.line:this.line,r=typeof t.character=="number"?t.character:this.character),i===this.line&&r===this.character?this:new ln(i,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};xe=ln=__decorate([te],xe);var ve=Fi=class{static isRange(t){return t instanceof Fi?!0:t?xe.isPosition(t.start)&&xe.isPosition(t.end):!1}static of(t){if(t instanceof Fi)return t;if(this.isRange(t))return new Fi(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new xe(t,r),o=new xe(i,s)):xe.isPosition(t)&&xe.isPosition(r)&&(n=xe.of(t),o=xe.of(r)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Fi.isRange(t)?this.contains(t.start)&&this.contains(t.end):xe.isPosition(t)?!(xe.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const r=xe.Max(t.start,this.c),i=xe.Min(t.end,this.e);if(!r.isAfter(i))return new Fi(r,i)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const r=xe.Min(t.start,this.c),i=xe.Max(t.end,this.end);return new Fi(r,i)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,r=this.end){if(t===null||r===null)throw ye();let i;return t?xe.isPosition(t)?i=t:(i=t.start||this.start,r=t.end||this.end):i=this.start,i.isEqual(this.c)&&r.isEqual(this.end)?this:new Fi(i,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return f6(this)}};ve=Fi=__decorate([te],ve);var Mi=Og=class extends ve{static isSelection(t){return t instanceof Og?!0:t?ve.isRange(t)&&xe.isPosition(t.anchor)&&xe.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new xe(t,r),o=new xe(i,s)):xe.isPosition(t)&&xe.isPosition(r)&&(n=xe.of(t),o=xe.of(r)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return QI(this)}};Mi=Og=__decorate([te],Mi);function f6(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function QI(e){let t=f6(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var p6=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw ye("connectionToken")},ZI=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,r){if(typeof e!="string"||e.length===0)throw ye("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw ye("port");typeof r<"u"&&p6(r),this.host=e,this.port=Math.round(t),this.connectionToken=r}},oh=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&p6(t)}},bo=class Of extends Error{static NotAvailable(t,r){return new Of(t,Ni.NotAvailable,r)}static TemporarilyNotAvailable(t){return new Of(t,Ni.TemporarilyNotAvailable)}constructor(t,r=Ni.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,Object.setPrototypeOf(this,Of.prototype)}},Zr;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Zr||(Zr={}));var yo;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(yo||(yo={}));var bs=un=class{static isTextEdit(t){return t instanceof un?!0:t?ve.isRange(t)&&typeof t.newText=="string":!1}static replace(t,r){return new un(t,r)}static insert(t,r){return un.replace(new ve(t,t),r)}static delete(t){return un.replace(t,"")}static setEndOfLine(t){const r=new un(new ve(new xe(0,0),new xe(0,0)),"");return r.newEol=t,r}get range(){return this.c}set range(t){if(t&&!ve.isRange(t))throw ye("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw ye("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw ye("newEol");this.f=t}constructor(t,r){this.c=t,this.e=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};bs=un=__decorate([te],bs);var ah=ws=class{static isNotebookCellEdit(t){return t instanceof ws?!0:t?Ui.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,r){return new ws(t,r)}static insertCells(t,r){return new ws(new Ui(t,t),r)}static deleteCells(t){return new ws(t,[])}static updateCellMetadata(t,r){const i=new ws(new Ui(t,t),[]);return i.newCellMetadata=r,i}static updateNotebookMetadata(t){const r=new ws(new Ui(0,0),[]);return r.newNotebookMetadata=t,r}constructor(t,r){this.range=t,this.newCells=r}};ah=ws=__decorate([te],ah);var Wg=class Uf{static isSnippetTextEdit(t){return t instanceof Uf?!0:t?ve.isRange(t.range)&&fn.isSnippetString(t.snippet):!1}static replace(t,r){return new Uf(t,r)}static insert(t,r){return Uf.replace(new ve(t,t),r)}constructor(t,r){this.range=t,this.snippet=r}},g6;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(g6||(g6={}));var dn=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,r,i,s){this.c.push({_type:1,from:t,to:r,options:i,metadata:s})}createFile(t,r,i){this.c.push({_type:1,from:void 0,to:t,options:r,metadata:i})}deleteFile(t,r,i){this.c.push({_type:1,from:t,to:void 0,options:r,metadata:i})}e(t,r,i){this.c.push({_type:3,metadata:i,uri:t,edit:{editType:5,metadata:r}})}f(t,r,i,s){const n=r.start,o=r.end;(n!==o||i.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:i,metadata:s})}g(t,r,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:r,metadata:i}})}replace(t,r,i,s){this.c.push({_type:2,uri:t,edit:new bs(r,i),metadata:s})}insert(t,r,i,s){this.replace(t,new ve(r,r),i,s)}delete(t,r,i){this.replace(t,r,"",i)}has(t){return this.c.some(r=>r._type===2&&r.uri.toString()===t.toString())}set(t,r){if(r)for(const i of r){if(!i)continue;let s,n;Array.isArray(i)?(s=i[0],n=i[1]):s=i,ah.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):Wg.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let i=0;i<this.c.length;i++){const s=this.c[i];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[i]=void 0);break}}Ik(this.c)}}get(t){const r=[];for(const i of this.c)i._type===2&&i.uri.toString()===t.toString()&&r.push(i.edit);return r}entries(){const t=new Lt;for(const r of this.c)if(r._type===2){let i=t.get(r.uri);i||(i=[r.uri,[]],t.set(r.uri,i)),i[1].push(r.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};dn=__decorate([te],dn);var fn=hn=class{static isSnippetString(t){return t instanceof hn?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=hn.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,r=this.e++){if(typeof t=="function"){const i=new hn;i.e=this.e,t(i),this.e=i.e,t=i.value}else t=hn.c(t);return this.value+="${",this.value+=r,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,r=this.e++){const i=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(t,r){if(typeof r=="function"){const i=new hn;i.e=this.e,r(i),this.e=i.e,r=i.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,r&&(this.value+=":",this.value+=r),this.value+="}",this}};fn=hn=__decorate([te],fn);var pn;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(pn||(pn={}));var _t;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(_t||(_t={}));var Dr=Ug=class{static isLocation(t){return t instanceof Ug?!0:t?ve.isRange(t.range)&&y.isUri(t.uri):!1}constructor(t,r){if(this.uri=t,r)if(ve.isRange(r))this.range=ve.of(r);else if(xe.isPosition(r))this.range=new ve(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Dr=Ug=__decorate([te],Dr);var hc=class{static is(t){return t?typeof t.message=="string"&&t.location&&ve.isRange(t.location.range)&&y.isUri(t.location.uri):!1}constructor(t,r){this.location=t,this.message=r}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.location.range.isEqual(r.location.range)&&t.location.uri.toString()===r.location.uri.toString()}};hc=__decorate([te],hc);var ch=class{constructor(t,r,i=_t.Error){if(!ve.isRange(t))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=t,this.message=r,this.severity=i}toJSON(){return{severity:_t[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.severity===r.severity&&t.code===r.code&&t.severity===r.severity&&t.source===r.source&&t.range.isEqual(r.range)&&Ci(t.tags,r.tags)&&Ci(t.relatedInformation,r.relatedInformation,hc.isEqual)}};ch=__decorate([te],ch);var lh=class{constructor(t,r){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=r}};lh=__decorate([te],lh);var uh=class extends lh{constructor(t,r,i,s){super(t,r),this.canIncreaseVerbosity=i,this.canDecreaseVerbosity=s}};uh=__decorate([te],uh);var Vg;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(Vg||(Vg={}));var dc;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(dc||(dc={}));var hh=class{constructor(t,r=dc.Text){this.range=t,this.kind=r}toJSON(){return{range:this.range,kind:dc[this.kind]}}};hh=__decorate([te],hh);var dh=class{constructor(t,r){this.uri=t,this.highlights=r}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};dh=__decorate([te],dh);var qe;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(qe||(qe={}));var fc;(function(e){e[e.Deprecated=1]="Deprecated"})(fc||(fc={}));var pc=Hg=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,r,i,s,n){this.name=t,this.kind=r,this.containerName=n,typeof i=="string"&&(this.containerName=i),s instanceof Dr?this.location=s:i instanceof ve&&(this.location=new Dr(s,i)),Hg.validate(this)}toJSON(){return{name:this.name,kind:qe[this.kind],location:this.location,containerName:this.containerName}}};pc=Hg=__decorate([te],pc);var gc=nh=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(nh.validate)}constructor(t,r,i,s,n){this.name=t,this.detail=r,this.kind=i,this.range=s,this.selectionRange=n,this.children=[],nh.validate(this)}};gc=nh=__decorate([te],gc);var mc;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(mc||(mc={}));var fh=class{constructor(t,r){this.title=t,this.kind=r}};fh=__decorate([te],fh);var st=class{static{uc=this}static{this.c="."}constructor(t){this.value=t}append(t){return new uc(this.value?this.value+uc.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+uc.c)}};st=uc=__decorate([te],st),st.Empty=new st(""),st.QuickFix=st.Empty.append("quickfix"),st.Refactor=st.Empty.append("refactor"),st.RefactorExtract=st.Refactor.append("extract"),st.RefactorInline=st.Refactor.append("inline"),st.RefactorMove=st.Refactor.append("move"),st.RefactorRewrite=st.Refactor.append("rewrite"),st.Source=st.Empty.append("source"),st.SourceOrganizeImports=st.Source.append("organizeImports"),st.SourceFixAll=st.Source.append("fixAll"),st.Notebook=st.Empty.append("notebook");var vc=class{constructor(t,r){if(this.range=t,this.parent=r,r&&!r.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};vc=__decorate([te],vc);var qg=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},m6=class{constructor(e,t){this.fromRanges=t,this.from=e}},v6=class{constructor(e,t){this.fromRanges=t,this.to=e}},xo;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(xo||(xo={}));var ph=class{constructor(t,r){this.range=t,this.command=r}get isResolved(){return!!this.command}};ph=__decorate([te],ph);var yr=jg=class{#e;static isMarkdownString(t){return t instanceof jg?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,r=!1){this.#e=new Ny(t,{supportThemeIcons:r})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,r){return this.#e.appendCodeblock(r??"",t),this}};yr=jg=__decorate([te],yr);var Gg=class{constructor(t,r){this.label=t,this.documentation=r}};Gg=__decorate([te],Gg);var Jg=class{constructor(t,r){this.label=t,this.documentation=r,this.parameters=[]}};Jg=__decorate([te],Jg);var Qg=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};Qg=__decorate([te],Qg);var Zg;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(Zg||(Zg={}));var Yg;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(Yg||(Yg={}));var gh=class{constructor(t){this.value=t}};gh=__decorate([te],gh);var mh=class{constructor(t,r,i){this.position=t,this.label=r,this.kind=i}};mh=__decorate([te],mh);var Eo;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Eo||(Eo={}));var oe;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(oe||(oe={}));var wc;(function(e){e[e.Deprecated=1]="Deprecated"})(wc||(wc={}));var vh=class{constructor(t,r){this.label=t,this.kind=r}toJSON(){return{label:this.label,kind:this.kind&&oe[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};vh=__decorate([te],vh);var ko=class{constructor(t=[],r=!1){this.items=t,this.isIncomplete=r}};ko=__decorate([te],ko);var Xg=class{constructor(t,r,i){this.insertText=t,this.range=r,this.command=i}};Xg=__decorate([te],Xg);var Kg=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};Kg=__decorate([te],Kg);var gn;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(gn||(gn={}));var bc;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(bc||(bc={}));var ys;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(ys||(ys={}));function YI(e,t){return`${He.toKey(e)}.${t}`}var Yr;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Yr||(Yr={}));var So;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(So||(So={}));var wh;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(wh||(wh={}));var $o;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})($o||($o={}));var yc;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(yc||(yc={}));var mn;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(mn||(mn={})),function(e){function t(r){switch(r){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}e.fromValue=t}($o||($o={}));var Co;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Co||(Co={})),function(e){function t(r){switch(r){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Co||(Co={}));var bh=class{constructor(t,r){if(r&&!y.isUri(r))throw ye("target");if(!ve.isRange(t)||t.isEmpty)throw ye("range");this.range=t,this.target=r}};bh=__decorate([te],bh);var Io=class{constructor(t,r,i,s){this.red=t,this.green=r,this.blue=i,this.alpha=s}};Io=__decorate([te],Io);var yh=class{constructor(t,r){if(r&&!(r instanceof Io))throw ye("color");if(!ve.isRange(t)||t.isEmpty)throw ye("range");this.range=t,this.color=r}};yh=__decorate([te],yh);var xh=class{constructor(t){if(!t||typeof t!="string")throw ye("label");this.label=t}};xh=__decorate([te],xh);var w6;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(w6||(w6={}));var em;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(em||(em={}));var tm;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(tm||(tm={}));var Eh;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Eh||(Eh={}));var XI=class{constructor(e,t,r){if(this.startIndex=e,this.length=t,this.tooltip=r,typeof e!="number"||e<0)throw ye("startIndex");if(typeof t!="number"||t<1)throw ye("length");if(r!==void 0&&typeof r!="string")throw ye("tooltip")}},KI=class{constructor(e){this.uri=e}},eD=class{constructor(e){this.terminalCommand=e}},rm;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(rm||(rm={}));var tD=class{constructor(e){if(this.options=e,typeof e!="object")throw ye("options")}},im;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(im||(im={}));var sm;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(sm||(sm={}));var xc=class{static{pi=this}static{this.Clean=new pi("clean","Clean")}static{this.Build=new pi("build","Build")}static{this.Rebuild=new pi("rebuild","Rebuild")}static{this.Test=new pi("test","Test")}static from(t){switch(t){case"clean":return pi.Clean;case"build":return pi.Build;case"rebuild":return pi.Rebuild;case"test":return pi.Test;default:return}}constructor(t,r){if(this.label=r,typeof t!="string"||typeof r!="string")throw ye("name");this.c=t}get id(){return this.c}};xc=pi=__decorate([te],xc);function b6(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].replace(/,/g,",,")+",";return t}var Do=class{constructor(t,r,i){if(typeof t!="string")throw ye("process");this.e=[],this.c=t,r!==void 0&&(Array.isArray(r)?(this.e=r,this.f=i):this.f=r)}get process(){return this.c}set process(t){if(typeof t!="string")throw ye("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const r of this.e)t.push(r);return b6(t)}};Do=__decorate([te],Do);var vn=class{constructor(t,r,i){if(this.f=[],Array.isArray(r)){if(!t)throw ye("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw ye("command");this.e=t,this.f=r,this.g=i}else{if(typeof t!="string")throw ye("commandLine");this.c=t,this.g=r}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw ye("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw ye("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const r of this.f)t.push(typeof r=="string"?r:r.value);return b6(t)}};vn=__decorate([te],vn);var nm;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(nm||(nm={}));var xs;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(xs||(xs={}));var om=class{constructor(e){this.c=e}computeId(){return"customExecution"+$r()}set callback(e){this.c=e}get callback(){return this.c}},kh=class{static{gi=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,r,i,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof r=="string"?(this.o=this.name=r,this.w=this.source=i,this.execution=s,a=n,this.k=!0):r===xs.Global||r===xs.Workspace?(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o):(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Do?this.l={type:gi.e,id:this.q.computeId()}:this.q instanceof vn?this.l={type:gi.f,id:this.q.computeId()}:this.q instanceof om?this.l={type:gi.c,id:this.q.computeId()}:this.l={type:gi.g,id:$r()}}get definition(){return this.l}set definition(t){if(t==null)throw ye("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw ye("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const r=this.l.type;(gi.g===r||gi.e===r||gi.f===r||gi.c===r)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw ye("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};kh=gi=__decorate([te],kh);var wn;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(wn||(wn={}));var am;(function(e){function t(r){const i=r;return us(i.value)?i.tooltip&&!Ce(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}e.isViewBadge=t})(am||(am={}));var Sh=_g=class{static isTreeItem(t,r){const i=t;if(i.checkboxState!==void 0){const s=us(i.checkboxState)?i.checkboxState:pt(i.checkboxState)&&us(i.checkboxState.state)?i.checkboxState.state:void 0,n=!us(i.checkboxState)&&pt(i.checkboxState)?i.checkboxState.tooltip:void 0;if(s===void 0||s!==mi.Checked&&s!==mi.Unchecked||n!==void 0&&!Ce(n))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(t instanceof _g)return!0;if(i.label!==void 0&&!Ce(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Ce(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Ce(i.iconPath)&&!y.isUri(i.iconPath)&&(!i.iconPath||!Ce(i.iconPath.id))){const s=i.iconPath;if(!s||!Ce(s.light)&&!y.isUri(s.light)&&!Ce(s.dark)&&!y.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Ce(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!y.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Ce(i.tooltip)&&!(i.tooltip instanceof yr)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<bn.None&&i.collapsibleState>bn.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Ce(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!i.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(t,r=bn.None){this.collapsibleState=r,y.isUri(t)?this.resourceUri=t:this.label=t}};Sh=_g=__decorate([te],Sh);var bn;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(bn||(bn={}));var mi;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(mi||(mi={}));var $h=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};$h=__decorate([te],$h);var Ch=class extends $h{},rD=class extends Ch{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},iD=class{constructor(e,t,r,i){this.name=e,this.uri=t,this._itemId=r,this.c=i}data(){return this.c()}},Ec=class{#e=new Map;constructor(t){for(const[r,i]of t??[]){const s=this.#e.get(this.#t(r));s?s.push(i):this.#e.set(this.#t(r),[i])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,r){this.#e.set(this.#t(t),[r])}forEach(t,r){for(const[i,s]of this.#e)for(const n of s)t.call(r,n,i,this)}*[Symbol.iterator](){for(const[t,r]of this.#e)for(const i of r)yield[t,i]}#t(t){return t.toLowerCase()}};Ec=__decorate([te],Ec);var cm=class{constructor(t,r,i){this.insertText=t,this.title=r,this.kind=i}};cm=__decorate([te],cm);var lm;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(lm||(lm={}));var Ih=class Hf{static{this.c="."}constructor(t){this.value=t}append(...t){return new Hf((this.value?[this.value,...t]:t).join(Hf.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Hf.c)}};Ih.Empty=new Ih("");var sD=class{constructor(e,t,r){this.title=t,this.insertText=e,this.kind=r}},Qt=class{constructor(t,r){this.id=t,this.color=r}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};Qt=__decorate([te],Qt),Qt.File=new Qt("file"),Qt.Folder=new Qt("folder");var kc=class{constructor(t){this.id=t}};kc=__decorate([te],kc);var Po;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(Po||(Po={}));var Ao=class{get base(){return this.c}set base(t){this.c=t,this.e=y.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,r){if(typeof t!="string"&&(!t||!y.isUri(t)&&!y.isUri(t.uri)))throw ye("base");if(typeof r!="string")throw ye("pattern");typeof t=="string"?this.baseUri=y.file(t):y.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=r}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Ao=__decorate([te],Ao);var y6=new WeakMap;function nD(e,t){y6.set(e,t)}var To=class{constructor(t,r,i,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof r=="string"&&(this.condition=r),typeof i=="string"&&(this.hitCondition=i),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=y6.get(this)??$r()),this.c}};To=__decorate([te],To);var yn=class extends To{constructor(t,r,i,s,n,o){if(super(r,i,s,n,o),t===null)throw ye("location");this.location=t}};yn=__decorate([te],yn);var xn=class extends To{constructor(t,r,i,s,n,o){super(r,i,s,n,o),this.functionName=t}};xn=__decorate([te],xn);var Dh=class extends To{constructor(t,r,i,s,n,o,a,c){if(super(s,n,o,a,c),!r)throw ye("dataId");this.label=t,this.dataId=r,this.canPersist=i}};Dh=__decorate([te],Dh);var Ph=class{constructor(t,r,i){this.command=t,this.args=r||[],this.options=i}};Ph=__decorate([te],Ph);var Sc=class{constructor(t,r){this.port=t,this.host=r}};Sc=__decorate([te],Sc);var Ah=class{constructor(t){this.path=t}};Ah=__decorate([te],Ah);var $c=class{constructor(t){this.implementation=t}};$c=__decorate([te],$c);var x6=class{constructor(e,t,r){this.session=e,this.threadId=t,this.frameId=r}},E6=class{constructor(e,t){this.session=e,this.threadId=t}},Th=class{constructor(t,r){this.range=t,this.expression=r}};Th=__decorate([te],Th);var Cc;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Cc||(Cc={}));var Rh=class{constructor(t,r){this.range=t,this.text=r}};Rh=__decorate([te],Rh);var Lh=class{constructor(t,r,i=!0){this.range=t,this.variableName=r,this.caseSensitiveLookup=i}};Lh=__decorate([te],Lh);var Nh=class{constructor(t,r){this.range=t,this.expression=r}};Nh=__decorate([te],Nh);var um=class{constructor(t,r){this.frameId=t,this.stoppedLocation=r}};um=__decorate([te],um);var hm;(function(e){e[e.AIGenerated=1]="AIGenerated"})(hm||(hm={}));var Ic;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Ic||(Ic={}));var oD=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Ro;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Ro||(Ro={}));var St=sr=class extends Error{static FileExists(t){return new sr(t,me.FileExists,sr.FileExists)}static FileNotFound(t){return new sr(t,me.FileNotFound,sr.FileNotFound)}static FileNotADirectory(t){return new sr(t,me.FileNotADirectory,sr.FileNotADirectory)}static FileIsADirectory(t){return new sr(t,me.FileIsADirectory,sr.FileIsADirectory)}static NoPermissions(t){return new sr(t,me.NoPermissions,sr.NoPermissions)}static Unavailable(t){return new sr(t,me.Unavailable,sr.Unavailable)}constructor(t,r=me.Unknown,i){super(y.isUri(t)?t.toString(!0):t),this.code=i?.name??"Unknown",$4(this,r),Object.setPrototypeOf(this,sr.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};St=sr=__decorate([te],St);var dm=class{constructor(t,r,i){this.start=t,this.end=r,this.kind=i}};dm=__decorate([te],dm);var Oi;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Oi||(Oi={}));var Dc;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Dc||(Dc={}));var fm;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(fm||(fm={}));var pm;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(pm||(pm={}));var Pc;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Pc||(Pc={}));var Ac;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Ac||(Ac={}));var Tc;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(Tc||(Tc={}));var gm=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function aD(e){return typeof e>"u"||dS(e)}var cD=class EE{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let r=0,i=t.tokenTypes.length;r<i;r++)this.k.set(t.tokenTypes[r],r);for(let r=0,i=t.tokenModifiers.length;r<i;r++)this.l.set(t.tokenModifiers[r],r)}}push(t,r,i,s,n){if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,r,i,s,n);if(ve.isRange(t)&&typeof r=="string"&&aD(i))return this.o(t,r,i);throw ye()}o(t,r,i){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(r))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(r);let c=0;if(i)for(const l of i){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,r,i,s,n){if(this.f&&(t<this.c||t===this.c&&r<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let p=this.g[5*h],f=this.g[5*h+1];p===0?(p=l,f+=u):p+=l,this.g[5*h]=p,this.g[5*h+1]=f,l=p,u=f}}let o=t,a=r;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=i,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=r}static r(t){const r=[],i=t.length/5|0;for(let a=0;a<i;a++)r[a]=a;r.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],p=t[5*c+1];return h-p}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<i;a++){const c=5*r[a],l=t[c+0],u=t[c+1],h=t[c+2],p=t[c+3],f=t[c+4],m=l-n,w=m===0?u-o:u,x=5*a;s[x+0]=m,s[x+1]=w,s[x+2]=h,s[x+3]=p,s[x+4]=f,n=l,o=u}return s}build(t){return this.f?new Lo(new Uint32Array(this.g),t):new Lo(EE.r(this.g),t)}},Lo=class{constructor(e,t){this.resultId=t,this.data=e}},k6=class{constructor(e,t,r){this.start=e,this.deleteCount=t,this.data=r}},Fh=class{constructor(e,t){this.resultId=t,this.edits=e}},Mh;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Mh||(Mh={}));var lD=class{constructor(e){this.name=e}},mm;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(mm||(mm={}));var Rc=class{static{this.Back={iconPath:new Qt("arrow-left")}}constructor(){}};Rc=__decorate([te],Rc);var Lc;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(Lc||(Lc={}));var No;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(No||(No={}));var En;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(En||(En={}));var vm=class{static validate(e){if(typeof e.badge=="string"){let t=ob(e.badge,0);if(t<e.badge.length&&(t+=ob(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Qt.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,r){this.badge=e,this.tooltip=t,this.color=r}},Oh=class{constructor(t){this.kind=t}};Oh=__decorate([te],Oh);var Es;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Es||(Es={}));var Ui=class O0{static isNotebookRange(t){return t instanceof O0?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,r){if(t<0)throw ye("start must be positive");if(r<0)throw ye("end must be positive");t<=r?(this.c=t,this.e=r):(this.c=r,this.e=t)}with(t){let r=this.c,i=this.e;return t.start!==void 0&&(r=t.start),t.end!==void 0&&(i=t.end),r===this.c&&i===this.e?this:new O0(r,i)}},Uh=class U0{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(r=>U0.isNotebookCellData(r))}static isNotebookCellData(t){return!0}constructor(t,r,i,s,n,o,a){this.kind=t,this.value=r,this.languageId=i,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,U0.validate(this)}},S6=class{constructor(e){this.cells=e}},$6=class Ki{static isNotebookCellOutputItem(t){return t instanceof Ki?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const r={name:t.name,message:t.message,stack:t.stack};return Ki.json(r,"application/vnd.code.notebook.error")}static stdout(t){return Ki.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return Ki.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,r="application/octet-stream"){return new Ki(t,r)}static#e=new TextEncoder;static text(t,r=Ri.text){const i=Ki.#e.encode(String(t));return new Ki(i,r)}static json(t,r="text/x-json"){const i=JSON.stringify(t,void 0,"	");return Ki.text(i,r)}constructor(t,r){this.data=t,this.mime=r;const i=Yy(r,!0);if(!i)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},Hh=class H0{static isNotebookCellOutput(t){return t instanceof H0?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,r=!1){const i=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=Yy(o.mime);if(!i.has(a)||H5(a)){i.add(a);continue}s.add(n),r&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,r,i){this.items=H0.ensureUniqueMimeTypes(t,!0),typeof r=="string"?(this.id=r,this.metadata=i):(this.id=$r(),this.metadata=r??i)}},kn;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(kn||(kn={}));var Fo;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Fo||(Fo={}));var jh;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(jh||(jh={}));var _h;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(_h||(_h={}));var uD=class{constructor(e,t){this.text=e,this.alignment=t}},wm;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(wm||(wm={}));var Bh;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Bh||(Bh={}));var C6=class{constructor(e,t=[]){this.uri=e,this.provides=jr(t)}},hD=class{constructor(e){this.label=e}},Nc;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(Nc||(Nc={}));var bm=class{constructor(t,r){this.label=t,this.timestamp=r}};bm=__decorate([te],bm);var Mo;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(Mo||(Mo={}));var zh;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(zh||(zh={}));var ks;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(ks||(ks={}));var dD=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},fD=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},ym;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(ym||(ym={}));var Oo;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(Oo||(Oo={}));var Wh=class{constructor(t=void 0,r=void 0,i=void 0,s=!1,n=!0){this.include=t,this.exclude=r,this.profile=i,this.continuous=s,this.preserveFocus=n}};Wh=__decorate([te],Wh);var Vh=Bg=class{static diff(t,r,i){const s=new Bg(t);return s.expectedOutput=r,s.actualOutput=i,s}constructor(t){this.message=t}};Vh=Bg=__decorate([te],Vh);var Fc=class{constructor(t){this.id=t}};Fc=__decorate([te],Fc);var pD=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},qh=class{constructor(e,t){this.covered=e,this.total=t,Gh(this)}};function Gh(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Mc=class kE{static fromDetails(t,r){const i=new qh(0,0),s=new qh(0,0),n=new qh(0,0);for(const a of r)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new kE(t,i,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=r,o}constructor(t,r,i,s,n=[]){this.uri=t,this.statementCoverage=r,this.branchCoverage=i,this.declarationCoverage=s,this.fromTests=n}},I6=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r=[]){this.executed=e,this.location=t,this.branches=r}},D6=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.executed=e,this.location=t,this.label=r}},P6=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.name=e,this.executed=t,this.location=r}},xm;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(xm||(xm={}));var Em;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(Em||(Em={}));var km;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(km||(km={}));var Sm=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},$m=class{constructor(e){this.uri=e}},Jh=class{constructor(e,t){this.original=e,this.modified=t}},A6=class{constructor(e,t,r,i){this.base=e,this.input1=t,this.input2=r,this.result=i}},Cm=class{constructor(e,t){this.uri=e,this.viewType=t}},T6=class{constructor(e){this.viewType=e}},Im=class{constructor(e,t){this.uri=e,this.notebookType=t}},Dm=class{constructor(e,t,r){this.original=e,this.modified=t,this.notebookType=r}},R6=class{constructor(){}},L6=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},N6=class{constructor(){}},F6=class{constructor(e){this.textDiffs=e}},Pm;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Pm||(Pm={}));var Am;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(Am||(Am={}));var Tm;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(Tm||(Tm={}));var gD=class{constructor(e,t,r){this.id=e,this.label=t,this.values=r}},Oc;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"})(Oc||(Oc={}));var Rm;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Rm||(Rm={}));var Uc;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(Uc||(Uc={}));var Qh=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new yr(e):e}},Hc=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new yr(e):e,this.vulnerabilities=t}},jc=class{constructor(e,t){this.participant=e,this.command=t}},Zh=class{constructor(e,t,r,i){this.title=e,this.message=t,this.data=r,this.buttons=i}},Yh=class{constructor(e,t){this.value=e,this.baseUri=t}},_c=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},Bc=class{constructor(e){this.value=e}},Xh=class{constructor(e,t){this.value=e,this.task=t}},zc=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new yr(e):e}},Kh=class{constructor(e){this.value=e}},Hi=class{constructor(e,t,r){this.value=e,this.iconPath=t,this.options=r}},ed=class{constructor(e){this.value=e}},td=class{constructor(e,t,r){this.value=e,this.license=t,this.snippet=r}},rd=class{constructor(e,t){this.uri=e,this.range=t}},Wc=class{constructor(e,t){this.uri=e,this.edits=Array.isArray(t)?t:[t]}},M6=class{constructor(e,t,r,i,s){this.prompt=e,this.command=t,this.references=r,this.participant=i,this.toolReferences=s}},O6=class{constructor(e,t,r,i){this.response=e,this.result=t,this.participant=r,this.command=i}},Pr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor",e[e.EditingSession=5]="EditingSession"})(Pr||(Pr={}));var Lm;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(Lm||(Lm={}));var U6=class{constructor(e,t,r){this.document=e,this.selection=t,this.wholeRange=r}},H6=class{constructor(e){this.cell=e}},j6=class{constructor(e,t){this.mimeType=e,this.data=t}},Nr;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Nr||(Nr={}));var Nm=class{constructor(e,t,r){this.callId=e,this.content=t,this.isError=r??!1}},_6=class j0{static User(t,r){return new j0(Nr.User,t,r)}static Assistant(t,r){return new j0(Nr.Assistant,t,r)}set content(t){typeof t=="string"?this.c=[new Zt(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(r=>typeof r=="string"?new Zt(r):r))}get content2(){return this.content.map(t=>t instanceof Zt?t.value:t)}constructor(t,r,i){this.c=[],this.role=t,this.content=r,this.name=i}},Vc=class{constructor(e,t,r){this.callId=e,this.name=t,this.input=r,this.parameters=r}},Zt=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},Uo=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},ji=class On extends Error{static NotFound(t){return new On(t,On.NotFound.name)}static NoPermissions(t){return new On(t,On.NoPermissions.name)}static Blocked(t){return new On(t,On.Blocked.name)}constructor(t,r,i){super(t,{cause:i}),this.name="LanguageModelError",this.code=r??""}},Fm=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},Mm;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(Mm||(Mm={}));var Om;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(Om||(Om={}));var Um;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(Um||(Um={}));var Hm;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(Hm||(Hm={}));var jm;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(jm||(jm={}));var mD=class{constructor(e,t){this.text=e,this.range=t}},qc;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(qc||(qc={}));var Xr;(function(e){function t(i){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=i,c=new xe(s-1,n-1),l=new xe(o-1,a-1);return new Mi(c,l)}e.to=t;function r(i){const{anchor:s,active:n}=i;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=r})(Xr||(Xr={}));var N;(function(e){function t(i){if(!i)return;const{start:s,end:n}=i;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function r(i){if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=i;return new ve(s-1,n-1,o-1,a-1)}e.to=r})(N||(N={}));var Ss;(function(e){function t(i){return{uri:i.uri,range:N.from(i.range)}}e.from=t;function r(i){return new Dr(y.revive(i.uri),N.to(i.range))}e.to=r})(Ss||(Ss={}));var _m;(function(e){function t(r){switch(r){case 1:return ks.Comment;case 0:return ks.Other;case 3:return ks.RegEx;case 2:return ks.String}}e.to=t})(_m||(_m={}));var Fe;(function(e){function t(i){return new xe(i.lineNumber-1,i.column-1)}e.to=t;function r(i){return{lineNumber:i.line+1,column:i.character+1}}e.from=r})(Fe||(Fe={}));var Ho;(function(e){function t(s,n,o){return bt(jr(s).map(a=>r(a,n,o)))}e.from=t;function r(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:i(s.scheme,n),pattern:xr.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function i(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(Ho||(Ho={}));var id;(function(e){function t(i){switch(i){case pn.Unnecessary:return 1;case pn.Deprecated:return 2}}e.from=t;function r(i){switch(i){case 1:return pn.Unnecessary;case 2:return pn.Deprecated;default:return}}e.to=r})(id||(id={}));var jo;(function(e){function t(i){let s;return i.code&&(Ce(i.code)||us(i.code)?s=String(i.code):s={value:String(i.code.value),target:i.code.target}),{...N.from(i.range),message:i.message,source:i.source,code:s,severity:nd.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(sd.from),tags:Array.isArray(i.tags)?bt(i.tags.map(id.from)):void 0}}e.from=t;function r(i){const s=new ch(N.to(i),i.message,nd.to(i.severity));return s.source=i.source,s.code=Ce(i.code)?i.code:i.code?.value,s.relatedInformation=i.relatedInformation&&i.relatedInformation.map(sd.to),s.tags=i.tags&&bt(i.tags.map(id.to)),s}e.to=r})(jo||(jo={}));var sd;(function(e){function t(i){return{...N.from(i.location.range),message:i.message,resource:i.location.uri}}e.from=t;function r(i){return new hc(new Dr(i.resource,N.to(i)),i.message)}e.to=r})(sd||(sd={}));var nd;(function(e){function t(i){switch(i){case _t.Error:return ir.Error;case _t.Warning:return ir.Warning;case _t.Information:return ir.Info;case _t.Hint:return ir.Hint}return ir.Error}e.from=t;function r(i){switch(i){case ir.Info:return _t.Information;case ir.Warning:return _t.Warning;case ir.Error:return _t.Error;case ir.Hint:return _t.Hint;default:return _t.Error}}e.to=r})(nd||(nd={}));var $t;(function(e){function t(i){return typeof i=="number"&&i>=bc.One?i-1:i===bc.Beside?UI:OI}e.from=t;function r(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=r})($t||($t={}));function vD(e){return typeof e.range<"u"}function B6(e){return e.length===0?!0:!!vD(e[0])}var Ee;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function r(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(r(a)){const{language:h,value:p}=a;c={value:"```"+h+`
`+p+"\n```\n"}}else yr.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let p=y.parse(h,!0);p=p.with({query:s(p.query,l)}),l[h]=p}catch{}return""};return Je.walkTokens(Je.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(n2(h.href))}),c}e.from=i;function s(a,c){if(!a)return a;let l;try{l=Zy(a)}catch{}if(!l)return a;let u=!1;return l=so(l,h=>{if(y.isUri(h)){const p=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[p]=h,u=!0,p}else return}),u?JSON.stringify(l):a}function n(a){const c=new yr(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(Ee||(Ee={}));function wD(e){return B6(e)?e.map(t=>({range:N.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?Ee.fromMany(t.hoverMessage):t.hoverMessage?Ee.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:N.from(t)}))}function od(e){return typeof e>"u"?e:typeof e=="string"?y.file(e):e}var _o;(function(e){function t(r){return typeof r>"u"?r:{contentText:r.contentText,contentIconPath:r.contentIconPath?od(r.contentIconPath):void 0,border:r.border,borderColor:r.borderColor,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,color:r.color,backgroundColor:r.backgroundColor,margin:r.margin,width:r.width,height:r.height}}e.from=t})(_o||(_o={}));var ad;(function(e){function t(r){return typeof r>"u"?r:{backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?od(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?_o.from(r.before):void 0,after:r.after?_o.from(r.after):void 0}}e.from=t})(ad||(ad={}));var Bm;(function(e){function t(r){if(typeof r>"u")return r;switch(r){case mn.OpenOpen:return 0;case mn.ClosedClosed:return 1;case mn.OpenClosed:return 2;case mn.ClosedOpen:return 3}}e.from=t})(Bm||(Bm={}));var zm;(function(e){function t(r){return{isWholeLine:r.isWholeLine,rangeBehavior:r.rangeBehavior?Bm.from(r.rangeBehavior):void 0,overviewRulerLane:r.overviewRulerLane,light:r.light?ad.from(r.light):void 0,dark:r.dark?ad.from(r.dark):void 0,backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?od(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?_o.from(r.before):void 0,after:r.after?_o.from(r.after):void 0}}e.from=t})(zm||(zm={}));var Ct;(function(e){function t(i){return{text:i.newText,eol:i.newEol&&Vo.from(i.newEol),range:N.from(i.range)}}e.from=t;function r(i){const s=new bs(N.to(i.range),i.text);return s.newEol=typeof i.eol>"u"?void 0:Vo.to(i.eol),s}e.to=r})(Ct||(Ct={}));var Yt;(function(e){function t(i,s){const n={edits:[]};if(i instanceof dn){const o=new sw;for(const a of i._allEntries())a._type===1&&y.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of i._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:ap(ke.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Ct.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:N.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(Xc.from)}})}return n}e.from=t;function r(i){const s=new dn,n=new Lt;for(const o of i.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=N.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let p;h?p=Wg.replace(l,new fn(u)):p=bs.replace(l,u);const f=n.get(c);f?f.push(p):n.set(c,[p])}else s.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=r})(Yt||(Yt={}));var Fr;(function(e){const t=Object.create(null);t[qe.File]=0,t[qe.Module]=1,t[qe.Namespace]=2,t[qe.Package]=3,t[qe.Class]=4,t[qe.Method]=5,t[qe.Property]=6,t[qe.Field]=7,t[qe.Constructor]=8,t[qe.Enum]=9,t[qe.Interface]=10,t[qe.Function]=11,t[qe.Variable]=12,t[qe.Constant]=13,t[qe.String]=14,t[qe.Number]=15,t[qe.Boolean]=16,t[qe.Array]=17,t[qe.Object]=18,t[qe.Key]=19,t[qe.Null]=20,t[qe.EnumMember]=21,t[qe.Struct]=22,t[qe.Event]=23,t[qe.Operator]=24,t[qe.TypeParameter]=25;function r(s){return typeof t[s]=="number"?t[s]:6}e.from=r;function i(s){for(const n in t)if(t[n]===s)return Number(n);return qe.Property}e.to=i})(Fr||(Fr={}));var _i;(function(e){function t(i){switch(i){case fc.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return fc.Deprecated}}e.to=r})(_i||(_i={}));var Sn;(function(e){function t(i){return{name:i.name,kind:Fr.from(i.kind),tags:i.tags&&i.tags.map(_i.from),containerName:i.containerName,location:nr.from(i.location)}}e.from=t;function r(i){const s=new pc(i.name,Fr.to(i.kind),i.containerName,nr.to(i.location));return s.tags=i.tags&&i.tags.map(_i.to),s}e.to=r})(Sn||(Sn={}));var Wm;(function(e){function t(i){const s={name:i.name||"!!MISSING: name!!",detail:i.detail,range:N.from(i.range),selectionRange:N.from(i.selectionRange),kind:Fr.from(i.kind),tags:i.tags?.map(_i.from)??[]};return i.children&&(s.children=i.children.map(t)),s}e.from=t;function r(i){const s=new gc(i.name,i.detail,Fr.to(i.kind),N.to(i.range),N.to(i.selectionRange));return ka(i.tags)&&(s.tags=i.tags.map(_i.to)),i.children&&(s.children=i.children.map(r)),s}e.to=r})(Wm||(Wm={}));var $n;(function(e){function t(i){const s=new qg(Fr.to(i.kind),i.name,i.detail||"",y.revive(i.uri),N.to(i.range),N.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:i.name,detail:i.detail,kind:Fr.from(i.kind),uri:i.uri,range:N.from(i.range),selectionRange:N.from(i.selectionRange),tags:i.tags?.map(_i.from)}}e.from=r})($n||($n={}));var Vm;(function(e){function t(r){return new m6($n.to(r.from),r.fromRanges.map(i=>N.to(i)))}e.to=t})(Vm||(Vm={}));var qm;(function(e){function t(r){return new v6($n.to(r.to),r.fromRanges.map(i=>N.to(i)))}e.to=t})(qm||(qm={}));var nr;(function(e){function t(i){return{range:i.range&&N.from(i.range),uri:i.uri}}e.from=t;function r(i){return new Dr(y.revive(i.uri),N.to(i.range))}e.to=r})(nr||(nr={}));var Gc;(function(e){function t(i){const s=i,n=i;return{originSelectionRange:s.originSelectionRange?N.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:N.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?N.from(s.targetSelectionRange):void 0}}e.from=t;function r(i){return{targetUri:y.revive(i.uri),targetRange:N.to(i.range),targetSelectionRange:i.targetSelectionRange?N.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?N.to(i.originSelectionRange):void 0}}e.to=r})(Gc||(Gc={}));var Jc;(function(e){function t(i){return{range:N.from(i.range),contents:Ee.fromMany(i.contents),canIncreaseVerbosity:i.canIncreaseVerbosity,canDecreaseVerbosity:i.canDecreaseVerbosity}}e.from=t;function r(i){const s=i.contents.map(Ee.to),n=N.to(i.range),o=i.canIncreaseVerbosity,a=i.canDecreaseVerbosity;return new uh(s,n,o,a)}e.to=r})(Jc||(Jc={}));var Gm;(function(e){function t(i){return{range:N.from(i.range),expression:i.expression}}e.from=t;function r(i){return new Th(N.to(i.range),i.expression)}e.to=r})(Gm||(Gm={}));var cd;(function(e){function t(i){if(i instanceof Rh)return{type:"text",range:N.from(i.range),text:i.text};if(i instanceof Lh)return{type:"variable",range:N.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof Nh)return{type:"expression",range:N.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function r(i){switch(i.type){case"text":return{range:N.to(i.range),text:i.text};case"variable":return{range:N.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:N.to(i.range),expression:i.expression}}}e.to=r})(cd||(cd={}));var ld;(function(e){function t(i){return{frameId:i.frameId,stoppedLocation:N.from(i.stoppedLocation)}}e.from=t;function r(i){return new um(i.frameId,N.to(i.stoppedLocation))}e.to=r})(ld||(ld={}));var Bo;(function(e){function t(i){return{range:N.from(i.range),kind:i.kind}}e.from=t;function r(i){return new hh(N.to(i.range),i.kind)}e.to=r})(Bo||(Bo={}));var Jm;(function(e){function t(i){return{uri:i.uri,highlights:i.highlights.map(Bo.from)}}e.from=t;function r(i){return new dh(y.revive(i.uri),i.highlights.map(Bo.to))}e.to=r})(Jm||(Jm={}));var Qm;(function(e){function t(r){switch(r){case 1:return Eo.TriggerCharacter;case 2:return Eo.TriggerForIncompleteCompletions;case 0:default:return Eo.Invoke}}e.to=t})(Qm||(Qm={}));var Zm;(function(e){function t(r){return{triggerKind:Qm.to(r.triggerKind),triggerCharacter:r.triggerCharacter}}e.to=t})(Zm||(Zm={}));var ud;(function(e){function t(i){switch(i){case wc.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return wc.Deprecated}}e.to=r})(ud||(ud={}));var hd;(function(e){const t=new Map([[oe.Method,0],[oe.Function,1],[oe.Constructor,2],[oe.Field,3],[oe.Variable,4],[oe.Class,5],[oe.Interface,7],[oe.Struct,6],[oe.Module,8],[oe.Property,9],[oe.Unit,12],[oe.Value,13],[oe.Constant,14],[oe.Enum,15],[oe.EnumMember,16],[oe.Keyword,17],[oe.Snippet,27],[oe.Text,18],[oe.Color,19],[oe.File,20],[oe.Reference,21],[oe.Folder,23],[oe.Event,10],[oe.Operator,11],[oe.TypeParameter,24],[oe.Issue,26],[oe.User,25]]);function r(n){return t.get(n)??9}e.from=r;const i=new Map([[0,oe.Method],[1,oe.Function],[2,oe.Constructor],[3,oe.Field],[4,oe.Variable],[5,oe.Class],[7,oe.Interface],[6,oe.Struct],[8,oe.Module],[9,oe.Property],[12,oe.Unit],[13,oe.Value],[14,oe.Constant],[15,oe.Enum],[16,oe.EnumMember],[17,oe.Keyword],[27,oe.Snippet],[18,oe.Text],[19,oe.Color],[20,oe.File],[21,oe.Reference],[23,oe.Folder],[10,oe.Event],[11,oe.Operator],[24,oe.TypeParameter],[25,oe.User],[26,oe.Issue]]);function s(n){return i.get(n)??oe.Property}e.to=s})(hd||(hd={}));var Ym;(function(e){function t(r,i){const s=new vh(r.label);return s.insertText=r.insertText,s.kind=hd.to(r.kind),s.tags=r.tags?.map(ud.to),s.detail=r.detail,s.documentation=Xs(r.documentation)?Ee.to(r.documentation):r.documentation,s.sortText=r.sortText,s.filterText=r.filterText,s.preselect=r.preselect,s.commitCharacters=r.commitCharacters,ze.isIRange(r.range)?s.range=N.to(r.range):typeof r.range=="object"&&(s.range={inserting:N.to(r.range.insert),replacing:N.to(r.range.replace)}),s.keepWhitespace=typeof r.insertTextRules>"u"?!1:!!(r.insertTextRules&1),typeof r.insertTextRules<"u"&&r.insertTextRules&4?s.insertText=new fn(r.insertText):(s.insertText=r.insertText,s.textEdit=s.range instanceof ve?new bs(s.range,s.insertText):void 0),r.additionalTextEdits&&r.additionalTextEdits.length>0&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>Ct.to(n))),s.command=i&&r.command?i.fromInternal(r.command):void 0,s}e.to=t})(Ym||(Ym={}));var dd;(function(e){function t(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:Ee.fromStrict(i.documentation)}}e.from=t;function r(i){return{label:i.label,documentation:Xs(i.documentation)?Ee.to(i.documentation):i.documentation}}e.to=r})(dd||(dd={}));var fd;(function(e){function t(i){return{label:i.label,documentation:Ee.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(dd.from):[],activeParameter:i.activeParameter}}e.from=t;function r(i){return{label:i.label,documentation:Xs(i.documentation)?Ee.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(dd.to):[],activeParameter:i.activeParameter}}e.to=r})(fd||(fd={}));var Qc;(function(e){function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(fd.from):[]}}e.from=t;function r(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(fd.to):[]}}e.to=r})(Qc||(Qc={}));var Xm;(function(e){function t(r,i){const s=new mh(Fe.to(i.position),typeof i.label=="string"?i.label:i.label.map(Km.to.bind(void 0,r)),i.kind&&pd.to(i.kind));return s.textEdits=i.textEdits&&i.textEdits.map(Ct.to),s.tooltip=Xs(i.tooltip)?Ee.to(i.tooltip):i.tooltip,s.paddingLeft=i.paddingLeft,s.paddingRight=i.paddingRight,s}e.to=t})(Xm||(Xm={}));var Km;(function(e){function t(r,i){const s=new gh(i.label);return s.tooltip=Xs(i.tooltip)?Ee.to(i.tooltip):i.tooltip,fg.is(i.command)&&(s.command=r.fromInternal(i.command)),i.location&&(s.location=nr.to(i.location)),s}e.to=t})(Km||(Km={}));var pd;(function(e){function t(i){return i}e.from=t;function r(i){return i}e.to=r})(pd||(pd={}));var Cn;(function(e){function t(i){return{range:N.from(i.range),url:i.target,tooltip:i.tooltip}}e.from=t;function r(i){let s;if(i.url)try{s=typeof i.url=="string"?y.parse(i.url,!0):y.revive(i.url)}catch{}const n=new bh(N.to(i.range),s);return n.tooltip=i.tooltip,n}e.to=r})(Cn||(Cn={}));var gd;(function(e){function t(i){const s=new xh(i.label);return i.textEdit&&(s.textEdit=Ct.to(i.textEdit)),i.additionalTextEdits&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>Ct.to(n))),s}e.to=t;function r(i){return{label:i.label,textEdit:i.textEdit?Ct.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(s=>Ct.from(s)):void 0}}e.from=r})(gd||(gd={}));var zo;(function(e){function t(i){return new Io(i[0],i[1],i[2],i[3])}e.to=t;function r(i){return[i.red,i.green,i.blue,i.alpha]}e.from=r})(zo||(zo={}));var e1;(function(e){function t(i){return{range:N.from(i.range)}}e.from=t;function r(i){return new vc(N.to(i.range))}e.to=r})(e1||(e1={}));var md;(function(e){function t(r){switch(r){case 2:return So.AfterDelay;case 1:return So.Manual;case 3:case 4:return So.FocusOut}}e.to=t})(md||(md={}));var Wo;(function(e){function t(i){switch(i){case Yr.Off:return 0;case Yr.Relative:return 2;case Yr.Interval:return 3;case Yr.On:default:return 1}}e.from=t;function r(i){switch(i){case 0:return Yr.Off;case 2:return Yr.Relative;case 3:return Yr.Interval;case 1:default:return Yr.On}}e.to=r})(Wo||(Wo={}));var Vo;(function(e){function t(i){if(i===Zr.CRLF)return 1;if(i===Zr.LF)return 0}e.from=t;function r(i){if(i===1)return Zr.CRLF;if(i===0)return Zr.LF}e.to=r})(Vo||(Vo={}));var t1;(function(e){function t(r){if(typeof r=="object")return r.viewId;switch(r){case wn.SourceControl:return 3;case wn.Window:return 10;case wn.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(t1||(t1={}));var vd;(function(e){function t(i){const s={start:i.start+1,end:i.end+1};return i.kind&&(s.kind=wd.from(i.kind)),s}e.from=t;function r(i){const s={start:i.start-1,end:i.end-1};return i.kind&&(s.kind=wd.to(i.kind)),s}e.to=r})(vd||(vd={}));var wd;(function(e){function t(i){if(i)switch(i){case Oi.Comment:return ao.Comment;case Oi.Imports:return ao.Imports;case Oi.Region:return ao.Region}}e.from=t;function r(i){if(i)switch(i.value){case ao.Comment.value:return Oi.Comment;case ao.Imports.value:return Oi.Imports;case ao.Region.value:return Oi.Region}}e.to=r})(wd||(wd={}));var Zc;(function(e){function t(r){if(r)return{pinned:typeof r.preview=="boolean"?!r.preview:void 0,inactive:r.background,preserveFocus:r.preserveFocus,selection:typeof r.selection=="object"?N.from(r.selection):void 0,override:typeof r.override=="boolean"?X2.id:void 0}}e.from=t})(Zc||(Zc={}));var xr;(function(e){function t(n){return n instanceof Ao?n.toJSON():typeof n=="string"?n:r(n)||i(n)?new Ao(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function r(n){const o=n;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Ao(y.revive(n.baseUri),n.pattern)}e.to=s})(xr||(xr={}));var r1;(function(e){function t(r){if(r){if(Array.isArray(r))return r.map(t);if(typeof r=="string")return r;{const i=r;return{language:i.language,scheme:i.scheme,pattern:xr.from(i.pattern)??void 0,exclusive:i.exclusive,notebookType:i.notebookType}}}else return}e.from=t})(r1||(r1={}));var bd;(function(e){function t(i){return!!i&&typeof i=="object"&&"documents"in i&&Array.isArray(i.documents)&&i.documents.every(s=>Array.isArray(s)&&s.every(qo.is))}e.is=t;function r(i){return{documents:i.documents.map(s=>s.map(qo.from)),conversation:i.conversation?.map(s=>s.type==="request"?{type:"request",message:s.message}:{type:"response",message:s.message,result:s.result?Ps.from(s.result):void 0,references:s.references?.map(qo.from)})}}e.from=r})(bd||(bd={}));var qo;(function(e){function t(s){return typeof s=="object"&&s!==null&&"uri"in s&&y.isUri(s.uri)&&"version"in s&&typeof s.version=="number"&&"ranges"in s&&Array.isArray(s.ranges)&&s.ranges.every(n=>n instanceof ve)}e.is=t;function r(s){return{uri:s.uri,version:s.version,ranges:s.ranges.map(n=>N.from(n))}}e.from=r;function i(s){return{uri:y.revive(s.uri),version:s.version,ranges:s.ranges.map(n=>N.to(n))}}e.to=i})(qo||(qo={}));var vi;(function(e){function t(i){return{start:i.start,end:i.end}}e.from=t;function r(i){return new Ui(i.start,i.end)}e.to=r})(vi||(vi={}));var Go;(function(e){function t(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}e.to=t;function r(i){return{lastRunSuccess:i.success,runStartTime:i.timing?.startTime,runEndTime:i.timing?.endTime,executionOrder:i.executionOrder}}e.from=r})(Go||(Go={}));var i1;(function(e){function t(r){if(r===oc.Unconfirmed)return Fo.Pending;if(r===oc.Pending)return;if(r===oc.Executing)return Fo.Executing;throw new Error(`Unknown state: ${r}`)}e.to=t})(i1||(i1={}));var Yc;(function(e){function t(i){switch(i){case kn.Markup:return vo.Markup;case kn.Code:default:return vo.Code}}e.from=t;function r(i){switch(i){case vo.Markup:return kn.Markup;case vo.Code:default:return kn.Code}}e.to=r})(Yc||(Yc={}));var $s;(function(e){function t(i){const s={metadata:i.metadata??Object.create(null),cells:[]};for(const n of i.cells)Uh.validate(n),s.cells.push(Xc.from(n));return s}e.from=t;function r(i){const s=new S6(i.cells.map(Xc.to));return gb(i.metadata)||(s.metadata=i.metadata),s}e.to=r})($s||($s={}));var Xc;(function(e){function t(i){return{cellKind:Yc.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:Go.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(Cs.from):[]}}e.from=t;function r(i){return new Uh(Yc.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(Cs.to):void 0,i.metadata,i.internalMetadata?Go.to(i.internalMetadata):void 0)}e.to=r})(Xc||(Xc={}));var Jo;(function(e){function t(i){return{mime:i.mime,valueBytes:ke.wrap(i.data)}}e.from=t;function r(i){return new $6(i.valueBytes.buffer,i.mime)}e.to=r})(Jo||(Jo={}));var Cs;(function(e){function t(i){return{outputId:i.id,items:i.items.map(Jo.from),metadata:i.metadata}}e.from=t;function r(i){const s=i.items.map(Jo.to);return new Hh(s,i.outputId,i.metadata)}e.to=r})(Cs||(Cs={}));var yd;(function(e){function t(s){return i(s)?{include:xr.from(s.include)??void 0,exclude:xr.from(s.exclude)??void 0}:xr.from(s)??void 0}e.from=t;function r(s){return i(s)?{include:xr.to(s.include),exclude:xr.to(s.exclude)}:xr.to(s)}e.to=r;function i(s){const n=s;return n?!gt(n.include)&&!gt(n.exclude):!1}})(yd||(yd={}));var s1;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{alignment:r.alignment===jh.Left?1:2,command:i.toInternal(n,s),text:r.text,tooltip:r.tooltip,accessibilityInformation:r.accessibilityInformation,priority:r.priority}}e.from=t})(s1||(s1={}));var n1;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{command:i.toInternal(n,s),label:r.label,description:r.description,detail:r.detail,documentation:r.documentation}}e.from=t})(n1||(n1={}));var o1;(function(e){function t(r){return{transientOutputs:r?.transientOutputs??!1,transientCellMetadata:r?.transientCellMetadata??{},transientDocumentMetadata:r?.transientDocumentMetadata??{},cellContentMetadata:r?.cellContentMetadata??{}}}e.from=t})(o1||(o1={}));var xd;(function(e){function t(i){return{uri:i.uri,provides:i.provides}}e.from=t;function r(i){return new C6(y.revive(i.uri),i.provides)}e.to=r})(xd||(xd={}));var Qo;(function(e){function t(i){return{message:Ee.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:N.from(i.location.range),uri:i.location.uri},stackTrace:i.stackTrace?.map(s=>({label:s.label,position:s.position&&Fe.from(s.position),uri:s.uri&&y.revive(s.uri).toJSON()}))}}e.from=t;function r(i){const s=new Vh(typeof i.message=="string"?i.message:Ee.to(i.message));return s.actualOutput=i.actual,s.expectedOutput=i.expected,s.contextValue=i.contextValue,s.location=i.location?nr.to(i.location):void 0,s}e.to=r})(Qo||(Qo={}));var Kr;(function(e){e.namespace=Yu,e.denamespace=J5})(Kr||(Kr={}));var Is;(function(e){function t(i){const s=sh(i).controllerId;return{extId:Ie.fromExtHostTestItem(i,s).toString(),label:i.label,uri:y.revive(i.uri),busy:i.busy,tags:i.tags.map(n=>Kr.namespace(s,n.id)),range:ze.lift(N.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&Ee.fromStrict(i.error)||null}}e.from=t;function r(i){return{parent:void 0,error:void 0,id:Ie.fromString(i.extId).localId,label:i.label,uri:y.revive(i.uri),tags:(i.tags||[]).map(s=>{const{tagId:n}=Kr.denamespace(s);return new Fc(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:N.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}e.toPlain=r})(Is||(Is={})),function(e){function t(i){return{id:i.id}}e.from=t;function r(i){return new Fc(i.id)}e.to=r}(Kr||(Kr={}));var a1;(function(e){const t=(i,s)=>{const n=i.value;if(!n)return;const o={...Is.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(Qo.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function r(i){const s=new B2;for(const a of i.items)s.insert(Ie.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>t(a)).filter(Js)}}e.to=r})(a1||(a1={}));var Kc;(function(e){function t(a){return{covered:a.covered,total:a.total}}function r(a){return"line"in a?Fe.from(a):N.from(a)}function i(a){if(a)return"endLineNumber"in a?N.to(a):Fe.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:i(l.location),label:l.label});return new I6(a.count,i(a.location),a.branches?.map(l=>new D6(l.count,i(l.location),l.label)))}else return new P6(a.name,a.count,i(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:r(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&r(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:r(a.location)}}e.fromDetails=n;function o(a,c,l){return Gh(l.statementCoverage),Gh(l.branchCoverage),Gh(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Mc&&l.fromTests.length?l.fromTests.map(u=>Ie.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Kc||(Kc={}));var c1;(function(e){function t(r){switch(r){case 1:return mc.Invoke;case 2:return mc.Automatic}}e.to=t})(c1||(c1={}));var In;(function(e){function t(i){const s=new Sm(Fr.to(i.kind),i.name,i.detail||"",y.revive(i.uri),N.to(i.range),N.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:Fr.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:N.from(i.range),selectionRange:N.from(i.selectionRange),tags:i.tags?.map(_i.from)}}e.from=r})(In||(In={}));var Ed;(function(e){function t(r){if(r)return{value:r.value,tooltip:r.tooltip}}e.from=t})(Ed||(Ed={}));var kd;(function(e){function t(n,o,a){const c=o.fileData;return c?new rD(new iD(c.name,y.revive(c.uri),c.id,ip(()=>a(c.id)))):n===Ri.uriList&&o.uriListData?new Ch(s(o.uriListData)):new Ch(o.asString)}e.to=t;async function r(n,o){const a=await o.asString();if(n===Ri.uriList)return{asString:a,fileData:void 0,uriListData:i(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=r;function i(n){return Zp.split(n).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function s(n){return Zp.create(n.map(o=>typeof o=="string"?o:y.revive(o)))}})(kd||(kd={}));var Ds;(function(e){function t(i,s){const n=i.items.map(([o,a])=>[o,kd.to(o,a,s)]);return new Ec(n)}e.toDataTransfer=t;async function r(i){const s={items:[]},n=[];for(const[o,a]of i)n.push((async()=>{s.items.push([o,await kd.from(o,a)])})());return await Promise.all(n),s}e.from=r})(Ds||(Ds={}));var el;(function(e){function t(i,s){return{kind:"reply",agentId:i.participant??s?.agentId??"",subCommand:i.command??s?.command,message:i.prompt,title:i.label}}e.from=t;function r(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}e.to=r})(el||(el={}));var Sd;(function(e){function t(i){switch(i){case 0:return Nr.System;case 1:return Nr.User;case 2:return Nr.Assistant}}e.to=t;function r(i){switch(i){case Nr.System:return 0;case Nr.User:return 1;case Nr.Assistant:return 2}return 1}e.from=r})(Sd||(Sd={}));var Zo;(function(e){function t(i){const s=i.content.map(a=>{if(a.type==="text")return new Zt(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new Zt(l.value):new Uo(l.value));return new Nm(a.toolCallId,c,a.isError)}else return new Vc(a.toolCallId,a.name,a.parameters)}),n=Sd.to(i.role);return new _6(n,s,i.name)}e.to=t;function r(i){const s=Sd.from(i.role),n=i.name;let o=i.content;typeof o=="string"&&(o=[new Zt(o)]);const a=o.map(c=>{if(c instanceof Nm)return{type:"tool_result",toolCallId:c.callId,value:bt(c.content.map(l=>l instanceof Zt?{type:"text",value:l.value}:l instanceof Uo?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof Vc)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input??c.parameters};if(c instanceof Zt)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=r})(Zo||(Zo={}));var tl;(function(e){function t(i){return{kind:"markdownContent",content:Ee.from(i.value)}}e.from=t;function r(i){return new Qh(Ee.to(i.content))}e.to=r})(tl||(tl={}));var $d;(function(e){function t(i){return{kind:"codeblockUri",uri:i.value}}e.from=t;function r(i){return new ed(y.revive(i.uri))}e.to=r})($d||($d={}));var Cd;(function(e){function t(i){return{kind:"markdownVuln",content:Ee.from(i.value),vulnerabilities:i.vulnerabilities}}e.from=t;function r(i){return new Hc(Ee.to(i.content),i.vulnerabilities)}e.to=r})(Cd||(Cd={}));var Id;(function(e){function t(i){return{kind:"agentDetection",agentId:i.participant,command:i.command}}e.from=t;function r(i){return new jc(i.agentId,i.command)}e.to=r})(Id||(Id={}));var Dd;(function(e){function t(r){return{kind:"confirmation",title:r.title,message:r.message,data:r.data,buttons:r.buttons}}e.from=t})(Dd||(Dd={}));var rl;(function(e){function t(i){const{value:s,baseUri:n}=i;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:ds(n),uri:n,children:o(s,n)}}}e.from=t;function r(i){const s=tr(i.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Yh(a,o)}e.to=r})(rl||(rl={}));var Yo;(function(e){function t(i){const s=o=>y.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:i.title,inlineReference:s(i.value)?i.value:n(i.value)?Sn.from(i.value):Ss.from(i.value)}}e.from=t;function r(i){const s=tr(i);return new _c(y.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Sn.to(s.inlineReference):Ss.to(s.inlineReference),i.name)}e.to=r})(Yo||(Yo={}));var Dn;(function(e){function t(i){return{kind:"progressMessage",content:Ee.from(i.value)}}e.from=t;function r(i){return new Bc(i.content.value)}e.to=r})(Dn||(Dn={}));var il;(function(e){function t(i){return{kind:"warning",content:Ee.from(i.value)}}e.from=t;function r(i){return new zc(i.content.value)}e.to=r})(il||(il={}));var l1;(function(e){function t(i){return{kind:"move",uri:i.uri,range:N.from(i.range)}}e.from=t;function r(i){return new rd(y.revive(i.uri),N.to(i.range))}e.to=r})(l1||(l1={}));var Pd;(function(e){function t(r){return{kind:"progressTask",content:Ee.from(r.value)}}e.from=t})(Pd||(Pd={}));var u1;(function(e){function t(r){return{kind:"progressTaskResult",content:typeof r=="string"?Ee.from(r):void 0}}e.from=t})(u1||(u1={}));var sl;(function(e){function t(i,s,n){return{kind:"command",command:s.toInternal(i.value,n)??{command:i.value.command,title:i.value.title}}}e.from=t;function r(i,s){return new Kh(s.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}e.to=r})(sl||(sl={}));var Ad;(function(e){function t(i){return{kind:"textEdit",uri:i.uri,edits:i.edits.map(s=>Ct.from(s))}}e.from=t;function r(i){return new Wc(y.revive(i.uri),i.edits.map(s=>Ct.to(s)))}e.to=r})(Ad||(Ad={}));var Bi;(function(e){function t(i){const s=Ft.isThemeIcon(i.iconPath)?i.iconPath:y.isUri(i.iconPath)?{light:y.revive(i.iconPath)}:i.iconPath&&"light"in i.iconPath&&"dark"in i.iconPath&&y.isUri(i.iconPath.light)&&y.isUri(i.iconPath.dark)?{light:y.revive(i.iconPath.light),dark:y.revive(i.iconPath.dark)}:void 0;return typeof i.value=="object"&&"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:y.isUri(i.value.value)||!i.value.value?i.value.value:Ss.from(i.value.value)},iconPath:s,options:i.options}:{kind:"reference",reference:y.isUri(i.value)||typeof i.value=="string"?i.value:Ss.from(i.value),iconPath:s,options:i.options}}e.from=t;function r(i){const s=tr(i),n=o=>y.isUri(o)?o:Ss.to(o);return new Hi(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=r})(Bi||(Bi={}));var Td;(function(e){function t(r){return{kind:"codeCitation",value:r.value,license:r.license,snippet:r.snippet}}e.from=t})(Td||(Td={}));var Rd;(function(e){function t(s,n,o){return s instanceof Qh?tl.from(s):s instanceof _c?Yo.from(s):s instanceof Hi?Bi.from(s):s instanceof Bc?Dn.from(s):s instanceof Yh?rl.from(s):s instanceof Kh?sl.from(s,n,o):s instanceof Wc?Ad.from(s):s instanceof Hc?Cd.from(s):s instanceof ed?$d.from(s):s instanceof jc?Id.from(s):s instanceof zc?il.from(s):s instanceof Zh?Dd.from(s):s instanceof td?Td.from(s):s instanceof rd?l1.from(s):{kind:"markdownContent",content:Ee.from("")}}e.from=t;function r(s,n){switch(s.kind){case"reference":return Bi.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(s,n)}}e.to=r;function i(s,n){switch(s.kind){case"markdownContent":return tl.to(s);case"inlineReference":return Yo.to(s);case"progressMessage":return;case"treeData":return rl.to(s);case"command":return sl.to(s,n)}}e.toContent=i})(Rd||(Rd={}));var Ld;(function(e){function t(r,i,s){const n=r.variables.variables.filter(a=>a.isTool),o=r.variables.variables.filter(a=>!a.isTool);return{prompt:r.message,command:r.command,attempt:r.attempt??0,enableCommandDetection:r.enableCommandDetection??!0,isParticipantDetected:r.isParticipantDetected??!1,references:o.map(Nd.to),toolReferences:n.map(Fd.to),location:nl.to(r.location),acceptedConfirmationData:r.acceptedConfirmationData,rejectedConfirmationData:r.rejectedConfirmationData,location2:i,toolInvocationToken:Object.freeze({sessionId:r.sessionId}),model:s}}e.to=t})(Ld||(Ld={}));var nl;(function(e){function t(i){switch(i){case jt.Notebook:return Pr.Notebook;case jt.Terminal:return Pr.Terminal;case jt.Panel:return Pr.Panel;case jt.Editor:return Pr.Editor;case jt.EditingSession:return Pr.EditingSession}}e.to=t;function r(i){switch(i){case Pr.Notebook:return jt.Notebook;case Pr.Terminal:return jt.Terminal;case Pr.Panel:return jt.Panel;case Pr.Editor:return jt.Editor;case Pr.EditingSession:return jt.EditingSession}}e.from=r})(nl||(nl={}));var Nd;(function(e){function t(r){const i=r.value;if(!i)throw new Error("Invalid value reference");return{id:r.id,name:r.name,range:r.range&&[r.range.start,r.range.endExclusive],value:Fw(i)?y.revive(i):i&&typeof i=="object"&&"uri"in i&&"range"in i&&Fw(i.uri)?Ss.to(tr(i)):r.isImage?new j6(r.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i)))):i,modelDescription:r.modelDescription}}e.to=t})(Nd||(Nd={}));var Fd;(function(e){function t(r){if(r.value)throw new Error("Invalid tool reference");return{name:r.id,range:r.range&&[r.range.start,r.range.endExclusive]}}e.to=t})(Fd||(Fd={}));var h1;(function(e){function t(r,i,s){return{id:r.id,label:r.label,fullName:r.fullName,icon:r.icon?.id,value:r.values[0].value,insertText:r.insertText,detail:r.detail,documentation:r.documentation,command:i.toInternal(r.command,s)}}e.from=t})(h1||(h1={}));var Ps;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:i(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function r(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=r;function i(s){return so(s,n=>{if(n.$mid===20)return new Fm(so(n.content,i));if(n.$mid===21)return new Zt(n.value);if(n.$mid===22)return new Uo(n.value)})}})(Ps||(Ps={}));var d1;(function(e){function t(r,i,s){if(i.action.kind==="vote")return;const n=Ps.to(r);if(i.action.kind==="command"){const o=i.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return i.action.kind==="followUp"?{action:{kind:"followUp",followup:el.to(i.action.followup)},result:n}:i.action.kind==="inlineChat"?{action:{kind:"editor",accepted:i.action.action==="accepted"},result:n}:i.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:i.action.outcome==="accepted"?Oc.Accepted:Oc.Rejected,uri:y.revive(i.action.uri),hasRemainingEdits:i.action.hasRemainingEdits},result:n}:{action:i.action,result:n}}e.to=t})(d1||(d1={}));var Md;(function(e){function t(r,i,s){return"terminalCommand"in r?{terminalCommand:r.terminalCommand,shouldExecute:r.shouldExecute}:"uri"in r?{uri:r.uri}:i.toInternal(r,s)}e.from=t})(Md||(Md={}));var f1;(function(e){function t(r){return{kind:p1.to(r.kind)}}e.to=t})(f1||(f1={}));var p1;(function(e){function t(r){switch(r){case 0:return gn.Word;case 1:return gn.Line;case 2:return gn.Suggest;default:return gn.Unknown}}e.to=t})(p1||(p1={}));var g1;(function(e){function t(r,i){return{id:i,label:r.label,description:r.description,canEdit:r.canEdit,collapsibleState:r.collapsibleState||0,contextValue:r.contextValue}}e.from=t})(g1||(g1={}));var m1;(function(e){function t(r){return{name:r.id,description:r.modelDescription,inputSchema:r.inputSchema,parametersSchema:r.inputSchema,tags:r.tags??[]}}e.to=t})(m1||(m1={}));var Od;(function(e){function t(i){return new Fm(i.content.map(s=>s.kind==="text"?new Zt(s.value):new Uo(s.value)))}e.to=t;function r(i){return{content:i.content.map(s=>{if(s instanceof Zt)return{kind:"text",value:s.value};if(s instanceof Uo)return{kind:"promptTsx",value:s.value};throw new Error("Unknown LanguageModelToolResult part type")})}}e.from=r})(Od||(Od={}));var As=class{constructor(e,t,r){this.uri=e,this.ranges=t,this.previewText=r}},v1=class{constructor(e,t,r){this.uri=e,this.text=t,this.lineNumber=r}},Mr;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(Mr||(Mr={}));var Ud;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Ud||(Ud={}));var z6=2e4,W6="\u27EA ",V6=" characters skipped \u27EB",bD=(W6.length+V6.length+5)*2,XO=W("searchService"),q6;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(q6||(q6={}));var G6;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(G6||(G6={}));function J6(e){return!!e.rangeLocations&&!!e.previewText}var Q6;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(Q6||(Q6={}));var yD=class{constructor(e,t,r,i){this.rangeLocations=[],this.webviewIndex=i;const s=Array.isArray(t)?t:[t];if(r&&r.matchLines===1&&xD(s)){e=uS(e,r.matchLines);let n="",o=0,a=0;const c=Math.floor(r.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+r.charsPerLine;if(u>a+c+bD){const p=W6+(u-a)+V6;n+=p+e.slice(u,h),o+=u-(a+p.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new ED(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=ep(t,a=>({preview:new Z6(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function xD(e){const t=e[0].startLineNumber;for(const r of e)if(r.startLineNumber!==t||r.endLineNumber!==t)return!1;return!0}var Z6=class{constructor(e,t,r,i){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i}},ED=class extends Z6{constructor(e,t,r){super(e,t,e,r)}},Y6;(function(e){e.List="list",e.Tree="tree"})(Y6||(Y6={}));var X6;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(X6||(X6={}));function kD(e,t=!0){const r=e&&e.files&&e.files.exclude,i=t&&e&&e.search&&e.search.exclude;if(!r&&!i)return;if(!r||!i)return r||i||void 0;let s=Object.create(null);return s=Ys(s,it(r)),s=Ys(s,it(i),!0),s}function K6(e,t){return e.excludePattern&&nc(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&nc(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(r=>{const i=r.folder.fsPath;if(hu(t,i)){const s=Ta(i,t);return!r.includePattern||!!nc(r.includePattern,s)}else return!1}):!1:!0}var e7;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(e7||(e7={}));function Xo(e,t){const r={...e||{},...t||{}};return Object.keys(r).filter(i=>{const s=r[i];return typeof s=="boolean"&&s})}var t7=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(i=>({...e.excludePattern||{},...i.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(i=>mo(i));let r=e.includePattern;t.includePattern&&(r?r={...r,...t.includePattern}:r=t.includePattern),r&&(this.c=mo(r))}d(e,t,r){let i=null;for(const s of this.b){const n=s(e,t,r);if(typeof n=="string"){i=n;break}}return i}matchesExcludesSync(e,t,r){return!!(this.b&&this.d(e,t,r))}includedInQuerySync(e,t,r){return!(this.b&&this.d(e,t,r)||this.c&&!this.c(e,t,r))}includedInQuery(e,t,r){const i=()=>this.c?!!this.c(e,t,r):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,r);return fs(n)?n.then(o=>o?!1:i()):i()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>SD(t)||e,!1)}};function SD(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function $D(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(i=>i?r7(i):{})),t.then(i=>!!i[r]))}function CD(e){if(!e)return;let t;return r=>{if(!t){const i=e();t=i?r7(i):{}}return!!t[r]}}function r7(e){const t={};for(const r of e)t[r]=!0;return t}function i7(e){return e.flatMap(t=>t.patterns.map(r=>t.baseUri?{baseUri:t.baseUri,pattern:r}:r))}var w1={matchLines:100,charsPerLine:1e4};function ol(e,t,r){return new Na(i=>b1(i,r)).isEqual(e,t)}function ID(e,t,r){return ol(e.uri,t.uri,r)?0:Gs(e.uri.toString(),t.uri.toString())}function DD(e,t,r){return e.index!==t.index?e.index<t.index?-1:1:ol(e.uri,t.uri,r)?Gs(e.name,t.name):Gs(e.uri.toString(),t.uri.toString())}function s7(e,t,r,i){const s=e.slice(0).sort((o,a)=>r(o,a,i)),n=t.slice(0).sort((o,a)=>r(o,a,i));return Ck(s,n,(o,a)=>r(o,a,i))}function b1(e,t){const r=t.getCapabilities(e.scheme);return!(r&&r&1024)}var y1=class _0 extends B${static toExtHostWorkspace(t,r,i,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],p=r;r?a.forEach((x,S)=>{const C=y.revive(x.uri),D=_0.o(i||r,C,s);D?(D.name=x.name,D.index=x.index,h.push(D)):h.push({uri:C,name:x.name,index:S})}):h.push(...a.map(({uri:x,name:S,index:C})=>({uri:y.revive(x),name:S,index:C}))),h.sort((x,S)=>x.index<S.index?-1:1);const f=new _0(n,o,h,!!l,c?y.revive(c):null,!!u,x=>b1(x,s)),{added:m,removed:w}=s7(p?p.workspaceFolders:[],f.workspaceFolders,ID,s);return{workspace:f,added:m,removed:w}}static o(t,r,i){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(ol(n.uri,r,i))return n}}constructor(t,r,i,s,n,o,a){super(t,i.map(c=>new wy(c)),s,n,a),this.t=r,this.u=o,this.q=[],this.s=ps.forUris(a,()=>!0),i.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,r){return r&&this.s.get(t)&&(t=Pp(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},x1=class{constructor(t,r,i,s,n){this.c=new I,this.onDidChangeWorkspace=this.c.event,this.g=new I,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new Ca,this.D=new Map,this.h=s,this.s=i,this.t=n,this.j=new U$,this.k=new li,this.o=t.getProxy(z.MainThreadWorkspace),this.q=t.getProxy(z.MainThreadMessageService);const o=r.workspace;this.l=o?new y1(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>b1(a,i)):void 0}$initializeWorkspace(t,r){this.v=r,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?y.from({scheme:V.untitled,path:ds(Pp(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,r,i,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{y.isUri(u.uri)&&!n.some(h=>ol(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Dp(u.uri)})}),this.n||[r,i].some(u=>typeof u!="number"||u<0)||i===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(r+i>o.length)return!1;const a=o.slice(0);a.splice(r,i,...n.map(u=>({uri:u.uri,name:u.name||Dp(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((p,f)=>f!==u&&ol(h.uri,p.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=s7(o,a,DD,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,r,i,n).then(void 0,h=>{this.n=void 0;const p={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(H$.Error,d(2732,null,u,h.toString()),p,[])})}return this.y(a),!0}getWorkspaceFolder(t,r){if(this.x)return this.x.getWorkspaceFolder(t,r)}async getWorkspaceFolder2(t,r){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,r)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,r){let i,s="";if(typeof t=="string"?(i=y.file(t),s=t):typeof t<"u"&&(i=t,s=t.fsPath),!i)return s;const n=this.getWorkspaceFolder(i,!0);if(!n)return s;typeof r>"u"&&this.x&&(r=this.x.folders.length>1);let o=xb(n.uri,i);return r&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=y1.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:r,added:i,removed:s}=y1.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=r||void 0,this.n=void 0,this.c.fire(Object.freeze({added:i,removed:s}))}findFiles(t,r,i,s,n=Xe.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return r===null?a=!1:r!==void 0&&(typeof r=="string"?o=r:o=r.pattern),this.z(t,void 0,{exclude:[o],maxResults:i,useExcludeSettings:a?Mr.FilesExclude:Mr.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,r={},i,s=Xe.None){this.h.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${i.value}, entryPoint: findFiles2`);const n=r.useDefaultExcludes??!0,o=r.useDefaultSearchExcludes??!0,a=n?o?Mr.SearchAndFilesExclude:Mr.FilesExclude:Mr.None,c={exclude:r.exclude?[r.exclude]:void 0,useIgnoreFiles:{local:r.useIgnoreFiles,global:r.useGlobalIgnoreFiles,parent:r.useParentIgnoreFiles},useExcludeSettings:a,followSymlinks:r.followSymlinks,maxResults:r.maxResults};return this.z(void 0,t!==void 0?[t]:[],c,s)}findFiles2New(t,r={},i,s=Xe.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${i.value}, entryPoint: findFiles2New`),this.z(void 0,t,r,s)}async z(t,r,i,s=Xe.None){if(s&&s.isCancellationRequested)return Promise.resolve([]);const o=(t!==void 0?[t]:r)?.map(a=>{const c=n7(i.exclude),l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===Mr.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==Mr.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:c.length>0?c:void 0,_reason:"startFileSearch",shouldGlobSearch:t?void 0:!0},u=Hd(xr.from(a)),h=u?.folder;return t?l.includePattern=u?.pattern:l.filePattern=u?.pattern,{folder:h,options:l}})??[];return this.A(o,s)}async A(t,r){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,r).then(n=>Array.isArray(n)?n.map(o=>y.revive(o)):[]))??[])).flat()}findTextInFilesNew(t,r,i,s=Xe.None){this.h.trace(`extHostWorkspace#findTextInFilesNew: textSearch, extension: ${i.value}, entryPoint: findTextInFilesNew`);const n=p=>{if(!r)return{folder:void 0,options:{}};const f=p?Hd(xr.from(p)):void 0,m=r.exclude?n7(r.exclude):void 0;return{options:{ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===Mr.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==Mr.SearchAndFilesExclude,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:r.previewOptions?{matchLines:r.previewOptions?.numMatchLines??100,charsPerLine:r.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:r.surroundingContext,includePattern:f?.pattern,excludePattern:m},folder:f?.folder}},a=(r?.include?.map(p=>n(p))??[n(void 0)]).filter(p=>!!p),c=new we,l=c.add(new I),u=this.findTextInFilesBase(t,a,(p,f)=>l.fire({result:p,uri:f}),s);return{results:new Fa(async p=>{c.add(l.event(f=>{const m=f.result,w=f.uri;J6(m)?p.emitOne(new As(w,m.rangeLocations.map(x=>({previewRange:new ve(x.preview.startLineNumber,x.preview.startColumn,x.preview.endLineNumber,x.preview.endColumn),sourceRange:new ve(x.source.startLineNumber,x.source.startColumn,x.source.endLineNumber,x.source.endColumn)})),m.previewText)):p.emitOne(new v1(w,m.text,m.lineNumber))})),await u}),complete:u.then(p=>(c.dispose(),{limitHit:p?.limitHit??!1}))}}async findTextInFilesBase(t,r,i,s=Xe.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=y.revive(a.resource);a.results.forEach(l=>{const u=tr(l);i(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(r?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,r,i,s,n=Xe.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof r.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:r.previewOptions,a=Hd(xr.from(r.include)),c=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof r.useSearchExclude=="boolean"?!r.useSearchExclude:!0,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:o,surroundingContext:r.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,p)=>{J6(h)?i({uri:p,preview:{text:h.previewText,matches:ep(h.rangeLocations,f=>new ve(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:ep(h.rangeLocations,f=>new ve(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):i({uri:p,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,r){this.u[r]?.(t)}async save(t){const r=await this.o.$save(t,{saveAs:!1});return y.revive(r)}async saveAs(t){const r=await this.o.$save(t,{saveAs:!0});return y.revive(r)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,r){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,i),ae(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const i=await this.resolveWorkspaceFolder(y.revive(t));if(!i){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const s=this.w.get(i.uri.scheme);if(this.h.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(i,r);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,r,i,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(y.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(r,i,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,r,i){const s=await this.resolveWorkspaceFolder(y.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},r,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>i&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),r.isCancellationRequested}registerCanonicalUriProvider(t,r){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,i),ae(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,r,i){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(y.revive(t),r,i);if(n)return n}async $provideCanonicalUri(t,r,i){return this.provideCanonicalUri(y.revive(t),{targetScheme:r},i)}};x1=__decorate([__param(0,Me),__param(1,Wt),__param(2,no),__param(3,Ue),__param(4,gu)],x1);var zi=W("IExtHostWorkspace");function Hd(e){let t,r;if(e)return typeof e=="string"?t=e:(t=e.pattern,r=y.revive(e.baseUri)),{pattern:t,folder:r}}function n7(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const r=Hd(t);return r?{pattern:r.pattern,uri:r.folder}:void 0}})??[]).filter(t=>!!t)}var o7;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(o7||(o7={}));var a7;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(a7||(a7={}));var c7;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(c7||(c7={}));var E1;(function(e){e.DEFAULT={allowTrailingComma:!0}})(E1||(E1={}));function PD(e,t=!1){let r=0;const i=e.length;let s="",n=0,o=16,a=0;function c(w){let x=0,S=0;for(;x<w;){const C=e.charCodeAt(r);if(C>=48&&C<=57)S=S*16+C-48;else if(C>=65&&C<=70)S=S*16+C-65+10;else if(C>=97&&C<=102)S=S*16+C-97+10;else break;r++,x++}return x<w&&(S=-1),S}function l(w){r=w,s="",n=0,o=16,a=0}function u(){const w=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&Ko(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&Ko(e.charCodeAt(r)))for(r++;r<e.length&&Ko(e.charCodeAt(r));)r++;else return a=3,e.substring(w,r);let x=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&Ko(e.charCodeAt(r))){for(r++;r<e.length&&Ko(e.charCodeAt(r));)r++;x=r}else a=3;return e.substring(w,x)}function h(){let w="",x=r;for(;;){if(r>=i){w+=e.substring(x,r),a=2;break}const S=e.charCodeAt(r);if(S===34){w+=e.substring(x,r),r++;break}if(S===92){if(w+=e.substring(x,r),r++,r>=i){a=2;break}switch(e.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const D=c(4);D>=0?w+=String.fromCharCode(D):a=4;break}default:a=5}x=r;continue}if(S>=0&&S<=31)if(jd(S)){w+=e.substring(x,r),a=2;break}else a=6;r++}return w}function p(){if(s="",a=0,n=r,r>=i)return n=i,o=17;let w=e.charCodeAt(r);if(k1(w)){do r++,s+=String.fromCharCode(w),w=e.charCodeAt(r);while(k1(w));return o=15}if(jd(w))return r++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(r)===10&&(r++,s+=`
`),o=14;switch(w){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,s=h(),o=10;case 47:{const x=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<i&&!jd(e.charCodeAt(r));)r++;return s=e.substring(x,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const S=i-1;let C=!1;for(;r<S;){if(e.charCodeAt(r)===42&&e.charCodeAt(r+1)===47){r+=2,C=!0;break}r++}return C||(r++,a=1),s=e.substring(x,r),o=13}return s+=String.fromCharCode(w),r++,o=16}case 45:if(s+=String.fromCharCode(w),r++,r===i||!Ko(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;r<i&&f(w);)r++,w=e.charCodeAt(r);if(n!==r){switch(s=e.substring(n,r),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),r++,o=16}}function f(w){if(k1(w)||jd(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=p();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>r,scan:t?m:p,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>r-n,getTokenError:()=>a}}function k1(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function jd(e){return e===10||e===13||e===8232||e===8233}function Ko(e){return e>=48&&e<=57}var l7;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(l7||(l7={}));function AD(e,t,r=E1.DEFAULT){const i=PD(e,!1);function s(Z){return Z?()=>Z(i.getTokenOffset(),i.getTokenLength()):()=>!0}function n(Z){return Z?$e=>Z($e,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),p=n(t.onSeparator),f=s(t.onComment),m=n(t.onError),w=r&&r.disallowComments,x=r&&r.allowTrailingComma;function S(){for(;;){const Z=i.scan();switch(i.getTokenError()){case 4:C(14);break;case 5:C(15);break;case 3:C(13);break;case 1:w||C(11);break;case 2:C(12);break;case 6:C(16);break}switch(Z){case 12:case 13:w?C(10):f();break;case 16:C(1);break;case 15:case 14:break;default:return Z}}}function C(Z,$e=[],de=[]){if(m(Z),$e.length+de.length>0){let Ze=i.getToken();for(;Ze!==17;){if($e.indexOf(Ze)!==-1){S();break}else if(de.indexOf(Ze)!==-1)break;Ze=S()}}}function D(Z){const $e=i.getTokenValue();return Z?h($e):a($e),S(),!0}function M(){switch(i.getToken()){case 11:{let Z=0;try{Z=JSON.parse(i.getTokenValue()),typeof Z!="number"&&(C(2),Z=0)}catch{C(2)}h(Z);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return S(),!0}function F(){return i.getToken()!==10?(C(3,[],[2,5]),!1):(D(!1),i.getToken()===6?(p(":"),S(),J()||C(4,[],[2,5])):C(5,[],[2,5]),!0)}function B(){o(),S();let Z=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(Z||C(4,[],[]),p(","),S(),i.getToken()===2&&x)break}else Z&&C(6,[],[]);F()||C(4,[],[2,5]),Z=!0}return c(),i.getToken()!==2?C(7,[2],[]):S(),!0}function X(){l(),S();let Z=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(Z||C(4,[],[]),p(","),S(),i.getToken()===4&&x)break}else Z&&C(6,[],[]);J()||C(4,[],[4,5]),Z=!0}return u(),i.getToken()!==4?C(8,[4],[]):S(),!0}function J(){switch(i.getToken()){case 3:return X();case 1:return B();case 10:return D(!0);default:return M()}}return S(),i.getToken()===17?r.allowEmptyContent?!0:(C(4,[],[]),!1):J()?(i.getToken()!==17&&C(9,[],[]),!0):(C(4,[],[]),!1)}function al(e){return Object.isFrozen(e)?e:hy(e)}var ea=class Un{static createEmptyModel(t){return new Un({},[],[],void 0,t)}constructor(t,r,i,s,n){this.b=t,this.c=r,this.d=i,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(r=>{if(r instanceof Un)return r;const i=new TD("",this.f);return i.parseRaw(r),i.configurationModel});this.g=t.reduce((r,i)=>i===r?i:r.merge(i),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Ru(this.contents,t):this.contents}inspect(t,r){const i=this;return{get value(){return al(i.rawConfiguration.getValue(t))},get override(){return r?al(i.rawConfiguration.getOverrideValue(t,r)):void 0},get merged(){return al(r?i.rawConfiguration.override(r).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new Un(n,a,[],void 0,i.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?al(s):void 0}}}getOverrideValue(t,r){const i=this.j(r);return i?t?Ru(i,t):i:void 0}getKeysForOverrideIdentifier(t){const r=[];for(const i of this.overrides)i.identifiers.includes(t)&&r.push(...i.keys);return Vn(r)}getAllOverrideIdentifiers(){const t=[];for(const r of this.overrides)t.push(...r.identifiers);return Vn(t)}override(t){let r=this.a.get(t);return r||(r=this.h(t),this.a.set(t,r)),r}merge(...t){const r=it(this.contents),i=it(this.overrides),s=[...this.keys],n=this.raw?.length?[...this.raw]:[this];for(const o of t)if(n.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.i(r,o.contents);for(const a of o.overrides){const[c]=i.filter(l=>Ci(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=Vn(c.keys)):i.push(it(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new Un(r,s,i,n.every(o=>o instanceof Un)?void 0:n,this.f)}h(t){const r=this.j(t);if(!r||typeof r!="object"||!Object.keys(r).length)return this;const i={};for(const s of Vn([...Object.keys(this.contents),...Object.keys(r)])){let n=this.contents[s];const o=r[s];o&&(typeof n=="object"&&typeof o=="object"?(n=it(n),this.i(n,o)):n=o),i[s]=n}return new Un(i,this.keys,this.overrides,void 0,this.f)}i(t,r){for(const i of Object.keys(r)){if(i in t&&pt(t[i])&&pt(r[i])){this.i(t[i],r[i]);continue}t[i]=it(r[i])}}j(t){let r=null,i=null;const s=n=>{n&&(i?this.i(i,n):i=it(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?r=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(r),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,r){this.k(t,r,!0)}setValue(t,r){this.k(t,r,!1)}removeValue(t){const r=this.keys.indexOf(t);r!==-1&&(this.keys.splice(r,1),NC(this.contents,t),di.test(t)&&this.overrides.splice(this.overrides.findIndex(i=>Ci(i.identifiers,rc(t))),1))}k(t,r,i){if(n5(this.contents,t,r,s=>this.f.error(s)),i=i||this.keys.indexOf(t)===-1,i&&this.keys.push(t),di.test(t)){const s=rc(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:kg(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Ci(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},TD=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||ea.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!gt(e)){const r=this.h(e);this.parseRaw(r,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:r,keys:i,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new ea(r,i,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},r=null,i=[];const s=[],n=[];function o(c){Array.isArray(i)?i.push(c):r!==null&&(i[r]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(i),i=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(i),i=c,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{AD(e,a),t=i[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const r=Ht.as(po.Configuration).getConfigurationProperties(),i=this.j(e,r,!0,t);e=i.raw;const s=kg(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.l(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}j(e,t,r,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(di.test(a)&&r){const c=this.j(e[a],t,!1,i);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a],l=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&o.push(a),!i.exclude?.includes(a)&&(i.include?.includes(a)||(l===void 0||i.scopes===void 0||i.scopes.includes(l))&&!(i.skipRestricted&&c?.restricted))?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t){const r=[];for(const i of Object.keys(e))if(di.test(i)){const s={};for(const n in e[i])s[n]=e[i][n];r.push({identifiers:rc(i),keys:Object.keys(s),contents:kg(s,t)})}return r}},RD=class{constructor(e,t,r,i,s,n,o,a,c,l,u,h,p){this.a=e,this.b=t,this.c=r,this.overrideIdentifiers=i,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=p}get value(){return al(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},S1=class SE{constructor(t,r,i,s,n,o,a,c,l,u){this.j=t,this.l=r,this.m=i,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Lt,this.v=null}getValue(t,r,i){return this.w(t,r,i).getValue(t)}updateValue(t,r,i={}){let s;i.resource?(s=this.t.get(i.resource),s||(s=ea.createEmptyModel(this.u),this.t.set(i.resource,s))):s=this.s,r===void 0?s.removeValue(t):s.setValue(t,r),i.resource||(this.h=null)}inspect(t,r,i){const s=this.w(t,r,i),n=this.A(r.resource,i),o=r.resource?this.t.get(r.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new RD(t,r,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this.q:void 0,n||void 0,o)}keys(t){const r=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:r?r.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,r){this.r.set(t,r),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,r){const i=[];if(!r){const{added:s,updated:n,removed:o}=Ts(this.j,t);r=[...s,...n,...o]}for(const s of r)for(const n of rc(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!qr(this.j.override(n).getValue(l),t.override(n).getValue(l)))];i.push([n,c])}return this.updateDefaultConfiguration(t),{keys:r,overrides:i}}compareAndUpdatePolicyConfiguration(t){const{added:r,updated:i,removed:s}=Ts(this.l,t),n=[...r,...i,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Ts(this.applicationConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Ts(this.localUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Ts(this.remoteUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=Ts(this.workspaceConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,r){const i=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=Ts(i,r),c=[...s,...n,...o];return(c.length||!i)&&this.updateFolderConfiguration(t,r),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const r=this.folderConfigurations.get(t);if(!r)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:i,updated:s,removed:n,overrides:o}=Ts(r,void 0);return{keys:[...i,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,r,i){let s=this.x(r,i);return r.overrideIdentifier&&(s=s.override(r.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(s=s.merge(this.l)),s}x({resource:t},r){let i=this.y();if(r&&t){const s=r.getFolder(t);s&&(i=this.z(s.uri)||i);const n=this.t.get(t);n&&(i=i.merge(n))}return i}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let r=this.i.get(t);if(!r){const i=this.y(),s=this.r.get(t);s?(r=i.merge(s),this.i.set(t,r)):r=i}return r}A(t,r){if(r&&t){const i=r.getFolder(t);if(i)return this.r.get(i.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,r)=>{const{contents:i,overrides:s,keys:n}=this.r.get(r);return t.push([r,{contents:i,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(r=>t.add(r)),this.userConfiguration.keys.forEach(r=>t.add(r)),this.q.keys.forEach(r=>t.add(r)),this.r.forEach(r=>r.keys.forEach(i=>t.add(i))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.userConfiguration.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.q.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.r.forEach(r=>r.getAllOverrideIdentifiers().forEach(i=>t.add(i))),[...t.values()]}D(t){const r=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.q.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.r.forEach(i=>i.getKeysForOverrideIdentifier(t).forEach(s=>r.add(s))),[...r.values()]}static parse(t,r){const i=this.E(t.defaults,r),s=this.E(t.policy,r),n=this.E(t.application,r),o=this.E(t.user,r),a=this.E(t.workspace,r),c=t.folders.reduce((l,u)=>(l.set(y.revive(u[0]),this.E(u[1],r)),l),new Lt);return new SE(i,s,n,o,ea.createEmptyModel(r),a,c,ea.createEmptyModel(r),new Lt,r)}static E(t,r){return new ea(t.contents,t.keys,t.overrides,void 0,r)}},LD=class{constructor(e,t,r,i,s){this.change=e,this.f=t,this.g=r,this.h=i,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=S1.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const r=this.a+e,i=this.d.indexOf(r);if(i<0)return!1;const s=i+r.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!qr(o,a)}return!0}};function Ts(e,t){const{added:r,removed:i,updated:s}=u7(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=u7({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:r,removed:i,updated:s,overrides:n}}function u7(e,t){const r=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],i=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Ru(t.contents,n),a=Ru(e.contents,n);qr(o,a)||s.push(n)}}return{added:r,removed:i,updated:s}}function cl(e,t){if(t){const r=t.split(".");let i=e;for(let s=0;i&&s<r.length;s++)i=i[r[s]];return i}}function ND(e){return e instanceof y}function FD(e){return e&&e.uri instanceof y&&e.languageId&&typeof e.languageId=="string"}function MD(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function OD(e){return e&&e.uri instanceof y&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function h7(e){if(ND(e))return{resource:e};if(FD(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(MD(e))return{overrideIdentifier:e.languageId};if(OD(e))return{resource:e.uri};if(e===null)return{resource:null}}var $1=class{constructor(t,r,i){this.a=t.getProxy(z.MainThreadConfiguration),this.c=r,this.b=i,this.d=new li,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new UD(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,r){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(t,r))}};$1=__decorate([__param(0,Me),__param(1,zi),__param(2,Ue)],$1);var UD=class{constructor(e,t,r,i){this.a=new I,this.b=e,this.f=i,this.c=t,this.e=S1.parse(r,i),this.d=this.k(r.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const r={data:this.e.toData(),workspace:this.c.workspace};this.e=S1.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,r))}getConfiguration(e,t,r){const i=h7(t)||{},s=this.g(e?cl(this.e.getValue(void 0,i,this.c.workspace),e):this.e.getValue(void 0,i,this.c.workspace));e&&this.h(e,i,r?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case Po.Global:return 2;case Po.Workspace:return 5;case Po.WorkspaceFolder:return 6}}const o={has(a){return typeof cl(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,i,r?.identifier);let l=cl(s,a);if(typeof l>"u")l=c;else{let u;const h=(p,f)=>{if(pt(p)){let m;const w=()=>{u=u||it(s),m=m||cl(u,f)};return new Proxy(p,{get:(x,S)=>{if(typeof S=="string"&&S.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||cl(u,f),m[S];const C=x[S];return typeof S=="string"?h(C,`${f}.${S}`):C},set:(x,S,C)=>(w(),m&&(m[S]=C),!0),deleteProperty:(x,S)=>(w(),m&&delete m[S],!0),defineProperty:(x,S,C)=>(w(),m&&Object.defineProperty(m,S,C),!0)})}return Array.isArray(p)?it(p):p};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,i,u):this.b.$removeConfigurationOption(h,a,i,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,i,this.c.workspace);if(c)return{key:a,defaultValue:it(c.policy?.value??c.default?.value),globalValue:it(c.user?.value??c.application?.value),workspaceValue:it(c.workspace?.value),workspaceFolderValue:it(c.workspaceFolder?.value),defaultLanguageValue:it(c.default?.override),globalLanguageValue:it(c.user?.override??c.application?.override),workspaceLanguageValue:it(c.workspace?.override),workspaceFolderLanguageValue:it(c.workspaceFolder?.override),languageIds:it(c.overrideIdentifiers)}}};return typeof s=="object"&&Ys(o,s,!1),Object.freeze(o)}g(e){const t=r=>pt(r)?new Proxy(r,{get:(i,s)=>t(i[s]),set:(i,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(i,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(i,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:i=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):r;return t(e)}h(e,t,r){const i=di.test(e)?4:this.d.get(e),s=r?`[${r.value}] `:"";if(i===4){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(i===3){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const r=new LD(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(i,s)=>r.affectsConfiguration(i,h7(s))})}k(e){return e.reduce((t,r)=>(t.set(r[0],r[1]),t),new Map)}},Wi=W("IExtHostConfiguration"),HD=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},ll=class $E{static isHostExtension(t,r,i){if(r.getExtensionDescription(t))return!1;const s=i.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,r){this.j=t,this.c=new I,this.onDidChange=this.c.event,this.d=0,this.e=r,this.k()}k(){this.e.sort(_D),this.f=new Li,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const r=this.j.readActivationEvents(t);for(const i of r)this.h.has(i)||this.h.set(i,[]),this.h.get(i).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,r){this.e=f7(this.e,r),this.e=this.e.concat(t);const i=$E.l(this.e);return this.e=f7(this.e,i.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new HD(this.d,i)}static l(t){const r=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=r.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},i=new Li;for(const a of t)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)r.addArc(He.toKey(a.identifier),He.toKey(c));const s=new Set;r.getNodes().filter(a=>r.getArcs(a).length===0).forEach(a=>s.add(a));const n=r.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];r.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>i.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const r=this.h.get(t);return r?r.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new jD(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const r=this.f.get(t);return r||void 0}getExtensionDescriptionByUUID(t){for(const r of this.g)if(r.uuid===t)return r}getExtensionDescriptionByIdOrUUID(t,r){return this.getExtensionDescription(t)??(r?this.getExtensionDescriptionByUUID(r):void 0)}},jD=class{constructor(e,t){this.versionId=e,this.extensions=t}},d7;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(d7||(d7={}));function _D(e,t){const r=e.isBuiltin?0:e.isUnderDevelopment?2:1,i=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(r!==i)return r-i;const s=Te.basename(e.extensionLocation.path),n=Te.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function f7(e,t){const r=new nn(t);return e.filter(i=>!r.has(i.identifier))}var C1="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",tU=new RegExp(C1),p7;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(p7||(p7={}));var g7;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(g7||(g7={}));var m7;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(m7||(m7={}));var v7;(function(e){e.Install="install",e.Uninstall="uninstall"})(v7||(v7={}));var w7;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(w7||(w7={}));var rU=W("extensionGalleryService"),b7;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(b7||(b7={}));var y7;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadUninstalled="ReadUninstalled",e.UnsetUninstalled="UnsetUninstalled",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(y7||(y7={}));var x7;(function(e){e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(x7||(x7={}));var iU=W("extensionManagementService"),sU=W("IGlobalExtensionEnablementService"),nU=W("IExtensionTipsService"),oU=up(1788,"Extensions"),aU=up(1789,"Preferences"),cU=W("telemetryService"),lU=W("customEndpointTelemetryService"),E7;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(E7||(E7={}));var k7;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(k7||(k7={}));var I1=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},BD=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},uU=new BD,zD="extensionTelemetryLog",WD=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function VD(e){if(!e)return"none";const t=Eg(e);return WD.has(t)?t:"other"}function qD(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let r=e;const i=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;i.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(r="";;){const a=n.exec(e);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(r+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(r+=e.substr(o)),r}function GD(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of t)if(r.regex.test(e))return`<REDACTED: ${r.label}>`;return e}function S7(e,t){return so(e,r=>{if(r instanceof I1||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let i=r.replaceAll("%20"," ");i=qD(i,t);for(const s of t)i=i.replace(s,"");return i=GD(i),i}})}var hU=new He("pprice.better-merge"),JD=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const r of e){const i=this.readActivationEvents(r);i.length>0&&(t[He.toKey(r.identifier)]=i)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let r=0;r<t.length;r++)t[r]==="onUri"&&(t[r]=`onUri:${He.toKey(e.identifier)}`);if(!e.contributes)return t;for(const r in e.contributes){const i=this.a.get(r);if(!i)continue;const s=e.contributes[r],n=Array.isArray(s)?s:[s];try{i(n,t)}catch(o){fr(o)}}return t}},QD=new JD,ZD=Object.freeze({identifier:new He("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1}),dU=W("extensionService"),$7=class{constructor(e){this.dependency=e}},C7;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(C7||(C7={}));function Tt(e,t){return!0}function T(e,t){if(!Tt(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var I7;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(I7||(I7={}));var _d=class CE{static{this.NONE=new CE(!1,-1,-1,-1)}constructor(t,r,i,s){this.startup=t,this.codeLoadingTime=r,this.activateCallTime=i,this.activateResolvedTime=s}},D7=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new _d(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Bd=class{constructor(e,t,r,i,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=r,this.module=i,this.exports=s,this.disposable=n}},YD=class extends Bd{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,he.None)}},XD=class extends Bd{constructor(){super(!1,null,_d.NONE,{activate:void 0,deactivate:void 0},void 0,he.None)}},zd=class extends Bd{constructor(e){super(!0,e,_d.NONE,{activate:void 0,deactivate:void 0},void 0,he.None)}},D1=class{constructor(t,r,i,s){this.g=s,this.a=t,this.b=r,this.c=i,this.d=new Li,this.f=Object.create(null)}dispose(){for(const[t,r]of this.d)r.dispose()}async waitForActivatingExtensions(){const t=[];for(const[r,i]of this.d)t.push(i.wait());await Promise.all(t)}isActivated(t){const r=this.d.get(t);return!!(r&&r.value)}getActivatedExtension(t){const r=this.d.get(t);if(!r||!r.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return r.value}async activateByEvent(t,r){if(this.f[t])return;const i=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(i.map(s=>({id:s.identifier,reason:{startup:r,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,r){const i=this.a.getExtensionDescription(t);if(!i)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:i.identifier,reason:r}])}async h(t){const r=t.filter(i=>!this.isActivated(i.id)).map(i=>this.j(i));await Promise.all(r.map(i=>i.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const r=this.a.getExtensionDescription(t.id);if(!r){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new zd(n));return this.c.onExtensionActivationError(t.id,n,new $7(t.id.value)),o}const i=[],s=typeof r.extensionDependencies>"u"?[]:r.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){i.push(o);continue}if(this.l(n)){i.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;i.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=r.displayName||r.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,r.displayName,[],new zd(l));return this.c.onExtensionActivationError(r.identifier,l,new $7(n)),u}return this.k(t,r.displayName,i,null)}k(t,r,i,s){const n=new P1(t.id,r,t.reason,i,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return ll.isHostExtension(t,this.a,this.b)}m(t){const r=this.b.getExtensionDescription(t);return r?!r.main&&!r.browser:!1}};D1=__decorate([__param(3,Ue)],D1);var P1=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new li,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const r=this.g[t];if(r.value&&!r.value.activationFailed){this.g.splice(t,1),t--;continue}if(r.value&&r.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${r.friendlyName}' failed to activate`);i.detail=r.value.activationFailedError,this.h=new zd(i),this.j.onExtensionActivationError(this.c,i,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const r=new Error;if(t&&t.name&&(r.name=t.name),t&&t.message?r.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:r.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(r.stack=t.stack),this.h=new zd(r),this.b&&Hs(t))return;this.j.onExtensionActivationError(this.c,r,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};P1=__decorate([__param(6,Ue)],P1);var P7=class{constructor(e,t){this.c=t,this.b=new I,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(z.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,r){const i=await this.a.$initializeExtensionStorage(e,t);let s;return i&&(s=this.d(e,t,i)),s||r}setValue(e,t,r){return this.a.$setValue(e,t,r)}$acceptValue(e,t,r){const i=this.d(e,t,r);i&&this.b.fire({shared:e,key:t,value:i})}d(e,t,r){try{return JSON.parse(r)}catch(i){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}},A1=W("IExtHostStorage"),A7=class{constructor(e,t,r){this.h=new Map,this.a=e,this.b=t,this.c=r,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(i=>(this.f=i,this)),this.g=this.c.onDidChangeStorage(i=>{i.shared===this.b&&i.key===this.a&&(this.f=i.value)}),this.i=new eo(()=>{const i=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of i.values())s.complete()}catch(s){for(const n of i.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let r=this.f[e];return typeof r>"u"&&(r=t),r}update(e,t){this.f[e]=t;const r=this.h.get(e);if(r!==void 0)return r.p;const i=new to;return this.h.set(e,i),this.i.isScheduled()||this.i.schedule(),i.p}dispose(){this.g.dispose()}},KD=class extends A7{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},wi,T1=wi=class{constructor(t,r){this.b=new Map,this.c=new qS,this.a=t.getProxy(z.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(s){try{let n;const o=i.b.get(s.scheme);return o?(await i.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await i.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===lo.Readonly?1:void 0}}catch(n){wi.e(n)}},async readDirectory(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await i.a.$readdir(s)}catch(n){return wi.e(n)}},async createDirectory(s){try{const n=i.b.get(s.scheme);return n&&!n.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(n.impl,n.extUri,s)):await i.a.$mkdir(s)}catch(n){return wi.e(n)}},async readFile(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await i.a.$readFile(s)).buffer}catch(n){return wi.e(n)}},async writeFile(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(o.impl,o.extUri,o.extUri.dirname(s)),await i.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await i.a.$writeFile(s,ke.wrap(n))}catch(o){return wi.e(o)}},async delete(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await i.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await i.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return wi.e(o)}},async rename(s,n,o){try{return await i.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return wi.e(a)}},async copy(s,n,o){try{return await i.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return wi.e(a)}},isWritableFileSystem(s){const n=r.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,r,i){const s=[];for(;!r.isEqual(i,r.dirname(i));)try{if(!((await t.stat(i)).type&sn.Directory))throw St.FileExists(`Unable to create folder '${i.scheme===V.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(Du(n)!==me.FileNotFound)throw n;s.push(r.basename(i)),i=r.dirname(i)}for(let n=s.length-1;n>=0;n--){i=r.joinPath(i,s[n]);try{await t.createDirectory(i)}catch(o){if(Du(o)!==me.FileExists)throw o}}}static e(t){if(t instanceof St)throw t;if(t instanceof S4)switch(t.code){case me.FileExists:throw St.FileExists(t.message);case me.FileNotFound:throw St.FileNotFound(t.message);case me.FileNotADirectory:throw St.FileNotADirectory(t.message);case me.FileIsADirectory:throw St.FileIsADirectory(t.message);case me.NoPermissions:throw St.NoPermissions(t.message);case me.Unavailable:throw St.Unavailable(t.message);default:throw new St(t.message,t.name)}if(!(t instanceof Error))throw new St(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw St.Unavailable(t.message);switch(t.name){case me.FileExists:throw St.FileExists(t.message);case me.FileNotFound:throw St.FileNotFound(t.message);case me.FileNotADirectory:throw St.FileNotADirectory(t.message);case me.FileIsADirectory:throw St.FileIsADirectory(t.message);case me.NoPermissions:throw St.NoPermissions(t.message);case me.Unavailable:throw St.Unavailable(t.message);default:throw new St(t.message,t.name)}}addFileSystemProvider(t,r,i){return this.b.set(t,{impl:r,extUri:i?.isCaseSensitive?Ne:RS,isReadonly:!!i?.isReadonly}),ae(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ne}};T1=wi=__decorate([__param(0,Me),__param(1,no)],T1);var Wd=W("IExtHostConsumerFileSystem"),R1=W("IExtensionStoragePaths"),L1=class{constructor(t,r,i){this.d=r,this.f=i,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return y.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,r=await this.g(t);try{return await this.f.value.stat(r),this.d.trace("[ExtHostStorage] storage dir already exists",r),r}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",r),await this.f.value.createDirectory(r),await this.f.value.writeFile(y.joinPath(r,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:y.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),r}catch(i){this.d.error("[ExtHostStorage]",i);return}}workspaceValue(t){if(this.c)return y.joinPath(this.c,t.identifier.value)}globalValue(t){return y.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};L1=__decorate([__param(0,Wt),__param(1,Ue),__param(2,Wd)],L1);var vU=W("tunnelService"),wU=W("sharedTunnelsService"),T7;(function(e){e.Http="http",e.Https="https"})(T7||(T7={}));var Pn;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Pn||(Pn={}));var R7;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(R7||(R7={}));function eP(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var N1=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function L7(e){return N1.indexOf(e)>=0}var F1=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function N7(e){return F1.indexOf(e)>=0}var tP=class{constructor(e,t,r){this.remoteAddress=e,this.localAddress=t,this.b=r,this.a=new I,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},F7=class extends he{constructor(t,r){super(),this.r=t,this.s=r,this.a=new I,this.onTunnelOpened=this.a.event,this.b=new I,this.onTunnelClosed=this.b.event,this.c=new I,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],r=Array.from(this.f.values());for(const i of r){const s=Array.from(i.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:r}of t.values())await r.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,r,i,s,n){this.z(t,r,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:r,localAddress:i,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,r){(N7(t)||L7(t))&&(t=N1[0]);const i=this.D(t,r);if(i)return++i.refcount,i.value}openTunnel(t,r,i,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${r}:${i} on local port ${n}.`);const l=this.g??t;if(!l)return;if(r||(r="localhost"),s||(s=this.t),this.g&&this.n.has(i)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,r,i,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(r,i),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(r,i);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const p=this.w(h);return(h.tunnelRemoteHost!==r||h.tunnelRemotePort!==i)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(p),p}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const r=this.f.get(t.tunnelRemoteHost);if(r){const i=r.get(t.tunnelRemotePort);i&&(i.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async y(t,r,i){if(i.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${r}.`);const s=i.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(r),s}}async closeTunnel(t,r){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${r} `);const i=this.f.get(t);if(i&&i.has(r)){const s=i.get(r);s.refcount=0,await this.y(t,r,s)}}z(t,r,i){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(r,{refcount:1,value:i})}async C(t,r){const i=this.f.get(t);if(i){const s=i.get(r),n=s?await s.value:void 0;(!n||typeof n=="string")&&i.delete(r),i.size===0&&this.f.delete(t)}}D(t,r){const i=[t];L7(t)?(i.push(...N1),i.push(...F1)):N7(t)&&i.push(...F1);const s=i.map(n=>this.f.get(n));for(const n of s){const o=n?.get(r);if(o)return o}}canTunnel(t){return!!eP(t)}G(t,r,i,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${r}:${i} on local port ${s}.`);const c=i;this.n.add(c);const l=s===void 0?i:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:r,port:i},localAddressPort:s,privacy:o,public:o?o!==Pn.Private:void 0,protocol:a},p=t.forwardPort(h,u);return p?(this.z(r,i,p),p.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),p}};F7=__decorate([__param(0,Ue),__param(1,Tu)],F7);var rP=class extends tP{},M1;(function(e){function t(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?Pn.Public:Pn.Private),protocol:i.protocol}}e.fromApiTunnel=t;function r(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==Pn.ConstantPrivate&&i.privacy!==Pn.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}e.fromServiceTunnel=r})(M1||(M1={}));var O1=W("IExtHostTunnelService"),U1=class extends he{constructor(t,r,i){super(),this.s=i,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new I,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(z.MainThreadTunnelService)}async openTunnel(t,r){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${r.remoteAddress.host}:${r.remoteAddress.port}.`);const i=await this.a.$openTunnel(r,t.displayName);if(i){const s=new rP(i.remoteAddress,i.localAddress,()=>this.a.$closeTunnel(i.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,r){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.u();return this.r.set(i,{selector:t,provider:r}),this.a.$registerPortsAttributesProvider(t,i),new De(()=>{this.r.delete(i),this.a.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(t,r,i,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(r.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:i,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,i,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,r){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Xe.None)??void 0;const i=r.tunnelFeatures?{elevation:!!r.tunnelFeatures?.elevation,privacyOptions:r.tunnelFeatures?.privacyOptions,protocol:r.tunnelFeatures.protocol===void 0?!0:r.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(i,!0),Promise.resolve(ae(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,r){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const i=t.tunnelFactory??(r?this.w(r):void 0);if(i){this.b=i;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(2730,null),themeIcon:"lock"},{id:"public",label:d(2731,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return ae(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,r){if(this.g.has(t.host)){const i=this.g.get(t.host);i.has(t.port)&&(r&&i.get(t.port).disposeListener.dispose(),await i.get(t.port).tunnel.dispose(),i.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,r){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this.b(t,r);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const s=await i;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),M1.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(t){const r=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),i=t.filter((s,n)=>r[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${i.map(s=>s.port).join(", ")}`),i}};U1=__decorate([__param(0,Me),__param(1,Wt),__param(2,Ue)],U1);function iP(e){return[...e.entries()]}function sP(e){return e?[...e.entries()]:[]}var nP=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,r=5){const i=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),r);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),i.dispose()}},this.a.set(e,o)});return i}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},An=(e,t,r,i)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!r(s,n)){const o=s;s=n,e.listener?.(i(n,o))}}}},ta=(e,t)=>e===t,Rs={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:ta,description:ta,sortText:ta,busy:ta,error:ta,canResolveChildren:ta,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.find(i=>r.id===i.id)))},ra=e=>t=>({op:4,update:e(t)}),oP=(e,t)=>({range:(()=>{let r;const i=ra(s=>({range:ze.lift(N.from(s))}));return{enumerable:!0,configurable:!1,get(){return r},set(s){e.listener?.({op:6}),Rs.range(r,s)||(r=s,e.listener?.(i(s)))}}})(),label:An(e,t,Rs.label,ra(r=>({label:r}))),description:An(e,void 0,Rs.description,ra(r=>({description:r}))),sortText:An(e,void 0,Rs.sortText,ra(r=>({sortText:r}))),canResolveChildren:An(e,!1,Rs.canResolveChildren,r=>({op:2,state:r})),busy:An(e,!1,Rs.busy,ra(r=>({busy:r}))),error:An(e,void 0,Rs.error,ra(r=>({error:Ee.fromStrict(r)||null}))),tags:An(e,[],Rs.tags,(r,i)=>({op:1,new:r.map(Kr.from),old:i.map(Kr.from)}))}),aP=e=>{const t=Ie.fromString(e.extId),r=new ul(t.controllerId,t.localId,e.label,y.revive(e.uri)||void 0);return r.range=N.to(e.range||void 0),r.description=e.description||void 0,r.sortText=e.sortText||void 0,r.tags=e.tags.map(i=>Kr.to({id:J5(i).tagId})),r},M7=e=>{let t;for(const r of e.tests){const i=aP(r.item);sh(i).parent=t,t=i}return t},ul=class IE{constructor(t,r,i,s){if(r.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(r)} symbol`);const n=qI(this,t);Object.defineProperties(this,{id:{value:r,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof H1?void 0:n.parent}},children:{value:VI(n,sh,IE),enumerable:!0,writable:!1},...oP(n,i)})}},H1=class extends ul{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},cP=class extends BI{constructor(e,t,r){super({controllerId:e,getDocumentVersion:i=>i&&r.getDocument(i)?.version,getApiFor:sh,getChildren:i=>i.children,root:new H1(e,t),toITestItem:Is.from})}},j1=class extends he{constructor(t,r){super(),this.s=t,this.t=r,this.a=this.B(new I),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new I),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.g=!1,this.j=!1,this.r=new Map,this.m=y.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=r.createLogger(this.m,{id:zD,name:d(2727,null,this.j?" (Not Sent)":""),hidden:!0}),this.B(this.n),this.B(r.onDidChangeLogLevel(i=>{E$(i)&&this.u()})),this.n.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this.n.info("===========================================================")}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===Re.Trace)}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,r,i){const s=this.getTelemetryDetails(),n=new O7(r,i,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,r,i){this.f=t,this.g=r,this.c=i??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const r=Object.create(null);switch(r["common.extname"]=`${t.publisher}.${t.name}`,r["common.extversion"]=t.version,r["common.vscodemachineid"]=this.s.telemetryInfo.machineId,r["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,r["common.sqmid"]=this.s.telemetryInfo.sqmId,r["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,r["common.vscodeversion"]=this.s.version,r["common.isnewappinstall"]=U7(this.s.telemetryInfo.firstSessionDate),r["common.product"]=this.s.environment.appHost,this.s.uiKind){case Ia.Web:r["common.uikind"]="web";break;case Ia.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}return r["common.remotename"]=Eg(VD(this.s.remote.authority)),r}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const r=this.getTelemetryDetails();this.r.forEach((i,s)=>{const n=i.filter(o=>!o.isDisposed);n.length===0?this.r.delete(s):this.r.set(s,n)}),this.r.forEach(i=>{for(const s of i)s.updateTelemetryEnablements(r.isUsageEnabled,r.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,r){const s=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.r.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(r),n=!0);return n}};j1=__decorate([__param(0,Wt),__param(1,za)],j1);var O7=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,r,i,s,n,o){this.g=r,this.h=i,this.i=s,this.j=n,this.a=new I,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=S7(t,[]),this.c&&(t=Ys(t,this.c)),this.b||(t=Ys(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const r={name:e.name,message:e.message,stack:e.stack,cause:e.cause},i=S7(r,[]),s=new Error(i.message,{cause:i.cause});s.stack=i.stack,s.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function U7(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var Vd=W("IExtHostTelemetry"),_1=class{#e;#t;#r;constructor(t,r,i){this.b=new Map,this.c=new Map,this.#e=t.getProxy(z.MainThreadCommands),this.d=r,this.#r=i,this.#t=t.getProxy(z.MainThreadTelemetry),this.converter=new lP(this,s=>{const n=this.c.get(s);return n?.result===ce.Void?n:void 0},r),this.f=[{processArgument(s){return tr(s)}},{processArgument(s){return so(s,function(n){if(ze.isIRange(n))return N.to(n);if(Ir.isIPosition(n))return Fe.to(n);if(ze.isIRange(n.range)&&y.isUri(n.uri))return nr.to(n);if(n instanceof ke)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const r=this.registerCommand(!1,t.id,async(...i)=>{const s=t.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,i,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new De(()=>{r.dispose(),this.c.delete(t.id)})}registerCommand(t,r,i,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",r),!r.trim().length)throw new Error("invalid id");if(this.b.has(r))throw new Error(`command '${r}' already exists`);return this.b.set(r,{callback:i,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(r),new De(()=>{this.b.delete(r)&&t&&this.#e.$unregisterCommand(r)})}executeCommand(t,...r){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,r,!0)}async g(t,r,i){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,r,!1);{let s=!1;const n=so(r,function(o){if(o instanceof xe)return Fe.from(o);if(o instanceof ve)return N.from(o);if(o instanceof Dr)return nr.from(o);if(Ui.isNotebookRange(o))return vi.from(o);if(o instanceof ArrayBuffer)return s=!0,ke.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,ke.wrap(o);if(o instanceof ke)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new Sr(n):n,i);return tr(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,r,!1);throw o}}}async h(t,r,i){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{mS(r[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Bs.create();try{return await n.apply(o,r)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...r);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!i)throw l;if(s.extension?.identifier){const u=this.#r.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(Qs(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,r,i){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new I1(r),duration:i})}$executeContributedCommand(t,...r){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const i=this.b.get(t);return i?(r=r.map(s=>this.f.reduce((n,o)=>o.processArgument(n,i.extension?.identifier),s)),this.h(t,r,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(r=>(t&&(r=r.filter(i=>i[0]!=="_")),r))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[r,i]of this.b){const{metadata:s}=i;s&&(t[r]=s)}return Promise.resolve(t)}};_1=__decorate([__param(0,Me),__param(1,Ue),__param(2,Vd)],_1);var Tn=W("IExtHostCommands"),lP=class{constructor(e,t,r){this.d=e,this.f=t,this.g=r,this.delegatingCommandId=`__vsc${$r()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const r={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return r;const i=this.f(e.command);if(i)r.id=i.internalId,r.arguments=i.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(ka(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(ae(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),r.$ident=s,r.id=this.delegatingCommandId,r.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return r}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},O=class ur{static{this.Uri=new ur("uri","Uri of a text document",t=>y.isUri(t),t=>t)}static{this.Position=new ur("position","A position in a text document",t=>xe.isPosition(t),Fe.from)}static{this.Range=new ur("range","A range in a text document",t=>ve.isRange(t),N.from)}static{this.Selection=new ur("selection","A selection in a text document",t=>Mi.isSelection(t),Xr.from)}static{this.Number=new ur("number","",t=>typeof t=="number",t=>t)}static{this.String=new ur("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=ur.Arr(ur.String)}static Arr(t){return new ur(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,r=>Array.isArray(r)&&r.every(i=>t.validate(i)),r=>r.map(i=>t.convert(i)))}static{this.CallHierarchyItem=new ur("item","A call hierarchy item",t=>t instanceof qg,$n.from)}static{this.TypeHierarchyItem=new ur("item","A type hierarchy item",t=>t instanceof Sm,In.from)}static{this.TestItem=new ur("testItem","A VS Code TestItem",t=>t instanceof ul,Is.from)}constructor(t,r,i,s){this.name=t,this.description=r,this.validate=i,this.convert=s}optional(){return new ur(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,r){return new ur(t??this.name,r??this.description,this.validate,this.convert)}},ce=class DE{static{this.Void=new DE("no result",t=>t)}constructor(t,r){this.description=t,this.convert=r}},le=class{constructor(e,t,r,i,s){this.id=e,this.internalId=t,this.description=r,this.args=i,this.result=s}},ia=W("IExtHostTerminalService"),H7=class extends he{constructor(e,t,r,i){super(),this.u=e,this._id=t,this.w=r,this.y=i,this.a=!1,this.m={isInteractedWith:!1},this.isOpen=!1,this.s=this.B(new I),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:_7(e.iconPath)??void 0,color:oo.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,r,i,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:i,color:oo.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,r),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:$t.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={isInteractedWith:!0},!0)}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},B1=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new I,this.onProcessData=this.a.event,this.b=new I,this.d=new I,this.onDidChangeProperty=this.d.event,this.f=new I,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},uP=1,z1=class extends he{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,r,i){super(),this.Q=r,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new is),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new I,this.onDidCloseTerminal=this.H.event,this.I=new I,this.onDidOpenTerminal=this.I.event,this.J=new I,this.onDidChangeActiveTerminal=this.J.event,this.L=new I,this.onDidChangeTerminalDimensions=this.L.event,this.M=new I,this.onDidChangeTerminalState=this.M.event,this.N=new I,this.onDidChangeShell=this.N.event,this.O=new I({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.O.event,this.P=new I({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.P.event,this.a=i.getProxy(z.MainThreadTerminalService),this.y=new nP(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.Q.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,r){const i=new H7(this.a,$r(),t,t.name),s=new B1(t.pty);return i.createExtensionTerminal(t.location,r,this.R(t,r).resolvedExtHostIdentifier,_7(t.iconPath),dP(t.color)).then(n=>{const o=this.S(n,s);this.h[n]=o}),this.f.push(i),i.value}R(t,r){if(r=r||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const i=t.location.parentTerminal;if(i){const s=this.f.find(n=>n.value===i);s&&(r.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?r.location=t.location:r.location&&typeof r.location=="object"&&"splitActiveTerminal"in r.location&&(r.location={splitActiveTerminal:!0});return r}attachPtyToTerminal(t,r){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new B1(r),n=this.S(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const r=this.b;if(t===null){this.b=void 0,r!==this.b&&this.J.fire(this.b);return}const i=this.getTerminalById(t);i&&(this.b=i,r!==this.b&&this.J.fire(this.b.value))}async $acceptTerminalProcessData(t,r){const i=this.getTerminalById(t);i&&this.O.fire({terminal:i.value,data:r})}async $acceptTerminalDimensions(t,r,i){const s=this.getTerminalById(t);s&&s.setDimensions(r,i)&&this.L.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,r){const i=this.getTerminalById(t);i&&this.P.fire({terminal:i.value,...r})}async $acceptTerminalMaximumDimensions(t,r,i){this.g.get(t)?.resize(r,i)}async $acceptTerminalTitleChange(t,r){const i=this.getTerminalById(t);i&&(i.name=r)}async $acceptTerminalClosed(t,r,i){const s=this.X(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(r,i),this.H.fire(n.value)}}$acceptTerminalOpened(t,r,i,s){if(r){const a=this.X(this.f,r);if(a!==null){this.f[a]._id=t,this.I.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:y.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new H7(this.a,t,n,i);this.f.push(o),this.I.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,r){this.getTerminalById(t)?._setProcessId(r)}async $startExtensionTerminal(t,r){const i=this.getTerminalById(t);if(!i)return{message:d(2728,null,t)};i.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(r):this.j[t]={initialDimensions:r}}S(t,r){const i=new we;i.add(r.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),i.add(r.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,r.onProcessData),i.add(r.onProcessExit(n=>this.U(t,n))),this.g.set(t,r);const s=this.j[t];return s&&r instanceof B1&&(r.startSendingEvents(s.initialDimensions),delete this.j[t]),i}$acceptProcessAckDataEvent(t,r){this.g.get(t)?.acknowledgeDataEvent(r)}$acceptProcessInput(t,r){this.g.get(t)?.input(r)}$acceptTerminalInteraction(t){const r=this.getTerminalById(t);r?.setInteractedWith()&&this.M.fire(r.value)}$acceptTerminalSelection(t,r){this.getTerminalById(t)?.setSelection(r)}$acceptProcessResize(t,r,i){try{this.g.get(t)?.resize(r,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,r){this.g.get(t)?.shutdown(r)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(r=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:r}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(r=>this.a.$sendProcessProperty(t,{type:"cwd",value:r}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new De(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}registerProfileProvider(t,r,i){if(this.C.has(r))throw new Error(`Terminal profile provider "${r}" already registered`);return this.C.set(r,i),this.a.$registerProfileProvider(r,t.identifier.value),new De(()=>{this.C.delete(r),this.a.$unregisterProfileProvider(r)})}registerTerminalQuickFixProvider(t,r,i){if(this.D.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.D.set(t,i),this.a.$registerQuickFixProvider(t,r),new De(()=>{this.D.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,r){const i=new ft().token;if(i.isCancellationRequested)return;const s=this.D.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(r,i);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new we;if(this.w.value=o,!Array.isArray(n))return n?Md.from(n,this.Q.converter,o):void 0;const a=[];for(const c of n){const l=Md.from(c,this.Q.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,r){const i=new ft().token;let s=await this.C.get(t)?.provideTerminalProfile(i);if(!i.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,r);return}this.createTerminalFromOptions(s.options,r)}}async $provideLinks(t,r){const i=this.getTerminalById(t);if(!i)return[];this.F.delete(t),this.G.get(t)?.dispose(!0);const n=new ft;this.G.set(t,n);const o=[],a={terminal:i.value,line:r},c=[];for(const h of this.z)c.push(ro.withAsyncBody(async p=>{n.token.onCancellationRequested(()=>p({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||p({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(p=>{const f={id:uP++,startIndex:p.startIndex,length:p.length,label:p.tooltip};return u.set(f.id,{provider:h.provider,link:p}),f}));return this.F.set(t,u),o}$activateLink(t,r){const i=this.F.get(t)?.get(r);i&&i.provider.handleTerminalLink(i.link)}U(t,r){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const i=this.h[t];i&&(i.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,r)}getTerminalById(t){return this.W(this.f,t)}getTerminalIdByApiObject(t){const r=this.f.findIndex(i=>i.value===t);return r>=0?r:null}W(t,r){const i=this.X(t,r);return i!==null?t[i]:null}X(t,r){const i=t.findIndex(s=>s._id===r);return i>=0?i:null}getEnvironmentVariableCollection(t){let r=this.n.get(t.identifier.value);return r||(r=this.B(new j7),this.Z(t.identifier.value,r)),r.getScopedEnvironmentVariableCollection(void 0)}Y(t,r){const i=iP(r.map),s=sP(r.descriptionMap);this.a.$setEnvironmentVariableCollection(t,r.persistent,i.length===0?void 0:i,s)}$initEnvironmentVariableCollections(t){t.forEach(r=>{const i=r[0],s=this.B(new j7(r[1]));this.Z(i,s)})}$acceptDefaultProfile(t,r){const i=this.s;this.s=t,this.u=r,i?.path!==t.path&&this.N.fire(t.path)}Z(t,r){this.n.set(t,r),this.B(r.onDidChangeCollection(()=>{this.Y(t,r)}))}};z1=__decorate([__param(1,Tn),__param(2,Me)],z1);var j7=class extends he{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new I,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let r=this.a.get(t);return r||(r=new hP(this,e),this.a.set(t,r),this.B(r.onDidChangeCollection(()=>this.f.fire()))),r}replace(e,t,r,i){this.g(e,{value:t,type:yo.Replace,options:r??{applyAtProcessCreation:!0},scope:i})}append(e,t,r,i){this.g(e,{value:t,type:yo.Append,options:r??{applyAtProcessCreation:!0},scope:i})}prepend(e,t,r,i){this.g(e,{value:t,type:yo.Prepend,options:r??{applyAtProcessCreation:!0},scope:i})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const r=this.h(e,t.scope),i=this.map.get(r),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!i||i.value!==t.value||i.type!==t.type||i.options?.applyAtProcessCreation!==s.applyAtProcessCreation||i.options?.applyAtShellIntegration!==s.applyAtShellIntegration||i.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const r=this.h(e,t),i=this.map.get(r);return i?B7(i):void 0}h(e,t){const r=this.j(t);return r.length?`${e}:::${r}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[r,i]of this.map)this.j(i.scope)===this.j(e)&&t.set(i.variable,B7(i));return t}delete(e,t){const r=this.h(e,t);this.map.delete(r),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,r]of this.map)r.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const r=this.j(t),i=this.descriptionMap.get(r);if(!i||i.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(r,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},hP=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new I}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,r){this.b.replace(e,t,r,this.d)}append(e,t,r){this.b.append(e,t,r,this.d)}prepend(e,t,r){this.b.prepend(e,t,r,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((r,i)=>e.call(t,i,r,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},W1=class extends z1{constructor(t,r){super(!1,t,r)}createTerminal(t,r,i){throw new Xf}createTerminalFromOptions(t,r){throw new Xf}};W1=__decorate([__param(0,Tn),__param(1,Me)],W1);function _7(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function dP(e){return oo.isThemeColor(e)?e:void 0}function B7(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var fP=W("progressService"),z7;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(z7||(z7={}));var CU=Object.freeze({total(){},worked(){},done(){}}),V1=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},W7=class extends he{constructor(t,r){super(),this.a=new to,r.withProgress(t,i=>(this.b=i,this.c&&i.report(this.c),this.a.p)),this.B(ae(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};W7=__decorate([__param(1,fP)],W7);var DU=W("editorProgressService"),V7="__",PU=W("IAuthenticationService"),AU=W("IAuthenticationExtensionsService"),q1=W("IExtHostAuthentication"),G1=class{constructor(t){this.b=new Map,this.c=new I,this.d=new pP,this.a=t.getProxy(z.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const r=t.toLowerCase();return lt.chain(this.c.event,i=>i.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(r)).map(s=>({provider:s.provider})))}async getSession(t,r,i,s={}){const n=He.toKey(t.identifier),o=[...i].sort().join(" ");return await this.d.getOrCreate(`${n} ${r} ${o}`,async()=>{await this.a.$ensureProvider(r);const a=t.displayName||t.name;return this.a.$getSession(r,i,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,r){const i=this.b.get(t);return i?i.provider.removeSession(r):this.a.$removeSession(t,r)}registerAuthenticationProvider(t,r,i,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:r,provider:i,options:s??{supportsMultipleAccounts:!1}});const n=i.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,r,s?.supportsMultipleAccounts??!1),new De(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,r,i){const s=this.b.get(t);if(s)return await s.provider.createSession(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,r){const i=this.b.get(t);if(i)return await i.provider.removeSession(r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,r,i){const s=this.b.get(t);if(s)return await s.provider.getSessions(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,r,i){return t.startsWith(V7)||this.c.fire({provider:{id:t,label:r},extensionIdFilter:i}),Promise.resolve()}};G1=__decorate([__param(0,Me)],G1);var pP=class{constructor(){this.a=new Map}getOrCreate(e,t){const r=this.a.get(e);if(r)return r;const i=t().finally(()=>this.a.delete(e));return this.a.set(e,i),i}},qd,J1=W("IExtHostLanguageModels"),q7=class{constructor(e,t){this.option=e,this.stream=new Ap,this.stream=t??new Ap}},gP=class{constructor(){this.a=new Map,this.b=new Ap,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return Fa.map(e.b.asyncIterable,t=>{if(t instanceof Zt)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new q7(e.index,this.b):t=new q7(e.index),this.a.set(e.index,t));let r;e.part.type==="text"?r=new Zt(e.part.value):r=new Vc(e.part.toolCallId,e.part.name,e.part.parameters),t.stream.emitOne(r)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},Q1=class{static{qd=this}static{this.a=1}constructor(t,r,i){this.k=r,this.l=i,this.c=new I,this.d=new I,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Li,this.i=new Map,this.j=new Map,this.t=new Set,this.b=t.getProxy(z.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,r,i,s){const n=qd.a++;this.f.set(n,{extension:t.identifier,provider:i,languageModelId:r});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${He.toKey(t.identifier)}/${r}`,{extension:t.identifier,id:r,vendor:s.vendor??He.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable});const a=i.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(r,new He(c),l,u)});return ae(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,r,i,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new V1(async u=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof Vc?h={type:"tool_use",name:u.part.name,parameters:u.part.input??u.part.parameters,toolCallId:u.part.callId}:u.part instanceof Zt&&(h={type:"text",value:u.part.value}),!h){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(r,{index:u.index,part:h})});let l;if(a.provider.provideLanguageModelResponse2)l=Promise.resolve(a.provider.provideLanguageModelResponse2(s.map(Zo.to),n,He.toKey(i),c,o));else{const u=new V1(async h=>{c.report({index:h.index,part:new Zt(h.part)})});l=Promise.resolve(a.provider.provideLanguageModelResponse(s.map(Zo.to),n?.modelOptions??{},He.toKey(i),u,o))}l.then(()=>{this.b.$reportResponseDone(r,void 0)},u=>{this.b.$reportResponseDone(r,Ea(u))})}$provideTokenLength(t,r,i){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(r,i)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:r,metadata:i}of t.added)this.g.set(r,{metadata:i,apiObjects:new Li});if(t.removed)for(const r of t.removed){this.g.delete(r);for(const[i,s]of this.i)s.languageModelId===r&&(s.res.reject(new ai),this.i.delete(i))}t.added?.forEach(r=>this.r(r.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const r=Er.find(this.g.entries(),([,i])=>!!i.metadata.isDefault)?.[0];if(r)return this.getLanguageModelByIdentifier(t,r)}async getLanguageModelByIdentifier(t,r){const i=this.g.get(r);if(!i)return;this.q(t.identifier,i.metadata)&&await this.r(i.metadata);let s=i.apiObjects.get(t.identifier);if(!s){const n=this;s={id:i.metadata.id,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,maxInputTokens:i.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(r))throw ji.NotFound(r);return n.s(r,o,a??Xe.None)},sendRequest(o,a,c){if(!n.g.has(r))throw ji.NotFound(r);return n.m(t,r,o,a??{},c??Xe.None)}},Object.freeze(s),i.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,r){const i=await this.b.$selectChatModels({...r,extension:t.identifier}),s=[];for(const n of i){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,r,i,s,n){const o=this.n(t,i),a=t.identifier,c=this.g.get(r)?.metadata;if(!c||!this.g.has(r))throw ji.NotFound(`Language model '${r}' is unknown.`);if(this.q(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw ji.NoPermissions(`Language model '${r}' cannot be used by '${a.value}'.`);s.tools&&(s.tools=s.tools.map(l=>({...l,inputSchema:l.inputSchema??l.parametersSchema,parametersSchema:l.inputSchema??l.parametersSchema})));try{const l=Math.random()*1e6|0,u=new gP;this.i.set(l,{languageModelId:r,res:u});try{await this.b.$tryStartChatRequest(a,r,l,o,s,n)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===ji.name?l:new ji(`Language model '${r}' errored: ${Qs(l)}`,"Unknown",l)}}n(t,r){const i=[];for(const s of r)s.role===Nr.System&&T(t,"languageModelSystem"),i.push(Zo.from(s));return i}async $acceptResponsePart(t,r){const i=this.i.get(t);i&&i.res.handleFragment(r)}async $acceptResponseDone(t,r){const i=this.i.get(t);i&&(this.i.delete(t),r?i.res.reject(yk(r)):i.res.resolve())}async o(t,r,i,s){const n=V7+r.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=i?d(2719,null,r.displayName,i):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0}catch{return!1}}q(t,r){return!!r.auth&&!He.equals(r.extension,t)}async r(t){if(t.auth)for(const r of this.t)try{await this.o(r,{identifier:t.extension,displayName:""},void 0,!0)}catch(i){this.k.error("Fake Auth request failed"),this.k.error(i)}}async s(t,r,i){if(!this.g.get(t))throw ji.NotFound(`Language model '${t}' is unknown.`);const n=Er.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(r,i):this.b.$countTokens(t,typeof r=="string"?r:Zo.from(r),i)}$updateModelAccesslist(t){const r=new Array;for(const{from:i,to:s,enabled:n}of t){const o=this.h.get(i)??new nn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(i,o);const c={from:i,to:s};r.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.t.add(t);const r=this,i=lt.signal(lt.filter(this.c.event,n=>He.equals(n.from,t.identifier))),s=lt.signal(this.d.event);return{get onDidChange(){return lt.any(i,s)},canSendRequest(n){let o;e:for(const[c,l]of r.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!r.q(t.identifier,o))return!0;const a=r.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,r,i){return T(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(r,i)}async $isFileIgnored(t,r,i){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(y.revive(r),i)??!1}registerIgnoredFileProvider(t,r){T(t,"chatParticipantPrivate");const i=qd.a++;return this.b.$registerFileIgnoreProvider(i),this.j.set(i,r),ae(()=>{this.b.$unregisterFileIgnoreProvider(i),this.j.delete(i)})}};Q1=qd=__decorate([__param(0,Me),__param(1,Ue),__param(2,q1)],Q1);function hl(e,t=pr){return ES(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function mP(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var G7;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(G7||(G7={}));var J7;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(J7||(J7={}));function Q7(e){return e<0?0:e>255?255:e|0}function sa(e){return e<0?0:e>4294967295?4294967295:e|0}var Z7=class PE{constructor(t){const r=Q7(t);this.c=r,this.a=PE.d(r),this.b=new Map}static d(t){const r=new Uint8Array(256);return r.fill(t),r}set(t,r){const i=Q7(r);t>=0&&t<256?this.a[t]=i:this.b.set(t,i)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},Y7;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(Y7||(Y7={}));var X7;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(X7||(X7={}));var vP=class extends Z7{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let r=0,i=e.length;r<i;r++)this.set(e.charCodeAt(r),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let r=null;for(const i of this.h(e)){if(i.index>t)break;r=i}return r}findNextIntlWordAtOrAfterOffset(e,t){for(const r of this.h(e))if(!(r.index<t))return r;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const r of e)this.k(r)&&t.push(r);return t}k(e){return!!e.isWordLike}},K7=new rp(10);function wP(e,t){const r=`${e}/${t.join(",")}`;let i=K7.get(r);return i||(i=new vP(e,t),K7.set(r,i)),i}var Z1;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(Z1||(Z1={}));var e9;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(e9||(e9={}));var t9;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(t9||(t9={}));var r9;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(r9||(r9={}));var i9;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(i9||(i9={}));var s9;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(s9||(s9={}));var n9;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(n9||(n9={}));var o9;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(o9||(o9={}));var Y1=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},a9;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(a9||(a9={}));var c9;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(c9||(c9={}));var l9;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(l9||(l9={}));var bP=class{constructor(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}},yP=class{constructor(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}},u9=class{constructor(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=h9(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Y3(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new bP(t,this.wordSeparators?wP(this.wordSeparators,[]):null,r?this.searchString:null)}};function h9(e){if(!e||e.length===0)return!1;for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i===10)return!0;if(i===92){if(t++,t>=r)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function d9(e,t,r){if(!r)return new Y1(e,null);const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s];return new Y1(e,i)}function xP(e,t,r,i,s){if(i===0)return!0;const n=t.charCodeAt(i-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i);if(e.get(o)!==0)return!0}return!1}function EP(e,t,r,i,s){if(i+s===r)return!0;const n=t.charCodeAt(i+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i+s-1);if(e.get(o)!==0)return!0}return!1}function f9(e,t,r,i,s){return xP(e,t,r,i,s)&&EP(e,t,r,i,s)}var kP=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let r;do{if(this.b+this.c===t||(r=this.a.exec(e),!r))return null;const i=r.index,s=r[0].length;if(i===this.b&&s===this.c){if(s===0){nb(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=i,this.c=s,!this._wordSeparators||f9(this._wordSeparators,e,t,i,s))return r}while(r);return null}};function p9(e){return e.scheme!==V.file&&e.scheme!==V.vscodeRemote}function SP(e){if(e.folders.length)return e.folders.every(t=>p9(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&p9(e.configuration))return e.configuration}function $P(e){return SP(e)?.scheme}var CP=$g,g9=W("remoteAgentService"),LU=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let i=0;i<this.maxSampleCount;i++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await ui(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let r;return this.initial.length<this.maxInitialCount?this.initial.push(t):r=this.initial.reduce((i,s)=>i+s,0)/this.initial.length,this.lastMeasurement={initial:r,current:t,average:this.average.reduce((i,s)=>i+s,0)/this.average.length,high:typeof r>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>r*this.highLatencyMultiple},this.lastMeasurement}},X1,IP=W("pathService"),m9=X1=class{constructor(t,r,i,s){this.d=t,this.e=r,this.f=i,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||$3)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,r,i){return typeof r=="string"||typeof r>"u"?this.a.then(s=>this.h(t,s,r)):this.h(t,r,i)}h(t,r,i){return t.scheme===V.file||t.scheme===V.vscodeRemote?xS(i??ds(t),r===1):!0}get defaultUriScheme(){return X1.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,r){if(t.remoteAuthority)return V.vscodeRemote;const i=$P(r.getWorkspace());if(i)return i;const s=r.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=r.getWorkspace().configuration;return n?n.scheme:V.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?xt:Te)}async fileURI(t){let r="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(r=t.substring(2),t="/"):(r=t.substring(2,s),t=t.substring(s)||"/")}return y.from({scheme:V.file,authority:r,path:t,query:"",fragment:""})}};m9=X1=__decorate([__param(1,g9),__param(2,CP),__param(3,Jp)],m9);function DP(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var v9=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}aiText(t,r,i={}){return{...this.j(r?.map(Qp),i),type:3,contentPattern:t}}text(t,r,i={}){t=this.h(t,i);const s=this.a.getValue(),n=r&&r.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(r?.map(Qp),i),type:2,contentPattern:t,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:i.surroundingContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}h(t,r){const i=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:i.editor.wordSeparators};return this.l(t,r)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),r.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=r.notebookSearchConfig.includeMarkupInput),r.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=r.notebookSearchConfig.includeMarkupPreview),r.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=r.notebookSearchConfig.includeCodeInput),r.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=r.notebookSearchConfig.includeOutput),s}file(t,r={}){return{...this.j(t,r),type:1,filePattern:r.filePattern?r.filePattern.trim():r.filePattern,exists:r.exists,sortByScore:r.sortByScore,cacheKey:r.cacheKey,shouldGlobMatchFilePattern:r.shouldGlobSearch}}i(t,r){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(i=>i.length>0).map(Gd),!t.length)return{}}else t=Gd(t);return r?this.parseSearchPaths(t):{pattern:K1(...Array.isArray(t)?t:[t])}}j(t=[],r={}){let i=Array.isArray(r.excludePattern)?r.excludePattern.map(u=>u.pattern).flat():r.excludePattern;i=i?.length===1?i[0]:i;const s=this.i(r.includePattern,r.expandPatterns),n=this.i(i,r.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,r,n)):t.map(u=>this.u(u,r,n,o))).filter(u=>!!u),c={_reason:r._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:r.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:r.onlyOpenEditors,maxResults:r.maxResults,onlyFileScheme:r.onlyFileScheme};if(r.onlyOpenEditors){const u=bt(this.c.groups.flatMap(f=>f.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>K6(c,f.fsPath)),p=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(p)),{...c,...p}}const l=r.extraFileResources&&r.extraFileResources.filter(u=>K6(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const r=[],i=new Lt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===V.walkThrough)return;if(LS(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=i.get(c);l||(n=!0,l={folder:c,includePattern:{}},r.push(l),i.set(c,l));const u=Ta(c.fsPath,o.fsPath);Kn(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:r,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,r){if(r.isSmartCase){if(t.isRegExp){if(lb(t.pattern,!0))return!0}else if(lb(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&h9(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const r=h=>iu(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:AP(t)).map(h=>{const p=this.f.resolvedUserHome;return p?mP(h,p.scheme===V.file?p.fsPath:p.path):h}),n=ew(s,h=>r(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>xp(h,"/")).map(h=>xp(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),TP(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=K1(...l);return u&&(a.pattern=u),a}n(t,r){return r.disregardExcludeSettings?void 0:kD(t,!r.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const r=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=PP(s);return o&&(o=ev(o)),this.q(n).flatMap(c=>this.r(c,o))}),i=new Map;return r.forEach(s=>{const n=s.searchPath.toString(),o=i.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):i.set(n,{searchPath:s.searchPath,pattern:s.pattern?K1(s.pattern):void 0})}),Array.from(i.values())}q(t){if(iu(t)){const r=this.b.getWorkspace().folders;return r[0]&&r[0].uri.scheme!==V.file?[{searchPath:r[0].uri.with({path:t})}]:[{searchPath:y.file(Zn(t))}]}if(this.b.getWorkbenchState()===2){const r=this.b.getWorkspace().folders[0].uri;if(t=Gd(t),t.startsWith("../")||t===".."){const s=Te.resolve(r.path,t);return[{searchPath:r.with({path:s})}]}const i=ev(t);return[{searchPath:r,pattern:i}]}else{if(t==="./"||t===".\\")return[];{const r=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=r.match(new RegExp(`^${qs(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Js);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&ev(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(12910,null,o);throw new Error(a)}}}}r(t,r){const i=t.pattern&&r?`${t.pattern}/${r}`:t.pattern||r,s=[{searchPath:t.searchPath,pattern:i}];return i&&!i.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:i+"/**"}),s}t(t,r,i){const s=this.u(Qp(t.searchPath),r,i,!1);return s?{...s,includePattern:t.pattern}:null}u(t,r,i,s){let n;const o=y.isUri(t)?t:t.uri;let a=r.excludePattern?.map(f=>{const m=r.excludePattern&&DP(f)?f.uri:void 0;return!m||!(y.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),i.searchPaths){const f=i.searchPaths.filter(m=>yb(m.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,r)||{},...n||{}},h=y.isUri(t)?ds(t):t.name,p=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:p,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof r.disregardIgnoreFiles=="boolean"?r.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof r.disregardGlobalIgnoreFiles=="boolean"?r.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof r.disregardParentIgnoreFiles=="boolean"?r.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof r.ignoreSymlinks=="boolean"?r.ignoreSymlinks:!c.search.followSymlinks}}};v9=__decorate([__param(0,Tu),__param(1,Jp),__param(2,MI),__param(3,Ue),__param(4,IP),__param(5,h5)],v9);function PP(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const r=t.index,i=e.substr(0,r).match(/[/|\\][^/\\]*$/);if(i){let s=e.substr(0,i.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((i.index||0)+1)}}}return{pathPortion:e}}function K1(...e){return e.length?e.reduce((t,r)=>(t[r]=!0,t),Object.create(null)):void 0}function AP(e){return Ig(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function TP(e){return[`**/${e}/**`,`**/${e}`].map(r=>r.replace(/\*\*\/\*\*/g,"**"))}function Gd(e){return e.replace(/\\/g,"/")}function ev(e){return Gd(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var RP=7e3;function LP(e,t){const r=t.activationEvents;if(!r)return Promise.resolve(void 0);const i=[],s=[];for(const u of r)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):i.push(h)}if(i.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=OS(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>NP(e,u,a))).then(()=>{}),l=FP(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function NP(e,t,r){for(const i of e.folders)if(await e.exists(Jt(y.revive(i),t))){r(`workspaceContains:${t}`);return}}async function FP(e,t,r,i){if(r.length===0)return Promise.resolve(void 0);const s=new ft,n=e.checkExists(e.folders,r,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${r.join(",")}`)},RP);let a=!1;try{a=await n}catch(c){Hs(c)||fr(c)}s.dispose(),clearTimeout(o),a&&i(`workspaceContains:${r.join(",")}`)}var w9=class{constructor(e){this.b=new I,this.onDidChangePassword=this.b.event,this.a=e.getProxy(z.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,r){return this.a.$setPassword(e,t,r)}delete(e,t){return this.a.$deletePassword(e,t)}},tv=W("IExtHostSecretState"),MP=class{#e;constructor(e,t){this.disposables=new we,this.a=He.toKey(e.identifier),this.#e=t,this.onDidChange=lt.map(lt.filter(this.#e.onDidChangePassword,r=>r.extensionId===this.a),r=>({key:r.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},rv=class{constructor(t,r,i){this.f=i,this.d=new Map,this.a=r.getProxy(z.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===zs}getMessage(t,r){const{message:i,args:s,comment:n}=r;if(this.c)return eb(i,s??{});let o=i;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),eb(a??i,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let r;const i=await this.g(t);if(!i){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(i),n=JSON.parse(s);r=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${i}: ${s.message}`);return}r&&this.d.set(t.identifier.value,{contents:r,uri:i})}async g(t){if(t.isBuiltin){const r=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return y.revive(r)}return t.l10n?y.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};rv=__decorate([__param(0,Wt),__param(1,Me),__param(2,Ue)],rv);var iv=W("IExtHostLocalizationService"),sv=W("IExtHostManagedSockets"),nv=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(z.MainThreadManagedSockets)}setFactory(t,r){for(const i of this.d.values())i.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new OP(t,r),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const r=++this.b,i=await this.c.makeConnection(),s=new we;return this.d.set(r,new UP(r,i,s)),s.add(ae(()=>this.d.delete(r))),s.add(i.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(r),s.dispose()})),s.add(i.onDidClose(n=>{this.a.$onDidManagedSocketClose(r,n?.stack??n?.message),s.dispose()})),s.add(i.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(r,ke.wrap(n)))),r}$remoteSocketWrite(t,r){this.d.get(t)?.actual.send(r.buffer)}$remoteSocketEnd(t){const r=this.d.get(t);r&&(r.actual.end(),r.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};nv=__decorate([__param(0,Me)],nv);var OP=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},UP=class extends he{constructor(e,t,r){super(),this.socketId=e,this.actual=t,this.B(r)}},ov,b9=W("IHostUtils"),av=ov=class extends he{constructor(t,r,i,s,n,o,a,c,l,u,h,p,f){super(),this.Y=p,this.Z=f,this.a=this.B(new I),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=r,this.g=i,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(z.MainThreadWorkspace),this.z=this.g.getProxy(z.MainThreadTelemetry),this.C=this.g.getProxy(z.MainThreadExtensionService),this.D=new li,this.F=new li,this.G=new li,this.H=new li,this.I=new jP(this.f.extensions.activationEvents),this.L=new ll(this.I,this.f.extensions.allExtensions);const m=new nn(this.f.extensions.myExtensions);this.J=new ll(this.I,E9(this.L,m)),Ws&&(this.s.info(`Creating extension host with the following global extensions: ${na(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${na(this.J)}`)),this.M=new P7(this.g,this.s),this.N=new w9(this.g),this.O=c,this.h=this.q.add(t.createChild(new Vp([A1,this.M],[tv,this.N]))),this.P=this.B(new D1(this.J,this.L,{onExtensionActivationError:(w,x,S)=>{this.C.$onExtensionActivationError(w,Ea(x),S)},actualActivateExtension:async(w,x)=>{if(ll.isHostExtension(w,this.J,this.L))return await this.C.$activateExtension(w,x),new XD;const S=this.J.getExtensionDescription(w);return this.fb(S,x)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),Kt("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){fr(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,r=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),Qf(s=>{this.s.error(s)}),this.g.dispose();const i=this.$();Promise.race([ui(5e3),i]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${r}`):this.s.info(`Extension host exiting with code ${r}`),this.s.flush(),this.s.dispose(),this.c.exit(r)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const r=await this.C.$getExtension(t);return r&&{...r,identifier:new He(r.identifier.value),extensionLocation:y.revive(r.extensionLocation)}}ab(t,r){return this.P.activateByEvent(t,r)}bb(t,r){return this.P.activateById(t,r)}activateByIdWithErrors(t,r){return this.bb(t,r).then(()=>{const i=this.P.getActivatedExtension(t);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===V.file&&this.c.fsRealpath){const r=t.fsPath;this.R.has(r)||this.R.set(r,this.c.fsRealpath(r));const i=await this.R.get(r);return y.file(i)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new HP(t))),this.Q}async db(t){const r=ps.forUris(i=>TS.ignorePathCasing(i));return await Promise.all(t.map(async i=>{if(this.wb(i)){const s=await this.cb(i.extensionLocation);r.set(s,i)}})),r}eb(t){let r=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return r;const i=this.P.getActivatedExtension(t);if(!i)return r;try{typeof i.module.deactivate=="function"&&(r=Promise.resolve(i.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{i.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return r}async fb(t,r){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,r).then(i=>{const s=i.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,r),this.gb(t,r,"success",s),i},i=>{throw this.gb(t,r,"failure"),i})}gb(t,r,i,s){const n=x9(t,r);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:i})}hb(t,r){const i=x9(t,r);this.z.$publicLog2("activatePlugin",i);const s=this.wb(t);if(!s)return Promise.resolve(new YD(_d.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${r.startup}, activationEvent: '${r.activationEvent}'${t.identifier.value!==r.extensionId.value?`, root cause: ${r.extensionId.value}`:""}`),this.s.flush();const n=new we,o=new D7(r.startup);return Promise.all([this.xb(t,Jt(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>(Kt(`code/extHost/willActivateExtension/${t.identifier.value}`),ov.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>(Kt(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,r){const i=this.Z.createLanguageModelAccessInformation(t),s=r.add(new KD(t,this.M)),n=r.add(new A7(t.identifier.value,!1,this.M)),o=r.add(new MP(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?Mo.Test:Mo.Development:Mo.Production,c=this.f.remote.isRemote?En.Workspace:En.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const p=Tt(t,"ipc")?this.f.messagePorts?.get(He.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return i},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return vp(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return vp(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return y.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new dl(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return T(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!p)return;const f=lt.buffer(lt.fromDOMEventEmitter(p,"message",m=>m.data));p.start(),h={onDidReceiveMessage:f,postMessage:p.postMessage.bind(p)}}return h}})})}static jb(t,r,i,s,n,o){return i=i||{activate:void 0,deactivate:void 0},this.kb(t,r,i,s,o).then(a=>new Bd(!1,null,o.build(),i,a,ae(()=>{n.dispose(),Ii(s.subscriptions)})))}static kb(t,r,i,s,n){if(typeof i.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${r.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}lb(t,r){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:r}).then(void 0,i=>{this.s.error(i)})}mb(t,r=0){const s=Date.now();Iw(()=>{for(let n=r;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(f3()),this.m.getConfigProvider().then(t=>{const r=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this.J.getAllExtensionDescriptions();if(r)this.mb(i);else for(const s of i)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const r=this.j.workspace?this.j.workspace.folders:[],i=this.pb(r),s=this.rb(),n=Promise.all([s,t,i]).then(()=>{});return Promise.race([n,ui(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(r=>this.qb(t,r))).then(()=>{})}async qb(t,r){if(this.isActivated(r.identifier))return;const i=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:i||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await LP(s,r);if(n)return this.bb(r.identifier,{startup:!0,extensionId:r.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:r}=this.f.environment;if(!t||!r)throw new Error(d(2715,null));const i=await this.xb(null,r,new D7(!1));if(!i||typeof i.run!="function")throw new Error(d(2716,null,r.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(Ws&&this.s.error("Test runner called back with error",l),n(l)):(Ws&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=Wr(r),c=i.run(a,o);c&&c.then&&c.then(()=>{Ws&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{Ws&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),ui(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,r){return this.S[t]=r,ae(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:r}=await this.ub(t);return r?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const r=t.indexOf("+");if(r===-1)throw new bo("Not an authority that can be resolved!",Ni.InvalidAuthority);const i=t.substr(0,r);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this.S[i]}}async $resolveAuthority(t,r){const i=Bs.create(!1),s=()=>`[resolveAuthority(${h6(t)},${r})][${i.elapsed()}ms] `,n=C=>this.s.info(`${s()}${C}`),o=C=>this.s.warn(`${s()}${C}`),a=(C,D=void 0)=>this.s.error(`${s()}${C}`,D),c=C=>{if(C instanceof bo)return{type:"error",error:{code:C._code,message:C._message,detail:C._detail}};throw C},l=async C=>{n(`activating resolver for ${C}...`);const{resolver:D,authorityPrefix:M}=await this.ub(C);if(!D)throw a(`no resolver for ${M}`),new bo(`No remote extension installed to resolve ${M}.`,Ni.NoResolverFound);return{resolver:D,authorityPrefix:M,remoteAuthority:C}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async C=>{if(!(C instanceof bo)||C._code!==Ni.InvalidAuthority)throw C;return o(`resolving nested authorities failed: ${C.message}`),[await l(t)]})}catch(C){return c(C)}const p=new GS;p.cancelAndSet(()=>n("waiting..."),1e3);let f,m;for(const[C,{authorityPrefix:D,resolver:M,remoteAuthority:F}]of h.entries())try{if(C===h.length-1)n("invoking final resolve()..."),Kt(`code/extHost/willResolveAuthority/${D}`),f=await M.resolve(F,{resolveAttempt:r,execServer:m}),Kt(`code/extHost/didResolveAuthorityOK/${D}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(M,oh.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${F}`),Kt(`code/extHost/willResolveExecServer/${D}`),m=await M.resolveExecServer?.(F,{resolveAttempt:r,execServer:m}),!m)throw new bo(`Exec server was not available for ${F}`,Ni.NoResolverFound);Kt(`code/extHost/didResolveExecServerOK/${D}`)}}catch(B){return Kt(`code/extHost/didResolveAuthorityError/${D}`),a("returned an error",B),p.dispose(),c(B)}p.dispose();const w={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},x={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${oh.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let S;if(oh.isManagedResolvedAuthority(f)){const C=r;this.Y.setFactory(C,f.makeConnection),S={authority:t,connectTo:new GI(C),connectionToken:f.connectionToken}}else S={authority:t,connectTo:new JI(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:S,options:x,tunnelInformation:w}}}async $getCanonicalURI(t,r){this.s.info(`$getCanonicalURI invoked for authority (${h6(t)})`);const{resolver:i}=await this.ub(t);if(!i)return null;const s=y.revive(r);if(typeof i.getCanonicalURI>"u")return s;const n=await zt(()=>i.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=y9(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Ws&&(this.s.info(`$startExtensionHost: global extensions: ${na(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${na(this.J)}`)),this.tb()}$activateByEvent(t,r){return r===1?this.D.wait().then(i=>this.ab(t,!1)):this.G.wait().then(i=>this.ab(t,!1))}async $activate(t,r){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,r),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=y9(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Ws&&(this.s.info(`$deltaExtensions: global extensions: ${na(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${na(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const r=ke.alloc(t),i=Math.random()%256;for(let s=0;s<t;s++)r.writeUInt8(i,s);return r}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};av=ov=__decorate([__param(0,fu),__param(1,b9),__param(2,Me),__param(3,zi),__param(4,Wi),__param(5,Ue),__param(6,Wt),__param(7,R1),__param(8,O1),__param(9,ia),__param(10,iv),__param(11,sv),__param(12,J1)],av);function y9(e,t,r,i){e.addActivationEvents(i.addActivationEvents);const s=new ll(e,t.getAllExtensionDescriptions());s.deltaExtensions(i.toAdd,i.toRemove);const n=new nn(r.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)n.delete(a);for(const a of i.myToAdd)n.add(a);const o=E9(s,n);return{globalRegistry:s,myExtensions:o}}function x9(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function na(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Ls=W("IExtHostExtensionService"),dl=class{#e;#t;#r;constructor(e,t,r,i,s){this.#e=e,this.#t=t,this.#r=r.identifier,this.id=r.identifier.value,this.extensionUri=r.extensionLocation,this.extensionPath=Zn(Wr(r.extensionLocation)),this.packageJSON=r,this.extensionKind=i,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#r)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#r)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#r,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function E9(e,t){return e.getAllExtensionDescriptions().filter(r=>t.has(r.identifier))}var HP=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},jP=class{constructor(e){this.a=new Li,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},k9=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Ue),i=e.get(Me).getProxy(z.MainThreadErrors);Qf(s=>{t.error(s);const n=Ea(s);i.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Ue),r=e.get(Me),i=e.get(Ls),s=e.get(Vd),n=r.getProxy(z.MainThreadExtensionService),o=r.getProxy(z.MainThreadErrors),a=await i.getExtensionPathIndex(),c=new WeakMap;function l(p,f){if(c.has(p))return c.get(p).stack;let m="",w,x;for(const C of f)m+=`
	at ${C.toString()}`,x=C.getFileName(),!w&&x&&(w=a.findSubstr(y.file(x)));const S=`${p.name||"Error"}: ${p.message||""}${m}`;return c.set(p,{extensionIdentifier:w?.identifier,stack:S}),S}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(p){if(p===l||!p||p[u]){h=p||l;return}h=function(f,m){return l(f,m),p.call(Error,f,m)},Object.assign(h,{[u]:!0})}}),Qf(p=>{t.error(p);const f=Ea(p),m=c.get(p);if(!m?.extensionIdentifier){o.$onUnexpectedError(f);return}n.$onExtensionRuntimeError(m.extensionIdentifier,f);const w=s.onExtensionError(m.extensionIdentifier,p);t.trace("forwarded error to extension?",w,m)})}},_P=class AE{constructor(t,r,i,s,n){this.a=i,this.b=new r$(t,null,s),r=AE.e(r,this.b);const o=new Vp(...P$());o.set(Wt,{_serviceBrand:void 0,...r,messagePorts:n}),o.set(Me,new L$(this.b)),o.set(gu,new N$(s)),o.set(b9,i);const a=new R$(o,!0);a.invokeFunction(k9.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Ue)),Kt("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",r),this.c=a.invokeFunction(c=>c.get(Ls)),this.c.initialize(),a.invokeFunction(k9.installFullHandler)}async asBrowserUri(t){const r=this.b.getProxy(z.MainThreadExtensionService);return y.revive(await r.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,r){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=y.revive(r.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=y.revive(r.transformIncomingURIs(t.environment.appRoot));const i=t.environment.extensionDevelopmentLocationURI;return i&&(t.environment.extensionDevelopmentLocationURI=i.map(s=>y.revive(r.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=y.revive(r.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=y.revive(r.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=y.revive(r.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=y.revive(r.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=y.revive(r.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=y.revive(r.transformIncomingURIs(t.logsLocation)),t.workspace=r.transformIncomingURIs(t.workspace),t}},BP=function(t){const r=i=>{globalThis.removeEventListener("message",r);const s=i.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",r)}.toString(),zP=class extends EventTarget{constructor(e,t,r){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const i=`((${BP})('${t}'))`,s=new Blob([i],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:r};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},HU=new H("inOutput",!1),jU=new H("activeLogOutput",!1),_U=new H("activeLogOutput.levelSettable",!1),BU=new H("activeLogOutput.level",""),zU=new H("activeLogOutput.levelIsDefault",!1),WU=new H("outputView.scrollLock",!1),VU=W("outputService"),fl;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(fl||(fl={}));var WP={OutputChannels:"workbench.contributions.outputChannels"},VP=class{constructor(){this.a=new Map,this.b=new I,this.onDidRegisterChannel=this.b.event,this.c=new I,this.onDidRemoveChannel=this.c.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}removeChannel(e){this.a.delete(e),this.c.fire(e)}};Ht.add(WP.OutputChannels,new VP);var qU=new H("activeOutputChannel",""),qP=60,GP=qP*60,cv=GP*24,GU=cv*7,JU=cv*30,QU=cv*365;function JP(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var S9=class extends ty{constructor(e,t,r,i,s){super(),this.id=e,this.name=t,this.n=r,this.r=i,this.extension=s,this.m=0,this.visible=!1,this.setLevel(r.getLevel()),this.B(r.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(ae(()=>this.r.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.m;this.n.flush(),this.r.$update(this.id,fl.Clear,e)}replace(e){const t=this.m;this.info(e),this.r.$update(this.id,fl.Replace,t),this.visible&&this.n.flush()}show(e,t){this.n.flush(),this.r.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.r.$close(this.id)}g(e,t){this.m+=ke.fromString(t).byteLength,S$(this.n,e,t),this.visible&&(this.n.flush(),this.r.$update(this.id,fl.Append))}},QP=class extends S9{appendLine(e){this.append(e)}},lv=class{constructor(t,r,i,s,n,o){this.i=r,this.j=i,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(z.MainThreadOutputService),this.b=this.k.extUri.joinPath(r.logsLocation,`output_logging_${JP(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[r,i]of this.g)i.visible=r===this.h}createOutputChannel(t,r,i){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof r=="object"&&r.log,n=Ce(r)?r:void 0;if(Ce(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>He.equals(i.identifier,u))?.[1];a&&(o=D$(a));const c=new we,l=s?this.o(t,o,i,c):this.n(t,n,i,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(ae(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,r,i,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,r,i.identifier.value);return s.add(ae(()=>this.l.deregisterLogger(o))),new S9(c,t,a,this.a,i)}async o(t,r,i,s){const n=await this.p(i),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${i.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:r,extensionId:i.identifier.value}));return s.add(ae(()=>this.l.deregisterLogger(a))),new QP(c,t,l,this.a,i)}p(t){let r=this.d.get(t.identifier.value);if(!r){const i=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,r=(async()=>{try{await this.j.value.createDirectory(i)}catch(s){if(Du(s)!==me.FileExists)throw s}return i})())}return r}q(t,r,i){const s=()=>{if(i.isDisposed)throw new Error("Channel has been closed")};return r.then(n=>i.add(n)),{get name(){return t},append(n){s(),r.then(o=>o.append(n))},appendLine(n){s(),r.then(o=>o.appendLine(n))},clear(){s(),r.then(n=>n.clear())},replace(n){s(),r.then(o=>o.replace(n))},show(n,o){s(),r.then(a=>a.show(n,o))},hide(){s(),r.then(n=>n.hide())},dispose(){i.dispose()}}}r(t,r,i,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new I);function a(c){r=c,o.fire(c)}return i.then(c=>{c.logLevel!==r&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,i,s),get logLevel(){return r},onDidChangeLogLevel:o.event,trace(c,...l){n(),i.then(u=>u.trace(c,...l))},debug(c,...l){n(),i.then(u=>u.debug(c,...l))},info(c,...l){n(),i.then(u=>u.info(c,...l))},warn(c,...l){n(),i.then(u=>u.warn(c,...l))},error(c,...l){n(),i.then(u=>u.error(c,...l))}}}};lv=__decorate([__param(0,Me),__param(1,Wt),__param(2,Wd),__param(3,no),__param(4,za),__param(5,Ue)],lv);var $9=W("IExtHostOutputService"),pl,uv=class{static{pl=this}static{this.c=0}static{this.d=250}constructor(t,r){this.h=r,this.f=new Map,this.g=t.getProxy(z.MainThreadDecorations)}registerFileDecorationProvider(t,r){const i=pl.c++;this.f.set(i,{provider:t,extensionDescription:r}),this.g.$registerDecorationProvider(i,r.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(i,null);return}const o=jr(n);if(o.length<=pl.d){this.g.$onDidChange(i,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",r.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:Q3(u.path,"/")})),c=$k(a,(u,h)=>u.rank-h.rank||Gs(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const p of u){const f=Yn(p.uri.path);if(h!==f&&(h=f,l.push(p.uri)>=pl.d))break e}}this.g.$onDidChange(i,l)});return new De(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(i),this.f.delete(i)})}async $provideDecorations(t,r,i){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(r.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(y.revive(c),i));if(!u)return;try{vm.validate(u),u.badge&&typeof u.badge!="string"&&T(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};uv=pl=__decorate([__param(0,Me),__param(1,Ue)],uv);var C9=W("IExtHostDecorations"),ZP=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=sa(e);const r=this.a,i=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(r.length+s),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=sa(e),t=sa(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=sa(e),t=sa(t);const r=this.a,i=this.b;if(e>=r.length)return!1;const s=r.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(r.length-t),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=sa(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let r=t;r<=e;r++)this.b[r]=this.b[r-1]+this.a[r];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.a.length-1,i=0,s=0,n=0;for(;t<=r;)if(i=t+(r-t)/2|0,s=this.b[i],n=s-this.a[i],e<n)r=i-1;else if(e>=s)t=i+1;else break;return new YP(i,e-n)}},YP=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},XP=class{constructor(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const r of t)this.k(r.range),this.l(new Ir(r.range.startLineNumber,r.range.startColumn),r.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,r=new Uint32Array(t);for(let i=0;i<t;i++)r[i]=this.b[i].length+e;this.f=new ZP(r)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const r=rb(t);if(r.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]+this.b[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]);const i=new Uint32Array(r.length-1);for(let s=1;s<r.length;s++)this.b.splice(e.lineNumber+s-1,0,r[s]),i[s-1]=r[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,i)}},I9="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function KP(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const r of I9)e.indexOf(r)>=0||(t+="\\"+r);return t+="\\s]+)",new RegExp(t,"g")}var eA=KP();function D9(e){let t=eA;if(e&&e instanceof RegExp)if(e.global)t=e;else{let r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),t=new RegExp(e.source,r)}return t.lastIndex=0,t}var P9=new $a;P9.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function A9(e,t,r,i,s){if(t=D9(t),s||(s=Er.first(P9)),r.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:i+=l,r=r.substring(l,e+s.maxLen/2),A9(e,t,r,i,s)}const n=Date.now(),o=e-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=tA(t,r,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function tA(e,t,r,i){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=r&&e.lastIndex>=r)return s;if(i>0&&n>i)return null}return null}var hv=new Map;function rA(e,t){t?hv.set(e,t):hv.delete(e)}function iA(e){return hv.get(e)}var sA=class extends XP{constructor(e,t,r,i,s,n,o){super(t,r,i,s),this.o=e,this.p=n,this.q=o,this.n=!1}dispose(){br(!this.n),this.n=!0,this.q=!1}equalLines(e){return Ci(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===V.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.c===`
`?Zr.LF:Zr.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,r){return e.y(t,r)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){br(!this.n),this.p=e}_acceptIsDirty(e){br(!this.n),this.q=e}r(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const r=this.c,i=t.start.line,s=t.end.line,n=[];n.push(this.b[i].substring(t.start.character));for(let o=i+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(r)}t(e){let t;if(e instanceof xe?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new nA(t,this.b[t],t===this.b.length-1)}u(e){return e=this.x(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),r=this.b[t.index].length;return new xe(t.index,Math.min(t.remainder,r))}w(e){if(!(e instanceof ve))throw new Error("Invalid argument");const t=this.x(e.start),r=this.x(e.end);return t===e.start&&r===e.end?e:new ve(t.line,t.character,r.line,r.character)}x(e){if(!(e instanceof xe))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.b.length)t=this.b.length-1,r=this.b[t].length,i=!0;else{const s=this.b[t].length;r<0?(r=0,i=!0):r>s&&(r=s,i=!0)}return i?new xe(t,r):e}y(e,t){const r=this.x(e);if(!t)t=iA(this.p);else if(tb(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const i=A9(r.character+1,D9(t),this.b[r.line],0);if(i)return new ve(r.line,i.startColumn-1,r.line,i.endColumn-1)}},nA=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r}get lineNumber(){return this.a}get text(){return this.b}get range(){return new ve(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new ve(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Jd=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},XU=new Jd("id#"),oA=class TE{static{this.c=new Jd("TextEditorDecorationType")}constructor(t,r,i){const s=TE.c.nextId();t.$registerTextEditorDecorationType(r.identifier,s,zm.from(i)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},aA=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let r=null;if(e instanceof xe)r=new ve(e,e);else if(e instanceof ve)r=e;else throw new Error("Unrecognized location");this.l(r,t,!1)}insert(e,t){this.k(),this.l(new ve(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof ve)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,r){const i=this.c.validateRange(e);this.g.push({range:i,text:t,forceMoveMarkers:r})}setEndOfLine(e){if(this.k(),e!==Zr.LF&&e!==Zr.CRLF)throw ye("endOfLine");this.h=e}},cA=class{constructor(e,t,r,i){this.c=e,this.d=t,this._accept(r),this.e=i;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=Wo.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:Wo.from(e)})))}assign(e){const t={};let r=!1;if(typeof e.tabSize<"u"){const i=this.m(e.tabSize);i==="auto"?(r=!0,t.tabSize=i):typeof i=="number"&&this.f!==i&&(this.f=i,r=!0,t.tabSize=i)}if(typeof e.indentSize<"u"){const i=this.o(e.indentSize);i==="tabSize"?(r=!0,t.indentSize=i):typeof i=="number"&&this.h!==i&&(this.g=i,this.h=i,r=!0,t.indentSize=i)}if(typeof e.insertSpaces<"u"){const i=this.q(e.insertSpaces);i==="auto"?(r=!0,t.insertSpaces=i):this.j!==i&&(this.j=i,r=!0,t.insertSpaces=i)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,r=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,r=!0,t.lineNumbers=Wo.from(e.lineNumbers)),r&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(r=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(r)})}},lA=class{constructor(e,t,r,i,s,n,o,a){this.id=e,this.j=t,this.k=r,this.g=!1,this.h=new Set,this.c=s,this.d=new cA(this.j,this.id,n,r),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return i.value},set document(l){throw new js("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Mi))throw ye("selection");c.c=[l],c.l()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Mi)))throw ye("selections");c.c=l,c.l()},get visibleRanges(){return c.e},set visibleRanges(l){throw new js("visibleRanges")},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new js("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new aA(i.value,u);return l(h),c.m(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let p;if(!u||Array.isArray(u)&&u.length===0)p=c.c.map(f=>N.from(f));else if(u instanceof xe){const{lineNumber:f,column:m}=Fe.from(u);p=[{startLineNumber:f,startColumn:m,endLineNumber:f,endColumn:m}]}else if(u instanceof ve)p=[N.from(u)];else{p=[];for(const f of u)if(f instanceof ve)p.push(N.from(f));else{const{lineNumber:m,column:w}=Fe.from(f);p.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return t.$tryInsertSnippet(e,i.value.version,l.value,p,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.n(()=>{if(B6(u))return t.$trySetDecorations(e,l.key,wD(u));{const p=new Array(4*u.length);for(let f=0,m=u.length;f<m;f++){const w=u[f];p[4*f]=w.start.line+1,p[4*f+1]=w.start.character+1,p[4*f+2]=w.end.line+1,p[4*f+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,p)}}))},revealRange(l,u){c.n(()=>t.$tryRevealRange(e,N.from(l),u||wh.Default))},show(l){t.$tryShowEditor(e,$t.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){br(!this.g),this.g=!0}_acceptOptions(e){br(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){br(!this.g),this.e=e}_acceptViewColumn(e){br(!this.g),this.f=e}_acceptSelections(e){br(!this.g),this.c=e}async l(){const e=this.c.map(Xr.from);return await this.n(()=>this.j.$trySetSelections(this.id,e)),this.value}m(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const r=t.edits.map(s=>s.range);r.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=r.length-1;s<n;s++){const o=r[s].end;if(r[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const i=t.edits.map(s=>({range:N.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.j.$tryApplyEdits(this.id,t.documentVersionId,i,{setEndOfLine:typeof t.setEndOfLine=="number"?Vo.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}n(e){return this.g?(this.k.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.k.warn(t),null))}},uA=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},dv=class{constructor(t,r){this.h=t,this.i=r,this.a=null,this.b=new Map,this.c=new Lt,this.d=new I,this.e=new I,this.f=new I,this.g=new I,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const r=[],i=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=y.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),r.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=y.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==V.vscodeNotebookCell&&o.scheme!==V.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new uA(new sA(this.h.getProxy(z.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty)),this.c.set(o,a),i.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=y.revive(n.documentUri);br(this.c.has(o),`document '${o}' does not exist`),br(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new lA(n.id,this.h.getProxy(z.MainThreadTextEditors),this.i,new dr(()=>a.document),n.selections.map(Xr.to),n.options,n.visibleRanges.map(l=>N.to(l)),typeof n.editorPosition=="number"?$t.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(br(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Ii(r),Ii(s),t.removedDocuments&&this.e.fire(r),t.addedDocuments&&this.d.fire(i),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Er.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const r=this.b.get(this.a);return t?r:r?.value}allEditors(){return[...this.b.values()]}};dv=__decorate([__param(0,Me),__param(1,Ue)],dv);var oa=W("IExtHostDocumentsAndEditors"),Qd=W("IExtHostApiDeprecationService"),fv=class{constructor(t,r){this.c=r,this.a=new Set,this.b=t.getProxy(z.MainThreadTelemetry)}report(t,r,i){const s=this.d(t,r);this.a.has(s)||(this.a.add(s),r.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${i}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:r.identifier.value,apiId:t}))}d(t,r){return`${t}-${r.identifier.value}`}};fv=__decorate([__param(0,Me),__param(1,Ue)],fv);var tH=Object.freeze(new class{report(e,t,r){}}),hA={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:15},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Zd=Object.freeze(hA),pv=Ht.as(Lu.JSONContribution),dA=class jf{static a(t){const r=new nn;for(let i=0,s=t.length;i<s;i++)r.add(t[i].description.identifier);return r}static compute(t,r){if(!t||!t.length)return new jf(r,[]);if(!r||!r.length)return new jf([],t);const i=this.a(t),s=this.a(r),n=r.filter(a=>!i.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new jf(n,o)}constructor(t,r){this.added=t,this.removed=r}},fA=class{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=dA.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){fr(e)}}},pA={type:"string",enum:["ui","workspace"],enumDescriptions:[d(12615,null),d(12616,null)]},T9="vscode://schemas/vscode-extensions",gv={properties:{engines:{type:"object",description:d(12617,null),properties:{vscode:{type:"string",description:d(12618,null),default:"^1.22.0"}}},publisher:{description:d(12619,null),type:"string"},displayName:{description:d(12620,null),type:"string"},categories:{description:d(12621,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:TC},{type:"string",const:"Languages",deprecationMessage:d(12622,null)}]}},galleryBanner:{type:"object",description:d(12623,null),properties:{color:{description:d(12624,null),type:"string"},theme:{description:d(12625,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(12626,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(12627,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(12628,null)},enabledApiProposals:{markdownDescription:d(12629,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Zd).map(e=>e),markdownEnumDescriptions:Object.values(Zd).map(e=>e.proposal)}},api:{markdownDescription:d(12630,null),type:"string",enum:["none"],enumDescriptions:[d(12631,null)]},activationEvents:{description:d(12632,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(12633,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(12634,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(12635,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(12636,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(12637,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(12638,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(12639,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(12640,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(12641,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(12642,null),body:"onStartupFinished"},{label:"onTaskType",description:d(12643,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(12644,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(12645,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(12646,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(12647,null)},{label:"onUri",body:"onUri",description:d(12648,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(12649,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(12650,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(12651,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(12652,null)},{label:"onRenderer",description:d(12653,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(12654,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(12655,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(12656,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(12657,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(12658,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(12659,null)},{label:"*",description:d(12660,null),body:"*"}]}},badges:{type:"array",description:d(12661,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(12662,null)},href:{type:"string",description:d(12663,null)},description:{type:"string",description:d(12664,null)}}}},markdown:{type:"string",description:d(12665,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(12666,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(12667,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:C1}},extensionPack:{description:d(12668,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:C1}},extensionKind:{description:d(12669,null),type:"array",items:pA,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(12670,null)},{body:["workspace"],description:d(12671,null)},{body:["ui","workspace"],description:d(12672,null)},{body:["workspace","ui"],description:d(12673,null)},{body:[],description:d(12674,null)}]},capabilities:{description:d(12675,null),type:"object",properties:{virtualWorkspaces:{description:d(12676,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(12677,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12678,null),d(12679,null),d(12680,null)]},description:{type:"string",markdownDescription:d(12681,null)}}},untrustedWorkspaces:{description:d(12682,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(12683,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12684,null),d(12685,null),d(12686,null)]},restrictedConfigurations:{description:d(12687,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(12688,null)}}}}},sponsor:{description:d(12689,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(12690,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(12691,null),type:"string"},"vscode:uninstall":{description:d(12692,null),type:"string"}}},icon:{type:"string",description:d(12693,null)},l10n:{type:"string",description:d(12694,null)},pricing:{type:"string",markdownDescription:d(12695,null),enum:["Free","Trial"],default:"Free"}}},gA=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new fA(e.extensionPoint,e.defaultExtensionKind);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&QD.register(e.extensionPoint,e.activationEventsGenerator),gv.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,pv.registerSchema(T9,gv),t}getExtensionPoints(){return Array.from(this.a.values())}},R9={ExtensionsRegistry:"ExtensionsRegistry"};Ht.add(R9.ExtensionsRegistry,new gA);var mA=Ht.as(R9.ExtensionsRegistry);pv.registerSchema(T9,gv),pv.registerSchema(LC,{properties:{extensionEnabledApiProposals:{description:d(12696,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Zd),markdownEnumDescriptions:Object.values(Zd).map(e=>e.proposal)}}]}}}});var vA={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(10174,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(10175,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(10176,null),default:""}}},mv;(function(e){function t(r,i,s){if(!r)return;const n=Ce(r.type)?r.type:void 0;if(!n||n.length===0){s.error(d(10177,null));return}const o=[];if(Array.isArray(r.required))for(const a of r.required)Ce(a)&&o.push(a);return{extensionId:i.value,taskType:n,required:o,properties:r.properties?it(r.properties):{},when:r.when?At.deserialize(r.when):void 0}}e.from=t})(mv||(mv={}));var wA=mA.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const r of e)r.type&&t.push(`onTaskType:${r.type}`)},jsonSchema:{description:d(10178,null),type:"array",items:vA}}),bA=class{constructor(){this.d=new I,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{wA.setHandler((r,i)=>{this.c=void 0;try{for(const s of i.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of i.added){const n=s.value;for(const o of n){const a=mv.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(i.removed.length>0||i.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const r={type:"object",additionalProperties:!1};t.required.length>0&&(r.required=t.required.slice(0)),t.properties!==void 0?r.properties=it(t.properties):r.properties=Object.create(null),r.properties.type={type:"string",enum:[t.taskType]},e.push(r)}this.c={oneOf:e}}return this.c}},yA=new bA,xA="settings",rH=new H("taskRunning",!1,d(10179,null)),iH=up(10181,"Tasks"),Yd;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Yd||(Yd={})),function(e){function t(r){if(!r)return e.Strong;switch(r.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Yd||(Yd={}));var L9;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(L9||(L9={}));var gl;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(gl||(gl={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(gl||(gl={}));var ml;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(ml||(ml={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(ml||(ml={}));var vl;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(vl||(vl={})),function(e){function t(r){switch(r.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(vl||(vl={}));var N9;(function(e){e.defaults={echo:!0,reveal:gl.Always,revealProblems:ml.Never,focus:!1,panel:vl.Shared,showReuseMessage:!0,clear:!1}})(N9||(N9={}));var Xd;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Xd||(Xd={})),function(e){function t(i){switch(i.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function r(i){switch(i){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=r}(Xd||(Xd={}));var F9;(function(e){function t(r){return Ce(r)?r:r.value}e.value=t})(F9||(F9={}));var M9;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(i){return i===e.Clean._id||i===e.Build._id||i===e.Rebuild._id||i===e.Test._id}e.is=t;function r(i){if(i!==void 0)return Ce(i)?t(i)?{_id:i,isDefault:!1}:void 0:i}e.from=r})(M9||(M9={}));var O9;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(O9||(O9={}));var U9;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(r){switch(r){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(U9||(U9={}));var H9;(function(e){e.parallel="parallel",e.sequence="sequence"})(H9||(H9={}));var vv;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(vv||(vv={}));var j9;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:vv.default,instanceLimit:1}})(j9||(j9={}));var Kd;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Kd||(Kd={})),function(e){e._default=e.Terminal}(Kd||(Kd={}));var _9;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(_9||(_9={}));var B9;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(B9||(B9={}));var z9;(function(e){e.SingleRun="singleRun",e.Background="background"})(z9||(z9={}));var W9;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(W9||(W9={}));var V9;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function r(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=r;function i(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=i;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})(V9||(V9={}));var ef;(function(e){function t(i){const s=Object.keys(i).sort();let n="";for(const o of s){let a=i[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function r(i){const n={_key:t(i),type:i.taskType};return Object.assign(n,i),n}e.create=r})(ef||(ef={}));var q9;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(q9||(q9={}));var G9;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(G9||(G9={}));var J9;(function(e){function t(r,i){const s=yA.get(r.type);if(s===void 0){const c=it(r);return delete c._key,ef.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=r[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=it(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:i.error(d(10180,null,JSON.stringify(r,void 0,0),c));return}}}return ef.create(n)}e.createTaskIdentifier=t})(J9||(J9={}));var tf;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(tf||(tf={}));var rf;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(rf||(rf={}));var wv;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(wv||(wv={}));var wl;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function r(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=wv.from(s.options)),n}e.from=r;function i(s){if(s!=null)return new Do(s.process,s.args,s.options)}e.to=i})(wl||(wl={}));var bv;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(bv||(bv={}));var bl;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function r(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=bv.from(s.options)),n}e.from=r;function i(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new vn(s.commandLine,s.options):new vn(s.command,s.args?s.args:[],s.options)}e.to=i})(bl||(bl={}));var Vi;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function r(s){return{customExecution:"customExecution"}}e.from=r;function i(s,n){return n.get(s)}e.to=i})(Vi||(Vi={}));var Q9;(function(e){function t(r,i){let s;return r.scope!==void 0&&typeof r.scope!="number"?s=r.scope.uri:r.scope!==void 0&&typeof r.scope=="number"&&(r.scope===xs.Workspace&&i&&i.workspaceFile?s=i.workspaceFile:s=xA),{id:r._id,workspaceFolder:s}}e.from=t})(Q9||(Q9={}));var yv;(function(e){function t(r){if(r!=null)return{_id:r.id,isDefault:r.isDefault}}e.from=t})(yv||(yv={}));var Ns;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=r(a,n);c&&o.push(c)}return o}e.fromMany=t;function r(s,n){if(s==null)return;let o;s.execution instanceof Do?o=wl.from(s.execution):s.execution instanceof vn?o=bl.from(s.execution):s.execution&&s.execution instanceof om&&(o=Vi.from(s.execution));const a=tf.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=xs.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:yv.from(s.group),presentationOptions:rf.from(s.presentationOptions),problemMatchers:jr(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=r;async function i(s,n,o){if(s==null)return;let a;wl.is(s.execution)?a=wl.to(s.execution):bl.is(s.execution)?a=bl.to(s.execution):Vi.is(s.execution)&&(a=Vi.to(s._id,o));const c=tf.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(y.revive(s.source.scope)):l=xs.Workspace),!c||!l)return;const u=new kh(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=xc.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new xc(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=rf.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=i})(Ns||(Ns={}));var xv;(function(e){function t(i){return i}e.from=t;function r(i){if(i)return Object.assign(Object.create(null),i)}e.to=r})(xv||(xv={}));var Ev=class{#e;constructor(e,t,r){this._id=t,this.a=r,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},kv=class{constructor(t,r,i,s,n,o,a,c){this.q=new I,this.r=new I,this.s=new I,this.u=new I,this.a=t.getProxy(z.MainThreadTask),this.b=i,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,r,i){if(!i)return new De(()=>{});const s=this.x();return this.j.set(s,{type:r,provider:i,extension:t}),this.a.$registerTaskProvider(s,r),new De(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,r){this.a.$registerTaskSystem(t,r)}fetchTasks(t){return this.a.$fetchTasks(xv.from(t)).then(async r=>{const i=[];for(const s of r){const n=await Ns.to(s,this.b,this.m);n&&i.push(n)}return i})}get taskExecutions(){const t=[];return this.k.forEach(r=>t.push(r)),t}terminateTask(t){if(!(t instanceof Ev))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,r,i){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(r,await s.callback(i))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const r=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:r})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const r=await this.z(t.id);this.s.fire({execution:r,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const r=await this.z(t.id);this.u.fire({execution:r,exitCode:t.exitCode})}$provideTasks(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));const s=[],n=zt(()=>i.provider.provideTasks(Xe.None)).then(o=>this.v(r,s,i,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));if(r.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${r.definition.type}] cannot be resolved by provider of type [${i.type}].`);const s=await Ns.to(r,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(s,Xe.None);if(!n)return;this.A(n,i);const o=Ns.from(n,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Vi.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,r,i){const s=await this.a.$createTaskId(t);!i&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,r.execution)),this.m.set(s,r.execution)}async z(t,r){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new _s("Unexpected: The specified task is missing an execution");return n}const i=this.l.get(t.id);if(i)return i;let s;return r?s=Promise.resolve(new Ev(this,t.id,r)):s=Ns.to(t.task,this.b,this.m).then(n=>{if(!n)throw new _s("Unexpected: Task does not exist.");return new Ev(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,r){t._deprecated&&this.g.report("Task.constructor",r.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const i=this.n.values();let s=i.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=i.next()}};kv=__decorate([__param(0,Me),__param(1,Wt),__param(2,zi),__param(3,oa),__param(4,Wi),__param(5,ia),__param(6,Ue),__param(7,Qd)],kv);var Sv=class extends kv{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c),this.registerTaskSystem(V.vscodeRemote,{scheme:V.vscodeRemote,authority:"",platform:x3(0)})}async executeTask(t,r){if(!r.execution)throw new Error("Tasks to execute must include an execution");const i=Ns.from(r,t);if(i===void 0)throw new Error("Task is not valid");if(Vi.is(i.execution))await this.y(i,r,!1);else throw new Xf;const s=await this.z(await this.a.$getTaskExecution(i),r);return this.a.$executeTask(i).catch(n=>{throw new Error(n)}),s}v(t,r,i,s){const n=[];if(s)for(const o of s){if(this.A(o,i),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Ns.from(o,i.extension);a&&Vi.is(a.execution)?(n.push(a),r.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async w(t){if(Vi.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,r){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,r,i){}};Sv=__decorate([__param(0,Me),__param(1,Wt),__param(2,zi),__param(3,oa),__param(4,Wi),__param(5,ia),__param(6,Ue),__param(7,Qd)],Sv);var Z9=W("IExtHostTask"),EA=class{constructor(){this.f=new Map,this.m=[],this.n=new I,this.o=new I,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,r,i){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof i=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(5966,null,i,e)};o(a)}},i)}return r&&this.f.set(s.seq,r),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await ui(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,r=this.f.get(t.request_seq);r&&(this.f.delete(t.request_seq),r(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,r)=>e.set(r,t)),await ui(500),e.forEach((t,r)=>{t({type:"response",seq:0,request_seq:r,success:!1,command:"canceled",message:"canceled"}),this.f.delete(r)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function kA(e){return e.type&&(e.label||e.program||e.runtime)}var SA=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function $A(e){return!!(e&&e.match(SA))}function Y9(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if($A(e.path))return y.parse(e.path);if(iu(e.path))return y.file(e.path)}return e.path}function X9(e){if(typeof e.path=="object"){const t=y.revive(e.path);if(t)return t.scheme===V.file?t.fsPath:t.toString()}return e.path}function CA(e,t){const r=t?Y9:X9,i=it(e);return K9(i,(s,n)=>{s&&n&&(n.path=r(n))}),i}function IA(e,t){const r=t?Y9:X9,i=it(e);return K9(i,(s,n)=>{!s&&n&&(n.path=r(n))}),i}function K9(e,t){switch(e.type){case"event":{const r=e;switch(r.event){case"output":t(!1,r.body.source);break;case"loadedSource":t(!1,r.body.source);break;case"breakpoint":t(!1,r.body.breakpoint.source);break;default:break}break}case"request":{const r=e;switch(r.command){case"setBreakpoints":t(!0,r.arguments.source);break;case"breakpointLocations":t(!0,r.arguments.source);break;case"source":t(!0,r.arguments.source);break;case"gotoTargets":t(!0,r.arguments.source);break;case"launchVSCode":r.arguments.args.forEach(i=>t(!1,i));break;default:break}break}case"response":{const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach(i=>t(!1,i.source));break;case"loadedSources":r.body.sources.forEach(i=>t(!1,i));break;case"scopes":r.body.scopes.forEach(i=>t(!1,i.source));break;case"setFunctionBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"setBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"disassemble":r.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,r.body?.source);break;default:break}break}}}var yl=W("IExtHostEditorTabs"),e8=class{constructor(e,t,r){this.e=r,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new $m(y.revive(this.b.input.uri));case 2:return new Jh(y.revive(this.b.input.original),y.revive(this.b.input.modified));case 3:return new A6(y.revive(this.b.input.base),y.revive(this.b.input.input1),y.revive(this.b.input.input2),y.revive(this.b.input.result));case 6:return new Cm(y.revive(this.b.input.uri),this.b.input.viewType);case 7:return new T6(this.b.input.viewType);case 4:return new Im(y.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new Dm(y.revive(this.b.input.original),y.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new R6;case 9:return new L6(y.revive(this.b.input.uri),y.revive(this.b.input.inputBoxUri));case 10:return new N6;case 11:return new F6(this.b.input.diffEditors.map(e=>new Jh(y.revive(e.original),y.revive(e.modified))));default:return}}},DA=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const r of e.tabs)r.isActive&&(this.d=r.id),this.c.push(new e8(r,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return $t.to(e.b.viewColumn)},get activeTab(){return e.c.find(r=>r.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(r=>r.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const r=new e8(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,r),e.tabDto.isActive&&(this.d=r.tabId),r}else if(e.kind===1){const r=this.c.splice(e.index,1)[0];if(!r)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return r.tabId===this.d&&(this.d=""),r}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const r=this.c.splice(e.oldIndex,1)[0];if(!r)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,r),r}const t=this.c.find(r=>r.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},$v=class{constructor(t){this.b=new I,this.c=new I,this.e=[],this.a=t.getProxy(z.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,r={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(i=>i.apiObject))},get activeTabGroup(){const i=t.d;return Kn(t.e.find(n=>n.groupId===i)?.apiObject)},close:async(i,s)=>{const n=Array.isArray(i)?i:[i];return n.length?PA(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(r)}return this.f}$acceptEditorTabModel(t){const r=new Set(this.e.map(l=>l.groupId)),i=new Set(t.map(l=>l.groupId)),s=Ak(r,i),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new DA(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=Kn(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const r=this.e.find(i=>i.groupId===t.groupId);if(!r)throw new Error("Update Group IPC call received before group creation.");r.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[r.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const r=this.e.find(s=>s.groupId===t.groupId);if(!r)throw new Error("Update Tabs IPC call received before group creation.");const i=r.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}g(t){for(const r of this.e)for(const i of r.tabs)if(i.apiObject===t)return i}h(t){return this.e.find(r=>r.apiObject===t)}async i(t,r){const i=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");i.push(n.tabId)}return this.a.$closeTab(i,r)}async j(t,r){const i=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");i.push(n.groupId)}return this.a.$closeGroup(i,r)}};$v=__decorate([__param(0,Me)],$v);function PA(e){return e.tabs!==void 0}var AA=0,t8=new WeakMap,sf=W("IExtHostTesting"),Cv=class extends he{constructor(t,r,i,s){super(),this.C=r,this.D=i,this.F=s,this.f=this.B(new I),this.g=new Map,this.w=this.B(new I),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(z.MainThreadTesting),this.m=new MA(this.h),this.j=new LA(this.h,r),i.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Ie.root(a))?.collection.tree.get(a)?.actual??M7(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Ie.root(c))?.collection.tree.get(c)?.actual??M7({$mid:16,tests:[o]}),message:Qo.to(a)}}default:return n}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Ie.root(a));if(c)return Ie.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Js)||[],exclude:n?.exclude.map(o).filter(Js)||[]}})}createTestController(t,r,i,s){if(this.g.has(r))throw new Error(`Attempt to insert a duplicate controller with ID "${r}"`);const n=new we,o=n.add(new cP(r,i,this.F));o.root.label=i;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const m=p.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(f|=8),m?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return i},set label(f){i=f,o.root.label=f,l.$updateController(r,{label:i})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(r,{capabilities:u()})},get id(){return r},get relatedCodeProvider(){return p.relatedCodeProvider},set relatedCodeProvider(f){T(t,"testRelatedCode"),p.relatedCodeProvider=f,l.$updateController(r,{capabilities:u()})},createRunProfile:(f,m,w,x,S,C)=>{let D=Oa(f);for(;a.has(D);)D++;return new n8(this.h,a,c,this.w.event,r,D,f,m,w,x,S,C)},createTestItem(f,m,w){return new ul(r,f,m,w)},createTestRun:(f,m,w=!0)=>this.j.createTestRun(t,r,o,f,m,w),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const m=f instanceof Array?f:[f];this.h.$markTestRetired(m.map(w=>Ie.fromExtHostTestItem(w,r).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},p={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(r,i,u()),n.add(ae(()=>l.$unregisterTestController(r))),this.g.set(r,p),n.add(ae(()=>this.g.delete(r))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(r,f.map(rh.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,r=Xe.None){const i=i8(t);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(i.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:Iv[i.kind],targets:[{testIds:t.include?.map(n=>Ie.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:t.exclude?.map(n=>n.id)},r)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,r,i){const s=this.F.getDocument(y.revive(t));if(!s)return[];const n=Fe.to(r),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,i)}catch(l){i.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Ie.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,r){const i=this.g.get(Ie.root(t));if(!i)return[];const s=i.collection.tree.get(t);return s?(await i.relatedCodeProvider?.provideRelatedCode?.(s.actual,r))?.map(nr.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,r,i){return(await this.j.getCoverageDetails(t,r,i))?.map(Kc.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,r){this.g.get(t)?.profiles.get(r)?.configureHandler?.()}$setDefaultRunProfiles(t){const r=new Map;for(const[i,s]of Object.entries(t)){const n=this.g.get(i);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&r.set(i,o)}this.w.fire(r)}async $refreshTests(t,r){await this.g.get(t)?.controller.refreshHandler?.(r)}$publishTestResults(t){this.results=Object.freeze(t.map(r=>{const i=a1.to(r),s=r.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(i.getDetailedCoverage=(n,o=Xe.None)=>this.h.$getCoverageDetails(r.id,s,n,o).then(a=>a.map(Kc.to))),t8.set(i,r.id),i}).concat(this.results).sort((r,i)=>i.completedAt-r.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,r){const i=this.g.get(Ie.fromString(t).controllerId)?.collection;i&&(await i.expand(t,r<0?1/0:r),i.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(r=>rh.deserialize({asCanonicalUri:i=>i},r)))}async $runControllerTests(t,r){return Promise.all(t.map(i=>this.G(i,!1,r)))}async $startContinuousRun(t,r){const i=new ft(r),s=await Promise.all(t.map(n=>this.G(n,!0,i.token)));return!r.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>r.onCancellationRequested(n)),i.dispose(!0),s}async $provideTestFollowups(t,r){const i=this.results.find(o=>t8.get(o)===t.resultId),s=i&&OA(Ie.fromString(t.extId),i?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(i,s,t.taskIndex,t.messageIndex,r);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),r.isCancellationRequested?[]:n.map(o=>{const a=AA++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const r of t)this.z.delete(r)}$executeTestFollowup(t){const r=this.z.get(t);return r?this.D.executeCommand(r.command,...r.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,r){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,r)}getMetadataForRun(t){for(const r of this.j.trackers){const i=r.getTaskIdForRun(t);if(i)return{taskId:i,runId:r.id}}}async G(t,r,i){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(Js),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(Js).filter(f=>l.some(m=>m.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new Wh(l.some(f=>f.actual instanceof H1)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,r),p=NI(t)&&this.j.prepareForMainThreadTestRun(a,h,s8.fromInternal(t,s.collection),c,i);try{return await c.runHandler(h,i),{}}catch(f){return{error:String(f)}}finally{p&&p.hasRunningTasks&&!i.isCancellationRequested&&await lt.toPromise(p.onEnd)}}};Cv=__decorate([__param(0,Me),__param(1,Ue),__param(2,Tn),__param(3,oa)],Cv);var TA=1e4,r8;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(r8||(r8={}));var RA=class extends he{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,r,i,s,n){super(),this.C=e,this.D=t,this.F=r,this.G=i,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new I),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new ft(n));const o=this.B(new eo(()=>this.I(),TA));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new I;this.y=a.event,this.B(ae(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:r}]of this.h)if(r===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,r){const[,i]=Ie.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(i);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Mc){const u=o.indexOf(t);if(u===-1)return[];c=n.fromTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,r):this.G?.loadDetailedCoverage?.(a.run,n,r))??[]}createRun(e){const t=this.C.id,r=this.C.controllerId,i=$r(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(Qo.from):[Qo.from(u)];if(l.uri&&l.range){const p={range:N.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||p}this.D.$appendTestMessagesInRun(t,i,Ie.fromExtHostTestItem(l,r).toString(),h)};let o=!1;const a=this.B(new ft(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Mc?l.fromTests:[];if(u.length){T(this.H,"attributableCoverage");for(const f of u)this.L(f)}const h=l.uri.toString(),p=new Ie([t,i,h]).toString();this.z.set(p,{report:l,extIds:u.map(f=>Ie.fromExtHostTestItem(f,r).toString())}),this.D.$appendCoverage(t,i,Kc.fromFile(r,p,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,i,Ie.fromExtHostTestItem(l,r).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,i,Ie.fromExtHostTestItem(l,r).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,i,Ie.fromExtHostTestItem(l,r).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Ie.fromExtHostTestItem(l,r).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,Ie.fromExtHostTestItem(l,r).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,i,Ie.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,i,ke.fromString(l),u&&nr.from(u),h&&Ie.fromExtHostTestItem(h,r).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,i),--this.g||this.J())}};return this.g++,this.h.set(i,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:i,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof ul))throw new ih(e.id);if(this.j.has(Ie.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],r=this.C.colllection.root;for(;;){const i=Is.from(e);if(t.unshift(i),this.j.has(i.extId)||(this.j.add(i.extId),e===r))break;e=e.parent||r}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},LA=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,r){const i=Ie.root(e);return this.g.get(i)?.getCoverageDetails(e,t,r)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:r}]of this.f)r===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,r,i,s){return this.k(t,r,i,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,r,i,s,n){const o=this.f.get(i);if(o)return o.createRun(s);const a=s8.fromPublic(t,r,i,n),c=i8(i);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!i.continuous,profile:c&&{group:Iv[c.kind],id:c.profileId},exclude:i.exclude?.map(u=>Ie.fromExtHostTestItem(u,r.root.id).toString())??[],id:a.id,include:i.include?.map(u=>Ie.fromExtHostTestItem(u,r.root.id).toString())??[r.root.id],preserveFocus:i.preserveFocus??!0,persist:n});const l=this.k(i,a,i.profile,e);return lt.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,r,i,s){const n=new RA(t,this.h,this.j,r,i,s);return this.f.set(e,n),this.g.set(n.id,n),n}},i8=e=>{if(e.profile){if(!(e.profile instanceof n8))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},s8=class B0{static fromPublic(t,r,i,s){return new B0(t,$r(),s,r)}static fromInternal(t,r){return new B0(t.controllerId,t.runId,!0,r)}constructor(t,r,i,s){this.controllerId=t,this.id=r,this.isPersisted=i,this.colllection=s}},NA=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Is.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Ie.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:r}=this;return{get added(){return[...e].map(i=>i.revived)},get updated(){return[...t].map(i=>i.revived)},get removed(){return[...r].map(i=>i.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},FA=class extends FI{constructor(){super(...arguments),this.z=new I,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Is.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new NA(this.z)}},MA=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:ip(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new FA({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},xl=(e,t,r,i)=>{r?Object.assign(r,i):t.$updateTestRunConfig(e.controllerId,e.profileId,i)},n8=class{#e;#t;#r;#i;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,xl(this,this.#e,this.#i,{label:e}))}get supportsContinuousRun(){return this.h}set supportsContinuousRun(e){e!==this.h&&(this.h=e,xl(this,this.#e,this.#i,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),xl(this,this.#e,this.#i,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,xl(this,this.#e,this.#i,{tag:e?Kr.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,xl(this,this.#e,this.#i,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return lt.chain(this.#r,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Js))}constructor(e,t,r,i,s,n,o,a,c,l=!1,u=void 0,h=!1){this.controllerId=s,this.profileId=n,this.g=o,this.kind=a,this.runHandler=c,this._tag=u,this.h=h,this.#e=e,this.#n=t,this.#t=r,this.#r=i,t.set(n,this);const p=Iv[a];if(typeof p!="number")throw new Error(`Unknown TestRunProfile.group ${a}`);l&&r.add(n),this.#i={profileId:n,controllerId:s,tag:u?Kr.namespace(this.controllerId,u.id):null,label:o,group:p,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#i&&(this.#e.$publishTestRunProfile(this.#i),this.#i=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#i=void 0}},Iv={[Oo.Coverage]:8,[Oo.Debug]:4,[Oo.Run]:2};function OA(e,t){for(let r=0;r<e.path.length;r++){const i=t.find(s=>s.id===e.path[r]);if(!i)return;if(r===e.path.length-1)return i;t=i.children}}var cH=W("configurationResolverService"),Qe;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(Qe||(Qe={}));var or=class extends _s{constructor(e,t){super(t),this.variable=e}},UA=class _f{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,r,i,s){this.h=new Map,this.a=t,this.b=r,this.g=i,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(pr){const r=Object.create(null);return Object.keys(t).forEach(i=>{r[i.toLowerCase()]=t[i]}),r}return t}resolveWithEnvironment(t,r,i){return this.l({env:this.i(t),userHome:void 0},r?r.uri:void 0,i)}async resolveAsync(t,r){const i={env:await this.c,userHome:await this.g};return this.l(i,t?t.uri:void 0,r)}async j(t,r,i,s){const n=it(r);pr&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):_r&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):ss&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,i,s)}async resolveAnyAsync(t,r,i){return this.j(t,r,i)}async resolveAnyMap(t,r,i){const s=new Map;return{newConfig:await this.j(t,r,i,s),resolvedVariables:s}}resolveWithInteractionReplace(t,r,i,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,r,i,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,r){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,r)}async l(t,r,i,s,n){if(Ce(i))return this.m(t,r,i,s,n);if(Array.isArray(i))return Promise.all(i.map(o=>this.l(t,r,o,s,n)));if(pt(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.m(t,r,c,s,n),await this.l(t,r,i[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return i}m(t,r,i,s,n){return K3(i,_f.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(_f.VARIABLE_LHS))return o;let c=await this.o(t,o,a,r,s);return n?.set(a,c),c!==o&&Ce(c)&&c.match(_f.VARIABLE_REGEXP)&&(c=await this.m(t,r,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,r,i,s,n){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=h=>{const p=this.a.getFilePath();if(p)return hl(p);throw new or(h,d(12445,null,r))},l=h=>{const p=c(h);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return hl(f)}throw new or(h,d(12446,null,r,vr(p)))},u=h=>{if(o){const p=this.a.getFolderUri(o);if(p)return p;throw new or(h,d(12447,null,r,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new or(h,d(12448,null,r)):new or(h,d(12449,null,r))};switch(i){case"env":if(o){if(t.env){const h=t.env[pr?o.toLowerCase():o];if(Ce(h))return h}return""}throw new or(Qe.Env,d(12450,null,r));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if(gt(h))throw new or(Qe.Config,d(12451,null,r,o));if(pt(h))throw new or(Qe.Config,d(12452,null,r,o));return h}throw new or(Qe.Config,d(12453,null,r));case"command":return this.p(Qe.Command,r,o,n,"command");case"input":return this.p(Qe.Input,r,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new or(Qe.ExtensionInstallFolder,d(12454,null,r,o));return this.n(h.extensionLocation)}throw new or(Qe.ExtensionInstallFolder,d(12455,null,r));default:switch(i){case"workspaceRoot":case"workspaceFolder":return hl(this.n(u(Qe.WorkspaceFolder)));case"cwd":return s||o?hl(this.n(u(Qe.Cwd))):Qn();case"workspaceRootFolderName":case"workspaceFolderBasename":return hl(vr(this.n(u(Qe.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new or(Qe.UserHome,d(12456,null,r))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new or(Qe.LineNumber,d(12457,null,r))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new or(Qe.SelectedText,d(12458,null,r))}case"file":return c(Qe.File);case"fileWorkspaceFolder":return l(Qe.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return vr(l(Qe.FileWorkspaceFolderBasename));case"relativeFile":return s||o?Ta(this.n(u(Qe.RelativeFile)),c(Qe.RelativeFile)):c(Qe.RelativeFile);case"relativeFileDirname":{const h=Yn(c(Qe.RelativeFileDirname));if(s||o){const p=Ta(this.n(u(Qe.RelativeFileDirname)),h);return p.length===0?".":p}return h}case"fileDirname":return Yn(c(Qe.FileDirname));case"fileExtname":return wp(c(Qe.FileExtname));case"fileBasename":return vr(c(Qe.FileBasename));case"fileBasenameNoExtension":{const h=vr(c(Qe.FileBasenameNoExtension));return h.slice(0,h.length-wp(h).length)}case"fileDirnameBasename":return vr(Yn(c(Qe.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||r}case"execInstallFolder":{const h=this.a.getAppRoot();return h||r}case"pathSeparator":case"/":return Br;default:try{const h=o?`${i}:${o}`:i;return this.p(Qe.Unknown,r,h,n,void 0)}catch{return r}}}}p(t,r,i,s,n){if(i&&s){const o=n===void 0?s[i]:s[n+":"+i];if(typeof o=="string")return o;throw new or(t,d(12459,null,r))}return r}},Dv=W("IExtHostVariableResolverProvider"),HA=class extends UA{constructor(e,t,r,i,s,n,o){function a(){if(r){const c=r.activeEditor();if(c)return c.document.uri;const l=i.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Jh||l.input instanceof Dm)return l.input.modified;if(l.input instanceof $m||l.input instanceof Im||l.input instanceof Cm)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>Qn(),getExecPath:()=>gp.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return Zn(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return Zn(l.uri.fsPath)}}},getSelectedText:()=>{if(r){const c=r.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.line+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(gp))}},Pv=class extends he{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.g=i,this.h=s,this.j=n,this.a=new dr(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new HA(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};Pv=__decorate([__param(0,Ls),__param(1,zi),__param(2,oa),__param(3,Wi),__param(4,yl)],Pv);var o8=W("IExtHostDebugService"),Av=class extends he{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,r,i,s,n,o,a,c){super(),this.Y=r,this.Z=i,this.$=s,this.ab=n,this.bb=o,this.cb=a,this.db=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new I),this.z=this.B(new I),this.C=this.B(new I),this.F=this.B(new I),this.u=t.getProxy(z.MainThreadDebugService),this.I=this.B(new I),this.L=this.B(new I),this.G=new _A(this.u),this.H=new Map,this.Z.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.fb(l)})),this.fb(l)})}async $getVisualizerTreeItem(t,r){const i=this.gb(r);if(!i)return;const s=await this.Q.get(t)?.getTreeItem?.(i);return s?this.eb(t,s):void 0}registerDebugVisualizationTree(t,r,i){const s=He.toKey(t.identifier),n=this.yb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.Q.set(n,i),this.u.$registerDebugVisualizerTree(n,!!i.editItem),ae(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(r)})}async $getVisualizerTreeItemChildren(t,r){const i=this.S.get(r)?.item;return i?(await this.Q.get(t)?.getChildren?.(i))?.map(n=>this.eb(t,n))||[]:[]}async $editVisualizerTreeItem(t,r){const i=this.S.get(t);if(!i)return;const s=await this.Q.get(i.provider)?.editItem?.(i.item,r);return this.eb(i.provider,s||i.item)}$disposeVisualizedTree(t){const r=this.S.get(t);if(!r)return;const i=[r.children];for(const s of i)if(s)for(const n of s)i.push(this.S.get(n)?.children),this.S.delete(n)}eb(t,r){let i=this.R.get(r);return i||(i=this.O++,this.R.set(r,i),this.S.set(i,{provider:t,item:r})),g1.from(r,i)}asDebugSourceUri(t,r){const i=t;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let s=`debug:${encodeURIComponent(i.path||"")}`,n="?";return r&&(s+=`${n}session=${encodeURIComponent(r.id)}`,n="&"),s+=`${n}ref=${i.sourceReference}`,y.parse(s)}else{if(i.path)return y.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}fb(t){const r=[];for(const i of t.getAllExtensionDescriptions())if(i.contributes){const s=i.contributes.debuggers;if(s&&s.length>0)for(const n of s)kA(n)&&r.push(n.type)}this.u.$registerDebugTypes(r)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(r=>t.push(r)),t}async $resolveDebugVisualizer(t,r){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=i;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,r)||s,i.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.zb(o,s.visualization)}async $executeDebugVisualizerCommand(t){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);const i=r.v.visualization;i&&"command"in i&&this.cb.executeCommand(i.command,...i.arguments||[])}gb(t){const r=this.w.get(t.sessionId);return r&&{session:r.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,r,i,s){const n=this.gb(i),o=this.yb(t,r),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Ab(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.zb(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const r of t)this.W.delete(r)}registerDebugVisualizationProvider(t,r,i){if(!t.contributes?.debugVisualizers?.some(o=>o.id===r))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${r})`);const s=He.toKey(t.identifier),n=this.yb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.P.set(n,i),this.u.$registerDebugVisualizer(s,r),ae(()=>{this.u.$unregisterDebugVisualizer(s,r),this.P.delete(r)})}addBreakpoints(t){const r=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.vb(r,[],[]);const i=[],s=new Map;for(const n of r)if(n instanceof yn){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),i.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof xn&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(i)}removeBreakpoints(t){const r=t.filter(o=>this.H.delete(o.id));this.vb([],r,[]);const i=r.filter(o=>o instanceof yn).map(o=>o.id),s=r.filter(o=>o instanceof xn).map(o=>o.id),n=r.filter(o=>o instanceof Dh).map(o=>o.id);return this.u.$unregisterBreakpoints(i,s,n)}startDebugging(t,r,i){const s=i.testRun&&this.db.getMetadataForRun(i.testRun);return this.u.$startDebugging(t?t.uri:void 0,r,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Mh.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,r,i){if(!r)return new De(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:r}),this.u.$registerDebugConfigurationProvider(t,i,!!r.provideDebugConfigurations,!!r.resolveDebugConfiguration,!!r.resolveDebugConfigurationWithSubstitutedVariables,s),new De(()=>{this.g=this.g.filter(n=>n.provider!==r),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,r,i){if(!i)return new De(()=>{});if(!this.rb(t,r))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${r}' debugger.`);if(this.ob(r))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:r,handle:s,factory:i}),this.u.$registerDebugAdapterDescriptorFactory(r,s),new De(()=>{this.j=this.j.filter(n=>n.factory!==i),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,r){if(!r)return new De(()=>{});const i=this.m++;return this.n.push({type:t,handle:i,factory:r}),new De(()=>{this.n=this.n.filter(s=>s.factory!==r)})}async $runInTerminal(t,r){return Promise.resolve(void 0)}async $substituteVariables(t,r){let i;const s=await this.xb(t);return s&&(i={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.bb.getResolver()).resolveAnyAsync(i,r)}hb(t,r){if(t instanceof $c)return new zA(t.implementation)}ib(){}async $startDASession(t,r){const i=this,s=await this.wb(r);return this.tb(this.ob(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.hb(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.sb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.ib());try{if(this.U){const p=await this.U.sign(u.arguments.value);h.body={signature:p},a.sendResponse(h)}else throw new Error("no signer")}catch(p){h.success=!1,h.message=p.message,a.sendResponse(h)}}else c&&c.onDidSendMessage&&c.onDidSendMessage(l),l=IA(l,!0),i.u.$acceptDAMessage(t,l)}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,r){r=CA(r,!1);const i=this.N.get(t);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(r),this.M.get(t)?.sendMessage(r)}$stopDASession(t){const r=this.N.get(t);this.N.delete(t),r&&r.onWillStopSession&&r.onWillStopSession();const i=this.M.get(t);return this.M.delete(t),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const r=[],i=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new xn(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new Dh(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=y.revive(n.uri);a=new yn(new Dr(c,new xe(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}nD(a,o),this.H.set(o,a),r.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),i.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof xn&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof yn&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new Dr(y.revive(n.uri),new xe(n.line,n.character))}s.push(o)}}}this.vb(r,i,s)}async $acceptStackFrameFocus(t){let r;if(t){const i=await this.wb(t.sessionId);t.kind==="thread"?r=new E6(i.api,t.threadId):r=new x6(i.api,t.threadId,t.frameId)}this.J=r,this.L.fire(this.J)}$provideDebugConfigurations(t,r,i){return zt(async()=>{const s=this.qb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.xb(r);return s.provideDebugConfigurations(n,i)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,r,i,s){return zt(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.xb(r);return n.resolveDebugConfiguration(o,i,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,r,i,s){return zt(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.xb(r);return n.resolveDebugConfigurationWithSubstitutedVariables(o,i,s)})}async $provideDebugAdapter(t,r){const i=this.pb(t);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.wb(r);return this.tb(i,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.jb(n)})}async $acceptDebugSessionStarted(t){const r=await this.wb(t);this.y.fire(r.api)}async $acceptDebugSessionTerminated(t){const r=await this.wb(t);r&&(this.z.fire(r.api),this.w.delete(r.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.wb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,r){(await this.wb(t))?._acceptNameChanged(r)}async $acceptDebugSessionCustomEvent(t,r){const s={session:(await this.wb(t)).api,event:r.event,body:r.body};this.F.fire(s)}jb(t){if(t instanceof Ph)return this.kb(t);if(t instanceof Sc)return this.lb(t);if(t instanceof Ah)return this.mb(t);if(t instanceof $c)return this.nb(t);throw new Error("convertToDto unexpected type")}kb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}lb(t){return{type:"server",port:t.port,host:t.host}}mb(t){return{type:"pipeServer",path:t.path}}nb(t){return{type:"implementation"}}ob(t){const r=this.j.filter(i=>i.type===t);if(r.length>0)return r[0].factory}pb(t){const r=this.j.filter(i=>i.handle===t);if(r.length>0)return r[0].factory}qb(t){const r=this.g.filter(i=>i.handle===t);if(r.length>0)return r[0].provider}rb(t,r){if(t.contributes){const i=t.contributes.debuggers;if(i&&i.length>0){for(const s of i)if(s.label&&s.type&&s.type===r)return!0}}return!1}sb(t){const i=t.configuration.type,s=this.n.filter(n=>n.type===i||n.type==="*").map(n=>zt(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=bt(n);if(o.length>0)return new BA(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async tb(t,r){const i=r.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new Sc(i));if(t){const n=await this.Z.getExtensionRegistry();return zt(()=>t.createDebugAdapterDescriptor(r.api,this.ub(r,n))).then(o=>{if(o)return o})}const s=await this.Z.getExtensionRegistry();return Promise.resolve(this.ub(r,s))}ub(t,r){}vb(t,r,i){(t.length>0||r.length>0||i.length>0)&&this.I.fire(Object.freeze({added:t,removed:r,changed:i}))}async wb(t){if(t)if(typeof t=="string"){const r=this.w.get(t);if(r)return r}else{let r=this.w.get(t.id);if(!r){const i=await this.xb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;r=new jA(this.u,t.id,t.type,t.name,i,t.configuration,s?.api),this.w.set(r.id,r),this.u.$sessionCached(r.id)}return r}throw new Error("cannot find session")}xb(t){if(t){const r=y.revive(t);return this.Y.resolveWorkspaceFolder(r)}return Promise.resolve(void 0)}yb(t,r){return`${t}\0${r}`}zb(t,r){if(r){if("title"in r&&"command"in r)return{type:0};if("treeId"in r)return{type:1,id:`${t}\0${r.treeId}`};throw new Error("Unsupported debug visualization type")}}Ab(t){const r=this.Bb(t);let i,s;return"id"in r?s=Ft.asClassName(r):i=r,{iconPath:i,iconClass:s}}Bb(t){if(t instanceof Qt)return{id:t.id};const r=typeof t=="object"&&"dark"in t?t.dark:t,i=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof r=="string"?y.file(r):r,light:typeof i=="string"?y.file(i):i}}};Av=__decorate([__param(0,Me),__param(1,zi),__param(2,Ls),__param(3,Wi),__param(4,yl),__param(5,Dv),__param(6,Tn),__param(7,sf)],Av);var jA=class{constructor(e,t,r,i,s,n,o){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,r){return e.f.$customDebugAdapterRequest(e.g,t,r)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},_A=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},BA=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(r=>r.onExit?r.onExit(e,t):void 0)}},zA=class extends EA{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Tv=class extends Av{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c)}};Tv=__decorate([__param(0,Me),__param(1,zi),__param(2,Ls),__param(3,Wi),__param(4,yl),__param(5,Dv),__param(6,Tn),__param(7,sf)],Tv);function WA(e){return"uri"in e&&"ranges"in e&&"preview"in e}function VA(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var a8=class{constructor(e){this.a=e}provideFileSearchResults(e,t,r){return(async()=>{const s=VA(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,r)))})().then(s=>bt(s).flat())}};function c8(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:qA(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function qA(e){return{matchLines:e?.matchLines??w1.matchLines,charsPerLine:e?.charsPerLine??w1.charsPerLine}}function l8(e){if(WA(e)){const t=jr(e.ranges).map((r,i)=>{const n=jr(e.preview.matches)[i];return{sourceRange:r,previewRange:n}});return new As(e.uri,t,e.preview.text)}else return new v1(e.uri,e.text,e.lineNumber)}var GA=class{constructor(e){this.a=e}provideTextSearchResults(e,t,r,i){const s=a=>{u8(a)&&r.report(l8(a))};return(async()=>bt(await Promise.all(c8(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:bt(jr(a.message))}))}},JA=class{constructor(e){this.a=e,this.name=this.a.name}provideAITextSearchResults(e,t,r,i){const s=a=>{u8(a)&&r.report(l8(a))};return(async()=>bt(await Promise.all(c8(t).map(a=>this.a.provideAITextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:bt(jr(a.message))}))}};function u8(e){if(QA(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function QA(e){return!!e.preview}var h8=class extends ps{constructor(e,t,r=()=>!1){const i=new ly(r,()=>!1);super(i);const s=new Lt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.l(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const r=this.l(e);return t.get(r)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(r=>e(r)))}l(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},ZA=class{constructor(e,t,r){this.l=e,this.o=t,this.p=r,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&mo(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&mo(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((r,i)=>{const s=n=>{this.g++,e(n)};if(this.h)return r({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=vr(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{r({limitHit:this.f,stats:n||void 0})},n=>{i(new Error(Qs(n)))})})}async q(e,t){const r=new ft,i=e.map(l=>this.r(l)),s=this.o instanceof a8?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:i,maxResults:this.l.maxResults??z6,session:s},o=l=>{const u=new t7(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new h8(e,o);let c;try{this.j.add(r),c=Bs.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,r.token),u=c.elapsed(),h=Bs.create();return this.h&&!this.f||(l&&l.forEach(p=>{const f=a.findQueryFragmentAwareSubstr(p),m=Te.relative(f.folder.path,p.path);if(f.noSiblingsClauses){const w=vr(p.path);this.w(t,{base:f.folder,relativePath:m,basename:w});return}this.u(f.tree,f.folder,m,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(p=>{this.v(p.tree,p.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{r.dispose(),this.j.delete(r)}}r(e){const t=Xo(this.l.includePattern,e.includePattern);let r=e.excludePattern?.map(s=>({folder:s.folder,patterns:Xo(this.l.excludePattern,s.pattern)}));r?.length||(r=[{folder:void 0,patterns:Xo(this.l.excludePattern,void 0)}]);const i=i7(r);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,r,i){if(r===this.a){const n=vr(this.a);this.w(i,{base:t,relativePath:this.a,basename:n})}function s(n){const o=vr(n),a=Yn(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(r)}v({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.a;function o(a){const c=CD(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:p,basename:f}=h;if(r.matchesExcludesSync(p,f,n!==f?c:void 0))continue;const m=t[p];if(m)o(m);else{if(p===n)continue;s.w(i,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},YA=class{constructor(){this.a=new Object,this.tokenSource=new ft}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},XA=class RE{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,r,i,s){const n=this.c(t.cacheKey),o=new ZA(t,r,n);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.d(u)))};return this.f(o,RE.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new YA),this.b.get(t)}d(t){return t.relativePath?{resource:Jt(t.base,t.relativePath)}:{resource:t.base}}f(t,r,i,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),r>0&&a.length>=r&&(i(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&i(a),n.dispose(),c),c=>(a.length&&i(a),n.dispose(),Promise.reject(c)))}},d8=class{constructor(e,t,r){this.f=e,this.g=t,this.h=r,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const r=this.j.folderQueries||[],i=new ft(t);return new Promise((s,n)=>{this.b=new eT(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof As&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,i.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const p=c instanceof As;(h>0||!p)&&this.b.add(c,l)}};this.n(r,a,i.token).then(c=>{i.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{i.dispose();const l=Qs(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof As?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new As(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,r){const i=new h8(e,(l,u)=>({queryTester:new t7(this.j,l),folder:l.folder,folderIdx:u}),()=>!0),s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=i.findQueryFragmentAwareSubstr(l.uri),h=u.folder.scheme===V.file?$D(()=>this.g.readdir(Pp(l.uri))):void 0,p=xb(u.folder,l.uri);if(p){const f=u.queryTester.includedInQuery(p,vr(p),h);fs(f)?s.push(f.then(m=>{m&&t(l,u.folderIdx)})):f&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??z6,previewOptions:this.j.previewOptions??w1,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,r):c=await this.f.provider.provideTextSearchResults(KA(this.f.query.contentPattern),a,n,r),s.length&&await Promise.all(s),c}o(e){const t=Xo(this.j.includePattern,e.includePattern);let r=e.excludePattern?.map(n=>({folder:n.folder,patterns:Xo(this.j.excludePattern,n.pattern)}));(!r||r.length===0)&&(r=[{folder:void 0,patterns:Xo(this.j.excludePattern,void 0)}]);const i=i7(r);return{folder:y.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function KA(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var eT=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new rT(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!yb(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(tT(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function tT(e){return e instanceof As?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var rT=class z0{static{this.b=4e3}static{this.c=50}constructor(t,r){this.j=t,this.k=r,this.d=0,this.f=[],this.g=0}addItem(t,r){t&&this.l(t,r)}addItems(t,r){t&&this.m(t,r)}l(t,r){this.f.push(t),this.g+=r,this.n()}m(t,r){this.f=this.f.concat(t),this.g+=r,this.n()}n(){this.d<z0.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},z0.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},f8=W("IExtHostSearch"),Rv=class{constructor(t,r,i){this.o=t,this.q=r,this.s=i,this.c=this.o.getProxy(z.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new XA}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,new GA(r)),this.c.$registerTextSearchProvider(i,this.t(t)),ae(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerTextSearchProvider(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,r),this.c.$registerTextSearchProvider(i,this.t(t)),ae(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProviderOld(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,new JA(r)),this.c.$registerAITextSearchProvider(i,this.t(t)),ae(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProvider(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,r),this.c.$registerAITextSearchProvider(i,this.t(t)),ae(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProviderOld(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,new a8(r)),this.c.$registerFileSearchProvider(i,this.t(t)),ae(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProvider(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,r),this.c.$registerFileSearchProvider(i,this.t(t)),ae(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=Lv(i),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,r,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,r,i){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,r,i,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=Lv(i);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$provideAITextSearchResults(t,r,i,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=Lv(i);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const r=this.i.get(t);if(!(!r||!r.provideAITextSearchResults))return r.name??"AI"}v(t,r){return new d8({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}w(t,r){return new d8({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};Rv=__decorate([__param(0,Me),__param(1,gu),__param(2,Ue)],Rv);function Lv(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(iT),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>y.revive(t))}}function iT(e){return tr(e)}var Nv,Fv=class{static{Nv=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.d;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t){this.c=new I,this.onDidChangeWindowState=this.c.event,this.d=Nv.a,this.b=t.getProxy(z.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:i})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",i)})}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,r){r!==this.d[t]&&(this.d={...this.d,[t]:r},this.c.fire(this.d))}openUri(t,r){let i;if(typeof t=="string"){i=t;try{t=y.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return cu(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===V.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,i,r)}async asExternalUri(t,r){if(cu(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this.b.$asExternalUri(t,r);return y.from(i)}};Fv=Nv=__decorate([__param(0,Me)],Fv);var p8=W("IExtHostWindow"),Mv=class extends C${constructor(t,r){super(r.logLevel,r.logsLocation,r.loggers.map(i=>tr(i))),this.r=t.getProxy(z.MainThreadLogger)}$setLogLevel(t,r){r?this.setLogLevel(y.revive(r),t):this.setLogLevel(t)}setVisibility(t,r){super.setVisibility(t,r),this.r.$setVisibility(t,r)}s(t,r,i){return new sT(this.r,t,r,i)}};Mv=__decorate([__param(0,Me),__param(1,Wt)],Mv);var sT=class extends ty{constructor(e,t,r,i){super(i?.logLevel==="always"),this.r=e,this.s=t,this.m=!1,this.n=[],this.setLevel(r),this.r.$createLogger(t,i).then(()=>{this.u(this.n),this.m=!0})}g(e,t){const r=[[e,t]];this.m?this.u(r):this.n.push(...r)}u(e){this.r.$log(this.s,e)}flush(){this.r.$flush(this.s)}},g8=W("IExtHostTerminalShellIntegration"),Ov=class extends he{constructor(t,r){super(),this.h=r,this.b=new Map,this.c=new I,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new I,this.onDidStartTerminalShellExecution=this.f.event,this.g=new I,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(z.MainThreadTerminalShellIntegration),this.B(ae(()=>{for(const[i,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const r=this.h.getTerminalById(t);if(!r)return;const i=r.value;let s=this.b.get(t);s||(s=new nT(r.value,this.f),this.b.set(t,s),s.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),r.shellIntegration=s.value),this.c.fire({terminal:i,shellIntegration:s.value})}$shellExecutionStart(t,r,i,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.startShellExecution(o,y.revive(n))}$shellExecutionEnd(t,r,i,s,n){const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,r){this.b.get(t)?.emitData(r)}$cwdChange(t,r){this.b.get(t)?.setCwd(y.revive(r))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};Ov=__decorate([__param(0,Me),__param(1,ia)],Ov);var nT=class extends he{get currentExecution(){return this.a}constructor(e,t){super(),this.j=e,this.m=t,this.b=!1,this.store=this.B(new we),this.f=this.B(new I),this.onDidRequestChangeShellIntegration=this.f.event,this.g=this.B(new I),this.onDidRequestShellExecution=this.g.event,this.h=this.B(new I),this.onDidRequestEndExecution=this.h.event;const r=this;this.value={get cwd(){return r.c},executeCommand(i,s){let n=i;s&&s.length>0&&(n+=` "${s.map(c=>`${c.replaceAll('"','\\"')}`).join('" "')}"`),r.g.fire(n);const o={value:n,confidence:Eh.High,isTrusted:!0},a=r.startShellExecution(o,r.c,!0).value;return r.b=!0,a}}}startShellExecution(e,t,r){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const i=this.a=new oT(e,t??this.c);r?queueMicrotask(()=>this.m.fire({terminal:this.j,shellIntegration:this.value,execution:i.value})):this.m.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setCwd(e){let t=!1;y.isUri(this.c)?t=!y.isUri(e)||this.c.toString()!==e.toString():this.c!==e&&(t=!0),t&&(this.c=e,this.f.fire({terminal:this.j,shellIntegration:this.value}))}},oT=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const r=this;this.value={get commandLine(){return r.c},get cwd(){return r.cwd},read(){return r.d()}}}d(){if(!this.a){if(this.b)return Fa.EMPTY;this.a=new aT}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},aT=class extends he{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new li);const e=this.a;return new Fa(async r=>{this.b.push(r),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}};Ve(iv,rv,1),Ve(za,Mv,1),Ve(Qd,fv,1),Ve(Tn,_1,0),Ve(q1,G1,0),Ve(J1,Q1,0),Ve(Wi,$1,0),Ve(Wd,T1,0),Ve(sf,Cv,0),Ve(o8,Tv,0),Ve(C9,uv,0),Ve(oa,dv,0),Ve(sv,nv,0),Ve(no,z$,0),Ve($9,lv,1),Ve(f8,Rv,0),Ve(A1,P7,0),Ve(Z9,Sv,0),Ve(ia,W1,0),Ve(g8,Ov,0),Ve(O1,U1,0),Ve(p8,Fv,0),Ve(zi,x1,0),Ve(tv,w9,0),Ve(Vd,j1,0),Ve(yl,$v,0),Ve(Dv,Pv,0);var cT=class extends he{constructor(e,t=[]){super(),this.a=new $$([e,...t]),this.B(e.onDidChangeLogLevel(r=>this.setLevel(r)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Uv=class extends cT{constructor(t,r,i){const s=i.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=i.remote.isRemote?d(2720,null):d(t?2721:2722,null);super(r.createLogger(s,{name:n}))}};Uv=__decorate([__param(1,za),__param(2,Wt)],Uv);var m8={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},v8;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(v8||(v8={}));var lT=8,uT=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},je=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return of(e,t)}compute(e,t,r){return r}},nf=class{constructor(e,t){this.newValue=e,this.didChange=t}};function of(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new nf(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Ci(e,t);return new nf(t,!i)}let r=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=of(e[i],t[i]);s.didChange&&(e[i]=s.newValue,r=!0)}return new nf(e,r)}var El=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return of(e,t)}validate(e){return this.defaultValue}},aa=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return of(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,r){return r}};function q(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var ge=class extends aa{constructor(e,t,r,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=r),super(e,t,r,i)}validate(e){return q(e,this.defaultValue)}};function hT(e,t,r,i){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(r,s),s=Math.min(i,s),s|0)}var Le=class LE extends aa{static clampedInt(t,r,i,s){return hT(t,r,i,s)}constructor(t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=n),super(t,r,i,o),this.minimum=s,this.maximum=n}validate(t){return LE.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},bi=class NE extends aa{static clamp(t,r,i){return t<r?r:t>i?i:t}static float(t,r){if(typeof t=="number")return t;if(typeof t>"u")return r;const i=parseFloat(t);return isNaN(i)?r:i}constructor(t,r,i,s,n){typeof n<"u"&&(n.type="number",n.default=i),super(t,r,i,n),this.validationFn=s}validate(t){return this.validationFn(NE.float(t,this.defaultValue))}},ar=class FE extends aa{static string(t,r){return typeof t!="string"?r:t}constructor(t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(t,r,i,s)}validate(t){return FE.string(t,this.defaultValue)}};function nt(e,t,r,i){return typeof e!="string"?t:i&&e in i?i[e]:r.indexOf(e)===-1?t:e}var Ge=class extends aa{constructor(e,t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=r),super(e,t,r,s),this.c=i}validate(e){return nt(e,this.defaultValue,this.c)}},af=class extends je{constructor(e,t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,r,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function dT(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var fT=class extends je{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(307,null),d(308,null),d(309,null)],default:"auto",tags:["accessibility"],description:d(310,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,r){return r===0?e.accessibilitySupport:r}},pT=class extends je{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(311,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(312,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:q(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:q(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},w8;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(w8||(w8={}));function gT(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var yi;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(yi||(yi={}));function mT(e){switch(e){case"line":return yi.Line;case"block":return yi.Block;case"underline":return yi.Underline;case"line-thin":return yi.LineThin;case"block-outline":return yi.BlockOutline;case"underline-thin":return yi.UnderlineThin}}var vT=class extends El{constructor(){super(145)}compute(e,t,r){const i=["monaco-editor"];return t.get(41)&&i.push(t.get(41)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(114)&&i.push("showUnused"),t.get(143)&&i.push("showDeprecated"),i.join(" ")}},wT=class extends ge{constructor(){super(38,"emptySelectionClipboard",!0,{description:d(313,null)})}compute(e,t,r){return r&&e.emptySelectionClipboard}},bT=class extends je{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(314,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(315,null),d(316,null),d(317,null)],description:d(318,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(319,null),d(320,null),d(321,null)],description:d(322,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(323,null),included:_r},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(324,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(325,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:q(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":nt(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":nt(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:q(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:q(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:q(t.loop,this.defaultValue.loop)}}},yT=class ga extends je{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",ga.OFF,{anyOf:[{type:"boolean",description:d(326,null)},{type:"string",description:d(327,null)}],description:d(328,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?ga.OFF:t==="true"?ga.ON:t:t?ga.ON:ga.OFF}},xT=class ma extends je{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",ma.OFF,{anyOf:[{type:"boolean",description:d(329,null)},{type:"string",description:d(330,null)}],description:d(331,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?ma.OFF:t==="true"?ma.TRANSLATE:t:t?ma.TRANSLATE:ma.OFF}compute(t,r,i){return t.fontInfo.fontVariationSettings}},ET=class extends El{constructor(){super(52)}compute(e,t,r){return e.fontInfo}},kT=class extends aa{constructor(){super(54,"fontSize",Gi.fontSize,{type:"number",minimum:6,maximum:100,default:Gi.fontSize,description:d(332,null)})}validate(e){const t=bi.float(e,this.defaultValue);return t===0?Gi.fontSize:bi.clamp(t,6,100)}compute(e,t,r){return e.fontInfo.fontSize}},ST=class va extends je{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",Gi.fontWeight,{anyOf:[{type:"number",minimum:va.d,maximum:va.e,errorMessage:d(333,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:va.c}],default:Gi.fontWeight,description:d(334,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Le.clampedInt(t,Gi.fontWeight,va.d,va.e))}},$T=class extends je{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(335,null),d(336,null),d(337,null)]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(338,null)},"editor.gotoLocation.multipleDefinitions":{description:d(339,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(340,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(341,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(342,null),...t},"editor.gotoLocation.multipleReferences":{description:d(343,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:r,description:d(344,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:r,description:d(345,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:r,description:d(346,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:r,description:d(347,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:r,description:d(348,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:nt(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??nt(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??nt(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??nt(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??nt(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??nt(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??nt(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ar.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ar.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ar.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ar.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ar.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:ar.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},CT=class extends je{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(349,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(350,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(351,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(352,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(353,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),delay:Le.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:q(t.sticky,this.defaultValue.sticky),hidingDelay:Le.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:q(t.above,this.defaultValue.above)}}},b8;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(b8||(b8={}));var IT=class Bf extends El{constructor(){super(148)}compute(t,r,i){return Bf.computeLayout(r,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const r=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,r-1));const n=(i+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:r,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,r){const i=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=r.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let p=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,x=t.verticalScrollbarWidth,S=t.viewLineCount,C=t.remainingWidth,D=t.isViewportWrapping,M=h?2:3;let F=Math.floor(n*s);const B=F/n;let X=!1,J=!1,Z=M*p,$e=p/n,de=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:re,extraLinesBeforeFirstLine:pe,extraLinesBeyondLastLine:ne,desiredRatio:We,minimapLineCount:_e}=Bf.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(S/_e>1)X=!0,J=!0,p=1,Z=1,$e=p/n;else{let wt=!1,Mt=p+1;if(m==="fit"){const Ke=Math.ceil((pe+S+ne)*Z);D&&a&&C<=r.stableFitRemainingWidth?(wt=!0,Mt=r.stableFitMaxMinimapScale):wt=Ke>F}if(m==="fill"||wt){X=!0;const Ke=p;Z=Math.min(c*n,Math.max(1,Math.floor(1/We))),D&&a&&C<=r.stableFitRemainingWidth&&(Mt=r.stableFitMaxMinimapScale),p=Math.min(Mt,Math.max(1,Math.floor(Z/M))),p>Ke&&(de=Math.min(2,p/Ke)),$e=p/n/de,F=Math.ceil(Math.max(re,pe+S+ne)*Z),D?(r.stableMinimapLayoutInput=t,r.stableFitRemainingWidth=C,r.stableFitMaxMinimapScale=p):(r.stableMinimapLayoutInput=null,r.stableFitRemainingWidth=0)}}}const Ze=Math.floor(f*$e),tt=Math.min(Ze,Math.max(0,Math.floor((C-x-2)*$e/(l+$e)))+lT);let G=Math.floor(n*tt);const j=G/n;G=Math.floor(G*de);const Q=h?1:2,_=w==="left"?0:i-tt-x;return{renderMinimap:Q,minimapLeft:_,minimapWidth:tt,minimapHeightIsEditorHeight:X,minimapIsSampling:J,minimapScale:p,minimapLineHeight:Z,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:F,minimapCanvasOuterWidth:j,minimapCanvasOuterHeight:B}}static computeLayout(t,r){const i=r.outerWidth|0,s=r.outerHeight|0,n=r.lineHeight|0,o=r.lineNumbersDigitCount|0,a=r.typicalHalfwidthCharacterWidth,c=r.maxDigitWidth,l=r.pixelRatio,u=r.viewLineCount,h=t.get(140),p=h==="inherit"?t.get(139):h,f=p==="inherit"?t.get(135):p,m=t.get(138),w=r.isDominatedByLongLines,x=t.get(59),S=t.get(69).renderType!==0,C=t.get(70),D=t.get(108),M=t.get(86),F=t.get(74),B=t.get(106),X=B.verticalScrollbarSize,J=B.verticalHasArrows,Z=B.arrowSize,$e=B.horizontalScrollbarSize,de=t.get(45),Ze=t.get(113)!=="never";let tt=t.get(67);de&&Ze&&(tt+=16);let G=0;if(S){const es=Math.max(o,C);G=Math.round(es*c)}let j=0;x&&(j=n*r.glyphMarginDecorationLaneCount);let Q=0,_=Q+j,re=_+G,pe=re+tt;const ne=i-j-G-tt;let We=!1,_e=!1,Et=-1;p==="inherit"&&w?(We=!0,_e=!0):f==="on"||f==="bounded"?_e=!0:f==="wordWrapColumn"&&(Et=m);const wt=Bf.c({outerWidth:i,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:D,paddingTop:M.top,paddingBottom:M.bottom,minimap:F,verticalScrollbarWidth:X,viewLineCount:u,remainingWidth:ne,isViewportWrapping:_e},r.memory||new uT);wt.renderMinimap!==0&&wt.minimapLeft===0&&(Q+=wt.minimapWidth,_+=wt.minimapWidth,re+=wt.minimapWidth,pe+=wt.minimapWidth);const Mt=ne-wt.minimapWidth,Ke=Math.max(1,Math.floor((Mt-X-2)/a)),Vt=J?Z:0;return _e&&(Et=Math.max(1,Ke),f==="bounded"&&(Et=Math.min(Et,m))),{width:i,height:s,glyphMarginLeft:Q,glyphMarginWidth:j,glyphMarginDecorationLaneCount:r.glyphMarginDecorationLaneCount,lineNumbersLeft:_,lineNumbersWidth:G,decorationsLeft:re,decorationsWidth:tt,contentLeft:pe,contentWidth:Mt,minimap:wt,viewportColumn:Ke,isWordWrapMinified:We,isViewportWrapping:_e,wrappingColumn:Et,verticalScrollbarWidth:X,horizontalScrollbarHeight:$e,overviewRuler:{top:Vt,width:X,height:s-2*Vt,right:0}}}},DT=class extends je{constructor(){super(142,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(354,null),d(355,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(356,null)}})}validate(e){return nt(e,"simple",["simple","advanced"])}compute(e,t,r){return t.get(2)===2?"advanced":r}},qi;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(qi||(qi={}));var PT=class extends je{constructor(){const e={enabled:qi.OnCode};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[qi.Off,qi.OnCode,qi.On],default:e.enabled,enumDescriptions:[d(357,null),d(358,null),d(359,null)],description:d(360,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:nt(e.enabled,this.defaultValue.enabled,[qi.Off,qi.OnCode,qi.On])}}},AT=class extends je{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(118,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(361,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(362,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(363,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(364,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),maxLineCount:Le.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:nt(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:q(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},TT=class extends je{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(144,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(365,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(366,null),d(367,null,_r?"Ctrl+Option":"Ctrl+Alt"),d(368,null,_r?"Ctrl+Option":"Ctrl+Alt"),d(369,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(370,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(371,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(372,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(373,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:nt(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Le.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ar.string(t.fontFamily,this.defaultValue.fontFamily),padding:q(t.padding,this.defaultValue.padding),maximumLength:Le.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},RT=class extends je{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Le.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,r){return r<0?Le.clampedInt(-r*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):r}},LT=class extends bi{constructor(){super(68,"lineHeight",Gi.lineHeight,e=>bi.clamp(e,0,150),{markdownDescription:d(374,null)})}compute(e,t,r){return e.fontInfo.lineHeight}},NT=class extends je{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(375,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(376,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(377,null),d(378,null),d(379,null)],default:e.size,description:d(380,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(381,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(382,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(383,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(384,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(385,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(386,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(387,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(388,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(389,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),autohide:q(t.autohide,this.defaultValue.autohide),size:nt(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:nt(t.side,this.defaultValue.side,["right","left"]),showSlider:nt(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:q(t.renderCharacters,this.defaultValue.renderCharacters),scale:Le.clampedInt(t.scale,1,1,3),maxColumn:Le.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:q(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:q(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:bi.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:bi.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function FT(e){return e==="ctrlCmd"?_r?"metaKey":"ctrlKey":"altKey"}var MT=class extends je{constructor(){super(86,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(390,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(391,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Le.clampedInt(t.top,0,0,1e3),bottom:Le.clampedInt(t.bottom,0,0,1e3)}}},OT=class extends je{constructor(){const e={enabled:!0,cycle:!0};super(88,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(392,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(393,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),cycle:q(t.cycle,this.defaultValue.cycle)}}},UT=class extends El{constructor(){super(146)}compute(e,t,r){return e.pixelRatio}},HT=class extends je{constructor(){super(90,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},jT=class extends je{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(394,null),d(395,null),d(396,null)]}];super(92,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(397,null)},comments:{anyOf:t,default:e.comments,description:d(398,null)},other:{anyOf:t,default:e.other,description:d(399,null)}},default:e,markdownDescription:d(400,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:r,strings:i}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=nt(t,this.defaultValue.other,s),typeof r=="boolean"?o=r?"on":"off":o=nt(r,this.defaultValue.comments,s),typeof i=="boolean"?a=i?"on":"off":a=nt(i,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},y8;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(y8||(y8={}));var _T=class extends je{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(401,null),d(402,null),d(403,null),d(404,null)],default:"on",description:d(405,null)})}validate(e){let t=this.defaultValue.renderType,r=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,r=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:r}}},BT=class extends je{constructor(){const e=[],t={type:"number",description:d(406,null)};super(105,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(407,null),format:"color-hex"}}}]},default:e,description:d(408,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="number")t.push({column:Le.clampedInt(r,0,0,1e4),color:null});else if(r&&typeof r=="object"){const i=r;t.push({column:Le.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((r,i)=>r.column-i.column),t}return this.defaultValue}},zT=class extends je{constructor(){super(95,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function x8(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var WT=class extends je{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(106,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(409,null),d(410,null),d(411,null)],default:"auto",description:d(412,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(413,null),d(414,null),d(415,null)],default:"auto",description:d(416,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(417,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(418,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(419,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(420,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,r=Le.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Le.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Le.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:x8(t.vertical,this.defaultValue.vertical),horizontal:x8(t.horizontal,this.defaultValue.horizontal),useShadows:q(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:q(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:q(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:q(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:q(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:r,horizontalSliderSize:Le.clampedInt(t.horizontalSliderSize,r,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Le.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:q(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:q(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},ei="inUntrustedWorkspace",Rn={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},VT=class extends je{constructor(){const e={nonBasicASCII:ei,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:ei,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(128,"unicodeHighlight",e,{[Rn.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ei],default:e.nonBasicASCII,description:d(421,null)},[Rn.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(422,null)},[Rn.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(423,null)},[Rn.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ei],default:e.includeComments,description:d(424,null)},[Rn.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ei],default:e.includeStrings,description:d(425,null)},[Rn.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(426,null),additionalProperties:{type:"boolean"}},[Rn.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(427,null)}})}applyUpdate(e,t){let r=!1;t.allowedCharacters&&e&&(qr(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},r=!0)),t.allowedLocales&&e&&(qr(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},r=!0));const i=super.applyUpdate(e,t);return r?new nf(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:ca(t.nonBasicASCII,ei,[!0,!1,ei]),invisibleCharacters:q(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:q(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ca(t.includeComments,ei,[!0,!1,ei]),includeStrings:ca(t.includeStrings,ei,[!0,!1,ei]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const r={};for(const[i,s]of Object.entries(e))s===!0&&(r[i]=!0);return r}},qT=class extends je{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1,edits:{experimental:{enabled:!0}}};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(428,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(429,null),d(430,null),d(431,null)],description:d(432,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(433,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(434,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(435,null)},"editor.inlineSuggest.edits.experimental.enabled":{type:"boolean",default:e.edits.experimental.enabled,description:d(436,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),mode:nt(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:nt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:q(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:q(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:ar.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:q(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{experimental:{enabled:q(t.edits?.experimental?.enabled,this.defaultValue.edits.experimental.enabled)}}}}},GT=class extends je{constructor(){const e={enabled:m8.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:m8.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(437,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(438,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:q(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},JT=class extends je{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(439,null),d(440,null),d(441,null)],default:e.bracketPairs,description:d(442,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(443,null),d(444,null),d(445,null)],default:e.bracketPairsHorizontal,description:d(446,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(447,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(448,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(449,null),d(450,null),d(451,null)],default:e.highlightActiveIndentation,description:d(452,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ca(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ca(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:q(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:q(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ca(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function ca(e,t,r){const i=r.indexOf(e);return i===-1?t:r[i]}var QT=class extends je{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(121,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(453,null),d(454,null)],default:e.insertMode,description:d(455,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(456,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(457,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(458,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(459,null),d(460,null),d(461,null),d(462,null)],default:e.selectionMode,markdownDescription:d(463,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(464,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(465,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(466,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(467,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(468,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(469,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(470,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(471,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(472,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(473,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(474,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(475,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(476,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(477,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(478,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(479,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(480,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(481,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(482,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(483,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(484,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(485,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(486,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(487,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(488,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(489,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(500,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:nt(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:q(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:q(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:q(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:q(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:nt(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:q(t.showIcons,this.defaultValue.showIcons),showStatusBar:q(t.showStatusBar,this.defaultValue.showStatusBar),preview:q(t.preview,this.defaultValue.preview),previewMode:nt(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:q(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:q(t.showMethods,this.defaultValue.showMethods),showFunctions:q(t.showFunctions,this.defaultValue.showFunctions),showConstructors:q(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:q(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:q(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:q(t.showFields,this.defaultValue.showFields),showVariables:q(t.showVariables,this.defaultValue.showVariables),showClasses:q(t.showClasses,this.defaultValue.showClasses),showStructs:q(t.showStructs,this.defaultValue.showStructs),showInterfaces:q(t.showInterfaces,this.defaultValue.showInterfaces),showModules:q(t.showModules,this.defaultValue.showModules),showProperties:q(t.showProperties,this.defaultValue.showProperties),showEvents:q(t.showEvents,this.defaultValue.showEvents),showOperators:q(t.showOperators,this.defaultValue.showOperators),showUnits:q(t.showUnits,this.defaultValue.showUnits),showValues:q(t.showValues,this.defaultValue.showValues),showConstants:q(t.showConstants,this.defaultValue.showConstants),showEnums:q(t.showEnums,this.defaultValue.showEnums),showEnumMembers:q(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:q(t.showKeywords,this.defaultValue.showKeywords),showWords:q(t.showWords,this.defaultValue.showWords),showColors:q(t.showColors,this.defaultValue.showColors),showFiles:q(t.showFiles,this.defaultValue.showFiles),showReferences:q(t.showReferences,this.defaultValue.showReferences),showFolders:q(t.showFolders,this.defaultValue.showFolders),showTypeParameters:q(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:q(t.showSnippets,this.defaultValue.showSnippets),showUsers:q(t.showUsers,this.defaultValue.showUsers),showIssues:q(t.showIssues,this.defaultValue.showIssues)}}},ZT=class extends je{constructor(){super(116,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(501,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(502,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:q(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:q(e.selectSubwords,this.defaultValue.selectSubwords)}}},YT=class extends je{constructor(){const e=[];super(133,"wordSegmenterLocales",e,{anyOf:[{description:d(503,null),type:"string"},{description:d(504,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="string")try{Intl.Segmenter.supportedLocalesOf(r).length>0&&t.push(r)}catch{}return t}return this.defaultValue}},E8;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(E8||(E8={}));var XT=class extends je{constructor(){super(141,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(505,null),d(506,null),d(507,null),d(508,null)],description:d(509,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,r){return t.get(2)===2?0:r}},KT=class extends El{constructor(){super(149)}compute(e,t,r){const i=t.get(148);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},eR=class extends je{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(510,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(511,null),enum:["afterDrop","never"],enumDescriptions:[d(512,null),d(513,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),showDropSelector:nt(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},tR=class extends je{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(87,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(514,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(515,null),enum:["afterPaste","never"],enumDescriptions:[d(516,null),d(517,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:q(t.enabled,this.defaultValue.enabled),showPasteSelector:nt(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},rR="Consolas, 'Courier New', monospace",iR="Menlo, Monaco, 'Courier New', monospace",sR="'Droid Sans Mono', 'monospace', monospace",Gi={fontFamily:_r?iR:ss?sR:rR,fontWeight:"normal",fontSize:_r?12:14,lineHeight:0,letterSpacing:0},nR=[];function P(e){return nR[e.id]=e,e}var k8;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.letterSpacing=65]="letterSpacing",e[e.lightbulb=66]="lightbulb",e[e.lineDecorationsWidth=67]="lineDecorationsWidth",e[e.lineHeight=68]="lineHeight",e[e.lineNumbers=69]="lineNumbers",e[e.lineNumbersMinChars=70]="lineNumbersMinChars",e[e.linkedEditing=71]="linkedEditing",e[e.links=72]="links",e[e.matchBrackets=73]="matchBrackets",e[e.minimap=74]="minimap",e[e.mouseStyle=75]="mouseStyle",e[e.mouseWheelScrollSensitivity=76]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=77]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=78]="multiCursorMergeOverlapping",e[e.multiCursorModifier=79]="multiCursorModifier",e[e.multiCursorPaste=80]="multiCursorPaste",e[e.multiCursorLimit=81]="multiCursorLimit",e[e.occurrencesHighlight=82]="occurrencesHighlight",e[e.occurrencesHighlightDelay=83]="occurrencesHighlightDelay",e[e.overviewRulerBorder=84]="overviewRulerBorder",e[e.overviewRulerLanes=85]="overviewRulerLanes",e[e.padding=86]="padding",e[e.pasteAs=87]="pasteAs",e[e.parameterHints=88]="parameterHints",e[e.peekWidgetDefaultFocus=89]="peekWidgetDefaultFocus",e[e.placeholder=90]="placeholder",e[e.definitionLinkOpensInPeek=91]="definitionLinkOpensInPeek",e[e.quickSuggestions=92]="quickSuggestions",e[e.quickSuggestionsDelay=93]="quickSuggestionsDelay",e[e.readOnly=94]="readOnly",e[e.readOnlyMessage=95]="readOnlyMessage",e[e.renameOnType=96]="renameOnType",e[e.renderControlCharacters=97]="renderControlCharacters",e[e.renderFinalNewline=98]="renderFinalNewline",e[e.renderLineHighlight=99]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=100]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=101]="renderValidationDecorations",e[e.renderWhitespace=102]="renderWhitespace",e[e.revealHorizontalRightPadding=103]="revealHorizontalRightPadding",e[e.roundedSelection=104]="roundedSelection",e[e.rulers=105]="rulers",e[e.scrollbar=106]="scrollbar",e[e.scrollBeyondLastColumn=107]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=108]="scrollBeyondLastLine",e[e.scrollPredominantAxis=109]="scrollPredominantAxis",e[e.selectionClipboard=110]="selectionClipboard",e[e.selectionHighlight=111]="selectionHighlight",e[e.selectOnLineNumbers=112]="selectOnLineNumbers",e[e.showFoldingControls=113]="showFoldingControls",e[e.showUnused=114]="showUnused",e[e.snippetSuggestions=115]="snippetSuggestions",e[e.smartSelect=116]="smartSelect",e[e.smoothScrolling=117]="smoothScrolling",e[e.stickyScroll=118]="stickyScroll",e[e.stickyTabStops=119]="stickyTabStops",e[e.stopRenderingLineAfter=120]="stopRenderingLineAfter",e[e.suggest=121]="suggest",e[e.suggestFontSize=122]="suggestFontSize",e[e.suggestLineHeight=123]="suggestLineHeight",e[e.suggestOnTriggerCharacters=124]="suggestOnTriggerCharacters",e[e.suggestSelection=125]="suggestSelection",e[e.tabCompletion=126]="tabCompletion",e[e.tabIndex=127]="tabIndex",e[e.unicodeHighlighting=128]="unicodeHighlighting",e[e.unusualLineTerminators=129]="unusualLineTerminators",e[e.useShadowDOM=130]="useShadowDOM",e[e.useTabStops=131]="useTabStops",e[e.wordBreak=132]="wordBreak",e[e.wordSegmenterLocales=133]="wordSegmenterLocales",e[e.wordSeparators=134]="wordSeparators",e[e.wordWrap=135]="wordWrap",e[e.wordWrapBreakAfterCharacters=136]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=137]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=138]="wordWrapColumn",e[e.wordWrapOverride1=139]="wordWrapOverride1",e[e.wordWrapOverride2=140]="wordWrapOverride2",e[e.wrappingIndent=141]="wrappingIndent",e[e.wrappingStrategy=142]="wrappingStrategy",e[e.showDeprecated=143]="showDeprecated",e[e.inlayHints=144]="inlayHints",e[e.editorClassName=145]="editorClassName",e[e.pixelRatio=146]="pixelRatio",e[e.tabFocusMode=147]="tabFocusMode",e[e.layoutInfo=148]="layoutInfo",e[e.wrappingInfo=149]="wrappingInfo",e[e.defaultColorDecorators=150]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=151]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=152]="inlineCompletionsAccessibilityVerbose"})(k8||(k8={}));var vH={acceptSuggestionOnCommitCharacter:P(new ge(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(518,null)})),acceptSuggestionOnEnter:P(new Ge(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(519,null),""],markdownDescription:d(520,null)})),accessibilitySupport:P(new fT),accessibilityPageSize:P(new Le(3,"accessibilityPageSize",10,1,1073741824,{description:d(521,null),tags:["accessibility"]})),ariaLabel:P(new ar(4,"ariaLabel",d(522,null))),ariaRequired:P(new ge(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:P(new ge(8,"screenReaderAnnounceInlineSuggestion",!0,{description:d(523,null),tags:["accessibility"]})),autoClosingBrackets:P(new Ge(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(524,null),d(525,null),""],description:d(526,null)})),autoClosingComments:P(new Ge(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(527,null),d(528,null),""],description:d(529,null)})),autoClosingDelete:P(new Ge(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(530,null),""],description:d(531,null)})),autoClosingOvertype:P(new Ge(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(532,null),""],description:d(533,null)})),autoClosingQuotes:P(new Ge(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(534,null),d(535,null),""],description:d(536,null)})),autoIndent:P(new af(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],dT,{enumDescriptions:[d(537,null),d(538,null),d(539,null),d(540,null),d(541,null)],description:d(542,null)})),automaticLayout:P(new ge(13,"automaticLayout",!1)),autoSurround:P(new Ge(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(543,null),d(544,null),d(545,null),""],description:d(546,null)})),bracketPairColorization:P(new GT),bracketPairGuides:P(new JT),stickyTabStops:P(new ge(119,"stickyTabStops",!1,{description:d(547,null)})),codeLens:P(new ge(17,"codeLens",!0,{description:d(548,null)})),codeLensFontFamily:P(new ar(18,"codeLensFontFamily","",{description:d(549,null)})),codeLensFontSize:P(new Le(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(550,null)})),colorDecorators:P(new ge(20,"colorDecorators",!0,{description:d(551,null)})),colorDecoratorActivatedOn:P(new Ge(151,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(552,null),d(553,null),d(554,null)],description:d(555,null)})),colorDecoratorsLimit:P(new Le(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(556,null)})),columnSelection:P(new ge(22,"columnSelection",!1,{description:d(557,null)})),comments:P(new pT),contextmenu:P(new ge(24,"contextmenu",!0)),copyWithSyntaxHighlighting:P(new ge(25,"copyWithSyntaxHighlighting",!0,{description:d(558,null)})),cursorBlinking:P(new af(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],gT,{description:d(559,null)})),cursorSmoothCaretAnimation:P(new Ge(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(560,null),d(561,null),d(562,null)],description:d(563,null)})),cursorStyle:P(new af(28,"cursorStyle",yi.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],mT,{description:d(564,null)})),cursorSurroundingLines:P(new Le(29,"cursorSurroundingLines",0,0,1073741824,{description:d(565,null)})),cursorSurroundingLinesStyle:P(new Ge(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(566,null),d(567,null)],markdownDescription:d(568,null)})),cursorWidth:P(new Le(31,"cursorWidth",0,0,1073741824,{markdownDescription:d(569,null)})),disableLayerHinting:P(new ge(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:P(new ge(33,"disableMonospaceOptimizations",!1)),domReadOnly:P(new ge(34,"domReadOnly",!1)),dragAndDrop:P(new ge(35,"dragAndDrop",!0,{description:d(570,null)})),emptySelectionClipboard:P(new wT),dropIntoEditor:P(new eR),experimentalEditContextEnabled:P(new ge(37,"experimentalEditContextEnabled",!1,{description:d(571,null),included:fp||Rw||$w})),stickyScroll:P(new AT),experimentalGpuAcceleration:P(new Ge(39,"experimentalGpuAcceleration","off",["off","on"],void 0)),experimentalWhitespaceRendering:P(new Ge(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(572,null),d(573,null),d(574,null)],description:d(575,null)})),extraEditorClassName:P(new ar(41,"extraEditorClassName","")),fastScrollSensitivity:P(new bi(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(576,null)})),find:P(new bT),fixedOverflowWidgets:P(new ge(44,"fixedOverflowWidgets",!1)),folding:P(new ge(45,"folding",!0,{description:d(577,null)})),foldingStrategy:P(new Ge(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(578,null),d(579,null)],description:d(580,null)})),foldingHighlight:P(new ge(47,"foldingHighlight",!0,{description:d(581,null)})),foldingImportsByDefault:P(new ge(48,"foldingImportsByDefault",!1,{description:d(582,null)})),foldingMaximumRegions:P(new Le(49,"foldingMaximumRegions",5e3,10,65e3,{description:d(583,null)})),unfoldOnClickAfterEndOfLine:P(new ge(50,"unfoldOnClickAfterEndOfLine",!1,{description:d(584,null)})),fontFamily:P(new ar(51,"fontFamily",Gi.fontFamily,{description:d(585,null)})),fontInfo:P(new ET),fontLigatures2:P(new yT),fontSize:P(new kT),fontWeight:P(new ST),fontVariations:P(new xT),formatOnPaste:P(new ge(57,"formatOnPaste",!1,{description:d(586,null)})),formatOnType:P(new ge(58,"formatOnType",!1,{description:d(587,null)})),glyphMargin:P(new ge(59,"glyphMargin",!0,{description:d(588,null)})),gotoLocation:P(new $T),hideCursorInOverviewRuler:P(new ge(61,"hideCursorInOverviewRuler",!1,{description:d(589,null)})),hover:P(new CT),inDiffEditor:P(new ge(63,"inDiffEditor",!1)),letterSpacing:P(new bi(65,"letterSpacing",Gi.letterSpacing,e=>bi.clamp(e,-5,20),{description:d(590,null)})),lightbulb:P(new PT),lineDecorationsWidth:P(new RT),lineHeight:P(new LT),lineNumbers:P(new _T),lineNumbersMinChars:P(new Le(70,"lineNumbersMinChars",5,1,300)),linkedEditing:P(new ge(71,"linkedEditing",!1,{description:d(591,null)})),links:P(new ge(72,"links",!0,{description:d(592,null)})),matchBrackets:P(new Ge(73,"matchBrackets","always",["always","near","never"],{description:d(593,null)})),minimap:P(new NT),mouseStyle:P(new Ge(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:P(new bi(76,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(594,null)})),mouseWheelZoom:P(new ge(77,"mouseWheelZoom",!1,{markdownDescription:d(_r?595:596,null)})),multiCursorMergeOverlapping:P(new ge(78,"multiCursorMergeOverlapping",!0,{description:d(597,null)})),multiCursorModifier:P(new af(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],FT,{markdownEnumDescriptions:[d(598,null),d(599,null)],markdownDescription:d(600,null)})),multiCursorPaste:P(new Ge(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(601,null),d(602,null)],markdownDescription:d(603,null)})),multiCursorLimit:P(new Le(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(604,null)})),occurrencesHighlight:P(new Ge(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(605,null),d(606,null),d(607,null)],markdownDescription:d(608,null)})),occurrencesHighlightDelay:P(new Le(83,"occurrencesHighlightDelay",250,0,2e3,{description:d(609,null),tags:["preview"]})),overviewRulerBorder:P(new ge(84,"overviewRulerBorder",!0,{description:d(610,null)})),overviewRulerLanes:P(new Le(85,"overviewRulerLanes",3,0,3)),padding:P(new MT),pasteAs:P(new tR),parameterHints:P(new OT),peekWidgetDefaultFocus:P(new Ge(89,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(611,null),d(612,null)],description:d(613,null)})),placeholder:P(new HT),definitionLinkOpensInPeek:P(new ge(91,"definitionLinkOpensInPeek",!1,{description:d(614,null)})),quickSuggestions:P(new jT),quickSuggestionsDelay:P(new Le(93,"quickSuggestionsDelay",10,0,1073741824,{description:d(615,null)})),readOnly:P(new ge(94,"readOnly",!1)),readOnlyMessage:P(new zT),renameOnType:P(new ge(96,"renameOnType",!1,{description:d(616,null),markdownDeprecationMessage:d(617,null)})),renderControlCharacters:P(new ge(97,"renderControlCharacters",!0,{description:d(618,null),restricted:!0})),renderFinalNewline:P(new Ge(98,"renderFinalNewline",ss?"dimmed":"on",["off","on","dimmed"],{description:d(619,null)})),renderLineHighlight:P(new Ge(99,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(620,null)],description:d(621,null)})),renderLineHighlightOnlyWhenFocus:P(new ge(100,"renderLineHighlightOnlyWhenFocus",!1,{description:d(622,null)})),renderValidationDecorations:P(new Ge(101,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:P(new Ge(102,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(623,null),d(624,null),d(625,null),""],description:d(626,null)})),revealHorizontalRightPadding:P(new Le(103,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:P(new ge(104,"roundedSelection",!0,{description:d(627,null)})),rulers:P(new BT),scrollbar:P(new WT),scrollBeyondLastColumn:P(new Le(107,"scrollBeyondLastColumn",4,0,1073741824,{description:d(628,null)})),scrollBeyondLastLine:P(new ge(108,"scrollBeyondLastLine",!0,{description:d(629,null)})),scrollPredominantAxis:P(new ge(109,"scrollPredominantAxis",!0,{description:d(630,null)})),selectionClipboard:P(new ge(110,"selectionClipboard",!0,{description:d(631,null),included:ss})),selectionHighlight:P(new ge(111,"selectionHighlight",!0,{description:d(632,null)})),selectOnLineNumbers:P(new ge(112,"selectOnLineNumbers",!0)),showFoldingControls:P(new Ge(113,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(633,null),d(634,null),d(635,null)],description:d(636,null)})),showUnused:P(new ge(114,"showUnused",!0,{description:d(637,null)})),showDeprecated:P(new ge(143,"showDeprecated",!0,{description:d(638,null)})),inlayHints:P(new TT),snippetSuggestions:P(new Ge(115,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(639,null),d(640,null),d(641,null),d(642,null)],description:d(643,null)})),smartSelect:P(new ZT),smoothScrolling:P(new ge(117,"smoothScrolling",!1,{description:d(644,null)})),stopRenderingLineAfter:P(new Le(120,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:P(new QT),inlineSuggest:P(new qT),inlineCompletionsAccessibilityVerbose:P(new ge(152,"inlineCompletionsAccessibilityVerbose",!1,{description:d(645,null)})),suggestFontSize:P(new Le(122,"suggestFontSize",0,0,1e3,{markdownDescription:d(646,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:P(new Le(123,"suggestLineHeight",0,0,1e3,{markdownDescription:d(647,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:P(new ge(124,"suggestOnTriggerCharacters",!0,{description:d(648,null)})),suggestSelection:P(new Ge(125,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(649,null),d(650,null),d(651,null)],description:d(652,null)})),tabCompletion:P(new Ge(126,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(653,null),d(654,null),d(655,null)],description:d(656,null)})),tabIndex:P(new Le(127,"tabIndex",0,-1,1073741824)),unicodeHighlight:P(new VT),unusualLineTerminators:P(new Ge(129,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(657,null),d(658,null),d(659,null)],description:d(660,null)})),useShadowDOM:P(new ge(130,"useShadowDOM",!0)),useTabStops:P(new ge(131,"useTabStops",!0,{description:d(661,null)})),wordBreak:P(new Ge(132,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(662,null),d(663,null)],description:d(664,null)})),wordSegmenterLocales:P(new YT),wordSeparators:P(new ar(134,"wordSeparators",I9,{description:d(665,null)})),wordWrap:P(new Ge(135,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(666,null),d(667,null),d(668,null),d(669,null)],description:d(670,null)})),wordWrapBreakAfterCharacters:P(new ar(136,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:P(new ar(137,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:P(new Le(138,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(671,null)})),wordWrapOverride1:P(new Ge(139,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:P(new Ge(140,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:P(new vT),defaultColorDecorators:P(new ge(150,"defaultColorDecorators",!1,{markdownDescription:d(672,null)})),pixelRatio:P(new UT),tabFocusMode:P(new ge(147,"tabFocusMode",!1,{markdownDescription:d(673,null)})),layoutInfo:P(new IT),wrappingInfo:P(new KT),wrappingIndent:P(new XT),wrappingStrategy:P(new DT)};function S8(e,t,r,i,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=S8(a,t,r,i,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return i?e==="*"?5:e===r?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!i&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===r)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let p;if(typeof a=="string"?p=a:p={...a,base:Zn(a.base)},p===t.fsPath||nc(p,t.fsPath))h=10;else return 0}return h}else return 0}}function $8(e){return typeof e=="string"?!1:Array.isArray(e)?e.some($8):!!e.notebookType}var Hv;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Hv||(Hv={}));var wH=W("editSessionIdentityService"),jv;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(jv||(jv={}));var oR=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(z.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,r){if(this.a.size===0)throw new Error("No related information providers registered");const i=this.a.get(e);if(!i)throw new Error("related information provider not found");return await i.provideRelatedInformation(t,r)??[]}getRelatedInformation(e,t,r){return this.c.$getAiRelatedInformation(t,r)}registerRelatedInformationProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiRelatedInformationProvider(i,t),new De(()=>{this.c.$unregisterAiRelatedInformationProvider(i),this.a.delete(i)})}},C8;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(C8||(C8={}));function I8(e){for(let t=0,r=e.length;t<r;t+=4){const i=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=i}}function aR(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return Tw()||I8(t),ke.wrap(t)}function cR(e){const t=e.buffer;if(Tw()||I8(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const r=new Uint8Array(t.byteLength);return r.set(t),new Uint32Array(r.buffer,r.byteOffset,r.length/4)}}function _v(e){const t=new Uint32Array(lR(e));let r=0;if(t[r++]=e.id,e.type==="full")t[r++]=1,t[r++]=e.data.length,t.set(e.data,r),r+=e.data.length;else{t[r++]=2,t[r++]=e.deltas.length;for(const i of e.deltas)t[r++]=i.start,t[r++]=i.deleteCount,i.data?(t[r++]=i.data.length,t.set(i.data,r),r+=i.data.length):t[r++]=0}return aR(t)}function lR(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const r of e.deltas)r.data&&(t+=r.data.length)}return t}function D8(e){const t=cR(e);let r=0;const i=t[r++];if(t[r++]===1){const a=t[r++],c=t.subarray(r,r+a);return r+=a,{id:i,type:"full",data:c}}const n=t[r++],o=[];for(let a=0;a<n;a++){const c=t[r++],l=t[r++],u=t[r++];let h;u>0&&(h=t.subarray(r,r+u),r+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:i,type:"delta",deltas:o}}var uR=[new le("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[O.Uri,O.Position],new ce("A promise that resolves to an array of DocumentHighlight-instances.",ti(Bo.to))),new le("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[O.Uri],new ce("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(Kf(e))return;class r extends pc{static to(s){const n=new r(s.name,Fr.to(s.kind),s.containerName||"",new Dr(t[0],N.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=N.to(s.selectionRange),n.children=s.children?s.children.map(r.to):[],n}}return e.map(r.to)})),new le("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[O.Uri,new O("options","Formatting options",e=>!0,e=>e)],new ce("A promise that resolves to an array of TextEdits.",ti(Ct.to))),new le("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[O.Uri,O.Range,new O("options","Formatting options",e=>!0,e=>e)],new ce("A promise that resolves to an array of TextEdits.",ti(Ct.to))),new le("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[O.Uri,O.Position,new O("ch","Trigger character",e=>typeof e=="string",e=>e),new O("options","Formatting options",e=>!0,e=>e)],new ce("A promise that resolves to an array of TextEdits.",ti(Ct.to))),new le("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location or LocationLink instances.",Fs)),new le("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location-instances.",ti(nr.to))),new le("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Location-instances.",ti(nr.to))),new le("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Hover-instances.",ti(Jc.to))),new le("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[O.Uri,O.Position],new ce("A promise that resolves to an array of Hover-instances.",ti(Jc.to))),new le("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[O.Uri,new O("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>xe.isPosition(t)),e=>e.map(Fe.from))],new ce("A promise that resolves to an array of ranges.",e=>e.map(t=>{let r;for(const i of t.reverse())r=new vc(N.to(i),r);return r}))),new le("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[O.String.with("query","Search string")],new ce("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Sn.to))),new le("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[O.Uri,O.Position],new ce("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map($n.to))),new le("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[O.CallHierarchyItem],new ce("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(Vm.to))),new le("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[O.CallHierarchyItem],new ce("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(qm.to))),new le("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[O.Uri,O.Position],new ce("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:N.to(e.range),placeholder:e.text}})),new le("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[O.Uri,O.Position,O.String.with("newName","The new symbol name")],new ce("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return Yt.to(e)}})),new le("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[O.Uri,O.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ce("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Cn.to))),new le("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[O.Uri],new ce("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new gm(e.tokenTypes,e.tokenModifiers)})),new le("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[O.Uri],new ce("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=D8(e);if(t.type==="full")return new Lo(t.data,void 0)})),new le("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[O.Uri,O.Range.optional()],new ce("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new gm(e.tokenTypes,e.tokenModifiers)})),new le("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[O.Uri,O.Range],new ce("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=D8(e);if(t.type==="full")return new Lo(t.data,void 0)})),new le("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[O.Uri,O.Position,O.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),O.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ce("A promise that resolves to a CompletionList-instance.",(e,t,r)=>{if(!e)return new ko([]);const i=e.suggestions.map(s=>Ym.to(s,r));return new ko(i,e.incomplete)})),new le("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[O.Uri,O.Position,O.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ce("A promise that resolves to SignatureHelp.",e=>{if(e)return Qc.to(e)})),new le("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[O.Uri,O.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ce("A promise that resolves to an array of CodeLens-instances.",(e,t,r)=>ti(i=>new ph(N.to(i.range),i.command&&r.fromInternal(i.command)))(e))),new le("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[O.Uri,new O("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>ve.isRange(e),e=>Mi.isSelection(e)?Xr.from(e):N.from(e)),O.String.with("kind","Code action kind to return code actions for").optional(),O.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ce("A promise that resolves to an array of Command-instances.",(e,t,r)=>ti(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return r.fromInternal(i.command)}else{const s=new fh(i.title,i.kind?new st(i.kind):void 0);return i.edit&&(s.edit=Yt.to(i.edit)),i.command&&(s.command=r.fromInternal(i.command)),s.isPreferred=i.isPreferred,s}})(e))),new le("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[O.Uri],new ce("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new yh(N.to(t.range),zo.to(t.color))):[])),new le("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new O("color","The color to show and insert",e=>e instanceof Io,zo.from),new O("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:N.from(e.range)}))],new ce("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(gd.to):[])),new le("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[O.Uri,O.Range],new ce("A promise that resolves to an array of Inlay objects",(e,t,r)=>e.map(Xm.to.bind(void 0,r)))),new le("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[O.Uri],new ce("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(vd.to)})),new le("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ce("A promise that resolves to an array of NotebookContentProvider static info objects.",ti(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>yd.to(t))})))),new le("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[O.Uri,O.Range,new O("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof ve,e=>ld.from(e))],new ce("A promise that resolves to an array of InlineValue objects",e=>e.map(cd.to))),new le("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new O("uriOrString","Uri-instance or string (only http/https)",e=>y.isUri(e)||typeof e=="string"&&kS(e,V.http,V.https),e=>e),new O("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[$t.from(e),void 0]:[$t.from(e.viewColumn),Zc.from(e)])).optional(),O.String.with("label","").optional()],ce.Void),new le("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[O.Uri.with("resource","Resource to open"),O.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new O("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[$t.from(e),void 0]:[$t.from(e.viewColumn),Zc.from(e)])).optional()],ce.Void),new le("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[O.Uri.with("left","Left-hand side resource of the diff editor"),O.Uri.with("right","Right-hand side resource of the diff editor"),O.String.with("title","Human readable title for the diff editor").optional(),new O("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[$t.from(e.viewColumn),Zc.from(e)]).optional()],ce.Void),new le("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[O.String.with("title","Human readable title for the changes editor"),new O("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[r,i,s]=t;if(!y.isUri(r)||!y.isUri(i)&&i!==void 0&&i!==null||!y.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ce.Void),new le("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[O.Uri,O.Position],new ce("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(In.to))),new le("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[O.TypeHierarchyItem],new ce("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(In.to))),new le("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[O.TypeHierarchyItem],new ce("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(In.to))),new le("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[O.TestItem],ce.Void),new le("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[O.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ce.Void),new le("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[O.String.with("name","The context key name"),new O("value","The context key value",()=>!0,e=>e)],ce.Void),new le("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[O.Uri,O.StringArray,new O("MappedEditsContext","Mapped Edits Context",e=>bd.is(e),e=>bd.from(e))],new ce("A promise that resolves to a workspace edit or null",e=>e?Yt.to(e):null)),new le("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new O("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?N.from(e.initialRange):void 0,initialSelection:Mi.isSelection(e.initialSelection)?Xr.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?Fe.from(e.position):void 0}})],ce.Void)],hR=class{static register(e){uR.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",b$)}};function ti(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Fs(e){if(!Array.isArray(e))return;const t=[];for(const r of e)W2(r)?t.push(Gc.to(r)):t.push(nr.to(r));return t}var Bv=class{constructor(t,r){this.a=t.getProxy(z.MainThreadBulkEdits),this.b={getTextDocumentVersion:i=>r.getDocument(i)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,r,i){const s=new Sr(Yt.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,i?.isRefactoring??!1)}};Bv=__decorate([__param(0,Me)],Bv);var P8;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(P8||(P8={}));var cf;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(cf||(cf={}));var A8;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(A8||(A8={}));var T8;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(T8||(T8={}));var yH=W("IChatService");function dR(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var fR=class{constructor(e,t,r,i,s){this.j=e,this.k=t,this.l=r,this.m=i,this.n=s,this.b=Bs.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(r.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this;this.b.reset();const i=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(yr.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,il.from(c),l):this.l.$handleProgressChunk(this.k.requestId,Bi.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,u1.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g=Object.freeze({markdown(s){t(this.markdown);const n=new Qh(s),o=tl.from(n);return i(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&T(r.j,"chatParticipantAdditions");const o=new Hc(s,n),a=Cd.from(o);return i(a),this},codeblockUri(s){t(this.codeblockUri),T(r.j,"chatParticipantAdditions");const n=new ed(s),o=$d.from(n);return i(o),this},filetree(s,n){t(this.filetree);const o=new Yh(s,n),a=rl.from(o);return i(a),this},anchor(s,n){const o=new _c(s,n);return this.push(o)},button(s){t(this.anchor);const n=new Kh(s),o=sl.from(n,r.m,r.n);return i(o),this},progress(s,n){t(this.progress);const o=new Xh(s,n),a=n?Pd.from(o):Dn.from(o);return i(a,n),this},warning(s){t(this.progress),T(r.j,"chatParticipantAdditions");const n=new zc(s),o=il.from(n);return i(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&T(r.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=r.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new Hi(s,n,o);c=[Bi.from(l)]}return c.forEach(l=>i(l)),this}}else{const a=new Hi(s,n,o),c=Bi.from(a);i(c)}return this},codeCitation(s,n,o){t(this.codeCitation),T(r.j,"chatParticipantAdditions");const a=new td(s,n,o),c=Td.from(a);i(c)},textEdit(s,n){t(this.textEdit),T(r.j,"chatParticipantAdditions");const o=new Wc(s,n),a=Ad.from(o);return i(a),this},detectedParticipant(s,n){t(this.detectedParticipant),T(r.j,"chatParticipantAdditions");const o=new jc(s,n),a=Id.from(o);return i(a),this},confirmation(s,n,o,a){t(this.confirmation),T(r.j,"chatParticipantAdditions");const c=new Zh(s,n,o,a),l=Dd.from(c);return i(l),this},push(s){if(t(this.push),(s instanceof Wc||s instanceof Hc||s instanceof jc||s instanceof zc||s instanceof Zh||s instanceof td||s instanceof rd||s instanceof Xh)&&T(r.j,"chatParticipantAdditions"),s instanceof Hi)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof Xh){const n=s.task?Pd.from(s):Dn.from(s);i(n,s.task)}else if(s instanceof _c){const n=Yo.from(s);if(s.resolve){T(r.j,"chatParticipantAdditions"),n.resolveId=$r();const o=new ft;s.resolve(o.token).then(()=>{const a=Yo.from(s);r.l.$handleAnchorResolve(r.k.requestId,n.resolveId,a)}).then(()=>o.dispose(),()=>o.dispose()),r.n.add(ae(()=>o.dispose(!0)))}i(n)}else{const n=Rd.from(s,r.m,r.n);i(n)}return this}})}return this.g}},pR=class zf extends he{static{this.b=0}static{this.j=0}constructor(t,r,i,s,n){super(),this.t=r,this.u=i,this.w=s,this.y=n,this.c=new Map,this.m=new Map,this.n=this.B(new sp),this.s=this.B(new sp),this.g=t.getProxy(z.MainThreadChatAgents2),i.registerArgumentProcessor({processArgument:o=>dR(o)?null:o})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,r,i){const s=zf.b++,n=new R8(t,r,this.g,s,i);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,r,{},void 0),n.apiAgent}createDynamicChatAgent(t,r,i,s){const n=zf.b++,o=new R8(t,r,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,r,{isSticky:!0},i),o.apiAgent}registerChatParticipantDetectionProvider(t,r){const i=zf.j++;return this.m.set(i,new gR(t,r)),this.g.$registerChatParticipantDetectionProvider(i),ae(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}async $detectChatParticipant(t,r,i,s,n){const{request:o,location:a,history:c}=await this.z(r,i),l=this.m.get(t);if(!l)return;const u=await this.C(o,l.extension),h=Ld.to(o,a,u);return l.provider.provideParticipantDetection(h,{history:c},{participants:s.participants,location:nl.to(s.location)},n)}async z(t,r){const i=tr(t),s=await this.D(i.agentId,r);let n;if(i.locationData?.type===jt.Editor){const o=this.w.getDocument(i.locationData.document);n=new U6(o,Xr.to(i.locationData.selection),N.to(i.locationData.wholeRange))}else if(i.locationData?.type===jt.Notebook){const o=this.w.getDocument(i.locationData.sessionInputUri);n=new H6(o)}else i.locationData?.type,jt.Terminal;return{request:i,location:n,history:s}}async C(t,r){let i;if(t.userSelectedModelId&&(i=await this.y.getLanguageModelByIdentifier(r,t.userSelectedModelId)),!i&&(i=await this.y.getDefaultLanguageModel(r),!i))throw new Error("Language model unavailable");return i}async $invokeAgent(t,r,i,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o;try{const{request:a,location:c,history:l}=await this.z(r,i);let u=this.n.get(a.sessionId);u||(u=new we,this.n.set(a.sessionId,u)),o=new fR(n.extension,a,this.g,this.u.converter,u);const h=await this.C(a,n.extension),p=Ld.to(a,c,h),f=n.invoke(p,{history:l},o.apiObject,s);return await $b(Promise.resolve(f).then(m=>{if(m?.metadata)try{JSON.stringify(m.metadata)}catch(x){const S=`result.metadata MUST be JSON.stringify-able. Got error: ${x.message}`;return this.t.error(`[${n.extension.identifier.value}] [@${n.id}] ${S}`,n.extension),{errorDetails:{message:S},timings:o?.timings,nextQuestion:m.nextQuestion}}let w;return m?.errorDetails&&(w={...m.errorDetails,responseIsIncomplete:!0}),w?.responseIsRedacted&&T(n.extension,"chatParticipantPrivate"),{errorDetails:w,timings:o?.timings,metadata:m?.metadata,nextQuestion:m?.nextQuestion}}),s)}catch(a){return this.t.error(a,n.extension),a instanceof ji&&a.cause&&(a=a.cause),{errorDetails:{message:Qs(a),responseIsIncomplete:!0}}}finally{o?.close()}}async D(t,r){const i=[];for(const s of r.history){const n=Ps.to(s.result),o=t===s.request.agentId?n:{...n,metadata:void 0},a=s.request.variables.variables.filter(h=>!h.isTool).map(Nd.to),c=s.request.variables.variables.filter(h=>h.isTool).map(Fd.to),l=new M6(s.request.message,s.request.command,a,s.request.agentId,c);i.push(l);const u=bt(s.response.map(h=>Rd.toContent(h,this.u.converter)));i.push(new O6(u,o,s.request.agentId,s.request.command))}return i}$releaseSession(t){this.n.deleteAndDispose(t)}async $provideFollowups(t,r,i,s,n){const o=this.c.get(r);if(!o)return Promise.resolve([]);const a=tr(t),c=await this.D(o.id,s),l=Ps.to(i);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Er.some(this.c.values(),p=>p.id===u.participant&&He.equals(p.extension.identifier,o.extension.identifier));return h||this.t.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>el.from(u,a))}$acceptFeedback(t,r,i){const s=this.c.get(t);if(!s)return;const n=Ps.to(r);let o;switch(i.direction){case cf.Down:o=Uc.Unhelpful;break;case cf.Up:o=Uc.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Tt(s.extension,"chatParticipantAdditions")?i.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,r,i){const s=this.c.get(t);if(!s||i.action.kind==="vote")return;const n=d1.to(r,i,this.u.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,r,i){const s=this.c.get(t);if(!s)return[];let n=this.s.get(t);return n?n.clear():(n=new we,this.s.set(t,n)),(await s.invokeCompletionProvider(r,i)).map(a=>h1.from(a,this.u.converter,n))}async $provideWelcomeMessage(t,r){const i=this.c.get(t);if(i)return await i.provideWelcomeMessage(r)}async $provideChatTitle(t,r,i){const s=this.c.get(t);if(!s)return;const n=await this.D(s.id,{history:r});return await s.provideTitle({history:n},i)}async $provideSampleQuestions(t,r,i){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(nl.to(r),i)).map(n=>el.from(n,void 0))}},gR=class{constructor(e,t){this.extension=e,this.provider=t}},R8=class{constructor(e,t,r,i,s){this.extension=e,this.id=t,this.w=r,this.x=i,this.y=s,this.l=new I,this.m=new I}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,r){if(!this.b)return[];const i=await this.b.provideFollowups(e,t,r);return i?i.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),r=t?.icon;if(!(!t||!Ft.isThemeIcon(r)))return{...t,icon:r,message:Ee.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const r=await this.q.provideSampleQuestions(e,t);return r||[]}get apiAgent(){let e=!1,t=!1;const r=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof y?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof Qt?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:Ee.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:Ee.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:Ee.from(this.j),supportIssueReporting:this.n,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},i=this;return{get id(){return i.id},get iconPath(){return i.c},set iconPath(s){i.c=s,r()},get requestHandler(){return i.y},set requestHandler(s){pb(typeof s=="function","Invalid request handler"),i.y=s},get followupProvider(){return i.b},set followupProvider(s){i.b=s,r()},get helpTextPrefix(){return T(i.extension,"defaultChatParticipant"),i.d},set helpTextPrefix(s){T(i.extension,"defaultChatParticipant"),i.d=s,r()},get helpTextVariablesPrefix(){return T(i.extension,"defaultChatParticipant"),i.g},set helpTextVariablesPrefix(s){T(i.extension,"defaultChatParticipant"),i.g=s,r()},get helpTextPostfix(){return T(i.extension,"defaultChatParticipant"),i.j},set helpTextPostfix(s){T(i.extension,"defaultChatParticipant"),i.j=s,r()},get isSecondary(){return T(i.extension,"defaultChatParticipant"),i.k},set isSecondary(s){T(i.extension,"defaultChatParticipant"),i.k=s,r()},get supportIssueReporting(){return T(i.extension,"chatParticipantPrivate"),i.n},set supportIssueReporting(s){T(i.extension,"chatParticipantPrivate"),i.n=s,r()},get onDidReceiveFeedback(){return i.l.event},set participantVariableProvider(s){if(T(i.extension,"chatParticipantAdditions"),i.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");i.w.$registerAgentCompletionsProvider(i.x,i.id,s.triggerCharacters)}else i.w.$unregisterAgentCompletionsProvider(i.x,i.id)},get participantVariableProvider(){return T(i.extension,"chatParticipantAdditions"),i.o},set welcomeMessageProvider(s){T(i.extension,"defaultChatParticipant"),i.q=s,r()},get welcomeMessageProvider(){return T(i.extension,"defaultChatParticipant"),i.q},set titleProvider(s){T(i.extension,"defaultChatParticipant"),i.s=s,r()},get titleProvider(){return T(i.extension,"defaultChatParticipant"),i.s},onDidPerformAction:Tt(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){i.t=s,r()},get requester(){return i.t},set supportsSlowReferences(s){T(i.extension,"chatParticipantPrivate"),i.u=s,r()},get supportsSlowReferences(){return T(i.extension,"chatParticipantPrivate"),i.u},dispose(){e=!0,i.b=void 0,i.l.dispose(),i.w.$unregisterAgent(i.x)}}}invoke(e,t,r,i){return this.y(e,t,r,i)}},mR=class ME{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(z.MainThreadChatVariables)}async $resolveVariable(t,r,i,s){const n=this.b.get(t);if(n)try{if(n.resolver.resolve2){T(n.extension,"chatParticipantAdditions");const o=new vR(r,this.c),a=await n.resolver.resolve2(n.data.name,{prompt:i},o.apiObject,s);if(a&&a[0])return a[0].value}else{const o=await n.resolver.resolve(n.data.name,{prompt:i},s);if(o&&o[0])return o[0].value}}catch(o){Zf(o)}}registerVariableResolver(t,r,i,s,n,o,a,c,l){const u=ME.a++,h=l?Ft.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:r,name:i,description:s,modelDescription:n,icon:h},resolver:a}),this.c.$registerVariable(u,{id:r,name:i,description:s,modelDescription:n,isSlow:o,fullName:c,icon:h}),ae(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},vR=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(s){if(r.a){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this,i=s=>{this.d.$handleProgressChunk(this.c,s)};this.b={progress(s){t(this.progress);const n=new Bc(s),o=Dn.from(n);return i(o),this},reference(s){t(this.reference);const n=new Hi(s),o=Bi.from(n);return i(o),this},push(s){return t(this.push),s instanceof Hi?i(Bi.from(s)):s instanceof Bc&&i(Dn.from(s)),this}}}return this.b}},wR=class{constructor(e){const t=e.getProxy(z.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(r){return t.$writeText(r)}})}},L8="vscode-cdn.net",bR=`vscode-resource.${L8}`,zv=`'self' https://*.${L8}`;function kl(e,t){return e.scheme===V.http||e.scheme===V.https?e:(t&&t.authority&&t.isRemote&&e.scheme===V.file&&(e=y.from({scheme:V.vscodeRemote,authority:t.authority,path:e.path})),y.from({scheme:V.https,authority:`${e.scheme}+${yR(e.authority)}.${bR}`,path:e.path,fragment:e.fragment,query:e.query}))}function yR(e){return e.replace(/./g,t=>{const r=t.charCodeAt(0);return r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57?t:"-"+r.toString(16).padStart(4,"0")})}var xR=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r,this.a=0,this.b=new we,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const i=t.getVisibleTextEditors();for(const s of this.c.values())i.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,r,i,s){let n;for(const p of this.e.getVisibleTextEditors(!0))if(p.value===e){n=p;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new I,l=new I,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(p){return kl(p,o.f)}get cspSource(){return zv}set options(p){this.b=p,o.d.$setOptions(a,p)}get options(){return this.b}set html(p){this.a=p,o.d.$setHtml(a,p)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(p){return o.d.$postMessage(a,p)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=r,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,r,i||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function N8(e){return(t,r,i)=>{let s=null,n=null;if(typeof i.value=="function"?(s="value",n=i.value):typeof i.get=="function"&&(s="get",n=i.get),!n||typeof r=="symbol")throw new Error("not supported");i[s]=e(n,r)}}function Wv(e,t,r){return N8((i,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=r?r():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{i.apply(this,a),this[o]=r?r():void 0},e)}})}function ER(e,t,r){return N8((i,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=r?r():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},u-Date.now()))}})}function kR(e,t,r){const i=e.getProxy(z.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Li,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,x=this.b.get(w.commentControlHandle);if(!x)return w;const S=x.getCommentThread(w.commentThreadHandle);return S?S.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);return x?m.$mid===8?x.value:{thread:x.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);if(!x)return m;const S=m.commentUniqueId,C=x.getCommentByUniqueId(S);return C||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);if(!x)return m;const S=m.text,C=m.commentUniqueId,D=x.getCommentByUniqueId(C);return D?(typeof D.body=="string"?D.body=S:D.body=new yr(S),D):m}return m}})}createCommentController(m,w,x){const S=s.a++,C=new o(m,S,w,x);this.b.set(C.handle,C);const D=this.c.get(m.identifier)||[];return D.push(C),this.c.set(m.identifier,D),C.value}async $createCommentThreadTemplate(m,w,x,S){const C=this.b.get(m);C&&C.$createCommentThreadTemplate(w,x,S)}async $setActiveComment(m,w){const x=this.b.get(m);x&&x.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,x){const S=this.b.get(m);S&&S.$updateCommentThreadTemplate(w,x)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $updateCommentThread(m,w,x){this.b.get(m)?.$updateCommentThread(w,x)}async $provideCommentingRanges(m,w,x){const S=this.b.get(m);if(!S||!S.commentingRangeProvider)return Promise.resolve(void 0);const C=await r.ensureDocumentData(y.revive(w));return zt(async()=>{const D=await S.commentingRangeProvider.provideCommentingRanges(C.document,x);let M;return Array.isArray(D)?M={ranges:D,fileComments:!1}:D?M={ranges:D.ranges||[],fileComments:D.enableFileComments||!1}:M=D??void 0,M}).then(D=>{let M;return D&&(M={ranges:D.ranges.map(F=>N.from(F)),fileComments:D.fileComments}),M})}$toggleReaction(m,w,x,S,C){const D=this.b.get(m);return!D||!D.reactionHandler?Promise.resolve(void 0):zt(()=>{const M=D.getCommentThread(w);if(M){const F=M.getCommentByUniqueId(S.uniqueIdInThread);if(D!==void 0&&F&&D.reactionHandler)return D.reactionHandler(F,l(C))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g=m,this.b.collapsibleState=m,this.c.fire()}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(T(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,x,S,C,D,M,F,B){this.m=w,this.n=x,this.o=S,this.p=C,this.q=D,this.extensionDescription=M,this.r=F,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new I,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new is,this.l.value=new we,this.n===void 0&&(this.n=`${m}.${this.handle}`),i.$createCommentThread(w,this.handle,this.n,this.o,N.from(this.p),this.q.map(J=>a(this,J,this.k,this.extensionDescription)),M.identifier,this.r,B),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{i.$deleteCommentThread(w,this.handle)}});const X=this;this.value={get uri(){return X.uri},get range(){return X.range},set range(J){X.range=J},get comments(){return X.comments},set comments(J){X.comments=J},get collapsibleState(){return X.collapsibleState},set collapsibleState(J){X.collapsibleState=J},get canReply(){return X.canReply},set canReply(J){X.canReply=J},get contextValue(){return X.contextValue},set contextValue(J){X.contextValue=J},get label(){return X.label},set label(J){X.label=J},get state(){return X.state},set state(J){X.state=J},reveal:(J,Z)=>X.reveal(J,Z),hide:()=>X.hide(),dispose:()=>{X.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new we);const m=x=>Object.prototype.hasOwnProperty.call(this.b,x),w={};m("range")&&(w.range=N.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map(x=>a(this,x,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=h(this.h)),m("applicability")&&(w.applicability=p(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},i.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const x=w[0],S=w[1];if(m===S)return x}}async reveal(m,w){T(this.extensionDescription,"commentReveal");let x;m&&m.body!==void 0?x=m:w=w??m;let S=x?this.k.get(x):void 0;S??=this.k.get(this.q[0]);let C=!0,D=!1;return w?.focus===Tc.Reply?(D=!0,C=!1):w?.focus===Tc.Comment&&(C=!1),i.$revealCommentThread(this.m,this.handle,S,{preserveFocus:C,focusReply:D})}async hide(){return i.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([Wv(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&T(this.h,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,i.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return T(this.h,"activeComment"),this.e}get activeCommentThread(){return T(this.h,"activeComment"),this.f?.value}constructor(m,w,x,S){this.h=m,this.i=w,this.j=x,this.k=S,this.a=new Map,i.$registerCommentController(this.handle,x,S,this.h.identifier.value);const C=this;this.value=Object.freeze({id:C.id,label:C.label,get options(){return C.options},set options(D){C.options=D},get commentingRangeProvider(){return C.commentingRangeProvider},set commentingRangeProvider(D){C.commentingRangeProvider=D},get reactionHandler(){return C.reactionHandler},set reactionHandler(D){C.reactionHandler=D},get activeCommentThread(){return C.activeCommentThread},createCommentThread(D,M,F){return C.createCommentThread(D,M,F).value},dispose:()=>{C.dispose()}}),this.g=[],this.g.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,x){w===void 0&&T(this.h,"fileComments");const S=new n(this.id,this.handle,void 0,m,w,x,this.h,!1);return this.a.set(S.handle,S),S}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,x){const S=new n(this.id,this.handle,void 0,y.revive(m),N.to(w),[],this.h,!0,x);return S.collapsibleState=co.Expanded,this.a.set(S.handle,S),S}$updateCommentThreadTemplate(m,w){const x=this.a.get(m);x&&(x.range=N.to(w))}$updateCommentThread(m,w){const x=this.a.get(m);if(!x)return;(C=>Object.prototype.hasOwnProperty.call(w,C))("collapseState")&&(x.collapsibleState=u(w.collapseState))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(f,m,w,x){let S=w.get(m);return S||(S=++f.commentHandle,w.set(m,S)),m.state!==void 0&&T(x,"commentsDraftState"),m.reactions?.some(C=>C.reactors!==void 0)&&T(x,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:S,body:typeof m.body=="string"?m.body:Ee.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map(C=>c(C)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?od(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(m=>m.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?y.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(m=>({name:m}))}}function u(f){if(f!==void 0)switch(f){case Dc.Expanded:return co.Expanded;case Dc.Collapsed:return co.Collapsed}return co.Collapsed}function h(f){let m;if(typeof f=="object"?m=f.resolved:m=f,m!==void 0)switch(m){case Pc.Unresolved:return Za.Unresolved;case Pc.Resolved:return Za.Resolved}return Za.Unresolved}function p(f){let m;if(typeof f=="object"&&(m=f.applicability),m!==void 0)switch(m){case Ac.Current:return Ya.Current;case Ac.Outdated:return Ya.Outdated}return Ya.Current}return new s}var lf={},Pe={exports:lf};(function(e,t){if(typeof lf=="object"&&typeof Pe=="object")Pe.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof lf=="object"?lf:e)[i]=r[i]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(i,s,n){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:n})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)r.d(n,o,function(a){return i[a]}.bind(null,o));return n},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=0)}([function(e,t,r){(function(i){var s;t=e.exports=Oe,s=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var $=Array.prototype.slice.call(arguments,0);$.unshift("SEMVER"),console.log.apply(console,$)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var p=l++;c[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[p]+")";var x=l++;c[x]="(?:"+c[h]+"|"+c[p]+")";var S=l++;c[S]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var C=l++;c[C]="(?:-?("+c[x]+"(?:\\."+c[x]+")*))";var D=l++;c[D]="[0-9A-Za-z-]+";var M=l++;c[M]="(?:\\+("+c[D]+"(?:\\."+c[D]+")*))";var F=l++,B="v?"+c[f]+c[S]+"?"+c[M]+"?";c[F]="^"+B+"$";var X="[v=\\s]*"+c[m]+c[C]+"?"+c[M]+"?",J=l++;c[J]="^"+X+"$";var Z=l++;c[Z]="((?:<|>)?=?)";var $e=l++;c[$e]=c[h]+"|x|X|\\*";var de=l++;c[de]=c[u]+"|x|X|\\*";var Ze=l++;c[Ze]="[v=\\s]*("+c[de]+")(?:\\.("+c[de]+")(?:\\.("+c[de]+")(?:"+c[S]+")?"+c[M]+"?)?)?";var tt=l++;c[tt]="[v=\\s]*("+c[$e]+")(?:\\.("+c[$e]+")(?:\\.("+c[$e]+")(?:"+c[C]+")?"+c[M]+"?)?)?";var G=l++;c[G]="^"+c[Z]+"\\s*"+c[Ze]+"$";var j=l++;c[j]="^"+c[Z]+"\\s*"+c[tt]+"$";var Q=l++;c[Q]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var _=l++;c[_]="(?:~>?)";var re=l++;c[re]="(\\s*)"+c[_]+"\\s+",a[re]=new RegExp(c[re],"g");var pe=l++;c[pe]="^"+c[_]+c[Ze]+"$";var ne=l++;c[ne]="^"+c[_]+c[tt]+"$";var We=l++;c[We]="(?:\\^)";var _e=l++;c[_e]="(\\s*)"+c[We]+"\\s+",a[_e]=new RegExp(c[_e],"g");var Et=l++;c[Et]="^"+c[We]+c[Ze]+"$";var wt=l++;c[wt]="^"+c[We]+c[tt]+"$";var Mt=l++;c[Mt]="^"+c[Z]+"\\s*("+X+")$|^$";var Ke=l++;c[Ke]="^"+c[Z]+"\\s*("+B+")$|^$";var Vt=l++;c[Vt]="(\\s*)"+c[Z]+"\\s*("+X+"|"+c[Ze]+")",a[Vt]=new RegExp(c[Vt],"g");var es=l++;c[es]="^\\s*("+c[Ze]+")\\s+-\\s+("+c[Ze]+")\\s*$";var ki=l++;c[ki]="^\\s*("+c[tt]+")\\s+-\\s+("+c[tt]+")\\s*$";var Os=l++;c[Os]="(<|>)?=?\\s*\\*";for(var be=0;be<35;be++)s(be,c[be]),a[be]||(a[be]=new RegExp(c[be]));function Si($,A){if($ instanceof Oe)return $;if(typeof $!="string"||$.length>n||!(A?a[J]:a[F]).test($))return null;try{return new Oe($,A)}catch{return null}}function Oe($,A){if($ instanceof Oe){if($.loose===A)return $;$=$.version}else if(typeof $!="string")throw new TypeError("Invalid Version: "+$);if($.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Oe))return new Oe($,A);s("SemVer",$,A),this.loose=A;var L=$.trim().match(A?a[J]:a[F]);if(!L)throw new TypeError("Invalid Version: "+$);if(this.raw=$,this.major=+L[1],this.minor=+L[2],this.patch=+L[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");L[4]?this.prerelease=L[4].split(".").map(function(se){if(/^[0-9]+$/.test(se)){var fe=+se;if(fe>=0&&fe<o)return fe}return se}):this.prerelease=[],this.build=L[5]?L[5].split("."):[],this.format()}t.parse=Si,t.valid=function($,A){var L=Si($,A);return L?L.version:null},t.clean=function($,A){var L=Si($.trim().replace(/^[=v]+/,""),A);return L?L.version:null},t.SemVer=Oe,Oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Oe.prototype.toString=function(){return this.version},Oe.prototype.compare=function($){return s("SemVer.compare",this.version,this.loose,$),$ instanceof Oe||($=new Oe($,this.loose)),this.compareMain($)||this.comparePre($)},Oe.prototype.compareMain=function($){return $ instanceof Oe||($=new Oe($,this.loose)),Tr(this.major,$.major)||Tr(this.minor,$.minor)||Tr(this.patch,$.patch)},Oe.prototype.comparePre=function($){if($ instanceof Oe||($=new Oe($,this.loose)),this.prerelease.length&&!$.prerelease.length)return-1;if(!this.prerelease.length&&$.prerelease.length)return 1;if(!this.prerelease.length&&!$.prerelease.length)return 0;var A=0;do{var L=this.prerelease[A],se=$.prerelease[A];if(s("prerelease compare",A,L,se),L===void 0&&se===void 0)return 0;if(se===void 0)return 1;if(L===void 0)return-1;if(L!==se)return Tr(L,se)}while(++A)},Oe.prototype.inc=function($,A){switch($){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A),this.inc("pre",A);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",A),this.inc("pre",A);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var L=this.prerelease.length;--L>=0;)typeof this.prerelease[L]=="number"&&(this.prerelease[L]++,L=-2);L===-1&&this.prerelease.push(0)}A&&(this.prerelease[0]===A?isNaN(this.prerelease[1])&&(this.prerelease=[A,0]):this.prerelease=[A,0]);break;default:throw new Error("invalid increment argument: "+$)}return this.format(),this.raw=this.version,this},t.inc=function($,A,L,se){typeof L=="string"&&(se=L,L=void 0);try{return new Oe($,L).inc(A,se).version}catch{return null}},t.diff=function($,A){if(wa($,A))return null;var L=Si($),se=Si(A);if(L.prerelease.length||se.prerelease.length){for(var fe in L)if((fe==="major"||fe==="minor"||fe==="patch")&&L[fe]!==se[fe])return"pre"+fe;return"prerelease"}for(var fe in L)if((fe==="major"||fe==="minor"||fe==="patch")&&L[fe]!==se[fe])return fe},t.compareIdentifiers=Tr;var ni=/^[0-9]+$/;function Tr($,A){var L=ni.test($),se=ni.test(A);return L&&se&&($=+$,A=+A),L&&!se?-1:se&&!L?1:$<A?-1:$>A?1:0}function Rr($,A,L){return new Oe($,L).compare(new Oe(A,L))}function Hn($,A,L){return Rr($,A,L)>0}function jn($,A,L){return Rr($,A,L)<0}function wa($,A,L){return Rr($,A,L)===0}function ba($,A,L){return Rr($,A,L)!==0}function ya($,A,L){return Rr($,A,L)>=0}function _n($,A,L){return Rr($,A,L)<=0}function Bn($,A,L,se){var fe;switch(A){case"===":typeof $=="object"&&($=$.version),typeof L=="object"&&(L=L.version),fe=$===L;break;case"!==":typeof $=="object"&&($=$.version),typeof L=="object"&&(L=L.version),fe=$!==L;break;case"":case"=":case"==":fe=wa($,L,se);break;case"!=":fe=ba($,L,se);break;case">":fe=Hn($,L,se);break;case">=":fe=ya($,L,se);break;case"<":fe=jn($,L,se);break;case"<=":fe=_n($,L,se);break;default:throw new TypeError("Invalid operator: "+A)}return fe}function qt($,A){if($ instanceof qt){if($.loose===A)return $;$=$.value}if(!(this instanceof qt))return new qt($,A);s("comparator",$,A),this.loose=A,this.parse($),this.semver===$i?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function($,A){return Tr(A,$)},t.major=function($,A){return new Oe($,A).major},t.minor=function($,A){return new Oe($,A).minor},t.patch=function($,A){return new Oe($,A).patch},t.compare=Rr,t.compareLoose=function($,A){return Rr($,A,!0)},t.rcompare=function($,A,L){return Rr(A,$,L)},t.sort=function($,A){return $.sort(function(L,se){return t.compare(L,se,A)})},t.rsort=function($,A){return $.sort(function(L,se){return t.rcompare(L,se,A)})},t.gt=Hn,t.lt=jn,t.eq=wa,t.neq=ba,t.gte=ya,t.lte=_n,t.cmp=Bn,t.Comparator=qt;var $i={};function at($,A){if($ instanceof at)return $.loose===A?$:new at($.raw,A);if($ instanceof qt)return new at($.value,A);if(!(this instanceof at))return new at($,A);if(this.loose=A,this.raw=$,this.set=$.split(/\s*\|\|\s*/).map(function(L){return this.parseRange(L.trim())},this).filter(function(L){return L.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+$);this.format()}function Bt($){return!$||$.toLowerCase()==="x"||$==="*"}function ts($,A,L,se,fe,Dt,Ae,Gt,ut,Ot,hr,ct,E){return((A=Bt(L)?"":Bt(se)?">="+L+".0.0":Bt(fe)?">="+L+"."+se+".0":">="+A)+" "+(Gt=Bt(ut)?"":Bt(Ot)?"<"+(+ut+1)+".0.0":Bt(hr)?"<"+ut+"."+(+Ot+1)+".0":ct?"<="+ut+"."+Ot+"."+hr+"-"+ct:"<="+Gt)).trim()}function Gf($,A){for(var L=0;L<$.length;L++)if(!$[L].test(A))return!1;if(A.prerelease.length){for(L=0;L<$.length;L++)if(s($[L].semver),$[L].semver!==$i&&$[L].semver.prerelease.length>0){var se=$[L].semver;if(se.major===A.major&&se.minor===A.minor&&se.patch===A.patch)return!0}return!1}return!0}function zn($,A,L){try{A=new at(A,L)}catch{return!1}return A.test($)}function rs($,A,L,se){var fe,Dt,Ae,Gt,ut;switch($=new Oe($,se),A=new at(A,se),L){case">":fe=Hn,Dt=_n,Ae=jn,Gt=">",ut=">=";break;case"<":fe=jn,Dt=ya,Ae=Hn,Gt="<",ut="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zn($,A,se))return!1;for(var Ot=0;Ot<A.set.length;++Ot){var hr=A.set[Ot],ct=null,E=null;if(hr.forEach(function(ht){ht.semver===$i&&(ht=new qt(">=0.0.0")),ct=ct||ht,E=E||ht,fe(ht.semver,ct.semver,se)?ct=ht:Ae(ht.semver,E.semver,se)&&(E=ht)}),ct.operator===Gt||ct.operator===ut||(!E.operator||E.operator===Gt)&&Dt($,E.semver)||E.operator===ut&&Ae($,E.semver))return!1}return!0}qt.prototype.parse=function($){var A=this.loose?a[Mt]:a[Ke],L=$.match(A);if(!L)throw new TypeError("Invalid comparator: "+$);this.operator=L[1],this.operator==="="&&(this.operator=""),L[2]?this.semver=new Oe(L[2],this.loose):this.semver=$i},qt.prototype.toString=function(){return this.value},qt.prototype.test=function($){return s("Comparator.test",$,this.loose),this.semver===$i||(typeof $=="string"&&($=new Oe($,this.loose)),Bn($,this.operator,this.semver,this.loose))},qt.prototype.intersects=function($,A){if(!($ instanceof qt))throw new TypeError("a Comparator is required");var L;if(this.operator==="")return L=new at($.value,A),zn(this.value,L,A);if($.operator==="")return L=new at(this.value,A),zn($.semver,L,A);var se=!(this.operator!==">="&&this.operator!==">"||$.operator!==">="&&$.operator!==">"),fe=!(this.operator!=="<="&&this.operator!=="<"||$.operator!=="<="&&$.operator!=="<"),Dt=this.semver.version===$.semver.version,Ae=!(this.operator!==">="&&this.operator!=="<="||$.operator!==">="&&$.operator!=="<="),Gt=Bn(this.semver,"<",$.semver,A)&&(this.operator===">="||this.operator===">")&&($.operator==="<="||$.operator==="<"),ut=Bn(this.semver,">",$.semver,A)&&(this.operator==="<="||this.operator==="<")&&($.operator===">="||$.operator===">");return se||fe||Dt&&Ae||Gt||ut},t.Range=at,at.prototype.format=function(){return this.range=this.set.map(function($){return $.join(" ").trim()}).join("||").trim(),this.range},at.prototype.toString=function(){return this.range},at.prototype.parseRange=function($){var A=this.loose;$=$.trim(),s("range",$,A);var L=A?a[ki]:a[es];$=$.replace(L,ts),s("hyphen replace",$),$=$.replace(a[Vt],"$1$2$3"),s("comparator trim",$,a[Vt]),$=($=($=$.replace(a[re],"$1~")).replace(a[_e],"$1^")).split(/\s+/).join(" ");var se=A?a[Mt]:a[Ke],fe=$.split(" ").map(function(Dt){return function(Ae,Gt){return s("comp",Ae),Ae=function(ut,Ot){return ut.trim().split(/\s+/).map(function(hr){return function(ct,E){s("caret",ct,E);var ht=E?a[wt]:a[Et];return ct.replace(ht,function(Xt,U,Y,Ye,ot){var Pt;return s("caret",ct,Xt,U,Y,Ye,ot),Bt(U)?Pt="":Bt(Y)?Pt=">="+U+".0.0 <"+(+U+1)+".0.0":Bt(Ye)?Pt=U==="0"?">="+U+"."+Y+".0 <"+U+"."+(+Y+1)+".0":">="+U+"."+Y+".0 <"+(+U+1)+".0.0":ot?(s("replaceCaret pr",ot),ot.charAt(0)!=="-"&&(ot="-"+ot),Pt=U==="0"?Y==="0"?">="+U+"."+Y+"."+Ye+ot+" <"+U+"."+Y+"."+(+Ye+1):">="+U+"."+Y+"."+Ye+ot+" <"+U+"."+(+Y+1)+".0":">="+U+"."+Y+"."+Ye+ot+" <"+(+U+1)+".0.0"):(s("no pr"),Pt=U==="0"?Y==="0"?">="+U+"."+Y+"."+Ye+" <"+U+"."+Y+"."+(+Ye+1):">="+U+"."+Y+"."+Ye+" <"+U+"."+(+Y+1)+".0":">="+U+"."+Y+"."+Ye+" <"+(+U+1)+".0.0"),s("caret return",Pt),Pt})}(hr,Ot)}).join(" ")}(Ae,Gt),s("caret",Ae),Ae=function(ut,Ot){return ut.trim().split(/\s+/).map(function(hr){return function(ct,E){var ht=E?a[ne]:a[pe];return ct.replace(ht,function(Xt,U,Y,Ye,ot){var Pt;return s("tilde",ct,Xt,U,Y,Ye,ot),Bt(U)?Pt="":Bt(Y)?Pt=">="+U+".0.0 <"+(+U+1)+".0.0":Bt(Ye)?Pt=">="+U+"."+Y+".0 <"+U+"."+(+Y+1)+".0":ot?(s("replaceTilde pr",ot),ot.charAt(0)!=="-"&&(ot="-"+ot),Pt=">="+U+"."+Y+"."+Ye+ot+" <"+U+"."+(+Y+1)+".0"):Pt=">="+U+"."+Y+"."+Ye+" <"+U+"."+(+Y+1)+".0",s("tilde return",Pt),Pt})}(hr,Ot)}).join(" ")}(Ae,Gt),s("tildes",Ae),Ae=function(ut,Ot){return s("replaceXRanges",ut,Ot),ut.split(/\s+/).map(function(hr){return function(ct,E){ct=ct.trim();var ht=E?a[j]:a[G];return ct.replace(ht,function(Xt,U,Y,Ye,ot,Pt){s("xRange",ct,Xt,U,Y,Ye,ot,Pt);var Bl=Bt(Y),oi=Bl||Bt(Ye),Us=oi||Bt(ot);return U==="="&&Us&&(U=""),Bl?Xt=U===">"||U==="<"?"<0.0.0":"*":U&&Us?(oi&&(Ye=0),Us&&(ot=0),U===">"?(U=">=",oi?(Y=+Y+1,Ye=0,ot=0):Us&&(Ye=+Ye+1,ot=0)):U==="<="&&(U="<",oi?Y=+Y+1:Ye=+Ye+1),Xt=U+Y+"."+Ye+"."+ot):oi?Xt=">="+Y+".0.0 <"+(+Y+1)+".0.0":Us&&(Xt=">="+Y+"."+Ye+".0 <"+Y+"."+(+Ye+1)+".0"),s("xRange return",Xt),Xt})}(hr,Ot)}).join(" ")}(Ae,Gt),s("xrange",Ae),Ae=function(ut,Ot){return s("replaceStars",ut,Ot),ut.trim().replace(a[Os],"")}(Ae,Gt),s("stars",Ae),Ae}(Dt,A)}).join(" ").split(/\s+/);return this.loose&&(fe=fe.filter(function(Dt){return!!Dt.match(se)})),fe=fe.map(function(Dt){return new qt(Dt,A)})},at.prototype.intersects=function($,A){if(!($ instanceof at))throw new TypeError("a Range is required");return this.set.some(function(L){return L.every(function(se){return $.set.some(function(fe){return fe.every(function(Dt){return se.intersects(Dt,A)})})})})},t.toComparators=function($,A){return new at($,A).set.map(function(L){return L.map(function(se){return se.value}).join(" ").trim().split(" ")})},at.prototype.test=function($){if(!$)return!1;typeof $=="string"&&($=new Oe($,this.loose));for(var A=0;A<this.set.length;A++)if(Gf(this.set[A],$))return!0;return!1},t.satisfies=zn,t.maxSatisfying=function($,A,L){var se=null,fe=null;try{var Dt=new at(A,L)}catch{return null}return $.forEach(function(Ae){Dt.test(Ae)&&(se&&fe.compare(Ae)!==-1||(fe=new Oe(se=Ae,L)))}),se},t.minSatisfying=function($,A,L){var se=null,fe=null;try{var Dt=new at(A,L)}catch{return null}return $.forEach(function(Ae){Dt.test(Ae)&&(se&&fe.compare(Ae)!==1||(fe=new Oe(se=Ae,L)))}),se},t.validRange=function($,A){try{return new at($,A).range||"*"}catch{return null}},t.ltr=function($,A,L){return rs($,A,"<",L)},t.gtr=function($,A,L){return rs($,A,">",L)},t.outside=rs,t.prerelease=function($,A){var L=Si($,A);return L&&L.prerelease.length?L.prerelease:null},t.intersects=function($,A,L){return $=new at($,L),A=new at(A,L),$.intersects(A)},t.coerce=function($){if($ instanceof Oe)return $;if(typeof $!="string")return null;var A=$.match(a[Q]);return A==null?null:Si((A[1]||"0")+"."+(A[2]||"0")+"."+(A[3]||"0"))}}).call(this,r(1))},function(e,t){var r,i,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(x){if(r===setTimeout)return setTimeout(x,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(x,0);try{return r(x,0)}catch{try{return r.call(null,x,0)}catch{return r.call(this,x,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:n}catch{r=n}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var x=a(p);u=!0;for(var S=l.length;S;){for(c=l,l=[];++h<S;)c&&c[h].run();h=-1,S=l.length}c=null,u=!1,function(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}(x)}}function m(x,S){this.fun=x,this.array=S}function w(){}s.nextTick=function(x){var S=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)S[C-1]=arguments[C];l.push(new m(x,S)),l.length!==1||u||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var xH=Pe.exports.SEMVER_SPEC_VERSION,EH=Pe.exports.parse,kH=Pe.exports.valid,SH=Pe.exports.coerce,$H=Pe.exports.clean,CH=Pe.exports.inc,IH=Pe.exports.major,DH=Pe.exports.minor,PH=Pe.exports.patch,AH=Pe.exports.prerelease,TH=Pe.exports.gt,RH=Pe.exports.gte,LH=Pe.exports.lt,NH=Pe.exports.lte,FH=Pe.exports.eq,MH=Pe.exports.neq,OH=Pe.exports.cmp,UH=Pe.exports.compare,HH=Pe.exports.rcompare,jH=Pe.exports.compareIdentifiers,_H=Pe.exports.rcompareIdentifiers,BH=Pe.exports.compareBuild,zH=Pe.exports.sort,WH=Pe.exports.rsort,VH=Pe.exports.diff,qH=Pe.exports.validRange,GH=Pe.exports.satisfies,JH=Pe.exports.maxSatisfying,QH=Pe.exports.minSatisfying,ZH=Pe.exports.minVersion,YH=Pe.exports.gtr,XH=Pe.exports.ltr,KH=Pe.exports.outside,ej=Pe.exports.intersects,tj=Pe.exports.SemVer,rj=Pe.exports.Comparator,ij=Pe.exports.Range,F8=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,SR=/^-(\d{4})(\d{2})(\d{2})$/;function $R(e){return e=e.trim(),e==="*"||F8.test(e)}function M8(e){if(!$R(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(F8);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function O8(e){if(!e)return null;const t=e.majorBase,r=e.majorMustEqual,i=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=SR.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:r,minorBase:i,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var CR=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function IR(e,t){if(t.serializeBuffersForPostMessage){const r=new CR,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a)};if(ArrayBuffer.isView(a)){const c=DR(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=r.buffers.map(o=>{const a=new Uint8Array(o);return ke.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function DR(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function PR(e,t){const r=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),i=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=r[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,i),arrayBuffers:r}}var AR=class{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,r,i,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new I,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new I,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=r,this.#i=i,this.#n=s,this.#s=n,this.#u=la(n),this.#d=TR(n),this.#r=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,kl(e,this.#i)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===V.https||e.scheme===V.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+zv}return zv}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#r.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),qr(this.#o,e)||this.#t.$setOptions(this.#e,U8(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=IR(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===V.vscodeRemote,r=this.#s.extensionLocation.scheme===V.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=kl(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=kl(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`})}};function la(e){try{const t=O8(M8(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function TR(e){try{const t=O8(M8(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var RR=class extends he{constructor(e,t,r,i,s){super(),this.c=t,this.f=r,this.g=i,this.h=s,this.b=new Map,this.a=e.getProxy(z.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,r){const i=this.j(e);if(i){const{message:s}=PR(t,r.value);i._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,r){const i=new AR(e,this.a,LR(t),this.c,this.f,r,this.h);this.b.set(e,i);const s=i._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return i}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function uf(e){return{id:e.identifier,location:e.extensionLocation}}function U8(e,t,r){return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:r.localResourceRoots||NR(e,t)}}function LR(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>y.from(t))}}function NR(e,t){return[...(t?.getWorkspaceFolders()||[]).map(r=>r.uri),e.extensionLocation]}var ri=class OE{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const r=this.c++;return this.b.set(r,t),this.e(),r}get(t,r){return this.b.has(t)?this.b.get(t)[r]:void 0}delete(t){this.b.delete(t),this.e()}e(){OE.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},FR=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new ri("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=_R(this.document.uri)+this.a++;return Jt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},MR=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,r){const i=this.b(e,t.uri);if(this.a.has(i))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new FR(t,r);return this.a.set(i,s),s}delete(e,t){const r=this.b(e,t.uri);this.a.delete(r)}b(e,t){return`${e}@@@${t}`}},H8;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(H8||(H8={}));var OR=class{constructor(){this.a=new Map}addTextProvider(e,t,r){return this.b(e,{type:0,extension:t,provider:r})}addCustomProvider(e,t,r){return this.b(e,{type:1,extension:t,provider:r})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new De(()=>this.a.delete(e))}},UR=class{constructor(e,t,r,i,s){this.d=t,this.f=r,this.g=i,this.h=s,this.b=new OR,this.c=new MR,this.a=e.getProxy(z.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,r,i){const s=new we;return HR(r)?(s.add(this.b.addTextProvider(t,e,r)),this.a.$registerTextEditorProvider(uf(e),t,i.webviewOptions||{},{supportsMove:!!r.moveCustomTextEditor},la(e))):(s.add(this.b.addCustomProvider(t,e,r)),hf(r)&&s.add(r.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(jR(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(uf(e),t,i.webviewOptions||{},!!i.supportsMultipleEditorsPerDocument,la(e))),De.from(s,new De(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=y.revive(e),a=await n.provider.openCustomDocument(o,{backupId:r,untitledDocumentData:i?.buffer},s);let c;return hf(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:hf(n.provider)}}async $disposeCustomDocument(e,t){const r=this.b.get(t);if(!r)throw new Error(`No provider found for '${t}'`);if(r.type!==1)throw new Error(`Invalid provider type for '${t}'`);const i=y.revive(e),{document:s}=this.i(t,i);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,r,i,s,n){const o=this.b.get(r);if(!o)throw new Error(`No provider found for '${r}'`);const a=$t.to(s),c=this.g.createNewWebview(t,i.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,r,i.title,a,i.options,c,i.active),u=y.revive(e);switch(o.type){case 1:{const{document:h}=this.i(r,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,r){this.i(t,e).disposeEdits(r)}async $onMoveCustomEditor(e,t,r){const i=this.b.get(r);if(!i)throw new Error(`No provider found for '${r}'`);if(!i.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${r}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=y.revive(t),o=this.d.getDocument(n);await i.provider.moveCustomTextEditor(o,s,Xe.None)}async $undo(e,t,r,i){return this.i(t,e).undo(r,i)}async $redo(e,t,r,i){return this.i(t,e).redo(r,i)}async $revert(e,t,r){const i=this.i(t,e);await this.j(t).revertCustomDocument(i.document,r),i.disposeBackup()}async $onSave(e,t,r){const i=this.i(t,e);await this.j(t).saveCustomDocument(i.document,r),i.disposeBackup()}async $onSaveAs(e,t,r,i){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,y.revive(r),i)}async $backup(e,t,r){const i=this.i(t,e),n=await this.j(t).backupCustomDocument(i.document,{destination:i.getNewBackupUri()},r);return i.updateBackup(n),n.id}i(e,t){const r=this.c.get(e,y.revive(t));if(!r)throw new Error("No custom document found");return r}j(e){const r=this.b.get(e)?.provider;if(!r||!hf(r))throw new Error("Custom document is not editable");return r}};function hf(e){return!!e.onDidChangeCustomDocument}function HR(e){return typeof e.resolveCustomTextEditor=="function"}function jR(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function _R(e){const t=e.scheme===V.file||e.scheme===V.untitled?e.fsPath:e.toString();return Oa(t)+""}var Ln,j8=class UE{#e;#t;#r;constructor(t,r,i,s,n,o,a,c){this.d=t,this.e=r,this.f=i,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,i),this.#r=new Lt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#r.keys()]),this.#e?.$clear(this.e),this.#r.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,r){if(!t){this.clear();return}this.j();let i=[];if(y.isUri(t)){if(!r){this.delete(t);return}this.#r.set(t,r.slice()),i=[t]}else if(Array.isArray(t)){i=[];let o;t=[...t].sort(UE.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#r.get(o).length===0&&this.#r.delete(o),o=c,i.push(c),this.#r.set(c,[])),l)this.#r.get(c)?.push(...l);else{const u=this.#r.get(c);u&&(u.length=0)}}}if(this.#t.fire(i),!this.#e)return;const s=[];let n=0;for(const o of i){let a=[];const c=this.#r.get(o);if(c)if(c.length>this.g){a=[];const l=[_t.Error,_t.Warning,_t.Information,_t.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...jo.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:ir.Info,message:d(2714,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...jo.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#r.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#r.keys()]),this.#r.clear(),this.#e?.$clear(this.e)}forEach(t,r){this.j();for(const[i,s]of this)t.call(r,i,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#r.keys())yield[t,this.get(t)]}get(t){this.j();const r=this.#r.get(t);return Array.isArray(r)?Object.freeze(r.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#r.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,r){return t[0].toString()<r[0].toString()?-1:t[0].toString()>r[0].toString()?1:0}},Vv=class{static{Ln=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const r=new Lt;for(const i of t)r.set(i,i);return{uris:Object.freeze(Array.from(r.values()))}}constructor(t,r,i,s){this.j=r,this.k=i,this.l=s,this.g=new Map,this.h=new l3({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=lt.map(this.h.event,Ln._mapper),this.f=t.getProxy(z.MainThreadDiagnostics)}createDiagnosticCollection(t,r){const{g:i,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(p,f){s.$changeMany(p,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,p,f.length===0?"CLEARING":f)}$clear(p){s.$clear(p),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,p)}dispose(){s.dispose()}};let u;if(!r)r="_generated_diagnostic_collection_name_#"+Ln.c++,u=r;else if(!i.has(r))u=r;else{this.j.warn(`DiagnosticCollection with name '${r}' does already exist.`);do u=r+Ln.c++;while(i.has(u))}return new class extends j8{constructor(){super(r,u,Ln.e,Ln.d,p=>c.getDocument(p)?.version,a.extUri,l,n),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const r=new Map,i=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=r.get(n.toString());typeof a>"u"&&(a=i.length,r.set(n.toString(),a),i.push([n,[]])),i[a][1]=i[a][1].concat(...o)});return i}}m(t){let r=[];for(const i of this.g.values())i.has(t)&&(r=r.concat(i.get(t)));return r}$acceptMarkersChange(t){if(!this.n){const r="_generated_mirror",i=new j8(r,r,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(r,i),this.n=i}for(const[r,i]of t)this.n.set(y.revive(r),i.map(jo.to))}};Vv=Ln=__decorate([__param(1,Ue),__param(2,no)],Vv);var BR=class{constructor(e){this.a=e.getProxy(z.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&T(e,"showLocal"),this.a.$showOpenDialog(t).then(r=>r?r.map(i=>y.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}},zR=class HE{static{this.a=0}constructor(t,r,i){this.d=r,this.e=i,this.b=new Map,this.c=t.getProxy(z.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,r){if(Object.keys(V).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const i=HE.a++;this.b.set(i,r),this.c.$registerTextContentProvider(i,t);let s;if(typeof r.onDidChange=="function"){let n;s=r.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=rb(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(fr).finally(()=>{n===a&&(n=void 0)});n=a})}return new De(()=>{this.b.delete(i)&&this.c.$unregisterTextContentProvider(i),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,r){const i=this.b.get(t);return i?Promise.resolve(i.provideTextDocumentContent(y.revive(r),Xe.None)):Promise.reject(new Error(`unsupported uri-scheme: ${r.scheme}`))}},WR=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=r,this.g=i,this.a=new $a,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,r,i)=>{const n={dispose:this.a.push([t,r,e])};return Array.isArray(i)&&i.push(n),n}}async $participateInSave(e,t){const r=y.revive(e);let i=!1;const s=setTimeout(()=>i=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(i)break;const a=this.d.getDocument(r),c=await this.h(o,{document:a,reason:md.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,r],i){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(r,e,t,i).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,r,i){const s=[],n=Date.now(),{document:o,reason:a}=i,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw Yf("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(r,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const p=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(p),u(f)}).catch(f=>{clearTimeout(p),h(f)})}).then(u=>{const h={edits:[]};for(const p of u)if(Array.isArray(p)&&p.every(f=>f instanceof bs))for(const{newText:f,newEol:m,range:w}of p)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&N.from(w),text:f,eol:m&&Vo.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new Sr(h)):Promise.reject(new Error("concurrent_edits"))})}},VR=class{constructor(e,t){this.a=new I,this.b=new I,this.c=new I,this.d=new I,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new we,this.h=new Map,this.f=e.getProxy(z.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(r=>{for(const i of r)this.b.fire(i.document)},void 0,this.e),this.g.onDidAddDocuments(r=>{for(const i of r)this.a.fire(i.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let r=this.h.get(e.toString());return r||(r=this.f.$tryOpenDocument(e).then(i=>{this.h.delete(e.toString());const s=y.revive(i);return Kn(this.g.getDocument(s))},i=>(this.h.delete(e.toString()),Promise.reject(i))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const r=y.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");this.b.fire(i.document),i._acceptLanguageId(t),this.a.fire(i.document)}$acceptModelSaved(e){const t=y.revive(e),r=this.g.getDocument(t);if(!r)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(r.document)}$acceptDirtyStateChanged(e,t){const r=y.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptIsDirty(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,r){const i=y.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(r),s.onEvents(t);let n;t.isUndoing?n=yc.Undo:t.isRedoing&&(n=yc.Redo),this.c.fire(hy({document:s.document,contentChanges:t.changes.map(o=>({range:N.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){rA(e,t)}},qR=class{constructor(e){this.b=new Map,this.c=new I,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(z.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,r){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const i=this.e++;return this.a.$registerEmbeddingProvider(i,t),this.b.set(i,{id:t,provider:r}),ae(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(i),this.b.delete(i)})}async computeEmbeddings(e,t,r){r??=Xe.None;let i=!1;typeof t=="string"&&(t=[t],i=!0);const s=await this.a.$computeEmbeddings(e,t,r);if(s.length!==t.length)throw new Error;if(i){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,r){const i=this.b.get(e);if(!i)return[];const s=await i.provider.provideEmbeddings(t,r);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},GR=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(z.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,r){if(this.a.size===0)throw new Error("No embedding vector providers registered");const i=this.a.get(e);if(!i)throw new Error("Embedding vector provider not found");const s=await i.provideEmbeddingVector(t,r);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiEmbeddingVectorProvider(t,i),new De(()=>{this.c.$unregisterAiEmbeddingVectorProvider(i),this.a.delete(i)})}},_8;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(_8||(_8={}));var JR=class{constructor(e,t,r){const i=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)i[s]=r;this.a=i,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,r){this.a[e*this.cols+t]=r}},B8=class{constructor(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>r&&(r=o),c>r&&(r=c)}t++,r++;const i=new JR(r,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];i.set(o,a,c)}this.a=i,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},qv=null;function QR(){return qv===null&&(qv=new B8([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),qv}var z8;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(z8||(z8={}));var Sl=null;function ZR(){if(Sl===null){Sl=new Z7(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let r=0;r<e.length;r++)Sl.set(e.charCodeAt(r),1);const t=".,;:";for(let r=0;r<t.length;r++)Sl.set(t.charCodeAt(r),2)}return Sl}var YR=class W0{static a(t,r,i,s,n){let o=n-1;do{const a=r.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=r.charCodeAt(s-1),c=r.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:r.substring(s,o+1)}}static computeLinks(t,r=QR()){const i=ZR(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,p=1,f=!1,m=!1,w=!1,x=!1;for(;l<c;){let S=!1;const C=a.charCodeAt(l);if(p===13){let D;switch(C){case 40:f=!0,D=0;break;case 41:D=f?0:1;break;case 91:w=!0,m=!0,D=0;break;case 93:w=!1,D=m?0:1;break;case 123:x=!0,D=0;break;case 125:D=x?0:1;break;case 39:case 34:case 96:h===C?D=1:h===39||h===34||h===96?D=0:D=1;break;case 42:D=h===42?1:0;break;case 124:D=h===124?1:0;break;case 32:D=w?0:1;break;default:D=i.get(C)}D===1&&(s.push(W0.a(i,a,n,u,l)),S=!0)}else if(p===12){let D;C===91?(m=!0,D=0):D=i.get(C),D===1?S=!0:p=13}else p=r.nextState(p,C),p===0&&(S=!0);S&&(p=1,f=!1,m=!1,x=!1,u=l+1,h=C),l++}p===13&&s.push(W0.a(i,a,n,u,c))}return s}},XR=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let r,i,s=14,n=14;for(const o of e){let a=r?eS(r,o):0;for(a===0?i=1:i=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([i,o.toUpperCase().charCodeAt(a),n]),t.push([i,o.toLowerCase().charCodeAt(a),n]),i=n;r=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new B8(t)}}provideDocumentLinks(e){this.c();const t=[],r=YR.computeLinks({getLineContent(i){return e.lineAt(i-1).text},getLineCount(){return e.lineCount}},this.b);for(const i of r){const s=Cn.to(i);s.target&&t.push(s)}return t}},KR=class V0{constructor(t,r){this.i=r,this.b=new XR,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(z.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,r,i,s={}){if(V0.j(i),this.d.has(r))throw new Error(`a provider for the scheme '${r}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(r),this.d.add(r),this.c.set(n,i);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(T(t,"fsChunks"),o+=4);let a;s.isReadonly&&Xs(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,r,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${r}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:p,type:f}=h;if(p.scheme!==r)continue;let m;switch(f){case Ro.Changed:m=0;break;case Ro.Created:m=1;break;case Ro.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:p,type:m})}this.a.$onFileSystemChange(n,u)});return ae(()=>{c.dispose(),this.b.delete(r),this.d.delete(r),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:r,ctime:i,mtime:s,size:n,permissions:o}=t;return{type:r,ctime:i,mtime:s,size:n,permissions:o}}$stat(t,r){return Promise.resolve(this.l(t).stat(y.revive(r))).then(i=>V0.k(i))}$readdir(t,r){return Promise.resolve(this.l(t).readDirectory(y.revive(r)))}$readFile(t,r){return Promise.resolve(this.l(t).readFile(y.revive(r))).then(i=>ke.wrap(i))}$writeFile(t,r,i,s){return Promise.resolve(this.l(t).writeFile(y.revive(r),i.buffer,s))}$delete(t,r,i){return Promise.resolve(this.l(t).delete(y.revive(r),i))}$rename(t,r,i,s){return Promise.resolve(this.l(t).rename(y.revive(r),y.revive(i),s))}$copy(t,r,i,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(y.revive(r),y.revive(i),s))}$mkdir(t,r){return Promise.resolve(this.l(t).createDirectory(y.revive(r)))}$watch(t,r,i,s){const n=this.l(t).watch(y.revive(i),s);this.f.set(r,n)}$unwatch(t,r){const i=this.f.get(r);i&&(i.dispose(),this.f.delete(r))}$open(t,r,i){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(y.revive(r),i))}$close(t,r){const i=this.l(t);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(r))}$read(t,r,i,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=ke.alloc(s);return Promise.resolve(n.read(r,i,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,r,i,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(r,i,s.buffer,0,s.byteLength))}l(t){const r=this.c.get(t);if(!r){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return r}},nj=class jE extends he{static{this.a=5}constructor(t,r,i,s){super(),this.h=t,this.j=r,this.m=i,this.n=s,this.c=this.B(new is),this.f=void 0,this.g=0}s(){const t=new we;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(r=>this.h(r))),t.add(this.b.onDidLogMessage(r=>this.j(r))),t.add(this.b.onDidError(r=>this.t(r.error,r.request)))}t(t,r){this.u(t,r)?this.g<jE.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,r){return!(!this.n.restartOnError||r||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function eL(e,t){return typeof t=="string"&&!t.startsWith(cn)&&!iu(t)?{base:e,pattern:t}:t}var tL=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,r,i,s,n,o){this.a=Math.random(),this.b=new I,this.c=new I,this.d=new I,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=mo(n),c=typeof n=="string",l=o.correlate,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const p of h.created){const f=y.revive(p);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const p of h.changed){const f=y.revive(p);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const p of h.deleted){const f=y.revive(p);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=De.from(this.i(e,r,t,i,n,o,o.correlate),this.b,this.c,this.d,u)}i(e,t,r,i,s,n,o){const a=De.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(z.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(cn)||s.pattern.includes(Cg))&&(l=!0);const u=n.excludes??[];let h,p;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(p=14,n.ignoreChangeEvents&&(p&=-3),n.ignoreCreateEvents&&(p&=-5),n.ignoreDeleteEvents&&(p&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(y.revive(s.baseUri)),m=r.getConfiguration("files",f).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const f=t.getWorkspaceFolder(y.revive(s.baseUri));if(f){const m=r.getConfiguration("files",f).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const x=`${xp(w,"/")}/${cn}`;h||(h=[]),h.push(eL(f.uri.fsPath,x))}}if(!h||h.length===0)return a}}return c.$watch(i.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:p},!!o),De.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},rL=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new dr(()=>this.a.created.map(y.revive)),this.c=new dr(()=>this.a.changed.map(y.revive)),this.d=new dr(()=>this.a.deleted.map(y.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},iL=class{constructor(e,t,r){this.j=e,this.k=t,this.l=r,this.a=new I,this.b=new I,this.c=new I,this.d=new I,this.g=new Ca,this.h=new Ca,this.i=new Ca,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,r,i,s){return new tL(this.j,t,e,r,this.a.event,xr.from(i),s)}$onFileEvent(e){this.a.fire(new rL(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(r=>({oldUri:y.revive(r.source),newUri:y.revive(r.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(r=>y.revive(r.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(r=>y.revive(r.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,r,i){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},r,i);case 1:return await this.n(this.i,{files:t.map(s=>y.revive(s.target))},r,i);case 0:case 3:return await this.n(this.h,{files:t.map(s=>y.revive(s.target))},r,i)}}async n(e,t,r,i){const s=new Set,n=[];if(await e.fireAsync(t,i,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof dn&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>r&&this.k.warn("SLOW file-participant",c.extension.identifier)}),i.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=Yt.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},sL=class{constructor(e,t,r,i,s){this.a=t,this.b=r,this.c=i;const n=new le("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new O("showOptions","Show Options",o=>!0,o=>o),new O("resource","Interactive resource Uri",o=>!0,o=>o),new O("controllerId","Notebook controller Id",o=>!0,o=>o),new O("title","Interactive editor title",o=>!0,o=>o)],new ce("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,r,i){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:r,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},nL=class{constructor(e){this.b=0,this.a=e.getProxy(z.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),ae(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},W8;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(W8||(W8={}));var oL=class Hr extends ze{constructor(t,r,i,s){super(t,r,i,s),this.selectionStartLineNumber=t,this.selectionStartColumn=r,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return Hr.selectionsEqual(this,t)}static selectionsEqual(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,r){return this.getDirection()===0?new Hr(this.startLineNumber,this.startColumn,t,r):new Hr(t,r,this.startLineNumber,this.startColumn)}getPosition(){return new Ir(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ir(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,r){return this.getDirection()===0?new Hr(t,r,this.endLineNumber,this.endColumn):new Hr(this.endLineNumber,this.endColumn,t,r)}static fromPositions(t,r=t){return new Hr(t.lineNumber,t.column,r.lineNumber,r.column)}static fromRange(t,r){return r===0?new Hr(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Hr(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new Hr(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,r,i,s,n){return n===0?new Hr(t,r,i,s):new Hr(i,s,t,r)}},V8=class _E{constructor(t,r){this.d=t,this.e=r}async provideDocumentSymbols(t,r){const i=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(i,r);if(!Kf(s))return s[0]instanceof gc?s.map(Wm.from):_E.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const r=[],i=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:Fr.from(s.kind),tags:s.tags?.map(_i.from)||[],detail:"",containerName:s.containerName,range:N.from(s.location.range),selectionRange:N.from(s.location.range),children:[]};for(;;){if(i.length===0){i.push(n),r.push(n);break}const o=i[i.length-1];if(ze.containsRange(o.range,n.range)&&!ze.equalsRange(o.range,n.range)){o.children?.push(n),i.push(n);break}i.pop()}}return r}},df=class{constructor(e,t,r,i,s,n){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.d=new ri("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const r=this.f.getDocument(e),i=await this.h.provideCodeLenses(r,t);if(!i||t.isCancellationRequested)return;const s=this.d.add(i),n=new we;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<i.length;a++)o.lenses.push({cacheId:[s,a],range:N.from(i[a].range),command:this.g.toInternal(i[a].command,n)});return o}async resolveCodeLens(e,t){const r=e.cacheId&&this.d.get(...e.cacheId);if(!r)return;let i;if(typeof this.h.resolveCodeLens!="function"||r.isResolved?i=r:i=await this.h.resolveCodeLens(r,t),i||(i=r),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!i.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(i.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function ff(e){return Array.isArray(e)?e.map(Gc.from):e?[Gc.from(e)]:[]}var q8=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDefinition(i,s,r);return ff(n)}},G8=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDeclaration(i,s,r);return ff(n)}},J8=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideImplementation(i,s,r);return ff(n)}},Q8=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideTypeDefinition(i,s,r);return ff(n)}},Gv=class BE{static{this.f=10}constructor(t,r){this.g=t,this.h=r,this.d=0,this.e=new Map}async provideHover(t,r,i,s){const n=this.g.getDocument(t),o=Fe.to(r);let a;if(i&&i.verbosityRequest){const h=i.verbosityRequest.previousHover.id,p=this.e.get(h);if(!p)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:p};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||Kf(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new ve(o,o));const c=Jc.from(a),l=this.d;if(this.e.size===BE.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},Z8=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideEvaluatableExpression(i,s,r);if(n)return Gm.from(n)}},Y8=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,r,i){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,N.to(t),ld.to(r),i);if(Array.isArray(n))return n.map(o=>cd.from(o))}},X8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideDocumentHighlights(i,s,r);if(Array.isArray(n))return n.map(Bo.from)}},K8=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideMultiDocumentHighlights(e,t,r,i){const s=this.d.getDocument(e),n=r.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Fe.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,i);if(Array.isArray(a))return a.map(Jm.from)}},ex=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,r){const i=this.d.getDocument(e),s=Fe.to(t),n=await this.e.provideLinkedEditingRanges(i,s,r);if(n&&Array.isArray(n.ranges))return{ranges:bt(n.ranges.map(N.from)),wordPattern:n.wordPattern}}},tx=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,r,i){const s=this.d.getDocument(e),n=Fe.to(t),o=await this.e.provideReferences(s,n,r,i);if(Array.isArray(o))return o.map(nr.from)}},pf=class Wf{static{this.d=1e3}constructor(t,r,i,s,n,o,a){this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new ri("CodeAction"),this.f=new Map}async provideCodeActions(t,r,i,s){const n=this.g.getDocument(t),o=oL.isISelection(r)?Xr.to(r):N.to(r),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>Wf.d)break;const c={diagnostics:a,only:i.only?new st(i.only):void 0,triggerKind:c1.to(i.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!ka(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new we;this.f.set(u,h);const p=[];for(let f=0;f<l.length;f++){const m=l[f];if(m)if(Wf.o(m))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),p.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{c.only&&(m.kind?c.only.contains(m.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${m.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const w=m.ranges??[];p.push({cacheId:[u,f],title:m.title,command:m.command&&this.h.toInternal(m.command,h),diagnostics:m.diagnostics&&m.diagnostics.map(jo.from),edit:m.edit&&Yt.from(m.edit,void 0),kind:m.kind&&m.kind.value,isPreferred:m.isPreferred,isAI:Tt(this.m,"codeActionAI")?m.isAI:!1,ranges:Tt(this.m,"codeActionRanges")?bt(w.map(N.from)):void 0,disabled:m.disabled?.reason})}}return{cacheId:u,actions:p}}async resolveCodeAction(t,r){const[i,s]=t,n=this.e.get(i,s);if(!n||Wf.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,r)??n;let a;o.edit&&(a=Yt.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(i);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},$l=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new ri("DocumentPasteEdit")}async prepareDocumentPaste(e,t,r,i){if(!this.g.prepareDocumentPaste)return;const s=this.f.getDocument(e),n=t.map(c=>N.to(c)),o=Ds.toDataTransfer(r,()=>{throw new xk});if(await this.g.prepareDocumentPaste(s,n,o,i),i.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof Ch));return Ds.from(a)}async providePasteEdits(e,t,r,i,s,n){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=r.map(h=>N.to(h)),c=Ds.toDataTransfer(i,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:s.only?new Ih(s.only):void 0,triggerKind:s.triggerKind},n);if(!l||n.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,p)=>({_cacheId:[u,p],title:h.title??d(2717,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Yt.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentPasteEdit)return{};const n=await this.g.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:n.additionalEdit?Yt.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},rx=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(i,t,r);if(Array.isArray(s))return s.map(Ct.from)}},Jv=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,r,i){const s=this.d.getDocument(e),n=N.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Ct.from)}async provideDocumentRangesFormattingEdits(e,t,r,i){pb(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(N.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Ct.from)}},ix=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,r,i,s){const n=this.d.getDocument(e),o=Fe.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,r,i,s);if(Array.isArray(a))return a.map(Ct.from)}},gf=class{constructor(e,t){this.e=e,this.f=t,this.d=new ri("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const r=await this.e.provideWorkspaceSymbols(e,t);if(!ka(r))return{symbols:[]};const i=this.d.add(r),s={cacheId:i,symbols:[]};for(let n=0;n<r.length;n++){const o=r[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Sn.from(o),cacheId:[i,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const r=this.d.get(...e.cacheId);if(r){const i=await this.e.resolveWorkspaceSymbol(r,t);return i&&Ys(e,Sn.from(i),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},mf=class q0{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,r,i){this.d=t,this.e=r,this.f=i}async provideRenameEdits(t,r,i,s){const n=this.d.getDocument(t),o=Fe.to(r);try{const a=await this.e.provideRenameEdits(n,o,i,s);return a?Yt.from(a):void 0}catch(a){const c=q0.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,r,i){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=Fe.to(r);try{const o=await this.e.prepareRename(s,n,i);let a,c;if(ve.isRange(o)?(a=o,c=s.getText(o)):pt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:N.from(a),text:c}}catch(o){const a=q0.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Qv=class G0{static{this.d={[Cu.Invoke]:Ic.Invoke,[Cu.Automatic]:Ic.Automatic}}constructor(t,r,i){this.e=t,this.f=r,this.g=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,r,i,s){const n=this.e.getDocument(t),o=N.to(r);try{const a=G0.d[i],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(G0.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Zv=class{constructor(e,t){this.resultId=e,this.tokens=t}},Yv=class si{constructor(t,r){this.f=t,this.g=r,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,r,i){const s=this.f.getDocument(t),n=r!==0?this.d.get(r):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,i):await this.g.provideDocumentSemanticTokens(s,i);return n&&this.d.delete(r),o?(o=si.h(o),this.o(si.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return si.j(t)?si.k(t)?t:new Lo(new Uint32Array(t.data),t.resultId):si.l(t)?si.m(t)?t:new Fh(t.edits.map(r=>new k6(r.start,r.deleteCount,r.data?new Uint32Array(r.data):r.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const r of t.edits)if(!(r.data instanceof Uint32Array))return!1;return!0}static n(t,r){if(!si.j(r)||!t||!t.tokens)return r;const i=t.tokens,s=i.length,n=r.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&i[a]===n[a];)a++;if(a===s&&a===o)return new Fh([],r.resultId);let l=0;const u=c-a;for(;l<u&&i[s-l-1]===n[o-l-1];)l++;return new Fh([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],r.resultId)}o(t,r){if(si.j(t)){const i=this.e++;return this.d.set(i,new Zv(t.resultId,t.data)),_v({id:i,type:"full",data:t.data})}if(si.l(t)){const i=this.e++;return si.j(r)?this.d.set(i,new Zv(r.resultId,r.data)):this.d.set(i,new Zv(t.resultId)),_v({id:i,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},sx=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(i,N.to(t),r);return s?this.f(s):null}f(e){return _v({id:0,type:"full",data:e.data})}},Cl=class zE{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,r,i,s,n){this.f=t,this.g=r,this.h=i,this.j=s,this.k=n,this.d=new ri("CompletionItem"),this.e=new Map}async provideCompletionItems(t,r,i,s){const n=this.f.getDocument(t),o=Fe.to(r),a=n.getWordRangeAtPosition(o)||new ve(o,o),c=a.with({end:o}),l=new Bs,u=await this.h.provideCompletionItems(n,o,s,Zm.to(i));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new ko(u):u,p=zE.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new we;this.e.set(p,f);const m=[],w={x:p,b:m,a:{replace:N.from(a),insert:N.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let x=0;x<h.items.length;x++){const S=h.items[x],C=this.l(S,[p,x],c,a);m.push(C)}return w}async resolveCompletionItem(t,r){if(typeof this.h.resolveCompletionItem!="function")return;const i=this.d.get(...t);if(!i)return;const s=this.l(i,t),n=await this.h.resolveCompletionItem(i,r);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!qr(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,r,i,s){const n=this.e.get(r[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:r,a:t.label,b:t.kind!==void 0?hd.from(t.kind):void 0,m:t.tags&&t.tags.map(ud.from),c:t.detail,d:typeof t.documentation>"u"?void 0:Ee.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Ct.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof fn&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),ve.isRange(c)?a.j=N.from(c):c&&(!i?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:N.from(c.inserting),replace:N.from(c.replacing)}),a}},ua=class{async provideInlineCompletions(e,t,r,i){}async provideInlineEditsForRange(e,t,r,i){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,r){}handlePartialAccept(e,t,r,i){}},aL=class extends ua{constructor(e,t,r,i){super(),this.f=e,this.g=t,this.h=r,this.j=i,this.d=new nx,this.e=Tt(this.f,"inlineCompletionsAdditions"),this.k={[$u.Automatic]:Cc.Automatic,[$u.Explicit]:Cc.Invoke}}get supportsHandleEvents(){return Tt(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,r,i){const s=this.g.getDocument(e),n=Fe.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:N.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind]},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((p,f)=>{let m;p.command&&(u||(u=new we),m=this.j.toInternal(p.command,u));const w=p.insertText;return{insertText:typeof w=="string"?w:{snippet:w.value},filterText:p.filterText,range:p.range?N.from(p.range):void 0,command:m,idx:f,completeBracketPairs:this.e?p.completeBracketPairs:!1}}),commands:c.map(p=>(u||(u=new we),this.j.toInternal(p,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,r,i){if(!this.h.provideInlineEditsForRange)return;T(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=N.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:N.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],userPrompt:r.userPrompt},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((p,f)=>{let m;p.command&&(u||(u=new we),m=this.j.toInternal(p.command,u));const w=p.insertText;return{insertText:typeof w=="string"?w:{snippet:w.value},filterText:p.filterText,range:p.range?N.from(p.range):void 0,command:m,idx:f,completeBracketPairs:this.e?p.completeBracketPairs:!1}}),commands:c.map(p=>(u||(u=new we),this.j.toInternal(p,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,r){const i=this.d.get(e)?.items[t];i&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(i,r)}handlePartialAccept(e,t,r,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,r),this.h.handleDidPartiallyAcceptCompletionItem(s,f1.to(i)))}},Xv=class{async provideInlineEdits(e,t,r){const i=this.f.getDocument(e),s=await this.g.provideInlineEdit(i,{triggerKind:this.e[t.triggerKind]},r);if(!s||r.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new we),a=this.h.toInternal(s.accepted,n));let c;return s.rejected&&(n||(n=new we),c=this.h.toInternal(s.rejected,n)),n||(n=new we),{pid:o,text:s.text,range:N.from(s.range),accepted:a,rejected:c,commands:s.commands?.map(u=>this.h.toInternal(u,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,r,i){this.f=t,this.g=r,this.h=i,this.d=new nx,this.e={[Iu.Automatic]:qc.Automatic,[Iu.Invoke]:qc.Invoke}}},nx=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Kv=class{constructor(e,t){this.e=e,this.f=t,this.d=new ri("SignatureHelp")}async provideSignatureHelp(e,t,r,i){const s=this.e.getDocument(e),n=Fe.to(t),o=this.g(r),a=await this.f.provideSignatureHelp(s,n,i,o);if(a){const c=this.d.add([a]);return{...Qc.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const r=Qc.to(e.activeSignatureHelp),i=this.d.get(e.activeSignatureHelp.id,0);i?(t=i,t.activeSignature=r.activeSignature,t.activeParameter=r.activeParameter):t=r}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},vf=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.d=new ri("InlayHints"),this.e=new Map}async provideInlayHints(e,t,r){const i=this.f.getDocument(e),s=N.to(t),n=await this.h.provideInlayHints(i,s,r);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(r.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new we);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const r=this.d.get(...e);if(!r)return;const i=await this.h.resolveInlayHint(r,t);if(i&&this.l(i))return this.m(i,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(r=>r.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const r=this.e.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const i={label:"",cacheId:t,tooltip:Ee.fromStrict(e.tooltip),position:Fe.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Ct.from),kind:e.kind&&pd.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")i.label=e.label;else{const s=[];i.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:Ee.fromStrict(n.tooltip)};Dr.isLocation(n.location)&&(o.location=nr.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,r)),s.push(o)}}return i}},wf=class Vf{constructor(t,r){this.e=t,this.f=r,this.d=new ri("DocumentLink")}async provideLinks(t,r){const i=this.e.getDocument(t),s=await this.f.provideDocumentLinks(i,r);if(!(!Array.isArray(s)||s.length===0)&&!r.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(Vf.g).map(Cn.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!Vf.g(s[a]))continue;const c=Cn.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,r){if(typeof this.f.resolveDocumentLink!="function")return;const i=this.d.get(...t);if(!i)return;const s=await this.f.resolveDocumentLink(i,r);if(!(!s||!Vf.g(s)))return Cn.from(s)}releaseLinks(t){this.d.delete(t)}},e0=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const r=this.d.getDocument(e),i=await this.e.provideDocumentColors(r,t);return Array.isArray(i)?i.map(n=>({color:zo.from(n.color),range:N.from(n.range)})):[]}async provideColorPresentations(e,t,r){const i=this.d.getDocument(e),s=N.to(t.range),n=zo.to(t.color),o=await this.e.provideColorPresentations(n,{document:i,range:s},r);if(Array.isArray(o))return o.map(gd.from)}},ox=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideFoldingRanges(i,t,r);if(Array.isArray(s))return s.map(vd.from)}},ax=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideSelectionRanges(e,t,r){const i=this.d.getDocument(e),s=t.map(Fe.to),n=await this.e.provideSelectionRanges(i,s,r);if(!ka(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(e1.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Il=class{constructor(e,t){this.f=e,this.g=t,this.d=new Jd(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Fe.to(t),n=await this.g.prepareCallHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(i,r);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>N.from(o))}))}async provideCallsFrom(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(i,r);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>N.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=$n.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},Dl=class{constructor(e,t){this.f=e,this.g=t,this.d=new Jd(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Fe.to(t),n=await this.g.prepareTypeHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(i,r);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(i,r);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=In.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},bf=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new ri("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,r,i,s){const n=this.f.getDocument(t),o=Fe.to(r),a=Ds.toDataTransfer(i,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=jr(c),u=this.d.add(l);return l.map((h,p)=>({_cacheId:[u,p],title:h.title??d(2718,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Yt.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?Yt.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},cx=class{constructor(e,t){this.d=e,this.e=t}async provideMappedEdits(e,t,r,i){const s=y.revive(e),n=this.d.getDocument(s),o=u=>({uri:y.revive(u.uri),version:u.version,ranges:u.ranges.map(h=>N.to(h))}),a=r.documents.map(u=>u.map(o)),c={documents:a,selections:a[0]?.[0]?.ranges??[],conversation:r.conversation?.map(u=>u.type==="response"?{type:"response",message:u.message,references:u.references?.map(o)}:{type:"request",message:u.message})},l=await this.e.provideMappedEdits(n,t,c,i);return l?Yt.from(l):null}},Pl=class{constructor(e,t){this.adapter=e,this.extension=t}},cL=class Rt{static{this.d=0}constructor(t,r,i,s,n,o,a,c){this.g=r,this.h=i,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(z.MainThreadLanguageFeatures)}o(t,r){return Ho.from(t,this.g,r)}p(t){return new De(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Rt.d++}async s(t,r,i,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof r))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{Hs(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Xe.isCancellationToken(n)?MS(l,n):l}t(t,r){const i=this.q();return this.f.set(i,new Pl(t,r)),i}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,r,i,s){const n=this.t(new V8(this.h,i),t),o=s&&s.label||Rt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(r,t),o),this.p(n)}$provideDocumentSymbols(t,r,i){return this.s(t,V8,s=>s.provideDocumentSymbols(y.revive(r),i),void 0,i)}registerCodeLensProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new Pl(new df(this.h,this.j.converter,i,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(r,t),n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=De.from(o,a)}return o}$provideCodeLenses(t,r,i){return this.s(t,df,s=>s.provideCodeLenses(y.revive(r),i),void 0,i,r.scheme==="output")}$resolveCodeLens(t,r,i){return this.s(t,df,s=>s.resolveCodeLens(r,i),void 0,void 0,!0)}$releaseCodeLenses(t,r){this.s(t,df,i=>Promise.resolve(i.releaseCodeLenses(r)),void 0,void 0,!0)}registerDefinitionProvider(t,r,i){const s=this.t(new q8(this.h,i),t);return this.e.$registerDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideDefinition(t,r,i,s){return this.s(t,q8,n=>n.provideDefinition(y.revive(r),i,s),[],s)}registerDeclarationProvider(t,r,i){const s=this.t(new G8(this.h,i),t);return this.e.$registerDeclarationSupport(s,this.o(r,t)),this.p(s)}$provideDeclaration(t,r,i,s){return this.s(t,G8,n=>n.provideDeclaration(y.revive(r),i,s),[],s)}registerImplementationProvider(t,r,i){const s=this.t(new J8(this.h,i),t);return this.e.$registerImplementationSupport(s,this.o(r,t)),this.p(s)}$provideImplementation(t,r,i,s){return this.s(t,J8,n=>n.provideImplementation(y.revive(r),i,s),[],s)}registerTypeDefinitionProvider(t,r,i){const s=this.t(new Q8(this.h,i),t);return this.e.$registerTypeDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideTypeDefinition(t,r,i,s){return this.s(t,Q8,n=>n.provideTypeDefinition(y.revive(r),i,s),[],s)}registerHoverProvider(t,r,i,s){const n=this.t(new Gv(this.h,i),t);return this.e.$registerHoverProvider(n,this.o(r,t)),this.p(n)}$provideHover(t,r,i,s,n){return this.s(t,Gv,o=>o.provideHover(y.revive(r),i,s,n),void 0,n)}$releaseHover(t,r){this.s(t,Gv,i=>Promise.resolve(i.releaseHover(r)),void 0,void 0)}registerEvaluatableExpressionProvider(t,r,i,s){const n=this.t(new Z8(this.h,i),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(r,t)),this.p(n)}$provideEvaluatableExpression(t,r,i,s){return this.s(t,Z8,n=>n.provideEvaluatableExpression(y.revive(r),i,s),void 0,s)}registerInlineValuesProvider(t,r,i,s){const n=typeof i.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new Y8(this.h,i),t);this.e.$registerInlineValuesProvider(o,this.o(r,t),n);let a=this.p(o);if(n!==void 0){const c=i.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=De.from(a,c)}return a}$provideInlineValues(t,r,i,s,n){return this.s(t,Y8,o=>o.provideInlineValues(y.revive(r),i,s,n),void 0,n)}registerDocumentHighlightProvider(t,r,i){const s=this.t(new X8(this.h,i),t);return this.e.$registerDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,r,i){const s=this.t(new K8(this.h,i,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}$provideDocumentHighlights(t,r,i,s){return this.s(t,X8,n=>n.provideDocumentHighlights(y.revive(r),i,s),void 0,s)}$provideMultiDocumentHighlights(t,r,i,s,n){return this.s(t,K8,o=>o.provideMultiDocumentHighlights(y.revive(r),i,s.map(a=>y.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,r,i){const s=this.t(new ex(this.h,i),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(r,t)),this.p(s)}$provideLinkedEditingRanges(t,r,i,s){return this.s(t,ex,async n=>{const o=await n.provideLinkedEditingRanges(y.revive(r),i,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Rt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,r,i){const s=this.t(new tx(this.h,i),t);return this.e.$registerReferenceSupport(s,this.o(r,t)),this.p(s)}$provideReferences(t,r,i,s,n){return this.s(t,tx,o=>o.provideReferences(y.revive(r),i,s,n),void 0,n)}registerCodeActionProvider(t,r,i,s){const n=new we,o=this.t(new pf(this.h,this.j.converter,this.k,i,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(r,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Rt.u(t),Rt.w(t),!!i.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,r,i,s,n){return this.s(t,pf,o=>o.provideCodeActions(y.revive(r),i,s,n),void 0,n)}$resolveCodeAction(t,r,i){return this.s(t,pf,s=>s.resolveCodeAction(r,i),{},void 0)}$releaseCodeActions(t,r){this.s(t,pf,i=>Promise.resolve(i.releaseCodeActions(r)),void 0,void 0)}registerDocumentFormattingEditProvider(t,r,i){const s=this.t(new rx(this.h,i),t);return this.e.$registerDocumentFormattingSupport(s,this.o(r,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,r,i,s){return this.s(t,rx,n=>n.provideDocumentFormattingEdits(y.revive(r),i,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,r,i){const s=typeof i.provideDocumentRangesFormattingEdits=="function",n=this.t(new Jv(this.h,i),t);return this.e.$registerRangeFormattingSupport(n,this.o(r,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,r,i,s,n){return this.s(t,Jv,o=>o.provideDocumentRangeFormattingEdits(y.revive(r),i,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,r,i,s,n){return this.s(t,Jv,o=>o.provideDocumentRangesFormattingEdits(y.revive(r),i,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,r,i,s){const n=this.t(new ix(this.h,i),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(r,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,r,i,s,n,o){return this.s(t,ix,a=>a.provideOnTypeFormattingEdits(y.revive(r),i,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,r){const i=this.t(new gf(r,this.l),t);return this.e.$registerNavigateTypeSupport(i,typeof r.resolveWorkspaceSymbol=="function"),this.p(i)}$provideWorkspaceSymbols(t,r,i){return this.s(t,gf,s=>s.provideWorkspaceSymbols(r,i),{symbols:[]},i)}$resolveWorkspaceSymbol(t,r,i){return this.s(t,gf,s=>s.resolveWorkspaceSymbol(r,i),void 0,void 0)}$releaseWorkspaceSymbols(t,r){this.s(t,gf,i=>i.releaseWorkspaceSymbols(r),void 0,void 0)}registerRenameProvider(t,r,i){const s=this.t(new mf(this.h,i,this.l),t);return this.e.$registerRenameSupport(s,this.o(r,t),mf.supportsResolving(i)),this.p(s)}$provideRenameEdits(t,r,i,s,n){return this.s(t,mf,o=>o.provideRenameEdits(y.revive(r),i,s,n),void 0,n)}$resolveRenameLocation(t,r,i,s){return this.s(t,mf,n=>n.resolveRenameLocation(y.revive(r),i,s),void 0,s)}registerNewSymbolNamesProvider(t,r,i){const s=this.t(new Qv(this.h,i,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(r,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,Qv,r=>r.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,r,i,s,n){return this.s(t,Qv,o=>o.provideNewSymbolNames(y.revive(r),i,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,r,i,s){const n=this.t(new Yv(this.h,i),t),o=typeof i.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(r,t),s,o);let a=this.p(n);if(o){const c=i.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=De.from(a,c)}return a}$provideDocumentSemanticTokens(t,r,i,s){return this.s(t,Yv,n=>n.provideDocumentSemanticTokens(y.revive(r),i,s),null,s)}$releaseDocumentSemanticTokens(t,r){this.s(t,Yv,i=>i.releaseDocumentSemanticColoring(r),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,r,i,s){const n=this.t(new sx(this.h,i),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(r,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,r,i,s){return this.s(t,sx,n=>n.provideDocumentRangeSemanticTokens(y.revive(r),i,s),null,s)}registerCompletionItemProvider(t,r,i,s){const n=this.t(new Cl(this.h,this.j.converter,i,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(r,t),s,Cl.supportsResolving(i),t.identifier),this.p(n)}$provideCompletionItems(t,r,i,s,n){return this.s(t,Cl,o=>o.provideCompletionItems(y.revive(r),i,s,n),void 0,n)}$resolveCompletionItem(t,r,i){return this.s(t,Cl,s=>s.resolveCompletionItem(r,i),void 0,i)}$releaseCompletionItems(t,r){this.s(t,Cl,i=>i.releaseCompletionItems(r),void 0,void 0)}registerInlineCompletionsProvider(t,r,i,s){const n=new aL(t,this.h,i,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(r,t),n.supportsHandleEvents,He.toKey(t.identifier.value),s?.yieldTo?.map(a=>He.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,r,i,s,n){return this.s(t,ua,o=>o.provideInlineCompletions(y.revive(r),i,s,n),void 0,n)}$provideInlineEditsForRange(t,r,i,s,n){return this.s(t,ua,o=>o.provideInlineEditsForRange(y.revive(r),i,s,n),void 0,n)}$handleInlineCompletionDidShow(t,r,i,s){this.s(t,ua,async n=>{n.handleDidShowCompletionItem(r,i,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,r,i,s,n){this.s(t,ua,async o=>{o.handlePartialAccept(r,i,s,n)},void 0,void 0)}$freeInlineCompletionsList(t,r){this.s(t,ua,async i=>{i.disposeCompletions(r)},void 0,void 0)}registerInlineEditProvider(t,r,i){const s=new Xv(t,this.h,i,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(r,t),t.identifier),this.p(n)}$provideInlineEdit(t,r,i,s){return this.s(t,Xv,n=>n.provideInlineEdits(y.revive(r),i,s),void 0,s)}$freeInlineEdit(t,r){this.s(t,Xv,async i=>{i.disposeEdit(r)},void 0,void 0)}registerSignatureHelpProvider(t,r,i,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new Kv(this.h,i),t);return this.e.$registerSignatureHelpProvider(o,this.o(r,t),n),this.p(o)}$provideSignatureHelp(t,r,i,s,n){return this.s(t,Kv,o=>o.provideSignatureHelp(y.revive(r),i,s,n),void 0,n)}$releaseSignatureHelp(t,r){this.s(t,Kv,i=>i.releaseSignatureHelp(r),void 0,void 0)}registerInlayHintsProvider(t,r,i){const s=typeof i.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new vf(this.h,this.j.converter,i,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(r,t),typeof i.resolveInlayHint=="function",s,Rt.u(t));let o=this.p(n);if(s!==void 0){const a=i.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=De.from(o,a)}return o}$provideInlayHints(t,r,i,s){return this.s(t,vf,n=>n.provideInlayHints(y.revive(r),i,s),void 0,s)}$resolveInlayHint(t,r,i){return this.s(t,vf,s=>s.resolveInlayHint(r,i),void 0,i)}$releaseInlayHints(t,r){this.s(t,vf,i=>i.releaseHints(r),void 0,void 0)}registerDocumentLinkProvider(t,r,i){const s=this.t(new wf(this.h,i),t);return this.e.$registerDocumentLinkProvider(s,this.o(r,t),typeof i.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,r,i){return this.s(t,wf,s=>s.provideLinks(y.revive(r),i),void 0,i,r.scheme==="output")}$resolveDocumentLink(t,r,i){return this.s(t,wf,s=>s.resolveLink(r,i),void 0,void 0,!0)}$releaseDocumentLinks(t,r){this.s(t,wf,i=>i.releaseLinks(r),void 0,void 0,!0)}registerColorProvider(t,r,i){const s=this.t(new e0(this.h,i),t);return this.e.$registerDocumentColorProvider(s,this.o(r,t)),this.p(s)}$provideDocumentColors(t,r,i){return this.s(t,e0,s=>s.provideColors(y.revive(r),i),[],i)}$provideColorPresentations(t,r,i,s){return this.s(t,e0,n=>n.provideColorPresentations(y.revive(r),i,s),void 0,s)}registerFoldingRangeProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new Pl(new ox(this.h,i),t)),this.e.$registerFoldingRangeProvider(s,this.o(r,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=De.from(o,a)}return o}$provideFoldingRanges(t,r,i,s){return this.s(t,ox,n=>n.provideFoldingRanges(y.revive(r),i,s),void 0,s)}registerSelectionRangeProvider(t,r,i){const s=this.t(new ax(this.h,i,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(r,t)),this.p(s)}$provideSelectionRanges(t,r,i,s){return this.s(t,ax,n=>n.provideSelectionRanges(y.revive(r),i,s),[],s)}registerCallHierarchyProvider(t,r,i){const s=this.t(new Il(this.h,i),t);return this.e.$registerCallHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareCallHierarchy(t,r,i,s){return this.s(t,Il,n=>Promise.resolve(n.prepareSession(y.revive(r),i,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,r,i,s){return this.s(t,Il,n=>n.provideCallsTo(r,i,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,r,i,s){return this.s(t,Il,n=>n.provideCallsFrom(r,i,s),void 0,s)}$releaseCallHierarchy(t,r){this.s(t,Il,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerTypeHierarchyProvider(t,r,i){const s=this.t(new Dl(this.h,i),t);return this.e.$registerTypeHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareTypeHierarchy(t,r,i,s){return this.s(t,Dl,n=>Promise.resolve(n.prepareSession(y.revive(r),i,s)),void 0,s)}$provideTypeHierarchySupertypes(t,r,i,s){return this.s(t,Dl,n=>n.provideSupertypes(r,i,s),void 0,s)}$provideTypeHierarchySubtypes(t,r,i,s){return this.s(t,Dl,n=>n.provideSubtypes(r,i,s),void 0,s)}$releaseTypeHierarchy(t,r){this.s(t,Dl,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerDocumentOnDropEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Pl(new bf(this.e,this.h,i,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(r,t),Tt(t,"documentPaste")&&s?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,r,i,s,n,o){return this.s(t,bf,a=>Promise.resolve(a.provideDocumentOnDropEdits(r,y.revive(i),s,n,o)),void 0,void 0)}$resolveDropEdit(t,r,i){return this.s(t,bf,s=>s.resolveDropEdit(r,i),{},void 0)}$releaseDocumentOnDropEdits(t,r){this.s(t,bf,i=>Promise.resolve(i.releaseDropEdits(r)),void 0,void 0)}registerMappedEditsProvider(t,r,i){const s=this.t(new cx(this.h,i),t);return this.e.$registerMappedEditsProvider(s,this.o(r,t),t.displayName??t.name),this.p(s)}$provideMappedEdits(t,r,i,s,n){return this.s(t,cx,o=>Promise.resolve(o.provideMappedEdits(r,i,s,n)),null,n)}registerDocumentPasteEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new Pl(new $l(this.e,this.h,i,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(r,t),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,r,i,s,n){return this.s(t,$l,o=>o.prepareDocumentPaste(y.revive(r),i,s,n),void 0,n)}$providePasteEdits(t,r,i,s,n,o,a){return this.s(t,$l,c=>c.providePasteEdits(r,y.revive(i),s,n,o,a),void 0,a)}$resolvePasteEdit(t,r,i){return this.s(t,$l,s=>s.resolvePasteEdit(r,i),{},void 0)}$releasePasteEdits(t,r){this.s(t,$l,i=>Promise.resolve(i.releasePasteEdits(r)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Rt.y(t.decreaseIndentPattern),increaseIndentPattern:Rt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Rt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Rt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Rt.y(t.beforeText),afterText:t.afterText?Rt.y(t.afterText):void 0,previousLineText:t.previousLineText?Rt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Rt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(r=>Co.toString(r)):void 0}}static E(t){return t.map(Rt.D)}setLanguageConfiguration(t,r,i){const{wordPattern:s}=i;if(s&&tb(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(r,s):this.h.setWordDefinitionFor(r,void 0),i.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),i.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?Rt.y(i.wordPattern):void 0,indentationRules:i.indentationRules?Rt.z(i.indentationRules):void 0,onEnterRules:i.onEnterRules?Rt.C(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?Rt.E(i.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,r,o),this.p(n)}$setWordDefinitions(t){for(const r of t)this.h.setWordDefinitionFor(r.languageId,new RegExp(r.regexSource,r.regexFlags))}};function lL(e){return typeof e=="object"&&typeof e.sessionId=="string"}var oj=W("ILanguageModelToolsService"),uL=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(z.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const r of t)this.d.set(r.id,tr(r))})}async $countTokensForInvocation(e,t,r){const i=this.c.get(e);if(!i)throw new Error(`Tool invocation call ${e} not found`);return await i(t,r)}async invokeTool(e,t,r){const i=$r();if(t.tokenizationOptions&&this.c.set(i,t.tokenizationOptions.countTokens),t.toolInvocationToken&&!lL(t.toolInvocationToken))throw new Error("Invalid tool invocation token");try{const s=await this.b.$invokeTool({toolId:e,callId:i,parameters:t.input??t.parameters,tokenBudget:t.tokenizationOptions?.tokenBudget,context:t.toolInvocationToken},r);return Od.to(s)}finally{this.c.delete(i)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}get tools(){return Array.from(this.d.values()).map(e=>m1.to(e))}async $invokeTool(e,t){const r=this.a.get(e.toolId);if(!r)throw new Error(`Unknown tool ${e.toolId}`);const i={input:e.parameters,parameters:e.parameters,toolInvocationToken:e.context};e.tokenBudget!==void 0&&(i.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=Xe.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await $b(Promise.resolve(r.tool.invoke(i,t)),t);if(!s)throw new ai;return Od.from(s)}async $prepareToolInvocation(e,t,r){const i=this.a.get(e);if(!i)throw new Error(`Unknown tool ${e}`);if(!i.tool.prepareInvocation)return;const s={parameters:t,input:t},n=await i.tool.prepareInvocation(s,r);if(n)return{confirmationMessages:n.confirmationMessages?{title:n.confirmationMessages.title,message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:Ee.from(n.confirmationMessages.message)}:void 0,invocationMessage:n.invocationMessage}}registerTool(e,t,r){return this.a.set(t,{extension:e,tool:r}),this.b.$registerTool(t),ae(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},hL=class{constructor(e,t,r,i){this.c=t,this.d=r,this.e=i,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(z.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const r=this.c.getDocumentData(e);if(!r)throw new Error(`document '${e.toString()}' NOT found`);return r.document}async tokenAtPosition(e,t){const r=e.version,i=Fe.from(t),s=await this.a.$tokensAtPosition(e.uri,i),n={type:ks.Other,range:e.getWordRangeAtPosition(t)??new ve(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:N.to(s.range),type:_m.to(s.type)};return!o.range.contains(t)||r!==e.version?n:o}createLanguageStatusItem(e,t,r){const i=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:r,id:t,name:e.displayName??e.name,severity:xo.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new we,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=zS(()=>{l.clear(),this.a.$setLanguageStatus(i,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:Ho.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===xo.Error?vt.Error:a.severity===xo.Warning?vt.Warning:vt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(i),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(p){a.name=p,u()},get selector(){return a.selector},set selector(p){a.selector=p,u()},get text(){return a.text},set text(p){a.text=p,u()},set text2(p){T(e,"languageStatusText"),a.text=p,u()},get text2(){return T(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(p){a.detail=p,u()},get severity(){return a.severity},set severity(p){a.severity=p,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(p){a.accessibilityInformation=p,u()},get command(){return a.command},set command(p){a.command=p,u()},get busy(){return a.busy},set busy(p){a.busy=p,u()}};return u(),h}};function dL(e){return e&&e.title}var t0=class{constructor(t,r){this.b=r,this.a=t.getProxy(z.MainThreadMessageService)}showMessage(t,r,i,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||dL(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&T(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:p,isCloseAffordance:f}=h;c.push({title:p,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(r,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};t0=__decorate([__param(1,Ue)],t0);var r0=class{constructor(e,t,r,i){this.start=e,this.deletedCount=t,this.deletedItems=r,this.items=i}asApiEvent(){return{range:new Ui(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},i0=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,r){this.notebook=e,this.h=t,this.j=r,this.handle=r.handle,this.uri=y.revive(r.uri),this.cellKind=r.cellKind,this.a=r.outputs.map(Cs.to),this.e=r.internalMetadata??{},this.b=Object.freeze(r.metadata??{}),this.d=Object.freeze(Go.to(r.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const r={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Yc.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(i){e.g=i},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(r)}return this.f}setOutputs(e){this.a=e.map(Cs.to)}setOutputItems(e,t,r){const i=r.map(Jo.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...i),s.items.length>1&&s.items.every(n=>H5(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=CI(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(Go.to(e))}setMime(e){}},fL=class WE{static{this.a=0}constructor(t,r,i,s,n){this.k=t,this.l=r,this.m=i,this.uri=s,this.handle=WE.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,r={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===V.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(i){return i=t.n(i),t.b[i].apiCell},getCells(i){return(i?t.p(i):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(r)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,r,i){this.g=t.versionId,this.h=r,this.acceptDocumentPropertiesChanged({metadata:i});const s={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Qr.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Qr.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Qr.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Qr.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Qr.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Qr.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Qr.ChangeCellMime?this.w(a.index,a.mime):a.kind===Qr.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Qr.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let r=t.start|0,i=t.end|0;return r<0&&(r=0),i>this.b.length&&(i=this.b.length),t.with({start:r,end:i})}p(t){t=this.o(t);const r=[];for(let i=t.start;i<t.end;i++)r.push(this.b[i]);return r}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,r,i){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(p=>{const f=new i0(this,this.l,p);return r||n.push(i0.asModelAddData(p)),f}),u=new r0(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const p of h)o.push(p.uri),u.deletedItems.push(p.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),i)for(const a of s)i.push(a.asApiEvent())}s(t,r,i,s){const n=this.b.splice(t,r);this.b.splice(i,0,...n);const o=[new r0(t,r,n.map(a=>a.apiCell),[]),new r0(i,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,r){this.b[t].setOutputs(r)}u(t,r,i,s){this.b[t].setOutputItems(r,i,s)}v(t,r){const i=this.b[t];i.apiCell.document.languageId!==r&&this.m.$acceptModelLanguageChanged(i.uri,r)}w(t,r){const i=this.b[t];i.apiCell.mime=r}x(t,r){this.b[t].setMetadata(r)}y(t,r){this.b[t].setInternalMetadata(r)}getCellFromApiCell(t){return this.b.find(r=>r.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(r=>r.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},s0=class VE{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,r,i,s,n,o,a){this.id=t,this.c=r,this.notebookData=i,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(r){this.selections=[r]},get selections(){return t.e},set selections(r){if(!Array.isArray(r)||!r.every(Ui.isNotebookRange))throw ye("selections");t.e=r,t.h(r)},get visibleRanges(){return t.d},revealRange(r,i){t.c.$tryRevealRange(t.id,vi.from(r),i??_h.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},VE.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(vi.from))}_acceptViewColumn(t){this.f=t}},n0=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ee)return o0(this.right);let e=this;for(;e.parent!==ee&&e.parent.left!==e;)e=e.parent;return e.parent===ee?ee:e.parent}prev(){if(this.left!==ee)return ux(this.left);let e=this;for(;e.parent!==ee&&e.parent.right!==e;)e=e.parent;return e.parent===ee?ee:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},lx;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(lx||(lx={}));var ee=new n0(null,0);ee.parent=ee,ee.left=ee,ee.right=ee,ee.color=0;function o0(e){for(;e.left!==ee;)e=e.left;return e}function ux(e){for(;e.right!==ee;)e=e.right;return e}function a0(e){return e===ee?0:e.size_left+e.piece.length+a0(e.right)}function c0(e){return e===ee?0:e.lf_left+e.piece.lineFeedCnt+c0(e.right)}function l0(){ee.parent=ee}function Al(e,t){const r=t.right;r.size_left+=t.size_left+(t.piece?t.piece.length:0),r.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=r.left,r.left!==ee&&(r.left.parent=t),r.parent=t.parent,t.parent===ee?e.root=r:t.parent.left===t?t.parent.left=r:t.parent.right=r,r.left=t,t.parent=r}function Tl(e,t){const r=t.left;t.left=r.right,r.right!==ee&&(r.right.parent=t),r.parent=t.parent,t.size_left-=r.size_left+(r.piece?r.piece.length:0),t.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),t.parent===ee?e.root=r:t===t.parent.right?t.parent.right=r:t.parent.left=r,r.right=t,t.parent=r}function yf(e,t){let r,i;if(t.left===ee?(i=t,r=i.right):t.right===ee?(i=t,r=i.left):(i=o0(t.right),r=i.right),i===e.root){e.root=r,r.color=0,t.detach(),l0(),e.root.parent=ee;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===t?(r.parent=i.parent,Rl(e,r)):(i.parent===t?r.parent=i:r.parent=i.parent,Rl(e,r),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==ee&&(i.left.parent=i),i.right!==ee&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,Rl(e,i)),t.detach(),r.parent.left===r){const o=a0(r),a=c0(r);if(o!==r.parent.size_left||a!==r.parent.lf_left){const c=o-r.parent.size_left,l=a-r.parent.lf_left;r.parent.size_left=o,r.parent.lf_left=a,Ji(e,r.parent,c,l)}}if(Rl(e,r.parent),s){l0();return}let n;for(;r!==e.root&&r.color===0;)r===r.parent.left?(n=r.parent.right,n.color===1&&(n.color=0,r.parent.color=1,Al(e,r.parent),n=r.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.right.color===0&&(n.left.color=0,n.color=1,Tl(e,n),n=r.parent.right),n.color=r.parent.color,r.parent.color=0,n.right.color=0,Al(e,r.parent),r=e.root)):(n=r.parent.left,n.color===1&&(n.color=0,r.parent.color=1,Tl(e,r.parent),n=r.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.left.color===0&&(n.right.color=0,n.color=1,Al(e,n),n=r.parent.left),n.color=r.parent.color,r.parent.color=0,n.left.color=0,Tl(e,r.parent),r=e.root));r.color=0,l0()}function hx(e,t){for(Rl(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const r=t.parent.parent.right;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Al(e,t)),t.parent.color=0,t.parent.parent.color=1,Tl(e,t.parent.parent))}else{const r=t.parent.parent.left;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Tl(e,t)),t.parent.color=0,t.parent.parent.color=1,Al(e,t.parent.parent))}e.root.color=0}function Ji(e,t,r,i){for(;t!==e.root&&t!==ee;)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}function Rl(e,t){let r=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,r=a0(t.left)-t.size_left,i=c0(t.left)-t.lf_left,t.size_left+=r,t.lf_left+=i;t!==e.root&&(r!==0||i!==0);)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}}var Qi=65535;function dx(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var pL=class{constructor(e,t,r,i,s){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=s}};function Zi(e,t=!0){const r=[0];let i=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:o===10&&(r[i++]=s+1)}return t?dx(r):r}function gL(e,t){e.length=0,e[0]=0;let r=1,i=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[r++]=c+2,c++):(i++,e[r++]=c+1):u===10?(s++,e[r++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new pL(dx(e),i,s,n,o);return e.length=0,a}var cr=class{constructor(e,t,r,i,s){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=s}},Nn=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},mL=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ee&&e.iterate(e.root,r=>(r!==ee&&this.a.push(r.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},vL=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const r=this.b;for(let i=0;i<r.length;i++){const s=r[i];if(s.node.parent===null||s.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){const i=[];for(const s of r)s!==null&&i.push(s);this.b=i}}},wL=class{constructor(e,t,r){this.create(e,t,r)}create(e,t,r){this.a=[new Nn("",[0])],this.g={line:0,column:0},this.root=ee,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=r;let i=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Zi(e[s].buffer));const o=new cr(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),i=this.S(i,o)}this.h=new vL(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=Qi,r=t-Math.floor(t/3),i=r*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=r||n+l<i)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Nn(u,Zi(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Nn(a,Zi(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new mL(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===ee)return!0;const s=this.R(i),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let r=0,i=this.root;for(;i!==ee;)if(i.left!==ee&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;const s=this.B(i,e-i.lf_left-2);return r+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,r=0;const i=e;for(;t!==ee;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(r+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(r+1,1),o=i-n;return new Ir(r+1,o+1)}return new Ir(r+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===ee){const s=this.getOffsetAt(r+1,1),n=i-e-s;return new Ir(r+1,n+1)}else t=t.right;return new Ir(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const r=this.H(e.startLineNumber,e.startColumn),i=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(r,i);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let r=e.node;const i=this.a[r.piece.bufferIndex].buffer,s=this.u(r.piece.bufferIndex,r.piece.start);let n=i.substring(s+e.remainder,s+r.piece.length);for(r=r.next();r!==ee;){const o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(r===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,r.piece.length);r=r.next()}return n}getLinesContent(){const e=[];let t=0,r="",i=!1;return this.iterate(this.root,s=>{if(s===ee)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(i&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=r,r="",i=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(i=!0,r+=a.substr(h,o-1)):r+=a.substr(h,o),!0;r+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;for(let p=l+1;p<u;p++)r=this.f?a.substring(c[p],c[p+1]-this.e):a.substring(c[p],c[p+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(i=!0,n.end.column===0?t--:r=a.substr(c[u],n.end.column-1)):r=a.substr(c[u],n.end.column),!0}),i&&(e[t++]=r,r=""),e[t++]=r,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const r=this.a[t.piece.bufferIndex],i=this.u(t.piece.bufferIndex,t.piece.start);return r.buffer.charCodeAt(i)}else{const t=this.a[e.node.piece.bufferIndex],i=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const r=this.H(e,t+1);return this.l(r)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r||r===ee)return"";const i=this.a[r.piece.bufferIndex],s=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.substring(s,s+r.piece.length)}else{const r=this.a[t.node.piece.bufferIndex],i=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=i+t.remainder,n=i+t.node.piece.length;return r.buffer.substring(s,n)}}findMatchesInNode(e,t,r,i,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],p=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const x={line:0,column:0};let S,C;t._wordSeparators?(S=h.buffer.substring(f,m),C=D=>D+f,t.reset(0)):(S=h.buffer,C=D=>D,t.reset(f));do if(w=t.next(S),w){if(C(w.index)>=m)return l;this.s(e,C(w.index)-p,x);const D=this.t(e.piece.bufferIndex,s,x),M=x.line===s.line?x.column-s.column+i:x.column+1,F=M+w[0].length;if(u[l++]=d9(new ze(r+D,M,r+D,F),w,a),C(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,r,i){const s=[];let n=0;const o=new kP(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,r,i,n,s),s;let h=e.startLineNumber,p=a.node;for(;p!==c.node;){const m=this.t(p.piece.bufferIndex,l,p.piece.end);if(m>=1){const x=this.a[p.piece.bufferIndex].lineStarts,S=this.u(p.piece.bufferIndex,p.piece.start),C=x[l.line+m],D=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(p,o,h,D,l,this.s(p,C-S),t,r,i,n,s),n>=i)return s;h+=m}const w=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const x=this.getLineContent(h).substring(w,e.endColumn-1);return n=this.n(t,o,x,e.endLineNumber,w,n,s,r,i),s}if(n=this.n(t,o,this.getLineContent(h).substr(w),h,w,n,s,r,i),n>=i)return s;h++,a=this.H(h,1),p=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(h).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,r,i),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,r,i,n,s),s}n(e,t,r,i,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,p=h.length,f=r.length;let m=-p;for(;(m=r.indexOf(h,m+p))!==-1;)if((!l||f9(l,r,f,m,p))&&(o[n++]=new Y1(new ze(i,m+1+s,i,m+1+p+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(r),u&&(o[n++]=d9(new ze(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,r=!1){if(this.f=this.f&&r,this.j.lineNumber=0,this.j.value="",this.root!==ee){const{node:i,remainder:s,nodeStartOffset:n}=this.G(e),o=i.piece,a=o.bufferIndex,c=this.s(i,s);if(i.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<Qi){this.F(i,t),this.y();return}if(n===e)this.o(t,i),this.h.validate(e);else if(n+i.piece.length>e){const l=[];let u=new cr(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(i,s)===10){const m={line:u.start.line+1,column:0};u=new cr(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(i,s-1)===13){const m=this.s(i,s-1);this.C(i,m),t="\r"+t,i.piece.length===0&&l.push(i)}else this.C(i,c);else this.C(i,c);const h=this.w(t);u.length>0&&this.S(i,u);let p=i;for(let f=0;f<h.length;f++)p=this.S(p,h[f]);this.v(l)}else this.q(t,i)}else{const i=this.w(t);let s=this.T(null,i[0]);for(let n=1;n<i.length;n++)s=this.S(s,i[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ee)return;const r=this.G(e),i=this.G(e+t),s=r.node,n=i.node;if(s===n){const h=this.s(s,r.remainder),p=this.s(s,i.remainder);if(r.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();yf(this,s),this.N(f),this.y();return}this.D(s,p),this.h.validate(e),this.N(s),this.y();return}if(r.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,p),this.y();return}const o=[],a=this.s(s,r.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,i.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ee&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const r=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new cr(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Ji(this,t,-1,-1),t.piece.length===0&&r.push(t)}const i=this.w(e);let s=this.T(t,i[i.length-1]);for(let n=i.length-2;n>=0;n--)s=this.T(s,i[n]);this.N(s),this.v(r)}q(e,t){this.Q(e,t)&&(e+=`
`);const r=this.w(e),i=this.S(t,r[0]);let s=i;for(let n=1;n<r.length;n++)s=this.S(s,r[n]);this.N(i)}s(e,t,r){const i=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[i.start.line]+i.start.column+t;let c=i.start.line,l=i.end.line,u=0,h=0,p=0;for(;c<=l&&(u=c+(l-c)/2|0,p=n[u],u!==l);)if(h=n[u+1],a<p)l=u-1;else if(a>=h)c=u+1;else break;return r?(r.line=u,r.column=a-p,null):{line:u,column:a-p}}t(e,t,r){if(r.column===0)return r.line-t.line;const i=this.a[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;const s=i[r.line+1],n=i[r.line]+r.column;if(s>n+1)return r.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?r.line-t.line+1:r.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)yf(this,e[t])}w(e){if(e.length>Qi){const l=[];for(;e.length>Qi;){const h=e.charCodeAt(Qi-1);let p;h===13||h>=55296&&h<=56319?(p=e.substring(0,Qi-1),e=e.substring(Qi-1)):(p=e.substring(0,Qi),e=e.substring(Qi));const f=Zi(p);l.push(new cr(this.a.length,{line:0,column:0},{line:f.length-1,column:p.length-f[f.length-1]},f.length-1,p.length)),this.a.push(new Nn(p,f))}const u=Zi(e);return l.push(new cr(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Nn(e,u)),l}let t=this.a[0].buffer.length;const r=Zi(e,!1);let i=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},i=this.g;for(let l=0;l<r.length;l++)r[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<r.length;l++)r[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new cr(0,i,a,this.t(0,i,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let r=this.root,i="";const s=this.h.get2(e);if(s){r=s.node;const n=this.B(r,e-s.nodeStartLineNumber-1),o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(s.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=o.substring(a+n,a+r.piece.length);else{const c=this.B(r,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;r!==ee;)if(r.left!==ee&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const a=this.B(r,e-r.lf_left-2),c=this.B(r,e-r.lf_left-1),l=this.a[r.piece.bufferIndex].buffer,u=this.u(r.piece.bufferIndex,r.piece.start);return n+=r.size_left,this.h.set({node:r,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-r.lf_left)}),l.substring(u+a,u+c-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const a=this.B(r,e-r.lf_left-2),c=this.a[r.piece.bufferIndex].buffer,l=this.u(r.piece.bufferIndex,r.piece.start);i=c.substring(l+a,l+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==ee;){const n=this.a[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const o=this.B(r,0),a=this.u(r.piece.bufferIndex,r.piece.start);return i+=n.substring(a,a+o-t),i}else{const o=this.u(r.piece.bufferIndex,r.piece.start);i+=n.substr(o,r.piece.length)}r=r.next()}return i}y(){let e=this.root,t=1,r=0;for(;e!==ee;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=r,this.h.validate(this.c)}A(e,t){const r=e.piece,i=this.s(e,t),s=i.line-r.start.line;if(this.u(r.bufferIndex,r.end)-this.u(r.bufferIndex,r.start)===t){const n=this.t(e.piece.bufferIndex,r.start,i);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:i.column}}B(e,t){if(t<0)return 0;const r=e.piece,i=this.a[r.bufferIndex].lineStarts,s=r.start.line+t+1;return s>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[s]-i[r.start.line]-r.start.column}C(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.end),n=t,o=this.u(r.bufferIndex,n),a=this.t(r.bufferIndex,r.start,n),c=a-i,l=o-s,u=r.length+l;e.piece=new cr(r.bufferIndex,r.start,n,a,u),Ji(this,e,l,c)}D(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.start),n=t,o=this.t(r.bufferIndex,n,r.end),a=this.u(r.bufferIndex,n),c=o-i,l=s-a,u=r.length+l;e.piece=new cr(r.bufferIndex,n,r.end,o,u),Ji(this,e,l,c)}E(e,t,r){const i=e.piece,s=i.start,n=i.end,o=i.length,a=i.lineFeedCnt,c=t,l=this.t(i.bufferIndex,i.start,c),u=this.u(i.bufferIndex,t)-this.u(i.bufferIndex,s);e.piece=new cr(i.bufferIndex,i.start,c,l,u),Ji(this,e,u-o,l-a);const h=new cr(i.bufferIndex,r,n,this.t(i.bufferIndex,r,n),this.u(i.bufferIndex,n)-this.u(i.bufferIndex,r)),p=this.S(e,h);this.N(p)}F(e,t){this.Q(t,e)&&(t+=`
`);const r=this.K()&&this.L(t)&&this.M(e),i=this.a[0].buffer.length;this.a[0].buffer+=t;const s=Zi(t,!1);for(let p=0;p<s.length;p++)s[p]+=i;if(r){const p=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:i-p}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new cr(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Ji(this,e,t.length,h)}G(e){let t=this.root;const r=this.h.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};let i=0;for(;t!==ee;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this.h.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let r=this.root,i=0;for(;r!==ee;)if(r.left!==ee&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const s=this.B(r,e-r.lf_left-2),n=this.B(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(s+t-1,n),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const s=this.B(r,e-r.lf_left-2);if(s+t-1<=r.piece.length)return{node:r,remainder:s+t-1,nodeStartOffset:i};t-=r.piece.length-s;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==ee;){if(r.piece.lineFeedCnt>0){const s=this.B(r,0),n=this.J(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(r.piece.length>=t-1){const s=this.J(r);return{node:r,remainder:t-1,nodeStartOffset:s}}else t-=r.piece.length;r=r.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const r=this.a[e.piece.bufferIndex],i=this.u(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ee||e.piece.lineFeedCnt===0)return!1;const t=e.piece,r=this.a[t.bufferIndex].lineStarts,i=t.start.line,s=r[i]+t.start.column;return i===r.length-1||r[i+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ee||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const r=[],i=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new cr(e.piece.bufferIndex,e.piece.start,s,o,n),Ji(this,e,-1,-1),e.piece.length===0&&r.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new cr(t.piece.bufferIndex,a,t.piece.end,l,c),Ji(this,t,-1,-1),t.piece.length===0&&r.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<r.length;h++)yf(this,r[h])}Q(e,t){if(this.K()&&this.M(e)){const r=t.next();if(this.L(r)){if(e+=`
`,r.piece.length===1)yf(this,r);else{const i=r.piece,s={line:i.start.line+1,column:0},n=i.length-1,o=this.t(i.bufferIndex,s,i.end);r.piece=new cr(i.bufferIndex,s,i.end,o,n),Ji(this,r,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ee)return t(ee);const r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ee)return"";const t=this.a[e.piece.bufferIndex],r=e.piece,i=this.u(r.bufferIndex,r.start),s=this.u(r.bufferIndex,r.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this.a[e.bufferIndex],r=this.u(e.bufferIndex,e.start),i=this.u(e.bufferIndex,e.end);return t.buffer.substring(r,i)}S(e,t){const r=new n0(t,1);if(r.left=ee,r.right=ee,r.parent=ee,r.size_left=0,r.lf_left=0,this.root===ee)this.root=r,r.color=0;else if(e.right===ee)e.right=r,r.parent=e;else{const s=o0(e.right);s.left=r,r.parent=s}return hx(this,r),r}T(e,t){const r=new n0(t,1);if(r.left=ee,r.right=ee,r.parent=ee,r.size_left=0,r.lf_left=0,this.root===ee)this.root=r,r.color=0;else if(e.left===ee)e.left=r,r.parent=e;else{const i=ux(e.left);i.right=r,r.parent=i}return hx(this,r),r}U(e){let t="";return this.iterate(e,r=>(t+=this.R(r),!0)),t}},fx;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(fx||(fx={}));function u0(e){let t=0,r=0,i=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(r=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,i=n+1):a===10&&(s|=1,t===0&&(r=n),t++,i=n+1)}return t===0&&(r=e.length),[t,r,e.length-i,s]}var h0;function bL(){return h0||(h0=new TextDecoder("UTF-16LE")),h0}function yL(e,t,r){const i=new Uint16Array(e.buffer,t,r);return r>0&&(i[0]===65279||i[0]===65534)?xL(e,t,r):bL().decode(i)}function xL(e,t,r){const i=[];let s=0;for(let n=0;n<r;n++){const o=Wk(e,t);t+=2,i[s++]=String.fromCharCode(o)}return i.join("")}function xf(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var EL=class Ei{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,r,i,s){this.oldPosition=t,this.oldText=r,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${xf(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${xf(this.oldText)}")`:`(replace@${this.oldPosition} "${xf(this.oldText)}" with "${xf(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,r,i){const s=r.length;Jl(t,s,i),i+=4;for(let n=0;n<s;n++)Vk(t,r.charCodeAt(n),i),i+=2;return i}static d(t,r){const i=Gl(t,r);return r+=4,yL(t,r,i)}writeSize(){return 8+Ei.a(this.oldText)+Ei.a(this.newText)}write(t,r){return Jl(t,this.oldPosition,r),r+=4,Jl(t,this.newPosition,r),r+=4,r=Ei.c(t,this.oldText,r),r=Ei.c(t,this.newText,r),r}static read(t,r,i){const s=Gl(t,r);r+=4;const n=Gl(t,r);r+=4;const o=Ei.d(t,r);r+=Ei.a(o);const a=Ei.d(t,r);return r+=Ei.a(a),i.push(new Ei(s,o,n,a)),r}},kL=class jl extends he{constructor(t,r,i,s,n,o,a){super(),this.m=this.B(new I),this.onDidChangeContent=this.m.event,this.f=r,this.j=!o,this.g=s,this.h=n,this.c=new wL(t,i,a)}equals(t){return!(t instanceof jl)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,r){return this.c.getOffsetAt(t,r)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,r){const i=t+r,s=this.getPositionAt(t),n=this.getPositionAt(i);return new ze(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,r=0){if(t.isEmpty())return"";const i=this.n(r);return this.c.getValueInRange(t,i)}getValueLengthInRange(t,r=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const i=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(r),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-i+n}getCharacterCountInRange(t,r=0){if(this.j){let i=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)lu(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this.n(r).length*(n-s),i}return this.getValueLengthInRange(t,r)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,r){return this.c.getLineCharCode(t,r)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const r=Ep(this.getLineContent(t));return r===-1?0:r+1}getLineLastNonWhitespaceColumn(t){const r=X3(this.getLineContent(t));return r===-1?0:r+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,r,i){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const x=t[w];a&&x._isTracked&&(a=!1);const S=x.range;if(x.text){let B=!0;o||(B=!oS(x.text),o=B),!s&&B&&(s=ab(x.text)),!n&&B&&(n=cb(x.text))}let C="",D=0,M=0,F=0;if(x.text){let B;[D,M,F,B]=u0(x.text);const X=this.getEOL();B===0||B===(X===`\r
`?2:1)?C=x.text:C=x.text.replace(/\r\n|\r|\n/g,X)}c[w]={sortIndex:w,identifier:x.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:C,eolCount:D,firstLineLength:M,lastLineLength:F,forceMoveMarkers:!!x.forceMoveMarkers,isAutoWhitespaceEdit:x.isAutoWhitespaceEdit||!1}}c.sort(jl.u);let l=!1;for(let w=0,x=c.length-1;w<x;w++){const S=c[w].range.getEndPosition(),C=c[w+1].range.getStartPosition();if(C.isBeforeOrEqual(S)){if(C.isBefore(S))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=i||r?jl._getInverseEditRanges(c):[],h=[];if(r)for(let w=0;w<c.length;w++){const x=c[w],S=u[w];if(x.isAutoWhitespaceEdit&&x.range.isEmpty())for(let C=S.startLineNumber;C<=S.endLineNumber;C++){let D="";C===S.startLineNumber&&(D=this.getLineContent(x.range.startLineNumber),Ep(D)!==-1)||h.push({lineNumber:C,oldContent:D})}}let p=null;if(i){let w=0;p=[];for(let x=0;x<c.length;x++){const S=c[x],C=u[x],D=this.getValueInRange(S.range),M=S.rangeOffset+w;w+=S.text.length-D.length,p[x]={sortIndex:S.sortIndex,identifier:S.identifier,range:C,text:D,textChange:new EL(S.rangeOffset,D,M,S.text)}}l||p.sort((x,S)=>x.sortIndex-S.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let m=null;if(r&&h.length>0){h.sort((w,x)=>x.lineNumber-w.lineNumber),m=[];for(let w=0,x=h.length;w<x;w++){const S=h[w].lineNumber;if(w>0&&h[w-1].lineNumber===S)continue;const C=h[w].oldContent,D=this.getLineContent(S);D.length===0||D===C||Ep(D)!==-1||m.push(S)}}return this.m.fire(),new yP(p,f,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let r=!1;const i=t[0].range,s=t[t.length-1].range,n=new ze(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let f=0,m=t.length;f<m;f++){const w=t[f],x=w.range;r=r||w.forceMoveMarkers,c.push(this.getValueInRange(new ze(o,a,x.startLineNumber,x.startColumn))),w.text.length>0&&c.push(w.text),o=x.endLineNumber,a=x.endColumn}const l=c.join(""),[u,h,p]=u0(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:p,forceMoveMarkers:r,isAutoWhitespaceEdit:!1}}t(t){t.sort(jl.w);const r=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new ze(n,o,a,c);r.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return r}findMatchesLineByLine(t,r,i,s){return this.c.findMatchesLineByLine(t,r,i,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,r){const i=t.startLineNumber,s=t.startColumn,[n,o,a]=u0(r);let c;if(r.length>0){const l=n+1;l===1?c=new ze(i,s,i,s+o):c=new ze(i,s,i+l-1,a+1)}else c=new ze(i,s,i,s);return c}static _getInverseEditRanges(t){const r=[];let i=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=i,u=s+(c.range.startColumn-n.range.endColumn)):(l=i+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const p=c.eolCount+1;p===1?h=new ze(l,u,l,u+c.firstLineLength):h=new ze(l,u,l+p-1,c.lastLineLength+1)}else h=new ze(l,u,l,u);i=h.endLineNumber,s=h.endColumn,r.push(h),n=c}return r}static u(t,r){const i=ze.compareRangesUsingEnds(t.range,r.range);return i===0?t.sortIndex-r.sortIndex:i}static w(t,r){const i=ze.compareRangesUsingEnds(t.range,r.range);return i===0?r.sortIndex-t.sortIndex:-i}},SL=class{constructor(e,t,r,i,s,n,o,a,c){this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,r=this.c+this.e;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`}create(e){const t=this.k(e),r=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=r.length;s<n;s++){const o=r[s].buffer.replace(/\r\n|\r|\n/g,t),a=Zi(o);r[s]=new Nn(o,a)}const i=new kL(r,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},px=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&lS(e)&&(this.b=cS,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=gL(this.e,e);this.a.push(new Nn(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=ab(e)),this.k||(this.k=cb(e)))}finish(e=!0){return this.o(),new SL(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Zi(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},$L=class extends he{constructor(e,t,r){super(),this._source=e,this.b=t,this.c=r,this.a=void 0}f(e){const t=e.getLineCount();return new ze(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new px;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:r,disposable:i}=t.create(1);this.b=r,this.B(i)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new px;t.acceptChunk(e);const r=t.finish(!0),{textBuffer:i,disposable:s}=r.create(1);return this.B(s),i})),this.a}findInInputs(e){const r=new u9(e,!1,!1,null).parseSearchRequest();if(!r)return[];const i=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,r,!0,5e3)}findInOutputs(e){const r=new u9(e,!1,!1,null).parseSearchRequest();return r?this.outputTextBuffers.map(i=>{const s=i.findMatchesLineByLine(this.f(i),r,!0,5e3);if(s.length!==0)return{textBuffer:i,matches:s}}).filter(i=>!!i):[]}};function gx(e,t){let r=-1;const i=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==r&&s.length>0&&(i.push([...s]),s=[]),s.push(o),r=o.range.endLineNumber}),s.length>0&&i.push([...s]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new yD(a.join(`
`)+`
`,o.map(u=>new ze(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var cj=Object.freeze({id:"application",order:100,title:d(3998,null),type:"object"}),CL=Object.freeze({id:"workbench",order:7,title:d(3999,null),type:"object"}),IL=Object.freeze({id:"security",scope:1,title:d(4e3,null),type:"object",order:7}),lj=Object.freeze({id:"problems",title:d(4001,null),type:"object",order:101}),DL=Object.freeze({id:"window",order:8,title:d(4002,null),type:"object"}),PL={ConfigurationMigration:"base.contributions.configuration.migration"},AL=class{constructor(){this.migrations=[],this.a=new I,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Ef=new AL;Ht.add(PL.ConfigurationMigration,Ef);var mx=class extends he{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,r){super(),this.a=t,this.b=r,this.B(this.b.onDidChangeWorkspaceFolders(async i=>{for(const s of i.added)await this.f(s,Ef.migrations)})),this.c(Ef.migrations),this.B(Ef.onDidRegisterConfigurationMigration(i=>this.c(i)))}async c(t){await this.f(void 0,t);for(const r of this.b.getWorkspace().folders)await this.f(r,t)}async f(t,r){await Promise.all([r.map(i=>this.g(i,t?.uri))])}async g(t,r){const i=this.a.inspect(t.key,{resource:r}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=i[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,r,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,r,l);for(const p of h??[])c.push([p,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:r,overrideIdentifiers:h},o)))}}async h(t,r,i,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[r];if(u)return n?u.overrides?.find(({identifiers:h})=>qr(h,n))?.value:u.value},a=await t.migrateFn(i,o);return Array.isArray(a)?a:[[t.key,a]]}};mx=__decorate([__param(0,Tu),__param(1,Jp)],mx);var vx=class extends he{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new to,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!pr&&(await this.b.getEnvironment())?.os!==1)return;Ht.as(po.Configuration).registerConfiguration({...IL,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4003,null)},default:[],markdownDescription:d(4004,null),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4005,null),scope:2}}})}};vx=__decorate([__param(0,g9)],vx);var Ll="window.newWindowProfile",wx=class extends he{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,r){super(),this.c=t,this.f=r,this.g(),this.B(this.c.onDidChangeProfiles(i=>this.g())),this.h(),this.j(),this.B(r.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(Ll)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Ht.as(po.Configuration),r={...DL,properties:{[Ll]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(i=>i.name),null],enumItemLabels:[...this.c.profiles.map(i=>""),d(4006,null)],description:d(4007,null),scope:1}}};this.a?t.updateConfigurations({add:[r],remove:[this.a]}):t.registerConfiguration(r),this.a=r}h(){const t=this.f.getValue(Ll);this.b=t?this.c.profiles.find(r=>r.name===t):void 0}j(){const t=this.f.getValue(Ll);if(!t)return;const r=this.b?this.c.profiles.find(i=>i.id===this.b.id):void 0;t!==r?.name&&this.f.updateValue(Ll,r?.name)}};wx=__decorate([__param(0,ZC),__param(1,Tu)],wx);var fj=W("editorResolverService"),TL=Ht.as(po.Configuration),RL={...CL,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(12512,null),additionalProperties:{type:"string"}}}};TL.registerConfiguration(RL);var d0;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(d0||(d0={}));var bx;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(bx||(bx={}));function LL(e,t){if(new Set([V.extension,V.webviewPanel,V.vscodeWorkspaceTrust,V.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Te.sep)>=0?`${t.scheme}:${t.path}`:ds(t);return nc(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var NL=class _l{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,r,i,s,n,o,a){this.q=i,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Lt,this.h=new Map,this.j=new I,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new I,this.onDidOpenNotebookDocument=this.m.event,this.n=new I,this.onDidCloseNotebookDocument=this.n.event,this.o=new I,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new ri("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(z.MainThreadNotebook),this.c=t.getProxy(z.MainThreadNotebookDocuments),this.d=t.getProxy(z.MainThreadNotebookEditors),this.i=r.converter,r.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,p=this.g.get(l)?.getCell(u);if(p)return p.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),_l.C(r)}getEditorById(t){const r=this.h.get(t);if(!r)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return r}getIdByEditor(t){for(const[r,i]of this.h)if(i.apiEditor===t)return r}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,r){const i=this.g.get(t);if(!i&&!r)throw new Error(`NO notebook document for '${t}'`);return i}static w(t,r){if(!r)return;const i=r.filenamePattern.map(s=>yd.from(s)).filter(s=>s!==void 0);if(r.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${r.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:r.displayName,filenamePattern:i,priority:r.exclusive?d0.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,r,i){const s=_l.a++,n=typeof i.onDidChangeCellStatusBarItems=="function"?_l.a++:void 0;this.f.set(s,i),this.b.$registerNotebookCellStatusBarItemProvider(s,n,r);let o;return n!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new De(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const r=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&$s.from(t.content)});return y.revive(r)}async openNotebookDocument(t){const r=this.g.get(t);if(r)return r.apiNotebook;const i=await this.c.$tryOpenNotebook(t),s=this.g.get(y.revive(i));return Kn(s?.apiNotebook)}async showNotebookDocument(t,r){let i;typeof r=="object"?i={position:$t.from(r.viewColumn),preserveFocus:r.preserveFocus,selections:r.selections&&r.selections.map(vi.from),pinned:typeof r.preview=="boolean"?!r.preview:void 0,label:typeof r.asRepl=="string"?r.asRepl:typeof r.asRepl=="object"?r.asRepl.label:void 0}:i={preserveFocus:!1,pinned:!0};const s=r?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,i),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,r,i,s){const n=this.f.get(t),o=y.revive(r),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new we,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(m=>s1.from(m,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,r,i,s,n){if(cu(r))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:r,serializer:i,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},r,o1.from(s),_l.w(t,n)),ae(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(r.buffer,i);return new Sr($s.from(n))}async $notebookToData(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook($s.to(r.value),i);return ke.wrap(n)}async $saveNotebook(t,r,i,s,n){const o=y.revive(r),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new pg(d(2723,null,this.A(o)),6);const l={metadata:fy(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new Uh(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=fy(m.metadata,x=>!(a.options?.transientCellMetadata??{})[x]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${i} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${i} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),p=await this.s.value.stat(o),f={name:h.basename(o),isFile:(p.type&sn.File)!==0,isDirectory:(p.type&sn.Directory)!==0,isSymbolicLink:(p.type&sn.SymbolicLink)!==0,mtime:p.mtime,ctime:p.ctime,size:p.size,readonly:!!((p.permissions??0)&lo.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((p.permissions??0)&lo.Locked),etag:A4({mtime:p.mtime,size:p.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),f}async $searchInNotebooks(t,r,i,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new sw;await(async(p,f,m)=>{await Promise.all(p.map(async w=>await Promise.all(w.filenamePatterns.map(x=>{const S={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:x};return this.t.doInternalFileSearchWithCustomCallback(S,f,C=>{C.forEach(D=>{a.has(D)||s.some(F=>w.isFromSettings&&!F.isFromSettings?!1:F.filenamePatterns.some(B=>LL(B,D)))||a.add(D)})}).catch(C=>{if(C.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw C})}))))})(i,n,r);const l=new Lt;let u=!1;const h=Array.from(a).map(async p=>{const f=[];try{if(n.isCancellationRequested)return;if(r.maxResults&&[...l.values()].reduce((S,C)=>S+C.cellResults.length,0)>r.maxResults){u=!0;return}const m=[],w=this.g.get(p);if(w)w.apiNotebook.getCells().forEach(C=>m.push({input:C.document.getText(),outputs:C.outputs.flatMap(D=>D.items.map(M=>M.data.toString()))}));else{const S=await this.s.value.readFile(p),C=ke.fromString(S.toString()),D=await o.deserializeNotebook(C.buffer,n);if(n.isCancellationRequested)return;$s.from(D).cells.forEach(F=>m.push({input:F.source,outputs:F.outputs.flatMap(B=>B.items.map(X=>X.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach((S,C)=>{const D=r.contentPattern.pattern,M=new $L(S.input,void 0,S.outputs),F=M.findInInputs(D),B=M.findInOutputs(D),X=B.flatMap(J=>gx(J.matches,J.textBuffer)).map((J,Z)=>(J.webviewIndex=Z,J));if(F.length>0||B.length>0){const J={index:C,contentResults:gx(F,M.inputTextBuffer),webviewResults:X};f.push(J)}});const x={resource:p,cellResults:f};l.set(p,x);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,r){const i=await this.s.value.stat(t);if(typeof r?.mtime=="number"&&typeof r.etag=="string"&&r.etag!==Q2&&typeof i.mtime=="number"&&typeof i.size=="number"&&r.mtime<i.mtime&&r.etag!==A4({mtime:r.mtime,size:i.size}))throw new pg(d(2724,null),3,r)}A(t){return t.scheme===V.file?t.fsPath:t.toString()}B(t,r,i){if(this.h.has(r))throw new Error(`editor with id ALREADY EXSIST: ${r}`);const s=new s0(r,this.d,t,i.visibleRanges.map(vi.to),i.selections.map(vi.to),typeof i.viewColumn=="number"?$t.to(i.viewColumn):void 0,i.viewType);this.h.set(r,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const i of t.value.removedDocuments){const s=y.revive(i),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const i=[];for(const s of t.value.addedDocuments){const n=y.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new fL(this.c,this.q,this.r,n,s);i.push(...s.cells.map(a=>i0.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:i}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const i of t.value.addedEditors){if(this.h.has(i.id))return;const s=y.revive(i.documentUri),n=this.g.get(s);n&&this.B(n,i.id,i)}const r=[];if(t.value.removedEditors)for(const i of t.value.removedEditors){const s=this.h.get(i);s&&(this.h.delete(i),this.k?.id===s.id&&(this.k=void 0),r.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const i=new Set;this.l.forEach(s=>i.add(s.id));for(const s of this.h.values()){const n=i.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const r=O.String.with("notebookType","A notebook type"),i=new le("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[r,new O("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>ke.wrap(n))],new ce("Notebook Data",n=>$s.to(n.value))),s=new le("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[r,new O("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new Sr($s.from(n)))],new ce("Bytes",n=>n.buffer));t.registerApiCommand(i),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},FL=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=r,this.f=i,this.a=new Ca}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,r,i)=>{const s=function(o){t.call(r,o)};return s.extension=e,this.a.event(s,void 0,i)}}async $participateInSave(e,t,r){const i=y.revive(e),s=this.c.getNotebookDocument(i);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:md.to(t)},r,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!r.isCancellationRequested&&u&&(u instanceof dn?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),r.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=Yt.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new Sr(o))}},ML=class{constructor(e){this.c=e,this.a=new I,this.onDidSaveNotebookDocument=this.a.event,this.b=new I,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,r,i){const n=this.c.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,r,i);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(y.revive(e));this.a.fire(t.apiNotebook)}},f0=class{constructor(t,r){this.c=t,this.d=r,this.a=new I,this.b=new I,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,r){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,r);const i=this.d.getEditorById(t);r.visibleRanges&&i._acceptVisibleRanges(r.visibleRanges.ranges.map(vi.to)),r.selections&&i._acceptSelections(r.selections.selections.map(vi.to)),r.visibleRanges&&this.b.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),r.selections&&this.a.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const r in t)this.d.getEditorById(r)._acceptViewColumn($t.to(t[r]))}};f0=__decorate([__param(0,Ue)],f0);var ha;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(ha||(ha={}));var gj=W("INotebookExecutionService"),OL=100,yx;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(yx||(yx={}));var mj=W("INotebookKernelService"),vj=W("INotebookKernelHistoryService"),p0=class{constructor(t,r,i,s,n){this.m=r,this.n=i,this.o=s,this.q=n,this.b=new Lt,this.c=new Lt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new I,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(z.MainThreadNotebookKernels);const o=new le("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new O("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],ce.Void),a=new le("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[O.Uri],new ce("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,r,i,s,n,o){for(const F of this.j.values())if(F.controller.id===r&&He.equals(t.identifier,F.extensionId))throw new Error(`notebook controller with id '${r}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${r}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new I,p=new I,f={id:kf(t.identifier,r),notebookType:i,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(xd.from):[]};let m=n??l,w,x;this.a.$addKernel(a,f).catch(F=>{console.log(F),u=!0});let S=0;const C=()=>{if(u)return;const F=++S;Promise.resolve().then(()=>{F===S&&this.a.$updateKernel(a,f)})},D=new Lt,M={get id(){return r},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(F){f.label=F??t.displayName??t.name,C()},get detail(){return f.detail??""},set detail(F){f.detail=F,C()},get description(){return f.description??""},set description(F){f.description=F,C()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(F){f.supportedLanguages=F,C()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(F){f.supportsExecutionOrder=F,C()},get rendererScripts(){return f.preloads?f.preloads.map(xd.to):[]},get executeHandler(){return m},set executeHandler(F){m=F??l},get interruptHandler(){return w},set interruptHandler(F){w=F,f.supportsInterrupt=!!F,C()},set variableProvider(F){T(t,"notebookVariableProvider"),x=F,f.hasVariableProvider=!!F,F?.onDidChangeVariables(B=>c.a.$variablesUpdated(B.uri)),C()},get variableProvider(){return x},createNotebookCellExecution(F){if(u)throw new Error("notebook controller is DISPOSED");if(!D.has(F.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(D.keys()).map(B=>B.toString())),new Error(`notebook controller is NOT associated to notebook: ${F.notebook.uri.toString()}`);return c._createNotebookCellExecution(F,kf(t.identifier,this.id))},createNotebookExecution(F){if(T(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!D.has(F.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(D.keys()).map(B=>B.toString())),new Error(`notebook controller is NOT associated to notebook: ${F.uri.toString()}`);return c._createNotebookExecution(F,kf(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),p.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(F,B){B===Bh.Hidden&&T(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,F.uri,B)},onDidReceiveMessage:p.event,postMessage(F,B){return T(t,"notebookMessaging"),c.a.$postMessage(a,B&&c.n.getIdByEditor(B),F)},asWebviewUri(F){return T(t,"notebookMessaging"),kl(F,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:M,onDidReceiveMessage:p,onDidChangeSelection:h,associatedNotebooks:D}),M}getIdByController(t){for(const[r,i]of this.j)if(i.controller===t)return kf(i.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,r){const i=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(i,r);const n={dispose:()=>{this.f.delete(i),s.a.$removeKernelDetectionTask(i)}};return this.f.set(i,n),n}registerKernelSourceActionProvider(t,r,i){const s=this.i++,n=typeof i.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,i),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,r);let a;return n!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,r){const i=this.h.get(t);if(i){const s=new we;return(await i.provideNotebookKernelSourceActions(r)??[]).map(o=>n1.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,r,i){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(y.revive(r));i?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),i),s.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(y.revive(r)),o=[];for(const a of i){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(y.revive(r));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of i){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),i.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,r,i,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(y.revive(i)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const p=n==="named"?Nc.Named:Nc.Indexed,f=u.provideVariables(l.apiNotebook,h,p,o,a);let m=0;for await(const w of f){if(a.isCancellationRequested)return;const x={id:this.r++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[x.id]=w.variable,this.a.$receiveVariable(r,x),m++>=OL)return}}$acceptKernelMessageFromRenderer(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(r);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(t,r,i){const n=this.n.getNotebookDocument(y.revive(t)).getCell(r);if(n){const o=i?i1.to(i):Fo.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,r){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new UL(r,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===ii.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,r){const i=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new HL(r,i,this.a),o=n.onDidChangeState(()=>{n.state===Yi.Resolved&&(n.dispose(),o.dispose(),this.c.delete(i.uri))});return this.c.set(i.uri,[n,o]),n.asApiObject()}};p0=__decorate([__param(4,Ue)],p0);var ii;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(ii||(ii={}));var UL=class qE extends he{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.m=r,this.n=i,this.b=qE.a++,this.c=new I,this.onDidChangeState=this.c.event,this.f=ii.Init,this.g=this.B(new ft),this.h=new jL(10,s=>this.s(s)),this.j=r.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const r=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new Sr(r))}t(){if(this.f===ii.Init)throw new Error("Must call start before modifying cell output");if(this.f===ii.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let r=this.m;if(t&&(r=this.m.notebook.getCellFromApiCell(t)),!r)throw new Error("INVALID cell");return r.handle}y(t){return t.map(r=>{const i=Hh.ensureUniqueMimeTypes(r.items,!0);return i===r.items?Cs.from(r):Cs.from({items:i,id:r.id,metadata:r.metadata})})}async z(t,r,i){const s=this.w(r),n=this.y(jr(t));return this.r({editType:ha.Output,cellHandle:s,append:i,outputs:n})}async C(t,r,i){return t=Hh.ensureUniqueMimeTypes(jr(t),!0),this.r({editType:ha.OutputItems,items:t.map(Jo.from),outputId:r.id,append:i})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(i){t.j=i,t.s([{editType:ha.ExecutionState,executionOrder:t.j}])},start(i){if(t.f===ii.Resolved||t.f===ii.Started)throw new Error("Cannot call start again");t.f=ii.Started,t.c.fire(),t.s({editType:ha.ExecutionState,runStartTime:i})},end(i,s,n){if(t.f===ii.Resolved)throw new Error("Cannot call resolve twice");t.f=ii.Resolved,t.c.fire(),t.h.flush();const o=n?{message:n.message,stack:n.stack,location:n?.location?{startLineNumber:n.location.start.line,startColumn:n.location.start.character,endLineNumber:n.location.end.line,endColumn:n.location.end.character}:void 0,uri:n.uri}:void 0;t.n.$completeExecution(t.b,new Sr({runEndTime:s,lastRunSuccess:i,error:o}))},clearOutput(i){return t.t(),t.z([],i,!1)},appendOutput(i,s){return t.t(),t.z(i,s,!0)},replaceOutput(i,s){return t.t(),t.z(i,s,!1)},appendOutputItems(i,s){return t.t(),t.C(i,s,!0)},replaceOutputItems(i,s){return t.t(),t.C(i,s,!1)}})}},Yi;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Yi||(Yi={}));var HL=class GE extends he{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.h=r,this.j=i,this.b=GE.a++,this.c=new I,this.onDidChangeState=this.c.event,this.f=Yi.Init,this.g=this.B(new ft),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===Yi.Resolved||this.f===Yi.Started)throw new Error("Cannot call start again");this.f=Yi.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===Yi.Resolved)throw new Error("Cannot call resolve twice");this.f=Yi.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},jL=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new to,this.b=Date.now(),ui(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function kf(e,t){return`${e.value}/${t}`}var _L=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(z.MainThreadNotebookRenderers)}$postRendererMessage(e,t,r){const i=this.c.getEditorById(e);this.a.get(t)?.fire({editor:i.apiEditor,message:r})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(i=>i.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(i,s,n)=>this.d(t).event(i,s,n),postMessage:(i,s)=>{s0.apiEditorsToExtHost.has(i)&&([i,s]=[s,i]);const n=s&&s0.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,i)}}}d(e){let t=this.a.get(e);return t||(t=new I({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},BL=class{constructor(e){this.b=new Map,this.a=e.getProxy(z.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,r){if(T(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,r),this.a.$registerProfileContentHandler(t,r.name,r.description,e.identifier.value),ae(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,r,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,r,i)}async $readProfile(e,t,r){const i=this.b.get(e);if(!i)throw new Error(`Unknown handler with id: ${e}`);return i.readProfile(Ce(t)?t:y.revive(t),r)}},zL=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,r){const i=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(i,{location:t1.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(Zf),this.d(i,r,!!o)}d(e,t,r){let i;r&&(i=new ft,this.c.set(e,i));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),i?.dispose()};let n;try{n=t(new xx(this.a,e),r&&i?i.token:Xe.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function WL(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var xx=class extends V1{constructor(e,t){super(r=>this.throttledReport(r)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([ER(100,(e,t)=>WL(e,t),()=>Object.create(null))],xx.prototype,"throttledReport",null);var VL=class JE{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(z.MainThreadQuickDiff)}$provideOriginalResource(t,r,i){const s=y.revive(r),n=this.c.get(t);return n?zt(()=>n.provideOriginalResource(s,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,r,i,s){const n=JE.a++;return this.c.set(n,r),this.b.$registerQuickDiffProvider(n,Ho.from(t,this.d),i,s),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function qL(e,t,r){const i=e.getProxy(z.MainThreadQuickOpen);class s{constructor(f,m){this.e=new Map,this.f=0,this.a=f,this.b=m}showQuickPick(f,m,w,x=Xe.None){this.c=void 0;const S=Promise.resolve(m),C=++this.f,D=i.$show(C,{title:w?.title,placeHolder:w?.placeHolder,matchOnDescription:w?.matchOnDescription,matchOnDetail:w?.matchOnDetail,ignoreFocusLost:w?.ignoreFocusOut,canPickMany:w?.canPickMany},x),M={},F=D.then(()=>M);return Promise.race([F,S]).then(B=>{if(B===M)return;const X=Tt(f,"quickPickItemTooltip");return S.then(J=>{const Z=[];for(let $e=0;$e<J.length;$e++){const de=J[$e];if(typeof de=="string")Z.push({label:de,handle:$e});else if(de.kind===Lc.Separator)Z.push({type:"separator",label:de.label});else{de.tooltip&&!X&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const Ze=de.iconPath?l(de.iconPath):void 0;Z.push({label:de.label,iconPath:Ze?.iconPath,iconClass:Ze?.iconClass,description:de.description,detail:de.detail,picked:de.picked,alwaysShow:de.alwaysShow,tooltip:X?Ee.fromStrict(de.tooltip):void 0,handle:$e})}}return w&&typeof w.onDidSelectItem=="function"&&(this.c=$e=>{w.onDidSelectItem(J[$e])}),i.$setItems(C,Z),D.then($e=>{if(typeof $e=="number")return J[$e];if(Array.isArray($e))return $e.map(de=>J[de])})})}).then(void 0,B=>{if(!Hs(B))return i.$setError(C,B),Promise.reject(B)})}$onItemSelected(f){this.c?.(f)}showInput(f,m=Xe.None){return this.d=f?.validateInput,i.$input(f,typeof this.d=="function",m).then(void 0,w=>{if(!Hs(w))return Promise.reject(w)})}async $validateInput(f){if(!this.d)return;const m=await this.d(f);if(!m||typeof m=="string")return m;let w;switch(m.severity){case No.Info:w=vt.Info;break;case No.Warning:w=vt.Warning;break;case No.Error:w=vt.Error;break;default:w=m.message?vt.Error:vt.Ignore;break}return{content:m.message,severity:w}}async showWorkspaceFolderPick(f,m=Xe.None){const w=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!w)return;const x=await this.a.getWorkspaceFolders2();if(x)return x.find(S=>S.uri.toString()===w.uri.toString())}createQuickPick(f){const m=new u(f,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(f){const m=new h(f,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(f,m){this.e.get(f)?._fireDidChangeValue(m)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,m){const w=this.e.get(f);w instanceof u&&w._fireDidChangeActive(m)}$onDidChangeSelection(f,m){const w=this.e.get(f);w instanceof u&&w._fireDidChangeSelection(m)}$onDidTriggerButton(f,m){this.e.get(f)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(f,m,w){const x=this.e.get(f);x instanceof u&&x._fireDidTriggerItemButton(m,w)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,m){this.x=f,this.y=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.n=[],this.o=new Map,this.p=new I,this.q=new I,this.r=new I,this.s=new I,this.u={id:this._id},this.v=!1,this.w=[this.r,this.s,this.p,this.q],this.onDidChangeValue=this.q.event,this.onDidAccept=this.p.event,this.onDidTriggerButton=this.r.event,this.onDidHide=this.s.event}get title(){return this.b}set title(f){this.b=f,this.z({title:f})}get step(){return this.c}set step(f){this.c=f,this.z({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.z({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.z({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.z({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.z({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.z({value:f})}get placeholder(){return this.m}set placeholder(f){this.m=f,this.z({placeholder:f})}get buttons(){return this.n}set buttons(f){const m=Tt(this.x,"quickInputButtonLocation");!m&&f.some(w=>w.location)&&console.warn(`Extension '${this.x.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`),this.n=f.slice(),this.o.clear(),f.forEach((w,x)=>{const S=w===Rc.Back?-1:x;this.o.set(S,w)}),this.z({buttons:f.map((w,x)=>({...l(w.iconPath),tooltip:w.tooltip,handle:w===Rc.Back?-1:x,location:m?w.location:void 0}))})}show(){this.e=!0,this.f=!0,this.z({visible:!0})}hide(){this.e=!1,this.z({visible:!1})}_fireDidAccept(){this.p.fire()}_fireDidChangeValue(f){this.l=f,this.q.fire(f)}_fireDidTriggerButton(f){const m=this.o.get(f);m&&this.r.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.s.fire())}dispose(){this.v||(this.v=!0,this._fireDidHide(),this.w=Ii(this.w),this.t&&(clearTimeout(this.t),this.t=void 0),this.y(),i.$dispose(this._id))}z(f){if(!this.v){for(const m of Object.keys(f)){const w=f[m];this.u[m]=w===void 0?null:w}"visible"in this.u?(this.t&&(clearTimeout(this.t),this.t=void 0),this.A()):this.e&&!this.t&&(this.t=setTimeout(()=>{this.t=void 0,this.A()},0))}}A(){i.$createOrUpdate(this.u),this.u={id:this._id}}}function o(p){if(p instanceof Qt)return{id:p.id};const f=c(p),m=a(p);return{dark:typeof f=="string"?y.file(f):f,light:typeof m=="string"?y.file(m):m}}function a(p){return typeof p=="object"&&"light"in p?p.light:p}function c(p){return typeof p=="object"&&"dark"in p?p.dark:p}function l(p){const f=o(p);let m,w;return"id"in f?w=Ft.asClassName(f):m=f,{iconPath:m,iconClass:w}}class u extends n{constructor(f,m){super(f,m),this.B=[],this.C=new Map,this.D=new Map,this.E=!1,this.F=!0,this.G=!0,this.H=!0,this.I=!1,this.J=[],this.K=new I,this.L=[],this.M=new I,this.N=new I,this.onDidChangeActive=this.K.event,this.onDidChangeSelection=this.M.event,this.onDidTriggerItemButton=this.N.event,this.w.push(this.K,this.M,this.N),this.z({type:"quickPick"})}get items(){return this.B}set items(f){this.B=f.slice(),this.C.clear(),this.D.clear(),f.forEach((x,S)=>{this.C.set(S,x),this.D.set(x,S)});const m=Tt(this.x,"quickPickItemTooltip"),w=[];for(let x=0;x<f.length;x++){const S=f[x];if(S.kind===Lc.Separator)w.push({type:"separator",label:S.label});else{S.tooltip&&!m&&console.warn(`Extension '${this.x.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`);const C=S.iconPath?l(S.iconPath):void 0;w.push({handle:x,label:S.label,iconPath:C?.iconPath,iconClass:C?.iconClass,description:S.description,detail:S.detail,picked:S.picked,alwaysShow:S.alwaysShow,tooltip:m?Ee.fromStrict(S.tooltip):void 0,buttons:S.buttons?.map((D,M)=>({...l(D.iconPath),tooltip:D.tooltip,handle:M}))})}}this.z({items:w})}get canSelectMany(){return this.E}set canSelectMany(f){this.E=f,this.z({canSelectMany:f})}get matchOnDescription(){return this.F}set matchOnDescription(f){this.F=f,this.z({matchOnDescription:f})}get matchOnDetail(){return this.G}set matchOnDetail(f){this.G=f,this.z({matchOnDetail:f})}get sortByLabel(){return this.H}set sortByLabel(f){this.H=f,this.z({sortByLabel:f})}get keepScrollPosition(){return this.I}set keepScrollPosition(f){this.I=f,this.z({keepScrollPosition:f})}get activeItems(){return this.J}set activeItems(f){this.J=f.filter(m=>this.D.has(m)),this.z({activeItems:this.J.map(m=>this.D.get(m))})}get selectedItems(){return this.L}set selectedItems(f){this.L=f.filter(m=>this.D.has(m)),this.z({selectedItems:this.L.map(m=>this.D.get(m))})}_fireDidChangeActive(f){const m=bt(f.map(w=>this.C.get(w)));this.J=m,this.K.fire(m)}_fireDidChangeSelection(f){const m=bt(f.map(w=>this.C.get(w)));this.L=m,this.M.fire(m)}_fireDidTriggerItemButton(f,m){const w=this.C.get(f);if(!w||!w.buttons||!w.buttons.length)return;const x=w.buttons[m];x&&this.N.fire({button:x,item:w})}}class h extends n{constructor(f,m){super(f,m),this.B=!1,this.z({type:"inputBox"})}get password(){return this.B}set password(f){this.B=f,this.z({password:f})}get prompt(){return this.C}set prompt(f){this.C=f,this.z({prompt:f})}get valueSelection(){return this.D}set valueSelection(f){this.D=f,this.z({valueSelection:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.z({validationMessage:f,severity:vt.Error}):this.z({validationMessage:f.message,severity:f.severity??vt.Error}):this.z({validationMessage:void 0,severity:vt.Ignore})}}return new s(t,r)}var Ex=new dr(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),bj=new dr(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),yj=new dr(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function GL(e,t,r=!1){const i=e||"",s=t||"",n=Ex.value.collator.compare(i,s);return Ex.value.collatorIsNumeric&&n===0&&i!==s?i<s?-1:1:n}function JL(e,t,r=!1){return r||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Sf(e,t,r=!1){const i=e.split(Br),s=t.split(Br),n=i.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return GL(i[l],s[l],r);if(a)return-1;if(c)return 1;const u=JL(i[l],s[l],r);if(u!==0)return u}}var g0;function kx(e){return e instanceof y}function QL(e,t){return e.scheme===V.file&&t.scheme===V.file&&ss?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function m0(e){if(e)return typeof e.iconPath=="string"?y.file(e.iconPath):y.isUri(e.iconPath)||Ft.isThemeIcon(e.iconPath)?e.iconPath:void 0}function da(e){if(e){if(y.isUri(e))return e;if(Ft.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function ZL(e){const t=e.references?.map(r=>({...r,icon:da(r.icon)}));return{...e,references:t}}function v0(e){return e?{...e,icon:da(e.icon)}:void 0}function w0(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const r=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,i=typeof t.iconPath=="string"?t.iconPath:y.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Sf(r,i)}function YL(e,t){let r=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(r=w0(e,t),r!==0)return r;if(e.light&&t.light)r=w0(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(r!==0)return r;if(e.dark&&t.dark)r=w0(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return r}function XL(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let r=0;r<e.arguments.length;r++){const i=e.arguments[r],s=t.arguments[r];if(i!==s&&!(kx(i)&&kx(s)&&QL(i,s)))return i<s?-1:1}return 0}function Sx(e,t){let r=Sf(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(r!==0)return r;if(e.command&&t.command)r=XL(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(r!==0)return r;if(e.decorations&&t.decorations)r=YL(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(r!==0)return r;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)r=Sf(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(r!==0)return r;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)r=Sf(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return r}function KL(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function eN(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?KL(e.arguments,t.arguments):e.arguments===t.arguments)}function tN(e,t){return Ci(e,t,eN)}var rN=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return T(this.l,"scmValidation"),this.h}set validateInput(e){if(T(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return T(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,r,i,s){this.l=e,this.m=i,this.n=s,this.d="",this.f=new I,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=r}showValidationMessage(e,t){T(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},iN=class QE{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,r,i,s,n,o,a){this.s=t,this.t=r,this.u=i,this.v=s,this.w=n,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new I,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new I,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=QE.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,r){const i=this.j.get(t);return i?zt(()=>this.t.executeCommand(i.command,...i.arguments||[],r)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(Sx),i=Y0(this.p,t,Sx).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const J=new we;h=this.t.converter.toInternal(c.command,J),this.k.set(l,J)}else this.j.set(l,c.command);const p=Tt(this.x,"scmMultiDiffEditor"),f=p?c.multiDiffEditorOriginalUri:void 0,m=p?c.multiFileDiffEditorModifiedUri:void 0,w=m0(c.decorations),x=c.decorations&&m0(c.decorations.light)||w,S=c.decorations&&m0(c.decorations.dark)||w,C=[x,S],D=c.decorations&&c.decorations.tooltip||"",M=c.decorations&&!!c.decorations.strikeThrough,F=c.decorations&&!!c.decorations.faded,B=c.contextValue||"";return{rawResource:[l,u,C,D,M,F,B,h,f,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=i.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=i.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},b0=class ZE{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let r;Tt(this.x,"quickDiffProvider")&&(r=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:r})}get historyProvider(){return T(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){T(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new we,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const r=v0(t?.currentHistoryItemRef),i=v0(t?.currentHistoryItemRemoteRef),s=v0(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,r,i,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(r=>{if(r.added.length===0&&r.modified.length===0&&r.removed.length===0)return;const i=r.added.map(o=>({...o,icon:da(o.icon)})),s=r.modified.map(o=>({...o,icon:da(o.icon)})),n=r.removed.map(o=>({...o,icon:da(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:i,modified:s,removed:n,silent:r.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new we,this.o=t;const r=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:r})}get actionButton(){return T(this.x,"scmActionButton"),this.q}set actionButton(t){if(T(this.x,"scmActionButton"),bg(this.q,t))return;this.q=t,this.p.value=new we;const r=t!==void 0?{command:{...this.y.converter.toInternal(t.command,this.p.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(i=>i.map(s=>this.y.converter.toInternal(s,this.p.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:r})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&tN(this.t,t))return;this.s.value=new we,this.t=t;const r=(t||[]).map(i=>this.y.converter.toInternal(i,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:r})}get selected(){return this.u}constructor(t,r,i,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new is,this.m=void 0,this.n=new is,this.o=void 0,this.p=new is,this.s=new is,this.t=void 0,this.u=!1,this.v=new I,this.onDidChangeSelection=this.v.event,this.w=ZE.d++,this.C=new Map,this.D=new Set,this.#e=i;const c=y.from({scheme:V.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new rN(t,r,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,r,i){const s=Tt(this.x,"scmMultiDiffEditor")&&i?.multiDiffEditorEnableViewChanges===!0,n=new iN(this.#e,this.y,this.w,t,r,s,this.x),o=lt.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],r=[];for(const[i,s]of this.C){s.dispose();const n=i.onDidUpdateResourceStates(()=>{this.D.add(i),this.eventuallyUpdateResourceStates()});lt.once(i.onDidDispose)(()=>{this.D.delete(i),n.dispose(),this.f.delete(i.handle),this.#e.$unregisterGroup(this.w,i.handle)}),t.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&r.push([i.handle,o]),this.f.set(i.handle,i)}this.#e.$registerGroups(this.w,t,r),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(r=>{const i=r._takeResourceStateSnapshot();i.length!==0&&t.push([r.handle,i])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([Wv(100)],b0.prototype,"eventuallyAddResourceGroups",null),__decorate([Wv(100)],b0.prototype,"eventuallyUpdateResourceStates",null);var y0=class{static{g0=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,r,i,s){this.m=r,this.n=i,this.o=s,this.h=new Map,this.j=new Li,this.k=new I,this.f=t.getProxy(z.MainThreadSCM),this.g=t.getProxy(z.MainThreadTelemetry),r.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,r,i,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,r,i,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=g0.d++,o=new b0(t,this.n,this.f,this.m,r,i,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const r=this.j.get(t.identifier),i=r&&r[r.length-1];return i&&i.inputBox}$provideOriginalResource(t,r,i){const s=y.revive(r);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):zt(()=>n.quickDiffProvider.provideOriginalResource(s,i)).then(o=>o||null)}$onInputBoxValueChange(t,r){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const i=this.h.get(t);return i&&i.inputBox.$onInputBoxValueChange(r),Promise.resolve(void 0)}$executeResourceCommand(t,r,i,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,r,i);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(r);return o?o.$executeResourceCommand(i,s):Promise.resolve(void 0)}$validateInput(t,r,i){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):zt(()=>s.inputBox.validateInput(r,i)).then(n=>{if(!n)return Promise.resolve(void 0);const o=Ee.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,r,i){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(r,i)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(r,i))?.map(o=>({...o,icon:da(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,r,i){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(r,i))?.map(o=>ZL(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,r,i,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(r,i,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};y0=g0=__decorate([__param(3,Ue)],y0);var sN=class YE{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(z.MainThreadShare)}async $provideShare(t,r,i){return await this.c.get(t)?.provideShare({selection:N.to(r.selection),resourceUri:y.revive(r.resourceUri)},i)??void 0}registerShareProvider(t,r){const i=YE.a++;return this.c.set(i,r),this.b.$registerShareProvider(i,Ho.from(t,this.d),r.id,r.label,r.priority),{dispose:()=>{this.b.$unregisterShareProvider(i),this.c.delete(i)}}}},nN=class XE{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(z.MainThreadSpeech)}async $createSpeechToTextSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new we,o=new ft;this.d.set(r,o);const a=await s.provideSpeechToTextSession(o.token,i?{language:i}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new we,o=new ft;this.d.set(r,o);const a=await s.provideTextToSpeechSession(o.token,i?{language:i}:void 0);a&&(this.f.set(r,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,r){this.f.get(t)?.synthesize(r)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,r){const i=this.c.get(t);if(!i)return;const s=new we,n=new ft;this.d.set(r,n);const o=await i.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(r,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,r,i){const s=XE.a++;return this.c.set(s,i),this.b.$registerProvider(s,r,{extension:t,displayName:t.value}),ae(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},oN=class qf{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new kc("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new kc("statusBarItem.warningForeground")]])}#e;#t;constructor(t,r,i,s,n,o=ys.Left,a){if(this.i=!1,this.k="",this.q=new we,this.#e=t,this.#t=r,n&&s){this.c=YI(s.identifier,n);const c=i.get(this.c);c&&(o=c.alignLeft?ys.Left:ys.Right,a=c.priority,this.j=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this.c=String(qf.a++);this.e=s,this.f=n,this.g=o,this.h=this.u(a)}u(t){if(us(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.m}get tooltip(){return this.l}get color(){return this.n}get backgroundColor(){return this.o}get command(){return this.r?.fromApi}get accessibilityInformation(){return this.t}set text(t){this.k=t,this.v()}set name(t){this.m=t,this.v()}set tooltip(t){this.l=t,this.v()}set color(t){this.n=t,this.v()}set backgroundColor(t){t&&!qf.b.has(t.id)&&(t=void 0),this.o=t,this.v()}set command(t){this.r?.fromApi!==t&&(this.p&&this.q.add(this.p),this.p=new we,typeof t=="string"?this.r={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.p)}:t?this.r={fromApi:t,internal:this.#t.toInternal(t,this.p)}:this.r=void 0,this.v())}set accessibilityInformation(t){this.t=t,this.v()}show(){this.j=!0,this.v()}hide(){clearTimeout(this.s),this.j=!1,this.#e.$disposeEntry(this.c)}v(){this.i||!this.j||(clearTimeout(this.s),this.s=setTimeout(()=>{this.s=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let r;this.m?r=this.m:r=d(2725,null,this.e.displayName||this.e.name);let i=this.n;this.o&&(i=qf.b.get(this.o.id));const s=Ee.fromStrict(this.l);this.#e.$setEntry(this.c,t,this.e?.identifier.value,r,this.k,s,this.r?.internal,i,this.o,this.g===ys.Left,this.h,this.t),this.q.clear()},0))}dispose(){this.hide(),this.i=!0}},aN=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",ys.Left,Number.MIN_VALUE),this.a.name=d(2726,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new De(()=>{const r=this.b.indexOf(t);r>=0&&(this.b.splice(r,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},cN=class{constructor(e,t){this.e=new Map,this.a=e.getProxy(z.MainThreadStatusBar),this.b=t,this.c=new aN(this)}$acceptStaticEntries(e){for(const t of e)this.e.set(t.entryId,t)}createStatusBarEntry(e,t,r,i){return new oN(this.a,this.b,this.e,e,t,r,i)}setStatusBarMessage(e,t){const r=this.c.setMessage(e);let i;return typeof t=="number"?i=setTimeout(()=>r.dispose(),t):typeof t<"u"&&t.then(()=>r.dispose(),()=>r.dispose()),new De(()=>{r.dispose(),clearTimeout(i)})}},lN=class extends he{constructor(e,t){super(),this.m=t,this.a=new I,this.b=new I,this.c=new I,this.f=new I,this.g=new I,this.h=new I,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeActiveTextEditor=this.g.event,this.onDidChangeVisibleTextEditors=this.h.event,this.j=e.getProxy(z.MainThreadTextEditors),this.B(this.m.onDidChangeVisibleTextEditors(r=>this.h.fire(r))),this.B(this.m.onDidChangeActiveTextEditor(r=>this.g.fire(r)))}getActiveTextEditor(){return this.m.activeEditor()}getVisibleTextEditors(e){const t=this.m.allEditors();return e?t:t.map(r=>r.value)}async showTextDocument(e,t,r){let i;typeof t=="number"?i={position:$t.from(t),preserveFocus:r}:typeof t=="object"?i={position:$t.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?N.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const s=await this.j.$tryShowTextDocument(e.uri,i),n=s&&this.m.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new oA(this.j,e,t).value}$acceptEditorPropertiesChanged(e,t){const r=this.m.getEditor(e);if(!r)throw new Error("unknown text editor");if(t.options&&r._acceptOptions(t.options),t.selections){const i=t.selections.selections.map(Xr.to);r._acceptSelections(i)}if(t.visibleRanges){const i=bt(t.visibleRanges.map(N.to));r._acceptVisibleRanges(i)}if(t.options&&this.b.fire({textEditor:r.value,options:{...t.options,lineNumbers:Wo.to(t.options.lineNumbers)}}),t.selections){const i=$o.fromValue(t.selections.source),s=t.selections.selections.map(Xr.to);this.a.fire({textEditor:r.value,selections:s,kind:i})}if(t.visibleRanges){const i=bt(t.visibleRanges.map(N.to));this.c.fire({textEditor:r.value,visibleRanges:i})}}$acceptEditorPositionData(e){for(const t in e){const r=this.m.getEditor(t);if(!r)throw new Error("Unknown text editor");const i=$t.to(e[t]);r.value.viewColumn!==i&&(r._acceptViewColumn(i),this.f.fire({textEditor:r.value,viewColumn:i}))}}getDiffInformation(e){return Promise.resolve(this.j.$getDiffInformation(e))}},x0=class{constructor(t){this.a=new Oh(Es.Dark),this.b=new I}get activeColorTheme(){return this.a}$onColorThemeChange(t){let r;switch(t){case"light":r=Es.Light;break;case"hcDark":r=Es.HighContrast;break;case"hcLight":r=Es.HighContrastLight;break;default:r=Es.Dark}this.a=new Oh(r),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};x0=__decorate([__param(0,Me)],x0);var kj=W("IExtHostTimeline"),uN=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(z.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(r,i)=>{if(r&&r.$mid===12)if(this.b.get(r.source)&&He.equals(i,this.b.get(r.source)?.extension)){const s=r.uri===void 0?void 0:y.revive(r.uri);return this.c.get(r.source)?.get($x(s))?.get(r.handle)}else return;return r}})}async $getTimeline(e,t,r,i){return this.b.get(e)?.provider.provideTimeline(y.revive(t),r,i)}registerTimelineProvider(e,t,r,i){const s=new we,n=this.d(t.id,i,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const p=n(c,l);return{...h,source:t.id,items:h.items.map(p)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},r)}d(e,t,r){return(i,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=$x(i);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,p;o.iconPath&&(a instanceof Qt?p={id:a.id,color:a.color}:y.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return yr.isMarkdownString(c.tooltip)?f=Ee.from(c.tooltip):Ce(c.tooltip)?f=c.tooltip:yr.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=Ee.from(c.detail)):Ce(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,r):void 0,icon:u,iconDark:h,themeIcon:p,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),ae(()=>{for(const i of this.c.values())i.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function $x(e){return e?.toString()}var hN={IconContribution:"base.contributions.icons"},Cx;(function(e){function t(r,i){let s=r.defaults;for(;Ft.isThemeIcon(s);){const n=fa.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(Cx||(Cx={}));var Ix;(function(e){function t(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function r(i){const s=n=>Ce(n)?n:void 0;if(i&&Array.isArray(i.src)&&i.src.every(n=>Ce(n.format)&&Ce(n.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(n=>({format:n.format,location:y.parse(n.location)}))}}e.fromJSONObject=r})(Ix||(Ix={}));var dN=class{constructor(){this.a=new I,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2378,null)},fontCharacter:{type:"string",description:d(2379,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${Ft.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,r,i){const s=this.b[e];if(s){if(r&&!s.description){s.description=r,this.d.properties[e].markdownDescription=`${r} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=r),this.a.fire()}return s}const n={id:e,description:r,defaults:t,deprecationMessage:i};this.b[e]=n;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),r&&(o.markdownDescription=`${r}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(r||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const r=this.f[e];return r||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;Ft.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.b).map(s=>this.b[s]);for(const s of i.filter(n=>!!n.description).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|${Ft.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(const s of i.filter(n=>!Ft.isThemeIcon(n.defaults)).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|`);return r.join(`
`)}},fa=new dN;Ht.add(hN.IconContribution,fa);function $f(e,t,r,i){return fa.registerIcon(e,t,r,i)}function fN(){const e=X$();for(const t in e){const r="\\"+e[t].toString(16);fa.registerIcon(t,{fontCharacter:r})}}fN();var Dx="vscode://schemas/icons",Px=Ht.as(Lu.JSONContribution);Px.registerSchema(Dx,fa.getIconSchema());var Ax=new eo(()=>Px.notifySchemaChanged(Dx),200);fa.onDidChange(()=>{Ax.isScheduled()||Ax.schedule()});var Sj=$f("widget-close",ie.close,d(2380,null)),$j=$f("goto-previous-location",ie.arrowUp,d(2381,null)),Cj=$f("goto-next-location",ie.arrowDown,d(2382,null)),Ij=Ft.modify(ie.sync,"spin"),Dj=Ft.modify(ie.loading,"spin"),Pj=d(4241,null),Aj=$f("default-view-icon",ie.window,d(4242,null)),Cf;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Cf||(Cf={}));var Tx;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(Tx||(Tx={}));var pN=class extends he{constructor(){super(...arguments),this.c=this.B(new I),this.onDidRegister=this.c.event,this.f=this.B(new I),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,r){const i=this.get(e.id);if(i)return i;const s=e;return s.openCommandActionDescriptor=r?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},Tk(this.g,t,[]).push(s),r?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const r=this.g.get(t),i=r?.indexOf(e);if(i!==-1){r?.splice(i,1),r.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(r=>r?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Ht.add(Cf.ViewContainersRegistry,new pN);var If;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(If||(If={}));function gN(e,t){const r=e.group??If.More,i=t.group??If.More;return r!==i?r.localeCompare(i):(e.order??5)-(t.order??5)}var mN=class extends he{constructor(){super(...arguments),this.c=this.B(new I),this.onViewsRegistered=this.c.event,this.f=this.B(new I),this.onViewsDeregistered=this.f.event,this.g=this.B(new I),this.onDidChangeContainer=this.g.event,this.h=this.B(new I),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new ow}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:r})=>this.r(t,r)),this.c.fire(e)}deregisterViews(e,t){const r=this.s(e,t);r.length&&this.f.fire({views:r,viewContainer:t})}moveViews(e,t){for(const r of this.m.keys())if(r!==t){const i=this.s(e,r);i.length&&(this.r(i,t),this.g.fire({views:i,from:r,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const r=(this.m.get(t)||[]).filter(i=>i.id===e)[0];if(r)return r}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),ae(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const r=new Map;for(const[i,s]of t)this.n.add(e,s),r.set(i,ae(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),r}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,r=>t.push(r)),t.sort(gN)}r(e,t){let r=this.m.get(t);r||(r=[],this.m.set(t,r),this.j.push(t));for(const i of e){if(this.getView(i.id)!==null)throw new Error(d(4243,null,i.id));r.push(i)}}s(e,t){const r=this.m.get(t);if(!r)return[];const i=[],s=[];for(const n of r)e.includes(n)?i.push(n):s.push(n);return i.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),i}};Ht.add(Cf.ViewsRegistry,new mN);var Tj=W("viewDescriptorService"),Rx;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(Rx||(Rx={}));var Lx;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Lx||(Lx={}));var Xi=class extends Error{constructor(e){super(d(4244,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},vN=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function Nx(e,t){if(Ce(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let r;return Array.isArray(e.highlights)&&(r=e.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),r=r.length?r:void 0),{label:e.label,highlights:r}}}var wN=class extends he{constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=new Map,this.b=new vN;function i(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>i(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>i(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,r){const i=this.createTreeView(e,{treeDataProvider:t},r);return{dispose:()=>i.dispose()}}createTreeView(e,t,r){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const i=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,r),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:i,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return T(r,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return T(r,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){Xs(h)&&T(r,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&am.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,p)=>a.reveal(h,p),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}$getChildren(e,t){const r=this.a.get(e);return r?r.getChildren(t):Promise.reject(new Xi(e))}async $handleDrop(e,t,r,i,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new Xi(e));const l=Ds.toDataTransfer(r,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,i,s)}async j(e,t,r,i,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(r,e,i);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,r,i){const s=this.a.get(e);if(!s)return Promise.reject(new Xi(e));const n=await this.j(new Ec,s,t,i,r);if(!(!n||i.isCancellationRequested))return Ds.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new Xi(e);return t.hasResolve}$resolve(e,t,r){const i=this.a.get(e);if(!i)throw new Xi(e);return i.resolveTreeItem(t,r)}$setExpanded(e,t,r){const i=this.a.get(e);if(!i)throw new Xi(e);i.setExpanded(t,r)}$setSelectionAndFocus(e,t,r){const i=this.a.get(e);if(!i)throw new Xi(e);i.setSelectionAndFocus(t,r)}$setVisible(e,t){const r=this.a.get(e);if(!r){if(!t)return;throw new Xi(e)}r.setVisible(t)}$changeCheckboxState(e,t){const r=this.a.get(e);if(!r)throw new Xi(e);r.setCheckboxState(t)}m(e,t,r){const i=this.B(new bN(e,t,this.f,this.g.converter,this.h,r));return this.a.set(e,i),i}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},bN=class J0 extends he{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!gt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,r,i,s,n,o){if(super(),this.I=t,this.J=i,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new I),this.onDidExpandElement=this.u.event,this.w=this.B(new I),this.onDidCollapseElement=this.w.event,this.y=this.B(new I),this.onDidChangeSelection=this.y.event,this.z=this.B(new I),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new I),this.onDidChangeVisibility=this.C.event,this.D=this.B(new I),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new I),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new ft,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=r.treeDataProvider,this.g=r.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=lt.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(p=>c=p),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const p=c;return a=null,this.$(h).then(()=>p())})),u&&this.J.$setMessage(this.I,Ee.fromStrict(this.O)??"")}))}async getChildren(t){const r=t?this.getExtensionElement(t):void 0;if(t&&!r)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let i=this.X(t);return i||(i=await this.Y(r)),i?i.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,r){r=r||{select:!0,focus:!1};const i=gt(r.select)?!0:r.select,s=gt(r.focus)?!1:r.focus,n=gt(r.expand)?!1:r.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:i,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Ed.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,r){const i=this.getExtensionElement(t);i&&(r?this.u.fire(Object.freeze({element:i})):this.w.fire(Object.freeze({element:i})))}setSelectionAndFocus(t,r){const i=!Ci(this.s,t);this.s=t;const s=this.t!==r;this.t=r,i&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const r=(await Promise.all(t.map(async i=>{const s=this.getExtensionElement(i.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:i.newState?mi.Checked:mi.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);r.forEach(i=>{i.treeItem.checkboxState=i.newState?mi.Checked:mi.Unchecked}),this.D.fire({items:r.map(i=>[i.extensionItem,i.newState])})}async handleDrag(t,r,i){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,r,i),r}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,r,i){const s=r?this.getExtensionElement(r):void 0;if(!(!s&&r||!this.g?.handleDrop))return zt(()=>this.g?.handleDrop?this.g.handleDrop(s,t,i):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,r){if(!this.f.resolveTreeItem)return;const i=this.j.get(t);if(i){const s=this.m.get(i);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,i,r)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(r=>r?this.S(r).then(i=>this.W(r,i[i.length-1]).then(s=>(i.push(s),i))):Promise.resolve([]))}U(t){const r=this.m.get(t);return r?Promise.resolve(r.parent?this.j.get(r.parent.item.handle):void 0):zt(()=>this.f.getParent(t))}W(t,r){const i=this.m.get(t);return i?Promise.resolve(i):zt(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,r,!0)).then(s=>this.getChildren(r?r.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let r;if(typeof t=="string"){const i=this.getExtensionElement(t);r=i?this.m.get(i):void 0}else r=t;return r&&r.children||void 0}return this.h}async Y(t){this.rb(t);const r=new ft(this.Z.token);try{const i=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(r.token.isCancellationRequested)return;const n=bt(s||[]),o=await Promise.all(bt(n).map(c=>this.f.getTreeItem(c)));if(r.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,i):null);return bt(a)}finally{r.dispose()}}$(t){if(t.some(i=>!i))return this.Z.dispose(!0),this.Z=new ft,this.tb(),this.J.$refresh(this.I);{const i=this.ab(t);if(i.length)return this.bb(i)}return Promise.resolve(void 0)}ab(t){const r=new Set,i=t.map(n=>this.m.get(n));for(const n of i)if(n&&!r.has(n.item.handle)){let o=n;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&r.add(n.item.handle)}const s=[];return r.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!r.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const r={};return Promise.all(t.map(i=>this.cb(i).then(s=>{s&&(r[i]=s.item)}))).then(()=>Object.keys(r).length?this.J.$refresh(this.I,r):void 0)}cb(t){const r=this.getExtensionElement(t);if(r){const i=this.m.get(r);if(i)return this.rb(r),zt(()=>this.f.getTreeItem(r)).then(s=>{if(s){const n=this.ib(r,s,i.parent);return this.pb(r,n,i,i.parent),i.dispose(),n}return null})}return Promise.resolve(null)}db(t,r,i){const s=this.ib(t,r,i);if(r.id&&this.j.has(s.item.handle))throw new Error(d(2729,null,r.id));return this.ob(t,s),this.qb(s,i),s}eb(t){return yr.isMarkdownString(t)?Ee.from(t):t}fb(t,r){return r?{...this.L.toInternal(r,t),originalId:r.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let r,i,s;return typeof t.checkboxState=="number"?r=t.checkboxState:(r=t.checkboxState.state,i=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:r===mi.Checked,tooltip:i,accessibilityInformation:s}}hb(t){if(!Sh.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,r,i){this.hb(r);const s=this.B(new we),n=this.kb(t,r,i),o=this.lb(r);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:Nx(r.label,this.N),description:r.description,resourceUri:r.resourceUri,tooltip:this.eb(r.tooltip),command:this.fb(s,r.command),contextValue:r.contextValue,icon:o,iconDark:this.mb(r)||o,themeIcon:this.jb(r),collapsibleState:gt(r.collapsibleState)?bn.None:r.collapsibleState,accessibilityInformation:r.accessibilityInformation,checkbox:this.gb(r)},extensionItem:r,parent:i,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof Qt?t.iconPath:void 0}kb(t,{id:r,label:i,resourceUri:s},n,o){if(r)return`${J0.b}/${r}`;const a=Nx(i,this.N),c=n?n.item.handle:J0.a;let l=a?a.label:s?ds(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let p,f=0;do{if(p=`${c}/${f}:${l}`,o||!this.j.has(p)||u===p)break;f++}while(f<=h.length);return p}lb(t){if(t.iconPath&&!(t.iconPath instanceof Qt))return typeof t.iconPath=="string"||y.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof Qt)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return y.isUri(t)?t:y.file(t)}ob(t,r){this.j.set(r.item.handle,t),this.m.set(t,r)}pb(t,r,i,s){this.j.delete(r.item.handle),this.m.delete(t),r.item.handle!==i.item.handle&&this.j.delete(i.item.handle),this.ob(t,r);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===i.item.handle)[0];o&&n.splice(n.indexOf(o),1,r)}qb(t,r){r?(r.children||(r.children=[]),r.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}r.children=void 0}}else this.tb()}sb(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(r.item.handle),r.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},yN=class KE{static{this.a=new Set([V.http,V.https])}constructor(t){this.c=new Map,this.b=t.getProxy(z.MainThreadUriOpeners)}registerExternalUriOpener(t,r,i,s){if(this.c.has(r))throw new Error(`Opener with id '${r}' already registered`);const n=s.schemes.find(o=>!KE.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(r,i),this.b.$registerUriOpener(r,s.schemes,t,s.label),ae(()=>{this.c.delete(r),this.b.$unregisterUriOpener(r)})}async $canOpenUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=y.revive(r);return s.canOpenExternalUri(n,i)}async $openUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(y.revive(r.resolvedUri),{sourceUri:y.revive(r.sourceUri)},i)}},xN=class ek{static{this.a=0}constructor(t){this.c=new nn,this.d=new Map,this.b=t.getProxy(z.MainThreadUrls)}registerUriHandler(t,r){const i=t.identifier;if(this.c.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const s=ek.a++;return this.c.add(i),this.d.set(s,r),this.b.$registerUriHandler(s,i,t.displayName||t.name),ae(()=>{this.c.delete(i),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,r){const i=this.d.get(t);if(!i)return Promise.resolve(void 0);try{i.handleUri(y.revive(r))}catch(s){fr(s)}return Promise.resolve(void 0)}async createAppUri(t){return y.revive(await this.b.$createAppUri(t))}},EN=class extends he{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,r,i){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new I),this.onDidDispose=this.#d.event,this.#h=this.B(new I),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#i=r,this.#r=i.viewType,this.#n=i.panelOptions,this.#o=i.viewColumn,this.#s=i.title,this.#l=i.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#i.dispose(),super.dispose())}get webview(){return this.c(),this.#i}get viewType(){return this.c(),this.#r}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,y.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:$t.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},kN=class tk extends he{static c(){return $r()}constructor(t,r,i){super(),this.j=r,this.m=i,this.g=new Map,this.h=new Map,this.f=t.getProxy(z.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,r,i,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:$t.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=la(t),l=tk.c();this.f.$createWebviewPanel(uf(t),l,r,{title:i,panelOptions:SN(n),webviewOptions:U8(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,r,i,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const r=Object.keys(t);r.sort((i,s)=>{const n=t[i],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const i of r){const s=this.getWebviewPanel(i);if(!s)continue;const n=t[i];s._updateViewState({active:n.active,visible:n.visible,viewColumn:$t.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,r,i){if(this.h.has(r))throw new Error(`Serializer for '${r}' already registered`);return this.h.set(r,{serializer:i,extension:t}),this.f.$registerSerializer(r,{serializeBuffersForPostMessage:la(t)}),new De(()=>{this.h.delete(r),this.f.$unregisterSerializer(r)})}async $deserializeWebviewPanel(t,r,i,s){const n=this.h.get(r);if(!n)throw new Error(`No serializer found for '${r}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,i.webviewOptions,a),l=this.createNewWebviewPanel(t,r,i.title,s,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(t,r,i,s,n,o,a){const c=new EN(t,this.f,o,{viewType:r,title:i,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function SN(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var $N=class extends he{#e;#t;#r;#i;#n;#s;#a;#o;#c;constructor(e,t,r,i,s,n){super(),this.#n=!1,this.#l=this.B(new I),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new I),this.onDidDispose=this.#u.event,this.#r=r,this.#a=i,this.#e=e,this.#t=t,this.#i=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#i.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#i}get viewType(){return this.#r}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Ed.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},CN=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(z.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,r,i){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:r,extension:e}),this.a.$registerWebviewViewProvider(uf(e),t,{retainContextWhenHidden:i?.retainContextWhenHidden,serializeBuffersForPostMessage:la(e)}),new De(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new $N(e,this.a,t,r,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:i},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},Rj=new H("debugType",void 0,{type:"string",description:d(5967,null)}),Lj=new H("debugConfigurationType",void 0,{type:"string",description:d(5968,null)}),Nj=new H("debugState","inactive",{type:"string",description:d(5969,null)}),IN="debugUx",Fj=new H(IN,"default",{type:"string",description:d(5970,null)}),Mj=new H("hasDebugged",!1,{type:"boolean",description:d(5971,null)}),Oj=new H("inDebugMode",!1,{type:"boolean",description:d(5972,null)}),Uj=new H("inDebugRepl",!1,{type:"boolean",description:d(5973,null)}),Hj=new H("breakpointWidgetVisible",!1,{type:"boolean",description:d(5974,null)}),jj=new H("inBreakpointWidget",!1,{type:"boolean",description:d(5975,null)}),_j=new H("breakpointsFocused",!0,{type:"boolean",description:d(5976,null)}),Bj=new H("watchExpressionsFocused",!0,{type:"boolean",description:d(5977,null)}),zj=new H("watchExpressionsExist",!1,{type:"boolean",description:d(5978,null)}),Wj=new H("variablesFocused",!0,{type:"boolean",description:d(5979,null)}),Vj=new H("expressionSelected",!1,{type:"boolean",description:d(5980,null)}),qj=new H("breakpointInputFocused",!1,{type:"boolean",description:d(5981,null)}),Gj=new H("callStackItemType",void 0,{type:"string",description:d(5982,null)}),Jj=new H("callStackSessionIsAttach",!1,{type:"boolean",description:d(5983,null)}),Qj=new H("callStackItemStopped",!1,{type:"boolean",description:d(5984,null)}),Zj=new H("callStackSessionHasOneThread",!1,{type:"boolean",description:d(5985,null)}),Yj=new H("watchItemType",void 0,{type:"string",description:d(5986,null)}),Xj=new H("canViewMemory",void 0,{type:"boolean",description:d(5987,null)}),Kj=new H("breakpointItemType",void 0,{type:"string",description:d(5988,null)}),e_=new H("breakpointItemBytes",void 0,{type:"boolean",description:d(5989,null)}),t_=new H("breakpointHasModes",!1,{type:"boolean",description:d(5990,null)}),r_=new H("breakpointSupportsCondition",!1,{type:"boolean",description:d(5991,null)}),i_=new H("loadedScriptsSupported",!1,{type:"boolean",description:d(5992,null)}),s_=new H("loadedScriptsItemType",void 0,{type:"string",description:d(5993,null)}),n_=new H("focusedSessionIsAttach",!1,{type:"boolean",description:d(5994,null)}),o_=new H("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(5995,null)}),a_=new H("stepBackSupported",!1,{type:"boolean",description:d(5996,null)}),c_=new H("restartFrameSupported",!1,{type:"boolean",description:d(5997,null)}),l_=new H("stackFrameSupportsRestart",!1,{type:"boolean",description:d(5998,null)}),u_=new H("jumpToCursorSupported",!1,{type:"boolean",description:d(5999,null)}),h_=new H("stepIntoTargetsSupported",!1,{type:"boolean",description:d(6e3,null)}),d_=new H("breakpointsExist",!1,{type:"boolean",description:d(6001,null)}),f_=new H("debuggersAvailable",!1,{type:"boolean",description:d(6002,null)}),p_=new H("debugExtensionAvailable",!0,{type:"boolean",description:d(6003,null)}),g_=new H("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(6004,null)}),m_=new H("debugSetVariableSupported",!1,{type:"boolean",description:d(6005,null)}),v_=new H("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(6006,null)}),w_=new H("debugSetExpressionSupported",!1,{type:"boolean",description:d(6007,null)}),b_=new H("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(6008,null)}),y_=new H("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(6009,null)}),x_=new H("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(6010,null)}),E_=new H("terminateDebuggeeSupported",!1,{type:"boolean",description:d(6011,null)}),k_=new H("suspendDebuggeeSupported",!1,{type:"boolean",description:d(6012,null)}),S_=new H("variableEvaluateNamePresent",!1,{type:"boolean",description:d(6013,null)}),$_=new H("variableIsReadonly",!1,{type:"boolean",description:d(6014,null)}),C_=new H("variableValue",!1,{type:"string",description:d(6015,null)}),I_=new H("variableType",!1,{type:"string",description:d(6016,null)}),D_=new H("variableInterfaces",!1,{type:"array",description:d(6017,null)}),P_=new H("variableName",!1,{type:"string",description:d(6018,null)}),A_=new H("variableLanguage",!1,{type:"string",description:d(6019,null)}),T_=new H("variableExtensionId",!1,{type:"string",description:d(6020,null)}),R_=new H("exceptionWidgetVisible",!1,{type:"boolean",description:d(6021,null)}),L_=new H("multiSessionRepl",!1,{type:"boolean",description:d(6022,null)}),N_=new H("multiSessionDebug",!1,{type:"boolean",description:d(6023,null)}),F_=new H("disassembleRequestSupported",!1,{type:"boolean",description:d(6024,null)}),M_=new H("disassemblyViewFocus",!1,{type:"boolean",description:d(6025,null)}),O_=new H("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(6026,null)}),U_=new H("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(6027,null)}),H_={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(6029,null)},Fx;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(Fx||(Fx={}));var Mx;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(Mx||(Mx={}));var Ox;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(Ox||(Ox={}));var Df;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Df||(Df={}));var Ux;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(Ux||(Ux={}));var j_=W("debugService"),Hx;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(Hx||(Hx={}));var jx;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(jx||(jx={}));var _x;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(_x||(_x={}));var Bx;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(Bx||(Bx={}));var zx;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:y.revive(t.iconPath.light),dark:y.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(zx||(zx={}));var DN=class rk{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(z.MainThreadCodeMapper)}async $mapCode(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Array.isArray(l)?l:[l],this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(Ct.from)})}},o={codeBlocks:r.codeBlocks.map(c=>({code:c.code,resource:y.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock})),conversation:r.conversation.map(c=>c.type==="request"?{type:"request",message:c.message}:{type:"response",message:c.message,result:c.result?Ps.to(c.result):void 0,references:c.references?.map(qo.to)})};return await s.provideMappedEdits(o,n,i)??null}registerMappedEditsProvider(t,r){const i=rk.a++;return this.b.$registerCodeMapperProvider(i),this.c.set(i,r),{dispose:()=>this.b.$unregisterCodeMapperProvider(i)}}};function PN(e){const t=e.get(Wt),r=e.get(no),i=e.get(Wd),s=e.get(Ls),n=e.get(zi),o=e.get(Vd),a=e.get(Wi),c=e.get(gu),l=e.get(Me),u=e.get(A1),h=e.get(R1),p=e.get(za),f=e.get(Ue),m=e.get(O1),w=e.get(Qd),x=e.get(p8),S=e.get(tv),C=e.get(yl),D=e.get(sv),M=e.get(q1),F=e.get(J1);l.set(K.ExtHostFileSystemInfo,r),l.set(K.ExtHostLogLevelServiceShape,p),l.set(K.ExtHostWorkspace,n),l.set(K.ExtHostConfiguration,a),l.set(K.ExtHostExtensionService,s),l.set(K.ExtHostStorage,u),l.set(K.ExtHostTunnelService,m),l.set(K.ExtHostWindow,x),l.set(K.ExtHostSecretState,S),l.set(K.ExtHostTelemetry,o),l.set(K.ExtHostEditorTabs,C),l.set(K.ExtHostManagedSockets,D),l.set(K.ExtHostAuthentication,M),l.set(K.ExtHostChatProvider,F);const B=l.set(K.ExtHostDecorations,e.get(C9)),X=l.set(K.ExtHostDocumentsAndEditors,e.get(oa)),J=l.set(K.ExtHostCommands,e.get(Tn)),Z=l.set(K.ExtHostTerminalService,e.get(ia)),$e=l.set(K.ExtHostTerminalShellIntegration,e.get(g8)),de=l.set(K.ExtHostDebugService,e.get(o8)),Ze=l.set(K.ExtHostSearch,e.get(f8)),tt=l.set(K.ExtHostTask,e.get(Z9)),G=l.set(K.ExtHostOutputService,e.get($9)),j=l.set(K.ExtHostLocalization,e.get(iv)),Q=l.set(K.ExtHostUrls,new xN(l)),_=l.set(K.ExtHostDocuments,new VR(l,X)),re=l.set(K.ExtHostDocumentContentProviders,new zR(l,X,f)),pe=l.set(K.ExtHostDocumentSaveParticipant,new WR(f,_,l.getProxy(z.MainThreadBulkEdits))),ne=l.set(K.ExtHostNotebook,new NL(l,J,X,_,i,Ze,f)),We=l.set(K.ExtHostNotebookDocuments,new ML(ne)),_e=l.set(K.ExtHostNotebookEditors,new f0(f,ne)),Et=l.set(K.ExtHostNotebookKernels,new p0(l,t,ne,J,f)),wt=l.set(K.ExtHostNotebookRenderers,new _L(l,ne)),Mt=l.set(K.ExtHostNotebookDocumentSaveParticipant,new FL(f,ne,l.getProxy(z.MainThreadBulkEdits))),Ke=l.set(K.ExtHostEditors,new lN(l,X)),Vt=l.set(K.ExtHostTreeViews,new wN(l.getProxy(z.MainThreadTreeViews),J,f)),es=l.set(K.ExtHostEditorInsets,new xR(l.getProxy(z.MainThreadEditorInsets),Ke,t.remote)),ki=l.set(K.ExtHostDiagnostics,new Vv(l,f,r,X)),Os=l.set(K.ExtHostLanguages,new hL(l,_,J.converter,c)),be=l.set(K.ExtHostLanguageFeatures,new cL(l,c,_,J,ki,f,w,o)),Si=l.set(K.ExtHostCodeMapper,new DN(l)),Oe=l.set(K.ExtHostFileSystem,new KR(l,be)),ni=l.set(K.ExtHostFileSystemEventService,new iL(l,f,X)),Tr=l.set(K.ExtHostQuickOpen,qL(l,n,J)),Rr=l.set(K.ExtHostSCM,new y0(l,J,_,f)),Hn=l.set(K.ExtHostQuickDiff,new VL(l,c)),jn=l.set(K.ExtHostShare,new sN(l,c)),wa=l.set(K.ExtHostComments,kR(l,J,_)),ba=l.set(K.ExtHostProgress,new zL(l.getProxy(z.MainThreadProgress))),ya=l.set(K.ExtHostLabelService,new nL(l)),_n=l.set(K.ExtHostTheming,new x0(l)),Bn=l.set(K.ExtHostTimeline,new uN(l,J)),qt=l.set(K.ExtHostWebviews,new RR(l,t.remote,n,f,w)),$i=l.set(K.ExtHostWebviewPanels,new kN(l,qt,n)),at=l.set(K.ExtHostCustomEditors,new UR(l,_,h,qt,$i)),Bt=l.set(K.ExtHostWebviewViews,new CN(l,qt)),ts=l.set(K.ExtHostTesting,e.get(sf)),Gf=l.set(K.ExtHostUriOpeners,new yN(l)),zn=l.set(K.ExtHostProfileContentHandlers,new BL(l));l.set(K.ExtHostInteractive,new sL(l,ne,X,J,f));const rs=l.set(K.ExtHostChatAgents2,new pR(l,f,J,_,F)),$=l.set(K.ExtHostChatVariables,new mR(l)),A=l.set(K.ExtHostLanguageModelTools,new uL(l)),L=l.set(K.ExtHostAiRelatedInformation,new oR(l)),se=l.set(K.ExtHostAiEmbeddingVector,new GR(l)),fe=l.set(K.ExtHostStatusBar,new cN(l,J.converter)),Dt=l.set(K.ExtHostSpeech,new nN(l)),Ae=l.set(K.ExtHostEmbeddings,new qR(l)),Gt=Object.values(K);l.assertRegistered(Gt);const ut=new Bv(l,X),Ot=new wR(l),hr=new t0(l,f),ct=new BR(l);return hR.register(J),function(E,ht,Xt){function U(v){return(b,k,ue)=>{const Be=v(kt=>{try{b.call(k,kt)}catch(xa){Zf(new Error(`[ExtensionListenerError] Extension '${E.identifier.value}' FAILED to handle event: ${xa.toString()}`,{cause:xa})),o.onExtensionError(E.identifier,xa)}});return ue?.push(Be),Be}}const Y=function(){let v=!E.isUnderDevelopment;function b(){v||(f.info(`Extension '${E.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function k(ue){if(Array.isArray(ue))ue.forEach(k);else if(typeof ue=="string")b();else{const Be=ue;typeof Be.scheme>"u"&&b(),typeof Be.exclusive=="boolean"&&T(E,"documentFiltersExclusive")}return ue}}(),Ye={getSession(v,b,k){return typeof k?.forceNewSession=="object"&&k.forceNewSession.learnMore&&T(E,"authLearnMore"),M.getSession(E,v,b,k)},getAccounts(v){return M.getAccounts(v)},async hasSession(v,b){return T(E,"authSession"),!!await M.getSession(E,v,b,{silent:!0})},get onDidChangeSessions(){return U(M.getExtensionScopedSessionsEvent(E.identifier.value))},registerAuthenticationProvider(v,b,k,ue){return M.registerAuthenticationProvider(v,b,k,ue)}},ot={registerCommand(v,b,k){return J.registerCommand(!0,v,b,k,void 0,E)},registerTextEditorCommand(v,b,k){return J.registerCommand(!0,v,(...ue)=>{const Be=Ke.getActiveTextEditor();if(!Be){f.warn("Cannot execute "+v+" because there is no active text editor.");return}return Be.edit(kt=>{b.apply(k,[Be,kt,...ue])}).then(kt=>{kt||f.warn("Edits from command "+v+" were not applied.")},kt=>{f.warn("An error occurred while running command "+v,kt)})},void 0,void 0,E)},registerDiffInformationCommand:(v,b,k)=>(T(E,"diffCommand"),J.registerCommand(!0,v,async(...ue)=>{const Be=X.activeEditor(!0);if(!Be){f.warn("Cannot execute "+v+" because there is no active text editor.");return}const kt=await Ke.getDiffInformation(Be.id);b.apply(k,[kt,...ue])},void 0,void 0,E)),executeCommand(v,...b){return J.executeCommand(v,...b)},getCommands(v=!1){return J.getCommands(v)}},Pt={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Ot.value},get shell(){return Z.getDefaultShell(!1)},get onDidChangeShell(){return U(Z.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return U(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return T(E,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return T(E,"telemetry"),U(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return U7(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return O7.validateSender(v),o.instantiateLogger(E,v,b)},openExternal(v,b){return x.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return Q.createAppUri(v);try{return await x.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(Ip(v,V.http)||Ip(v,V.https))return v;throw b}},get remoteName(){return Eg(t.remote.authority)},get remoteAuthority(){return T(E,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return U(f.onDidChangeLogLevel)},get appQuality(){return T(E,"resolvers"),t.quality},get appCommit(){return T(E,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(Pt);const Bl={createTestController(v,b,k){return ts.createTestController(E,v,b,k)},createTestObserver(){return T(E,"testObserver"),ts.createTestObserver()},runTests(v){return T(E,"testObserver"),ts.runTests(v)},registerTestFollowupProvider(v){return T(E,"testObserver"),ts.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return T(E,"testObserver"),U(ts.onResultsChanged)},get testResults(){return T(E,"testObserver"),ts.results}},oi=t.remote.isRemote?En.Workspace:En.UI,Us={getExtension(v,b){Tt(E,"extensionsAny")||(b=!1);const k=ht.mine.getExtensionDescription(v);if(k)return new dl(s,E.identifier,k,oi,!1);if(b){const ue=ht.all.getExtensionDescription(v);if(ue)return new dl(s,E.identifier,ue,oi,!0)}},get all(){const v=[];for(const b of ht.mine.getAllExtensionDescriptions())v.push(new dl(s,E.identifier,b,oi,!1));return v},get allAcrossExtensionHosts(){T(E,"extensionsAny");const v=new nn(ht.mine.getAllExtensionDescriptions().map(k=>k.identifier)),b=[];for(const k of ht.all.getAllExtensionDescriptions()){const ue=!v.has(k.identifier);b.push(new dl(s,E.identifier,k,oi,ue))}return b},get onDidChange(){return Tt(E,"extensionsAny")?U(lt.any(ht.mine.onDidChange,ht.all.onDidChange)):U(ht.mine.onDidChange)}},ik={createDiagnosticCollection(v){return ki.createDiagnosticCollection(E.identifier,v)},get onDidChangeDiagnostics(){return U(ki.onDidChangeDiagnostics)},getDiagnostics:v=>ki.getDiagnostics(v),getLanguages(){return Os.getLanguages()},setTextDocumentLanguage(v,b){return Os.changeLanguage(v.uri,b)},match(v,b){const k=r1.from(v);let ue;return $8(k)&&(ue=ne.notebookDocuments.find(Be=>Be.apiNotebook.getCells().find(kt=>kt.document===b))?.apiNotebook),S8(k,b.uri,b.languageId,!0,ue?.uri,ue?.notebookType)},registerCodeActionsProvider(v,b,k){return be.registerCodeActionProvider(E,Y(v),b,k)},registerDocumentPasteEditProvider(v,b,k){return T(E,"documentPaste"),be.registerDocumentPasteEditProvider(E,Y(v),b,k)},registerCodeLensProvider(v,b){return be.registerCodeLensProvider(E,Y(v),b)},registerDefinitionProvider(v,b){return be.registerDefinitionProvider(E,Y(v),b)},registerDeclarationProvider(v,b){return be.registerDeclarationProvider(E,Y(v),b)},registerImplementationProvider(v,b){return be.registerImplementationProvider(E,Y(v),b)},registerTypeDefinitionProvider(v,b){return be.registerTypeDefinitionProvider(E,Y(v),b)},registerHoverProvider(v,b){return be.registerHoverProvider(E,Y(v),b,E.identifier)},registerEvaluatableExpressionProvider(v,b){return be.registerEvaluatableExpressionProvider(E,Y(v),b,E.identifier)},registerInlineValuesProvider(v,b){return be.registerInlineValuesProvider(E,Y(v),b,E.identifier)},registerDocumentHighlightProvider(v,b){return be.registerDocumentHighlightProvider(E,Y(v),b)},registerMultiDocumentHighlightProvider(v,b){return be.registerMultiDocumentHighlightProvider(E,Y(v),b)},registerLinkedEditingRangeProvider(v,b){return be.registerLinkedEditingRangeProvider(E,Y(v),b)},registerReferenceProvider(v,b){return be.registerReferenceProvider(E,Y(v),b)},registerRenameProvider(v,b){return be.registerRenameProvider(E,Y(v),b)},registerNewSymbolNamesProvider(v,b){return T(E,"newSymbolNamesProvider"),be.registerNewSymbolNamesProvider(E,Y(v),b)},registerDocumentSymbolProvider(v,b,k){return be.registerDocumentSymbolProvider(E,Y(v),b,k)},registerWorkspaceSymbolProvider(v){return be.registerWorkspaceSymbolProvider(E,v)},registerDocumentFormattingEditProvider(v,b){return be.registerDocumentFormattingEditProvider(E,Y(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return be.registerDocumentRangeFormattingEditProvider(E,Y(v),b)},registerOnTypeFormattingEditProvider(v,b,k,...ue){return be.registerOnTypeFormattingEditProvider(E,Y(v),b,[k].concat(ue))},registerDocumentSemanticTokensProvider(v,b,k){return be.registerDocumentSemanticTokensProvider(E,Y(v),b,k)},registerDocumentRangeSemanticTokensProvider(v,b,k){return be.registerDocumentRangeSemanticTokensProvider(E,Y(v),b,k)},registerSignatureHelpProvider(v,b,k,...ue){return typeof k=="object"?be.registerSignatureHelpProvider(E,Y(v),b,k):be.registerSignatureHelpProvider(E,Y(v),b,typeof k>"u"?[]:[k,...ue])},registerCompletionItemProvider(v,b,...k){return be.registerCompletionItemProvider(E,Y(v),b,k)},registerInlineCompletionItemProvider(v,b,k){return b.handleDidShowCompletionItem&&T(E,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&T(E,"inlineCompletionsAdditions"),k&&T(E,"inlineCompletionsAdditions"),be.registerInlineCompletionsProvider(E,Y(v),b,k)},registerInlineEditProvider(v,b){return T(E,"inlineEdit"),be.registerInlineEditProvider(E,Y(v),b)},registerDocumentLinkProvider(v,b){return be.registerDocumentLinkProvider(E,Y(v),b)},registerColorProvider(v,b){return be.registerColorProvider(E,Y(v),b)},registerFoldingRangeProvider(v,b){return be.registerFoldingRangeProvider(E,Y(v),b)},registerSelectionRangeProvider(v,b){return be.registerSelectionRangeProvider(E,v,b)},registerCallHierarchyProvider(v,b){return be.registerCallHierarchyProvider(E,v,b)},registerTypeHierarchyProvider(v,b){return be.registerTypeHierarchyProvider(E,v,b)},setLanguageConfiguration:(v,b)=>be.setLanguageConfiguration(E,v,b),getTokenInformationAtPosition(v,b){return T(E,"tokenInformation"),Os.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return be.registerInlayHintsProvider(E,v,b)},createLanguageStatusItem(v,b){return Os.createLanguageStatusItem(E,v,b)},registerDocumentDropEditProvider(v,b,k){return be.registerDocumentOnDropEditProvider(E,v,b,Tt(E,"documentPaste")?k:void 0)}},sk={get activeTextEditor(){return Ke.getActiveTextEditor()},get visibleTextEditors(){return Ke.getVisibleTextEditors()},get activeTerminal(){return Z.activeTerminal},get terminals(){return Z.terminals},async showTextDocument(v,b,k){y.isUri(v)&&v.scheme===V.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",E,"A URI of 'vscode-remote' scheme requires an authority.");const ue=await(y.isUri(v)?Promise.resolve(Q0.openTextDocument(v)):Promise.resolve(v));return Ke.showTextDocument(ue,b,k)},createTextEditorDecorationType(v){return Ke.createTextEditorDecorationType(E,v)},onDidChangeActiveTextEditor(v,b,k){return U(Ke.onDidChangeActiveTextEditor)(v,b,k)},onDidChangeVisibleTextEditors(v,b,k){return U(Ke.onDidChangeVisibleTextEditors)(v,b,k)},onDidChangeTextEditorSelection(v,b,k){return U(Ke.onDidChangeTextEditorSelection)(v,b,k)},onDidChangeTextEditorOptions(v,b,k){return U(Ke.onDidChangeTextEditorOptions)(v,b,k)},onDidChangeTextEditorVisibleRanges(v,b,k){return U(Ke.onDidChangeTextEditorVisibleRanges)(v,b,k)},onDidChangeTextEditorViewColumn(v,b,k){return U(Ke.onDidChangeTextEditorViewColumn)(v,b,k)},onDidCloseTerminal(v,b,k){return U(Z.onDidCloseTerminal)(v,b,k)},onDidOpenTerminal(v,b,k){return U(Z.onDidOpenTerminal)(v,b,k)},onDidChangeActiveTerminal(v,b,k){return U(Z.onDidChangeActiveTerminal)(v,b,k)},onDidChangeTerminalDimensions(v,b,k){return T(E,"terminalDimensions"),U(Z.onDidChangeTerminalDimensions)(v,b,k)},onDidChangeTerminalState(v,b,k){return U(Z.onDidChangeTerminalState)(v,b,k)},onDidWriteTerminalData(v,b,k){return T(E,"terminalDataWriteEvent"),U(Z.onDidWriteTerminalData)(v,b,k)},onDidExecuteTerminalCommand(v,b,k){return T(E,"terminalExecuteCommandEvent"),U(Z.onDidExecuteTerminalCommand)(v,b,k)},onDidChangeTerminalShellIntegration(v,b,k){return U($e.onDidChangeTerminalShellIntegration)(v,b,k)},onDidStartTerminalShellExecution(v,b,k){return U($e.onDidStartTerminalShellExecution)(v,b,k)},onDidEndTerminalShellExecution(v,b,k){return U($e.onDidEndTerminalShellExecution)(v,b,k)},get state(){return x.getState()},onDidChangeWindowState(v,b,k){return U(x.onDidChangeWindowState)(v,b,k)},showInformationMessage(v,...b){return hr.showMessage(E,vt.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return hr.showMessage(E,vt.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return hr.showMessage(E,vt.Error,v,b[0],b.slice(1))},showQuickPick(v,b,k){return Tr.showQuickPick(E,v,b,k)},showWorkspaceFolderPick(v){return Tr.showWorkspaceFolderPick(v)},showInputBox(v,b){return Tr.showInput(v,b)},showOpenDialog(v){return ct.showOpenDialog(E,v)},showSaveDialog(v){return ct.showSaveDialog(v)},createStatusBarItem(v,b,k){let ue,Be,kt;return typeof v=="string"?(ue=v,Be=b,kt=k):(Be=v,kt=b),fe.createStatusBarEntry(E,ue,Be,kt)},setStatusBarMessage(v,b){return fe.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",E,"Use 'withProgress' instead."),ba.withProgress(E,{location:wn.SourceControl},(b,k)=>v({report(ue){}}))},withProgress(v,b){return ba.withProgress(E,v,b)},createOutputChannel(v,b){return G.createOutputChannel(v,b,E)},createWebviewPanel(v,b,k,ue){return $i.createWebviewPanel(E,v,b,k,ue)},createWebviewTextEditorInset(v,b,k,ue){return T(E,"editorInsets"),es.createWebviewEditorInset(v,b,k,ue,E)},createTerminal(v,b,k){return typeof v=="object"?"pty"in v?Z.createExtensionTerminal(v):Z.createTerminalFromOptions(v):Z.createTerminal(v,b,k)},registerTerminalLinkProvider(v){return Z.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return Z.registerProfileProvider(E,v,b)},registerTerminalQuickFixProvider(v,b){return T(E,"terminalQuickFixProvider"),Z.registerTerminalQuickFixProvider(v,E.identifier.value,b)},registerTreeDataProvider(v,b){return Vt.registerTreeDataProvider(v,b,E)},createTreeView(v,b){return Vt.createTreeView(v,b,E)},registerWebviewPanelSerializer:(v,b)=>$i.registerWebviewPanelSerializer(E,v,b),registerCustomEditorProvider:(v,b,k={})=>at.registerCustomEditorProvider(E,v,b,k),registerFileDecorationProvider(v){return B.registerFileDecorationProvider(v,E)},registerUriHandler(v){return Q.registerUriHandler(E,v)},createQuickPick(){return Tr.createQuickPick(E)},createInputBox(){return Tr.createInputBox(E)},get activeColorTheme(){return _n.activeColorTheme},onDidChangeActiveColorTheme(v,b,k){return U(_n.onDidChangeActiveColorTheme)(v,b,k)},registerWebviewViewProvider(v,b,k){return Bt.registerWebviewViewProvider(E,v,b,k?.webviewOptions)},get activeNotebookEditor(){return ne.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,k){return U(ne.onDidChangeActiveNotebookEditor)(v,b,k)},get visibleNotebookEditors(){return ne.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return U(ne.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,k){return U(_e.onDidChangeNotebookEditorSelection)(v,b,k)},onDidChangeNotebookEditorVisibleRanges(v,b,k){return U(_e.onDidChangeNotebookEditorVisibleRanges)(v,b,k)},showNotebookDocument(v,b){return ne.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,k){return T(E,"externalUriOpener"),Gf.registerExternalUriOpener(E.identifier,v,b,k)},registerProfileContentHandler(v,b){return T(E,"profileContentHandlers"),zn.registerProfileContentHandler(E,v,b)},registerQuickDiffProvider(v,b,k,ue){return T(E,"quickDiffProvider"),Hn.registerQuickDiffProvider(Y(v),b,k,ue)},get tabGroups(){return C.tabGroups},registerShareProvider(v,b){return T(E,"shareProvider"),jn.registerShareProvider(Y(v),b)}},Q0={get rootPath(){return w.report("workspace.rootPath",E,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new js("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new js("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new js("workspaceFile")},updateWorkspaceFolders:(v,b,...k)=>n.updateWorkspaceFolders(E,v,b||0,...k),onDidChangeWorkspaceFolders:function(v,b,k){return U(n.onDidChangeWorkspace)(v,b,k)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,k,ue)=>n.findFiles(v,b,k,E.identifier,ue),findFiles2:(v,b,k)=>(T(E,"findFiles2"),n.findFiles2(v,b,E.identifier,k)),findFiles2New:(v,b,k)=>(T(E,"findFiles2New"),n.findFiles2New(v,b,E.identifier,k)),findTextInFiles:(v,b,k,ue)=>{T(E,"findTextInFiles");let Be,kt;return typeof b=="object"?(Be=b,kt=k):(Be={},kt=b,ue=k),n.findTextInFiles(v,Be||{},kt,E.identifier,ue)},findTextInFilesNew:(v,b,k)=>(T(E,"findTextInFilesNew"),T(E,"textSearchProviderNew"),n.findTextInFilesNew(v,b,E.identifier,k)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return ut.applyWorkspaceEdit(v,E,b)},createFileSystemWatcher:(v,b,k,ue)=>{let Be;return b&&typeof b!="boolean"?(T(E,"createFileSystemWatcher"),Be={...b,correlate:!0}):Be={ignoreCreateEvents:!!b,ignoreChangeEvents:!!k,ignoreDeleteEvents:!!ue,correlate:!1},ni.createFileSystemWatcher(n,Xt,E,v,Be)},get textDocuments(){return _.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new js("textDocuments")},openTextDocument(v){let b;const k=v;if(typeof v=="string")b=Promise.resolve(y.file(v));else if(y.isUri(v))b=Promise.resolve(v);else if(!k||typeof k=="object")b=_.createDocumentData(k);else throw new Error("illegal argument - uriOrFileNameOrOptions");return b.then(ue=>(f.trace(`openTextDocument from ${E.identifier}`),ue.scheme===V.vscodeRemote&&!ue.authority&&w.report("workspace.openTextDocument",E,"A URI of 'vscode-remote' scheme requires an authority."),_.ensureDocumentData(ue).then(Be=>Be.document)))},onDidOpenTextDocument:(v,b,k)=>U(_.onDidAddDocument)(v,b,k),onDidCloseTextDocument:(v,b,k)=>U(_.onDidRemoveDocument)(v,b,k),onDidChangeTextDocument:(v,b,k)=>U(_.onDidChangeDocument)(v,b,k),onDidSaveTextDocument:(v,b,k)=>U(_.onDidSaveDocument)(v,b,k),onWillSaveTextDocument:(v,b,k)=>U(pe.getOnWillSaveTextDocumentEvent(E))(v,b,k),get notebookDocuments(){return ne.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let k;if(y.isUri(v))k=v,await ne.openNotebookDocument(v);else if(typeof v=="string")k=y.revive(await ne.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return ne.getNotebookDocument(k).apiNotebook},onDidSaveNotebookDocument(v,b,k){return U(We.onDidSaveNotebookDocument)(v,b,k)},onDidChangeNotebookDocument(v,b,k){return U(We.onDidChangeNotebookDocument)(v,b,k)},onWillSaveNotebookDocument(v,b,k){return U(Mt.getOnWillSaveNotebookDocumentEvent(E))(v,b,k)},get onDidOpenNotebookDocument(){return U(ne.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return U(ne.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,k,ue){return ne.registerNotebookSerializer(E,v,b,k,Tt(E,"notebookLiveShare")?ue:void 0)},onDidChangeConfiguration:(v,b,k)=>U(Xt.onDidChangeConfiguration)(v,b,k),getConfiguration(v,b){return b=arguments.length===1?void 0:b,Xt.getConfiguration(v,b,E)},registerTextDocumentContentProvider(v,b){return re.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",E,"Use the corresponding function on the 'tasks' namespace instead"),tt.registerTaskProvider(E,v,b)),registerFileSystemProvider(v,b,k){return aw(Oe.registerFileSystemProvider(E,v,b,k),i.addFileSystemProvider(v,b,k))},get fs(){return i.value},registerFileSearchProvider:(v,b)=>(T(E,"fileSearchProvider"),Ze.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(T(E,"textSearchProvider"),Ze.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(T(E,"aiTextSearchProvider"),T(E,"textSearchProvider"),Ze.registerAITextSearchProviderOld(v,b)),registerFileSearchProviderNew:(v,b)=>(T(E,"fileSearchProviderNew"),Ze.registerFileSearchProvider(v,b)),registerTextSearchProviderNew:(v,b)=>(T(E,"textSearchProviderNew"),Ze.registerTextSearchProvider(v,b)),registerAITextSearchProviderNew:(v,b)=>(T(E,"aiTextSearchProviderNew"),T(E,"textSearchProviderNew"),Ze.registerAITextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(T(E,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(T(E,"resolvers"),ya.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(T(E,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,k)=>U(ni.onDidCreateFile)(v,b,k),onDidDeleteFiles:(v,b,k)=>U(ni.onDidDeleteFile)(v,b,k),onDidRenameFiles:(v,b,k)=>U(ni.onDidRenameFile)(v,b,k),onWillCreateFiles:(v,b,k)=>U(ni.getOnWillCreateFileEvent(E))(v,b,k),onWillDeleteFiles:(v,b,k)=>U(ni.getOnWillDeleteFileEvent(E))(v,b,k),onWillRenameFiles:(v,b,k)=>U(ni.getOnWillRenameFileEvent(E))(v,b,k),openTunnel:v=>(T(E,"tunnels"),m.openTunnel(E,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return T(E,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,k)=>(T(E,"tunnels"),U(m.onDidChangeTunnels)(v,b,k)),registerPortAttributesProvider:(v,b)=>(T(E,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(T(E,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(T(E,"timeline"),Bn.registerTimelineProvider(v,b,E.identifier,J.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(T(E,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,k)=>U(n.onDidGrantWorkspaceTrust)(v,b,k),registerEditSessionIdentityProvider:(v,b)=>(T(E,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,k)=>(T(E,"editSessionIdentityProvider"),U(n.getOnWillCreateEditSessionIdentityEvent(E))(v,b,k)),registerCanonicalUriProvider:(v,b)=>(T(E,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,k)=>(T(E,"canonicalUriProvider"),n.provideCanonicalUri(v,b,k))},nk={get inputBox(){return w.report("scm.inputBox",E,"Use 'SourceControl.inputBox' instead"),Rr.getLastInputBox(E)},createSourceControl(v,b,k){return Rr.createSourceControl(E,v,b,k)}},ok={createCommentController(v,b){return wa.createCommentController(E,v,b)}},ak={get activeDebugSession(){return de.activeDebugSession},get activeDebugConsole(){return de.activeDebugConsole},get breakpoints(){return de.breakpoints},get activeStackItem(){return de.activeStackItem},registerDebugVisualizationProvider(v,b){return T(E,"debugVisualization"),de.registerDebugVisualizationProvider(E,v,b)},registerDebugVisualizationTreeProvider(v,b){return T(E,"debugVisualization"),de.registerDebugVisualizationTree(E,v,b)},onDidStartDebugSession(v,b,k){return U(de.onDidStartDebugSession)(v,b,k)},onDidTerminateDebugSession(v,b,k){return U(de.onDidTerminateDebugSession)(v,b,k)},onDidChangeActiveDebugSession(v,b,k){return U(de.onDidChangeActiveDebugSession)(v,b,k)},onDidReceiveDebugSessionCustomEvent(v,b,k){return U(de.onDidReceiveDebugSessionCustomEvent)(v,b,k)},onDidChangeBreakpoints(v,b,k){return U(de.onDidChangeBreakpoints)(v,b,k)},onDidChangeActiveStackItem(v,b,k){return U(de.onDidChangeActiveStackItem)(v,b,k)},registerDebugConfigurationProvider(v,b,k){return de.registerDebugConfigurationProvider(v,b,k||Df.Initial)},registerDebugAdapterDescriptorFactory(v,b){return de.registerDebugAdapterDescriptorFactory(E,v,b)},registerDebugAdapterTrackerFactory(v,b){return de.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,k){return!k||typeof k=="object"&&"configuration"in k?de.startDebugging(v,b,{parentSession:k}):de.startDebugging(v,b,k||{})},stopDebugging(v){return de.stopDebugging(v)},addBreakpoints(v){return de.addBreakpoints(v)},removeBreakpoints(v){return de.removeBreakpoints(v)},asDebugSourceUri(v,b){return de.asDebugSourceUri(v,b)}},ck={registerTaskProvider:(v,b)=>tt.registerTaskProvider(E,v,b),fetchTasks:v=>tt.fetchTasks(v),executeTask:v=>tt.executeTask(E,v),get taskExecutions(){return tt.taskExecutions},onDidStartTask:(v,b,k)=>U(tt.onDidStartTask)(v,b,k),onDidEndTask:(v,b,k)=>U(tt.onDidEndTask)(v,b,k),onDidStartTaskProcess:(v,b,k)=>U(tt.onDidStartTaskProcess)(v,b,k),onDidEndTaskProcess:(v,b,k)=>U(tt.onDidEndTaskProcess)(v,b,k)},lk={createNotebookController(v,b,k,ue,Be){return Et.createNotebookController(E,v,b,k,ue,Tt(E,"notebookMessaging")?Be:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>ne.registerNotebookCellStatusBarItemProvider(E,v,b),createRendererMessaging(v){return wt.createRendererMessaging(E,v)},createNotebookControllerDetectionTask(v){return T(E,"notebookKernelSource"),Et.createNotebookControllerDetectionTask(E,v)},registerKernelSourceActionProvider(v,b){return T(E,"notebookKernelSource"),Et.registerKernelSourceActionProvider(E,v,b)},onDidChangeNotebookCellExecutionState(v,b,k){return T(E,"notebookCellExecutionState"),U(Et.onDidChangeNotebookCellExecutionState)(v,b,k)}},uk={t(...v){if(typeof v[0]=="string"){const b=v.shift(),k=!v||typeof v[0]!="object"?v:v[0];return j.getMessage(E.identifier.value,{message:b,args:k})}return j.getMessage(E.identifier.value,v[0])},get bundle(){return j.getBundle(E.identifier.value)},get uri(){return j.getBundleUri(E.identifier.value)}},hk={transferActiveChat(v){return T(E,"interactive"),rs.transferActiveChat(v)}},dk={getRelatedInformation(v,b){return T(E,"aiRelatedInformation"),L.getRelatedInformation(E,v,b)},registerRelatedInformationProvider(v,b){return T(E,"aiRelatedInformation"),L.registerRelatedInformationProvider(E,v,b)},registerEmbeddingVectorProvider(v,b){return T(E,"aiRelatedInformation"),se.registerEmbeddingVectorProvider(E,v,b)}},fk={registerChatResponseProvider(v,b,k){return T(E,"chatProvider"),F.registerLanguageModel(E,v,b,k)},registerChatVariableResolver(v,b,k,ue,Be,kt,xa,mk){return T(E,"chatVariableResolver"),$.registerVariableResolver(E,v,b,k,ue,Be,kt,xa,mk?.id)},registerMappedEditsProvider(v,b){return T(E,"mappedEditsProvider"),be.registerMappedEditsProvider(E,v,b)},registerMappedEditsProvider2(v){return T(E,"mappedEditsProvider"),Si.registerMappedEditsProvider(E,v)},createChatParticipant(v,b){return rs.createChatAgent(E,v,b)},createDynamicChatParticipant(v,b,k){return T(E,"chatParticipantPrivate"),rs.createDynamicChatAgent(E,v,b,k)},registerChatParticipantDetectionProvider(v){return T(E,"chatParticipantAdditions"),rs.registerChatParticipantDetectionProvider(E,v)}},pk={selectChatModels:v=>F.selectLanguageModels(E,v??{}),onDidChangeChatModels:(v,b,k)=>F.onDidChangeProviders(v,b,k),registerChatModelProvider:(v,b,k)=>(T(E,"chatProvider"),F.registerLanguageModel(E,v,b,k)),get embeddingModels(){return T(E,"embeddings"),Ae.embeddingsModels},onDidChangeEmbeddingModels:(v,b,k)=>(T(E,"embeddings"),Ae.onDidChange(v,b,k)),registerEmbeddingsProvider(v,b){return T(E,"embeddings"),Ae.registerEmbeddingsProvider(E,v,b)},async computeEmbeddings(v,b,k){return T(E,"embeddings"),Ae.computeEmbeddings(v,b,k)},registerTool(v,b){return A.registerTool(E,v,b)},invokeTool(v,b,k){return A.invokeTool(v,b,k)},get tools(){return A.tools},fileIsIgnored(v,b){return F.fileIsIgnored(E,v,b)},registerIgnoredFileProvider(v){return F.registerIgnoredFileProvider(E,v)}},gk={registerSpeechProvider(v,b){return T(E,"speech"),Dt.registerProvider(E.identifier,v,b)}};return{version:t.version,ai:dk,authentication:Ye,commands:ot,comments:ok,chat:fk,debug:ak,env:Pt,extensions:Us,interactive:hk,l10n:uk,languages:ik,lm:pk,notebooks:lk,scm:nk,speech:gk,tasks:ck,tests:Bl,window:sk,workspace:Q0,Breakpoint:To,TerminalOutputAnchor:zg,ChatResultFeedbackKind:Uc,ChatVariableLevel:Tm,ChatCompletionItem:gD,CallHierarchyIncomingCall:m6,CallHierarchyItem:qg,CallHierarchyOutgoingCall:v6,CancellationError:ai,CancellationTokenSource:ft,CandidatePortSource:yp,CodeAction:fh,CodeActionKind:st,CodeActionTriggerKind:mc,CodeLens:ph,Color:Io,ColorInformation:yh,ColorPresentation:xh,ColorThemeKind:Es,CommentMode:fm,CommentState:pm,CommentThreadCollapsibleState:Dc,CommentThreadState:Pc,CommentThreadApplicability:Ac,CommentThreadFocus:Tc,CompletionItem:vh,CompletionItemKind:oe,CompletionItemTag:wc,CompletionList:ko,CompletionTriggerKind:Eo,ConfigurationTarget:Po,CustomExecution:om,DebugAdapterExecutable:Ph,DebugAdapterInlineImplementation:$c,DebugAdapterNamedPipeServer:Ah,DebugAdapterServer:Sc,DebugConfigurationProviderTriggerKind:Df,DebugConsoleMode:Mh,DebugVisualization:lD,DecorationRangeBehavior:mn,Diagnostic:ch,DiagnosticRelatedInformation:hc,DiagnosticSeverity:_t,DiagnosticTag:pn,Disposable:De,DocumentHighlight:hh,DocumentHighlightKind:dc,MultiDocumentHighlight:dh,DocumentLink:bh,DocumentSymbol:gc,EndOfLine:Zr,EnvironmentVariableMutatorType:yo,EvaluatableExpression:Th,InlineValueText:Rh,InlineValueVariableLookup:Lh,InlineValueEvaluatableExpression:Nh,InlineCompletionTriggerKind:Cc,EventEmitter:I,ExtensionKind:En,ExtensionMode:Mo,ExternalUriOpenerPriority:xm,FileChangeType:Ro,FileDecoration:vm,FileDecoration2:vm,FileSystemError:St,FileType:sn,FilePermission:lo,FoldingRange:dm,FoldingRangeKind:Oi,FunctionBreakpoint:xn,InlineCompletionItem:Xg,InlineCompletionList:Kg,Hover:lh,VerboseHover:uh,HoverVerbosityAction:Vg,IndentAction:Hv,Location:Dr,MarkdownString:yr,OverviewRulerLane:Z1,ParameterInformation:Gg,PortAutoForwardAction:km,Position:xe,ProcessExecution:Do,ProgressLocation:wn,QuickInputButtonLocation:mm,QuickInputButtons:Rc,Range:ve,RelativePattern:Ao,Selection:Mi,SelectionRange:vc,SemanticTokens:Lo,SemanticTokensBuilder:cD,SemanticTokensEdit:k6,SemanticTokensEdits:Fh,SemanticTokensLegend:gm,ShellExecution:vn,ShellQuoting:nm,SignatureHelp:Qg,SignatureHelpTriggerKind:Zg,SignatureInformation:Jg,SnippetString:fn,SourceBreakpoint:yn,StandardTokenType:ks,StatusBarAlignment:ys,SymbolInformation:pc,SymbolKind:qe,SymbolTag:fc,Task:kh,TaskGroup:xc,TaskPanelKind:sm,TaskRevealKind:im,TaskScope:xs,TerminalLink:XI,TerminalQuickFixTerminalCommand:eD,TerminalQuickFixOpener:KI,TerminalLocation:rm,TerminalProfile:tD,TerminalExitReason:tm,TerminalShellExecutionCommandLineConfidence:Eh,TextDocumentSaveReason:So,TextEdit:bs,SnippetTextEdit:Wg,TextEditorCursorStyle:yi,TextEditorLineNumbersStyle:Yr,TextEditorRevealType:wh,TextEditorSelectionChangeKind:$o,SyntaxTokenType:Co,TextDocumentChangeReason:yc,ThemeColor:kc,ThemeIcon:Qt,TreeItem:Sh,TreeItemCheckboxState:mi,TreeItemCollapsibleState:bn,TypeHierarchyItem:Sm,UIKind:Ia,Uri:y,ViewColumn:bc,WorkspaceEdit:dn,DocumentPasteTriggerKind:lm,DocumentDropEdit:cm,DocumentDropOrPasteEditKind:Ih,DocumentPasteEdit:sD,InlayHint:mh,InlayHintLabelPart:gh,InlayHintKind:Yg,RemoteAuthorityResolverError:bo,ResolvedAuthority:ZI,ManagedResolvedAuthority:oh,SourceControlInputBoxValidationType:em,ExtensionRuntime:zh,TimelineItem:bm,NotebookRange:Ui,NotebookCellKind:kn,NotebookCellExecutionState:Fo,NotebookCellData:Uh,NotebookData:S6,NotebookRendererScript:C6,NotebookCellStatusBarAlignment:jh,NotebookEditorRevealType:_h,NotebookCellOutput:Hh,NotebookCellOutputItem:$6,NotebookCellStatusBarItem:uD,NotebookControllerAffinity:wm,NotebookControllerAffinity2:Bh,NotebookEdit:ah,NotebookKernelSourceAction:hD,NotebookVariablesRequestKind:Nc,PortAttributes:fD,LinkedEditingRanges:dD,TestResultState:ym,TestRunRequest:Wh,TestMessage:Vh,TestMessageStackFrame:pD,TestTag:Fc,TestRunProfileKind:Oo,TextSearchCompleteMessageType:Ud,DataTransfer:Ec,DataTransferItem:$h,TestCoverageCount:qh,FileCoverage:Mc,FileCoverage2:Mc,StatementCoverage:I6,BranchCoverage:D6,DeclarationCoverage:P6,WorkspaceTrustState:Em,LanguageStatusSeverity:xo,QuickPickItemKind:Lc,InputBoxValidationSeverity:No,TabInputText:$m,TabInputTextDiff:Jh,TabInputTextMerge:A6,TabInputCustom:Cm,TabInputNotebook:Im,TabInputNotebookDiff:Dm,TabInputWebview:T6,TabInputTerminal:R6,TabInputInteractiveWindow:L6,TabInputChat:N6,TabInputTextMultiDiff:F6,TelemetryTrustedValue:I1,LogLevel:Re,EditSessionIdentityMatch:jv,InteractiveSessionVoteDirection:Pm,ChatCopyKind:Am,ChatEditingSessionActionOutcome:Oc,InteractiveEditorResponseFeedbackKind:Rm,DebugStackFrame:x6,DebugThread:E6,RelatedInformationType:Om,SpeechToTextStatus:Um,TextToSpeechStatus:Hm,PartialAcceptTriggerKind:gn,KeywordRecognitionStatus:jm,ChatResponseMarkdownPart:Qh,ChatResponseFileTreePart:Yh,ChatResponseAnchorPart:_c,ChatResponseProgressPart:Bc,ChatResponseProgressPart2:Xh,ChatResponseReferencePart:Hi,ChatResponseReferencePart2:Hi,ChatResponseCodeCitationPart:td,ChatResponseCodeblockUriPart:ed,ChatResponseWarningPart:zc,ChatResponseTextEditPart:Wc,ChatResponseMarkdownWithVulnerabilitiesPart:Hc,ChatResponseCommandButtonPart:Kh,ChatResponseDetectedParticipantPart:jc,ChatResponseConfirmationPart:Zh,ChatResponseMovePart:rd,ChatResponseReferencePartStatusKind:Lm,ChatRequestTurn:M6,ChatResponseTurn:O6,ChatLocation:Pr,ChatRequestEditorData:U6,ChatRequestNotebookData:H6,ChatReferenceBinaryData:j6,LanguageModelChatMessageRole:Nr,LanguageModelChatMessage:_6,LanguageModelToolResultPart:Nm,LanguageModelTextPart:Zt,LanguageModelToolCallPart:Vc,LanguageModelError:ji,LanguageModelToolResult:Fm,LanguageModelChatToolMode:Mm,LanguageModelPromptTsxPart:Uo,NewSymbolName:oD,NewSymbolNameTag:hm,NewSymbolNameTriggerKind:Ic,InlineEdit:mD,InlineEditTriggerKind:qc,ExcludeSettingOptions:Mr,TextSearchContextNew:v1,TextSearchMatchNew:As,TextSearchCompleteMessageTypeNew:Ud}}}var Pf,E0=class{constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),Kt("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();Kt("code/extHost/didWaitForConfig");const r=await this.h.getExtensionPathIndex();this.register(new AN(this.c,r,this.d,t,this.j)),this.register(this.f.createInstance(k0)),this.i.remote.isRemote&&this.register(this.f.createInstance(S0,r,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const r of t.nodeModuleName)this.a.set(r,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(r=>t.alternativeModuleName(r))}};E0=__decorate([__param(2,fu),__param(3,Wi),__param(4,Ls),__param(5,Wt),__param(6,Ue)],E0);var k0=class{static{Pf=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Pf.a.size){const r=qs(this.c(t.environment.appRoot.fsPath)),i="[a-z0-9_.-]",s=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${r}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const r=this.b.exec(this.c(t));if(!r)return;const[,i,s,n]=r,o=Pf.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),i+o+n}c(t){return t.replace(/\\/g,"/")}};k0=Pf=__decorate([__param(0,Wt)],k0);var AN=class{constructor(e,t,r,i,s){this.c=e,this.d=t,this.e=r,this.f=i,this.g=s,this.nodeModuleName="vscode",this.a=new Li}load(e,t){const r=this.d.findSubstr(t);if(r){let i=this.a.get(r.identifier);return i||(i=this.c(r,this.e,this.f),this.a.set(r.identifier,i)),i}if(!this.b){let i="";this.d.forEach((s,n)=>i+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${i}`),this.b=this.c(ZD,this.e,this.f)}return this.b}},S0=class{constructor(t,r,i){this.e=t,this.f=r,this.nodeModuleName=["open","opn"],this.d=i.getProxy(z.MainThreadTelemetry);const s=i.getProxy(z.MainThreadWindow);this.c=(n,o)=>{const a=y.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,r,i){const s=this.e.findSubstr(r);return s&&(this.a=s.identifier.value,this.h()),this.b=i(t),this.c}g(t,r){return this.i(),this.b(t,r)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};S0=__decorate([__param(2,Me)],S0);var $0=class{constructor(t,r){this.a=t.getProxy(z.MainThreadConsole),this.b=r.consoleForward.includeStack,this.c=r.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,r){const i=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){i.e(t,r,s,arguments)}})}e(t,r,i,s){this.a.$logExtensionHostMessage({type:"__$console",severity:r,arguments:RN(s,this.b)}),this.c&&this.f(t,i,s)}};$0=__decorate([__param(0,Me),__param(1,Wt)],$0);var TN=1e5;function RN(e,t){const r=[];if(e.length)for(let i=0;i<e.length;i++){let s=e[i];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}r.push(s)}if(t){const i=new Error().stack;i&&r.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=O$(r);return i.length>TN?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}var C0=class extends $0{constructor(t,r){super(t,r)}f(t,r,i){r.apply(console,i)}};C0=__decorate([__param(0,Me),__param(1,Wt)],C0);var LN=class extends E0{k(){}getModule(e,t){for(const r of this.b){const i=r(e);if(i){e=i;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},NN=class extends av{constructor(){super(...arguments),this.extensionRuntime=zh.Webworker}async vb(){this.h.createInstance(C0);const e=this.h.invokeFunction(PN);this.r=this.h.createInstance(LN,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Bb()}wb(e){return e.browser}async xb(e,t,r){t=t.with({path:FN(t.path,".js")});const i=e?.identifier.value;i&&performance.mark(`code/extHost/willFetchExtensionCode/${i}`);const s=y.revive(await this.C.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(i&&performance.mark(`code/extHost/didFetchExtensionCode/${i}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(f){throw console.error(i?`Loading code for extension ${i} failed: ${f.message}`:`Loading code failed: ${f.message}`),console.error(`${t.toString(!0)}${typeof f.line=="number"?` line ${f.line}`:""}${typeof f.column=="number"?` column ${f.column}`:""}`),console.error(f),f}e&&await this.w.initializeLocalizedMessages(e);const u={},h={exports:u},p=f=>{const m=this.r.getModule(f,t);if(m===void 0)throw new Error(`Cannot load module '${f}'`);return m};try{return r.codeLoadingStart(),i&&performance.mark(`code/extHost/willLoadExtensionCode/${i}`),l(h,u,p),h.exports!==u?h.exports:u}finally{i&&performance.mark(`code/extHost/didLoadExtensionCode/${i}`),r.codeLoadingStop()}}async $setRemoteEnvironment(e){}async Bb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await ui(10)}};function FN(e,t){return e.endsWith(t)?e:e+t}Ve(Ue,new Ti(Uv,[!0],!0)),Ve(Ls,NN,0),Ve(R1,L1,0);var Wx=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var Vx=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function qx(e){return/^(file|vscode-remote):/i.test(e)}var Gx=fetch.bind(self);function MN(e){self.fetch=async function(t,r){return t instanceof Request||qx(String(t))&&(t=(await e(y.parse(String(t)))).toString(!0)),Gx(t,r)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,r,i,s,n){(async()=>(qx(r.toString())&&(r=(await e(y.parse(r.toString()))).toString(!0)),super.open(t,r,i??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,r){if(/^file:/i.test(t.toString()))t=AS.uriToBrowserUri(y.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(p){return typeof p=="string"||p instanceof URL?String(p).replace(/^file:\/\//i,"vscode-file://vscode-app"):p}const u=fetch.bind(self);self.fetch=function(p,f){return p instanceof Request?u(p,f):u(l(p),f)},self.XMLHttpRequest=class extends XMLHttpRequest{open(p,f,m,w,x){return super.open(p,l(f),m??!0,w,x)}};const h=importScripts.bind(self);self.importScripts=(...p)=>{h(...p.map(l))},h(c)}.toString()}('${t}'))`;r=r||{},r.name=`${name} -> ${r.name||vr(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,r)}}else self.Worker=class extends zP{constructor(e,t){super(Vx,e,{name:vr(e.toString()),...t})}};var ON=new class{constructor(){this.pid=void 0}exit(e){Wx()}},UN=class{constructor(){const e=new MessageChannel,t=new I;let r=!1;Vx(e.port2,[e.port2]),e.port1.onmessage=i=>{const{data:s}=i;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=ke.wrap(new Uint8Array(s,0,s.byteLength));if(u3(n,2)){r=!0,Jx("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:i=>{if(!r){const s=i.buffer.buffer.slice(i.buffer.byteOffset,i.buffer.byteOffset+i.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function HN(e){return new Promise(t=>{const r=e.onMessage(i=>{r.dispose();const s=JSON.parse(i.toString());e.send(pw(0)),t({protocol:e,initData:s})});e.send(pw(1))})}var Jx=e=>Wx();function jN(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function _N(){Kt("code/extHost/willConnectToRenderer");const e=new UN;return{onmessage(t){jN(t)&&HN(e.protocol).then(r=>{Kt("code/extHost/didWaitForInitData");const i=new _P(r.protocol,r.initData,ON,null,t.data);MN(s=>i.asBrowserUri(s)),Jx=s=>i.terminate(s)})}}}var BN=_N();self.onmessage=e=>BN.onmessage(e.data);

//# sourceMappingURL=extensionHostWorkerMain.js.map
